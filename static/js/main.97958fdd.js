/*! For license information please see main.97958fdd.js.LICENSE.txt */
!function(){var e={998:function(e,t,n){"use strict";var r=n(458),i={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,a,o,u,s,c,l=!1;t||(t={}),n=t.debug||!1;try{if(o=r(),u=document.createRange(),s=document.getSelection(),(c=document.createElement("span")).textContent=e,c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),"undefined"===typeof r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var a=i[t.format]||i.default;window.clipboardData.setData(a,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(c),u.selectNodeContents(c),s.addRange(u),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");l=!0}catch(h){n&&console.error("unable to copy using execCommand: ",h),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),l=!0}catch(h){n&&console.error("unable to copy using clipboardData: ",h),n&&console.error("falling back to prompt"),a=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(a,e)}}finally{s&&("function"==typeof s.removeRange?s.removeRange(u):s.removeAllRanges()),c&&document.body.removeChild(c),o()}return l}},568:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.CopyToClipboard=void 0;var i=u(n(791)),a=u(n(998)),o=["text","onCopy","options","children"];function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(s,e);var t,n,r,u=p(s);function s(){var e;h(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(y(e=u.call.apply(u,[this].concat(n))),"onClick",(function(t){var n=e.props,r=n.text,o=n.onCopy,u=n.children,s=n.options,c=i.default.Children.only(u),l=(0,a.default)(r,s);o&&o(r,l),c&&c.props&&"function"===typeof c.props.onClick&&c.props.onClick(t)})),e}return t=s,(n=[{key:"render",value:function(){var e=this.props,t=(e.text,e.onCopy,e.options,e.children),n=l(e,o),r=i.default.Children.only(t);return i.default.cloneElement(r,c(c({},n),{},{onClick:this.onClick}))}}])&&f(t.prototype,n),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(i.default.PureComponent);t.CopyToClipboard=k,g(k,"defaultProps",{onCopy:void 0,options:void 0})},29:function(e,t,n){"use strict";var r=n(568).CopyToClipboard;r.CopyToClipboard=r,e.exports=r},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function q(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case b:return"Portal";case E:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function $(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,xe=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),be(e.stateNode,e.type,t))}}function Se(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ie)&&(Ne(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function qe(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ht(u):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,bt,xt,It,Et,St=!1,Tt=[],Ct=null,Nt=null,At=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){St=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==At&&jt(At)&&(At=null),Pt.forEach(Ut),Rt.forEach(Ut)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return qt(t,e)}if(0<Tt.length){qt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&qt(Ct,e),null!==Nt&&qt(Nt,e),null!==At&&qt(At,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var zt=_.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,zt.transition=a}}function Gt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,zt.transition=a}}function Ht(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=F({},cn,{view:0,detail:0}),fn=an(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},hn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),_n=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return In}var Sn=F({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Pn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Kn(e,t,n,r){Se(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){jr(e,0)}function Yn(e){if(H(_i(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(l){var $n;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Kn(t,Hn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Gr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Ir={};function Er(e){if(xr[e])return xr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Nr=Er("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),s(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Sr,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(qe.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[qr]){e[qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Vr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Xt(t)){case 1:var i=Kt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Sr:case Tr:case Cr:s=mn;break;case Nr:s=An;break;case"scroll":s=fn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Re(p,f))&&l.push(Kr(p,v,d)))),h)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==s?u:_i(s),d=null==c?u:_i(c),(u=new l(v,p+"leave",s,n,i)).target=h,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,s&&c)e:{for(f=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=f;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)f=Hr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Hr(l),f=Hr(f)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==h&&Qr(o,h,c,l,!0)}if("select"===(s=(u=r?_i(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Xn;else if(Wn(u))if(Jn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Kn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?_i(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,_r(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(m=Gr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=qn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=$t=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}jr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Re(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,yi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var bi=[],xi=-1;function Ii(e){return{current:e}}function Ei(e){0>xi||(e.current=bi[xi],bi[xi]=null,xi--)}function Si(e,t){xi++,bi[xi]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Ai=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ei(Ni),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Si(Ci,e),Si(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ci),Si(Ci,e)):Ei(Ni),Si(Ni,n)}var ji=null,Ui=!1,Vi=!1;function qi(e){null===ji?ji=[e]:ji.push(e)}function Bi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=kt;try{var n=ji;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),He(Ze,Bi),i}finally{kt=t,Vi=!1}}return null}var zi=_.ReactCurrentBatchConfig;function Wi(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ki=Ii(null),Gi=null,Hi=null,Qi=null;function Yi(){Qi=Hi=Gi=null}function Xi(e){var t=Ki.current;Ei(Ki),e._currentValue=t}function Ji(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function $i(e,t){Gi=e,Qi=Hi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Zi(e){var t=e._currentValue;if(Qi!==e)if(e={context:e,memoizedValue:t,next:null},null===Hi){if(null===Gi)throw Error(a(308));Hi=e,Gi.dependencies={lanes:0,firstContext:e}}else Hi=Hi.next=e;return t}var ea=null,ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function aa(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tc(e)?(null===(e=n.interleaved)?(t.next=t,null===ea?ea=[n]:ea.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function ua(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sa(e,t,n,r){var i=e.updateQueue;ta=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var h=i.baseState;for(o=0,l=c=s=null,u=a;;){var f=u.lane,d=u.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:ta=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[u]:f.push(u))}else d={eventTime:d,lane:f,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=h):l=l.next=d,o|=f;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(f=u).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(s=h),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ds|=o,e.lanes=o,e.memoizedState=h}}function ca(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var la=(new r.Component).refs;function ha(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fa={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Js(),i=$s(e),a=ia(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Zs(e,i,r))&&oa(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Js(),i=$s(e),a=ia(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Zs(e,i,r))&&oa(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Js(),r=$s(e),i=ia(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),aa(e,i),null!==(t=Zs(e,r,n))&&oa(t,e,r)}};function da(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function pa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Zi(a):(i=Ri(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=fa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function va(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fa.enqueueReplaceState(t,t.state,null)}function ya(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=la,na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Zi(a):(a=Ri(t)?Ai:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ha(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&fa.enqueueReplaceState(i,i.state,null),sa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var ma=[],ga=0,ka=null,_a=0,wa=[],ba=0,xa=null,Ia=1,Ea="";function Sa(e,t){ma[ga++]=_a,ma[ga++]=ka,ka=e,_a=t}function Ta(e,t,n){wa[ba++]=Ia,wa[ba++]=Ea,wa[ba++]=xa,xa=e;var r=Ia;e=Ea;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ia=1<<32-ot(t)+i|n<<i|r,Ea=a+e}else Ia=1<<a|n<<i|r,Ea=e}function Ca(e){null!==e.return&&(Sa(e,1),Ta(e,1,0))}function Na(e){for(;e===ka;)ka=ma[--ga],ma[ga]=null,_a=ma[--ga],ma[ga]=null;for(;e===xa;)xa=wa[--ba],wa[ba]=null,Ea=wa[--ba],wa[ba]=null,Ia=wa[--ba],wa[ba]=null}var Aa=null,Pa=null,Ra=!1,Da=null;function Oa(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function La(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Aa=e,Pa=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Aa=e,Pa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==xa?{id:Ia,overflow:Ea}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Aa=e,Pa=null,!0);default:return!1}}function Ma(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Fa(e){if(Ra){var t=Pa;if(t){var n=t;if(!La(e,t)){if(Ma(e))throw Error(a(418));t=ci(n.nextSibling);var r=Aa;t&&La(e,t)?Oa(r,n):(e.flags=-4097&e.flags|2,Ra=!1,Aa=e)}}else{if(Ma(e))throw Error(a(418));e.flags=-4097&e.flags|2,Ra=!1,Aa=e}}}function ja(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Aa=e}function Ua(e){if(e!==Aa)return!1;if(!Ra)return ja(e),Ra=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=Pa)){if(Ma(e)){for(e=Pa;e;)e=ci(e.nextSibling);throw Error(a(418))}for(;t;)Oa(e,t),t=ci(t.nextSibling)}if(ja(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Pa=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Pa=null}}else Pa=Aa?ci(e.stateNode.nextSibling):null;return!0}function Va(){Pa=Aa=null,Ra=!1}function qa(e){null===Da?Da=[e]:Da.push(e)}function Ba(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===la&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function za(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wa(e){return(0,e._init)(e._payload)}function Ka(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Wa(a)===t.type)?((r=i(t,n.props)).ref=Ba(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Ba(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Ba(e,null,t),n.return=e,n;case b:return(t=Fc(t,e.mode,n)).return=e,t;case R:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Oc(t,e.mode,n,null)).return=e,t;za(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case b:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);za(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);za(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,h=a,v=a=0,y=null;null!==h&&v<u.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,u[v],s);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,h=y}if(v===u.length)return n(i,h),Ra&&Sa(i,v),c;if(null===h){for(;v<u.length;v++)null!==(h=f(i,u[v],s))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return Ra&&Sa(i,v),c}for(h=r(i,h);v<u.length;v++)null!==(y=p(h,i,v,u[v],s))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),Ra&&Sa(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var h=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===h?l=k:h.sibling=k,h=k,v=m}if(g.done)return n(i,v),Ra&&Sa(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=f(i,g.value,c))&&(u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return Ra&&Sa(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),Ra&&Sa(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Wa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ba(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Oc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Dc(o.type,o.key,o.props,null,r.mode,s)).ref=Ba(r,a,o),s.return=r,r=s)}return u(r);case b:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);za(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ga=Ka(!0),Ha=Ka(!1),Qa={},Ya=Ii(Qa),Xa=Ii(Qa),Ja=Ii(Qa);function $a(e){if(e===Qa)throw Error(a(174));return e}function Za(e,t){switch(Si(Ja,t),Si(Xa,e),Si(Ya,Qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Ya),Si(Ya,t)}function eo(){Ei(Ya),Ei(Xa),Ei(Ja)}function to(e){$a(Ja.current);var t=$a(Ya.current),n=se(t,e.type);t!==n&&(Si(Xa,e),Si(Ya,n))}function no(e){Xa.current===e&&(Ei(Ya),Ei(Xa))}var ro=Ii(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var uo=_.ReactCurrentDispatcher,so=_.ReactCurrentBatchConfig,co=0,lo=null,ho=null,fo=null,po=!1,vo=!1,yo=0,mo=0;function go(){throw Error(a(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function _o(e,t,n,r,i,o){if(co=o,lo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uo.current=null===e||null===e.memoizedState?ru:iu,e=n(r,i),vo){o=0;do{if(vo=!1,yo=0,25<=o)throw Error(a(301));o+=1,fo=ho=null,t.updateQueue=null,uo.current=au,e=n(r,i)}while(vo)}if(uo.current=nu,t=null!==ho&&null!==ho.next,co=0,fo=ho=lo=null,po=!1,t)throw Error(a(300));return e}function wo(){var e=0!==yo;return yo=0,e}function bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===fo?lo.memoizedState=fo=e:fo=fo.next=e,fo}function xo(){if(null===ho){var e=lo.alternate;e=null!==e?e.memoizedState:null}else e=ho.next;var t=null===fo?lo.memoizedState:fo.next;if(null!==t)fo=t,ho=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ho=e).memoizedState,baseState:ho.baseState,baseQueue:ho.baseQueue,queue:ho.queue,next:null},null===fo?lo.memoizedState=fo=e:fo=fo.next=e}return fo}function Io(e,t){return"function"===typeof t?t(e):t}function Eo(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ho,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var h=l.lane;if((co&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=f,u=r):c=c.next=f,lo.lanes|=h,Ds|=h}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,lo.lanes|=o,Ds|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function To(){}function Co(e,t){var n=lo,r=xo(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Uo(Po.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==fo&&1&fo.memoizedState.tag){if(n.flags|=2048,Oo(9,Ao.bind(null,n,r,i,t),void 0,null),null===Ss)throw Error(a(349));0!==(30&co)||No(n,t,i)}return i}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ao(e,t,n,r){t.value=n,t.getSnapshot=r,Ro(t)&&Zs(e,1,-1)}function Po(e,t,n){return n((function(){Ro(t)&&Zs(e,1,-1)}))}function Ro(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Do(e){var t=bo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=Jo.bind(null,lo,e),[t.memoizedState,e]}function Oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Lo(){return xo().memoizedState}function Mo(e,t,n,r){var i=bo();lo.flags|=e,i.memoizedState=Oo(1|t,n,void 0,void 0===r?null:r)}function Fo(e,t,n,r){var i=xo();r=void 0===r?null:r;var a=void 0;if(null!==ho){var o=ho.memoizedState;if(a=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=Oo(t,n,a,r))}lo.flags|=e,i.memoizedState=Oo(1|t,n,a,r)}function jo(e,t){return Mo(8390656,8,e,t)}function Uo(e,t){return Fo(2048,8,e,t)}function Vo(e,t){return Fo(4,2,e,t)}function qo(e,t){return Fo(4,4,e,t)}function Bo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4,4,Bo.bind(null,t,e),n)}function Wo(){}function Ko(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Go(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),lo.lanes|=n,Ds|=n,e.baseState=!0),t)}function Qo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{kt=n,so.transition=r}}function Yo(){return xo().memoizedState}function Xo(e,t,n){var r=$s(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$o(e)?Zo(t,n):(eu(e,t,n),null!==(e=Zs(e,r,n=Js()))&&tu(e,t,r))}function Jo(e,t,n){var r=$s(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($o(e))Zo(t,i);else{eu(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o))return}catch(s){}null!==(e=Zs(e,r,n=Js()))&&tu(e,t,r)}}function $o(e){var t=e.alternate;return e===lo||null!==t&&t===lo}function Zo(e,t){vo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eu(e,t,n){tc(e)?(null===(e=t.interleaved)?(n.next=n,null===ea?ea=[t]:ea.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function tu(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var nu={readContext:Zi,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},ru={readContext:Zi,useCallback:function(e,t){return bo().memoizedState=[e,void 0===t?null:t],e},useContext:Zi,useEffect:jo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4194308,4,Bo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mo(4,2,e,t)},useMemo:function(e,t){var n=bo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Xo.bind(null,lo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bo().memoizedState=e},useState:Do,useDebugValue:Wo,useDeferredValue:function(e){return bo().memoizedState=e},useTransition:function(){var e=Do(!1),t=e[0];return e=Qo.bind(null,e[1]),bo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lo,i=bo();if(Ra){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ss)throw Error(a(349));0!==(30&co)||No(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,jo(Po.bind(null,r,o,e),[e]),r.flags|=2048,Oo(9,Ao.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=bo(),t=Ss.identifierPrefix;if(Ra){var n=Ea;t=":"+t+"R"+(n=(Ia&~(1<<32-ot(Ia)-1)).toString(32)+n),0<(n=yo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=mo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iu={readContext:Zi,useCallback:Ko,useContext:Zi,useEffect:Uo,useImperativeHandle:zo,useInsertionEffect:Vo,useLayoutEffect:qo,useMemo:Go,useReducer:Eo,useRef:Lo,useState:function(){return Eo(Io)},useDebugValue:Wo,useDeferredValue:function(e){return Ho(xo(),ho.memoizedState,e)},useTransition:function(){return[Eo(Io)[0],xo().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:Yo,unstable_isNewReconciler:!1},au={readContext:Zi,useCallback:Ko,useContext:Zi,useEffect:Uo,useImperativeHandle:zo,useInsertionEffect:Vo,useLayoutEffect:qo,useMemo:Go,useReducer:So,useRef:Lo,useState:function(){return So(Io)},useDebugValue:Wo,useDeferredValue:function(e){var t=xo();return null===ho?t.memoizedState=e:Ho(t,ho.memoizedState,e)},useTransition:function(){return[So(Io)[0],xo().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:Yo,unstable_isNewReconciler:!1};function ou(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function uu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var su,cu,lu,hu="function"===typeof WeakMap?WeakMap:Map;function fu(e,t,n){(n=ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qs||(qs=!0,Bs=r),uu(0,t)},n}function du(e,t,n){(n=ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uu(0,t),"function"!==typeof r&&(null===zs?zs=new Set([this]):zs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function pu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function vu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ia(-1,1)).tag=2,aa(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function mu(e,t){if(!Ra)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ku(e,t,n){var r=t.pendingProps;switch(Na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gu(t),null;case 1:case 17:return Ri(t.type)&&Di(),gu(t),null;case 3:return r=t.stateNode,eo(),Ei(Ni),Ei(Ci),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Da&&(ac(Da),Da=null))),gu(t),null;case 5:no(t);var i=$a(Ja.current);if(n=t.type,null!==e&&null!=t.stateNode)cu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return gu(t),null}if(e=$a(Ya.current),Ua(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[fi]=t,e[di]=r,su(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return gu(t),null;case 6:if(e&&null!=t.stateNode)lu(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=$a(Ja.current),$a(Ya.current),Ua(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=Aa))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return gu(t),null;case 13:if(Ei(ro),r=t.memoizedState,Ra&&null!==Pa&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Pa;r;)r=ci(r.nextSibling);return Va(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Ua(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[fi]=t}else Va(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return gu(t),null}return null!==Da&&(ac(Da),Da=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Ua(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Ps&&(Ps=3):pc())),null!==t.updateQueue&&(t.flags|=4),gu(t),null);case 4:return eo(),null===e&&Br(t.stateNode.containerInfo),gu(t),null;case 10:return Xi(t.type._context),gu(t),null;case 19:if(Ei(ro),null===(o=t.memoizedState))return gu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)mu(o,!1);else{if(0!==Ps||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=io(e))){for(t.flags|=128,mu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Us&&(t.flags|=128,r=!0,mu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),mu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Ra)return gu(t),null}else 2*Je()-o.renderingStartTime>Us&&1073741824!==n&&(t.flags|=128,r=!0,mu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ro.current,Si(ro,r?1&n|2:1&n),t):(gu(t),null);case 22:case 23:return lc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ns)&&(gu(t),6&t.subtreeFlags&&(t.flags|=8192)):gu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}su=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},cu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,$a(Ya.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var _u=_.ReactCurrentOwner,wu=!1;function bu(e,t,n,r){t.child=null===e?Ha(t,null,n,r):Ga(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return $i(t,i),r=_o(e,t,n,r,a,i),n=wo(),null===e||wu?(Ra&&n&&Ca(t),t.flags|=1,bu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Iu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Cu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(As,Ns),Ns|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(As,Ns),Ns|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(As,Ns),Ns|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(As,Ns),Ns|=r;return bu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cu(e,t,n,r,i){var a=Ri(n)?Ai:Ci.current;return a=Pi(t,a),$i(t,i),n=_o(e,t,n,r,a,i),r=wo(),null===e||wu?(Ra&&r&&Ca(t),t.flags|=1,bu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Nu(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if($i(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pa(t,n,r),ya(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Zi(c):c=Pi(t,c=Ri(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&va(t,o,r,c),ta=!1;var f=t.memoizedState;o.state=f,sa(t,r,o,i),s=t.memoizedState,u!==r||f!==s||Ni.current||ta?("function"===typeof l&&(ha(t,n,l,r),s=t.memoizedState),(u=ta||da(t,n,u,r,f,s,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Wi(t.type,u),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Zi(s):s=Pi(t,s=Ri(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==h||f!==s)&&va(t,o,r,s),ta=!1,f=t.memoizedState,o.state=f,sa(t,r,o,i);var p=t.memoizedState;u!==h||f!==p||Ni.current||ta?("function"===typeof d&&(ha(t,n,d,r),p=t.memoizedState),(c=ta||da(t,n,c,r,f,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wu(e,t,a);r=t.stateNode,_u.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ga(t,e.child,null,a),t.child=Ga(t,null,u,a)):bu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Pu(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Za(e,t.containerInfo)}function Ru(e,t,n,r,i){return Va(),qa(i),t.flags|=256,bu(e,t,n,r),t.child}var Du={dehydrated:null,treeContext:null,retryLane:0};function Ou(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lu(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Mu(e,t,n){var r,i=t.pendingProps,o=ro.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(ro,1&o),null===e)return Fa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Lc(o,i,0,null),e=Oc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Ou(n),t.memoizedState=Du,e):Fu(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,Vu(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Lc({mode:"visible",children:i.children},o,0,null),(u=Oc(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&Ga(t,e.child,null,n),t.child.memoizedState=Ou(n),t.memoizedState=Du,u);if(0===(1&t.mode))t=Vu(e,t,n,null);else if("$!"===r.data)t=Vu(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),wu||i){if(null!==(i=Ss)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Zs(e,i,-1))}pc(),t=Vu(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Pa=ci(r.nextSibling),Aa=t,Ra=!0,Da=null,null!==n&&(wa[ba++]=Ia,wa[ba++]=Ea,wa[ba++]=xa,Ia=n.id,Ea=n.overflow,xa=t),(t=Fu(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=Uu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ou(n):Lu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Du,i):(n=ju(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Uu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ou(n):Lu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Du,i):(n=ju(e,t,i.children,n),t.memoizedState=null,n)}function Fu(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ju(e,t,n,r){var i=e.child;return e=i.sibling,n=Rc(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Uu(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=Rc(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Rc(o,r):(r=Oc(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Vu(e,t,n,r){return null!==r&&qa(r),Ga(t,e.child,null,n),(e=Fu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ji(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bu(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qu(e,n,t);else if(19===e.tag)qu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ds|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ku(e,t){switch(Na(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ei(Ni),Ei(Ci),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ei(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Va()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(ro),null;case 4:return eo(),null;case 10:return Xi(t.type._context),null;case 22:case 23:return lc(),null;default:return null}}var Gu=!1,Hu=!1,Qu="function"===typeof WeakSet?WeakSet:Set,Yu=null;function Xu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function Ju(e,t,n){try{n()}catch(r){xc(e,t,r)}}var $u=!1;function Zu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Ju(t,n,a)}i=i.next}while(i!==r)}}function es(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ts(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ns(e){var t=e.alternate;null!==t&&(e.alternate=null,ns(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rs(e){return 5===e.tag||3===e.tag||4===e.tag}function is(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function as(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(as(e,t,n),e=e.sibling;null!==e;)as(e,t,n),e=e.sibling}function os(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(os(e,t,n),e=e.sibling;null!==e;)os(e,t,n),e=e.sibling}var us=null,ss=!1;function cs(e,t,n){for(n=n.child;null!==n;)ls(e,t,n),n=n.sibling}function ls(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Hu||Xu(n,t);case 6:var r=us,i=ss;us=null,cs(e,t,n),ss=i,null!==(us=r)&&(ss?(e=us,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):us.removeChild(n.stateNode));break;case 18:null!==us&&(ss?(e=us,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(us,n.stateNode));break;case 4:r=us,i=ss,us=n.stateNode.containerInfo,ss=!0,cs(e,t,n),us=r,ss=i;break;case 0:case 11:case 14:case 15:if(!Hu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&Ju(n,t,o),i=i.next}while(i!==r)}cs(e,t,n);break;case 1:if(!Hu&&(Xu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){xc(n,t,u)}cs(e,t,n);break;case 21:cs(e,t,n);break;case 22:1&n.mode?(Hu=(r=Hu)||null!==n.memoizedState,cs(e,t,n),Hu=r):cs(e,t,n);break;default:cs(e,t,n)}}function hs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qu),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function fs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:us=s.stateNode,ss=!1;break e;case 3:case 4:us=s.stateNode.containerInfo,ss=!0;break e}s=s.return}if(null===us)throw Error(a(160));ls(o,u,i),us=null,ss=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){xc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ds(t,e),t=t.sibling}function ds(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fs(t,e),ps(e),4&r){try{Zu(3,e,e.return),es(3,e)}catch(v){xc(e,e.return,v)}try{Zu(5,e,e.return)}catch(v){xc(e,e.return,v)}}break;case 1:fs(t,e),ps(e),512&r&&null!==n&&Xu(n,n.return);break;case 5:if(fs(t,e),ps(e),512&r&&null!==n&&Xu(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(v){xc(e,e.return,v)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var h=c[u],f=c[u+1];"style"===h?ye(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(s){case"input":$(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(v){xc(e,e.return,v)}}break;case 6:if(fs(t,e),ps(e),4&r){if(null===e.stateNode)throw Error(a(162));l=e.stateNode,h=e.memoizedProps;try{l.nodeValue=h}catch(v){xc(e,e.return,v)}}break;case 3:if(fs(t,e),ps(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(v){xc(e,e.return,v)}break;case 4:default:fs(t,e),ps(e);break;case 13:fs(t,e),ps(e),8192&(l=e.child).flags&&null!==l.memoizedState&&(null===l.alternate||null===l.alternate.memoizedState)&&(js=Je()),4&r&&hs(e);break;case 22:if(l=null!==n&&null!==n.memoizedState,1&e.mode?(Hu=(h=Hu)||l,fs(t,e),Hu=h):fs(t,e),ps(e),8192&r){h=null!==e.memoizedState;e:for(f=null,d=e;;){if(5===d.tag){if(null===f){f=d;try{i=d.stateNode,h?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=d.stateNode,u=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(v){xc(e,e.return,v)}}}else if(6===d.tag){if(null===f)try{d.stateNode.nodeValue=h?"":d.memoizedProps}catch(v){xc(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}if(h&&!l&&0!==(1&e.mode))for(Yu=e,e=e.child;null!==e;){for(l=Yu=e;null!==Yu;){switch(f=(h=Yu).child,h.tag){case 0:case 11:case 14:case 15:Zu(4,h,h.return);break;case 1:if(Xu(h,h.return),"function"===typeof(o=h.stateNode).componentWillUnmount){d=h,p=h.return;try{i=d,o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(v){xc(d,p,v)}}break;case 5:Xu(h,h.return);break;case 22:if(null!==h.memoizedState){gs(l);continue}}null!==f?(f.return=h,Yu=f):gs(l)}e=e.sibling}}break;case 19:fs(t,e),ps(e),4&r&&hs(e);case 21:}}function ps(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rs(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),os(e,is(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;as(e,is(e),o);break;default:throw Error(a(161))}}catch(u){xc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vs(e,t,n){Yu=e,ys(e,t,n)}function ys(e,t,n){for(var r=0!==(1&e.mode);null!==Yu;){var i=Yu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Gu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Hu;u=Gu;var c=Hu;if(Gu=o,(Hu=s)&&!c)for(Yu=i;null!==Yu;)s=(o=Yu).child,22===o.tag&&null!==o.memoizedState?ks(i):null!==s?(s.return=o,Yu=s):ks(i);for(;null!==a;)Yu=a,ys(a,t,n),a=a.sibling;Yu=i,Gu=u,Hu=c}ms(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Yu=a):ms(e)}}function ms(e){for(;null!==Yu;){var t=Yu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Hu||es(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Hu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Wi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ca(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ca(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Bt(f)}}}break;default:throw Error(a(163))}Hu||512&t.flags&&ts(t)}catch(d){xc(t,t.return,d)}}if(t===e){Yu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Yu=n;break}Yu=t.return}}function gs(e){for(;null!==Yu;){var t=Yu;if(t===e){Yu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Yu=n;break}Yu=t.return}}function ks(e){for(;null!==Yu;){var t=Yu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{es(4,t)}catch(s){xc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){xc(t,i,s)}}var a=t.return;try{ts(t)}catch(s){xc(t,a,s)}break;case 5:var o=t.return;try{ts(t)}catch(s){xc(t,o,s)}}}catch(s){xc(t,t.return,s)}if(t===e){Yu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Yu=u;break}Yu=t.return}}var _s,ws=Math.ceil,bs=_.ReactCurrentDispatcher,xs=_.ReactCurrentOwner,Is=_.ReactCurrentBatchConfig,Es=0,Ss=null,Ts=null,Cs=0,Ns=0,As=Ii(0),Ps=0,Rs=null,Ds=0,Os=0,Ls=0,Ms=null,Fs=null,js=0,Us=1/0,Vs=null,qs=!1,Bs=null,zs=null,Ws=!1,Ks=null,Gs=0,Hs=0,Qs=null,Ys=-1,Xs=0;function Js(){return 0!==(6&Es)?Je():-1!==Ys?Ys:Ys=Je()}function $s(e){return 0===(1&e.mode)?1:0!==(2&Es)&&0!==Cs?Cs&-Cs:null!==zi.transition?(0===Xs&&(Xs=vt()),Xs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function Zs(e,t,n){if(50<Hs)throw Hs=0,Qs=null,Error(a(185));var r=ec(e,t);return null===r?null:(mt(r,t,n),0!==(2&Es)&&r===Ss||(r===Ss&&(0===(2&Es)&&(Os|=t),4===Ps&&oc(r,Cs)),nc(r,n),1===t&&0===Es&&0===(1&e.mode)&&(Us=Je()+500,Ui&&Bi())),r)}function ec(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tc(e){return(null!==Ss||null!==ea)&&0!==(1&e.mode)&&0===(2&Es)}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ft(e,e===Ss?Cs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,qi(e)}(uc.bind(null,e)):qi(uc.bind(null,e)),oi((function(){0===Es&&Bi()})),n=null;else{switch(_t(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Ys=-1,Xs=0,0!==(6&Es))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ft(e,e===Ss?Cs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Es;Es|=2;var o=dc();for(Ss===e&&Cs===t||(Vs=null,Us=Je()+500,hc(e,t));;)try{mc();break}catch(s){fc(e,s)}Yi(),bs.current=o,Es=i,null!==Ts?t=0:(Ss=null,Cs=0,t=Ps)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ic(e,i))),1===t)throw n=Rs,hc(e,0),oc(e,r),nc(e,Je()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ic(e,o))),1===t))throw n=Rs,hc(e,0),oc(e,r),nc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,Fs,Vs);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=js+500-Je())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Js(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,Fs,Vs),t);break}_c(e,Fs,Vs);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ws(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,Fs,Vs),r);break}_c(e,Fs,Vs);break;default:throw Error(a(329))}}}return nc(e,Je()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Ms;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Fs,Fs=n,null!==t&&ac(t)),e}function ac(e){null===Fs?Fs=e:Fs.push.apply(Fs,e)}function oc(e,t){for(t&=~Ls,t&=~Os,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Es))throw Error(a(327));wc();var t=ft(e,0);if(0===(1&t))return nc(e,Je()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Rs,hc(e,0),oc(e,t),nc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Fs,Vs),nc(e,Je()),null}function sc(e,t){var n=Es;Es|=1;try{return e(t)}finally{0===(Es=n)&&(Us=Je()+500,Ui&&Bi())}}function cc(e){null!==Ks&&0===Ks.tag&&0===(6&Es)&&wc();var t=Es;Es|=1;var n=Is.transition,r=kt;try{if(Is.transition=null,kt=1,e)return e()}finally{kt=r,Is.transition=n,0===(6&(Es=t))&&Bi()}}function lc(){Ns=As.current,Ei(As)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ts)for(n=Ts.return;null!==n;){var r=n;switch(Na(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:eo(),Ei(Ni),Ei(Ci),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Ei(ro);break;case 10:Xi(r.type._context);break;case 22:case 23:lc()}n=n.return}if(Ss=e,Ts=e=Rc(e.current,null),Cs=Ns=t,Ps=0,Rs=null,Ls=Os=Ds=0,Fs=Ms=null,null!==ea){for(t=0;t<ea.length;t++)if(null!==(r=(n=ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ea=null}return e}function fc(e,t){for(;;){var n=Ts;try{if(Yi(),uo.current=nu,po){for(var r=lo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(co=0,fo=ho=lo=null,vo=!1,yo=0,xs.current=null,null===n||null===n.return){Ps=1,Rs=t,Ts=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Cs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=s,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=vu(u);if(null!==p){p.flags&=-257,yu(p,u,s,0,t),1&p.mode&&pu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){pu(o,l,t),pc();break e}c=Error(a(426))}else if(Ra&&1&s.mode){var m=vu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),yu(m,u,s,0,t),qa(c);break e}}o=c,4!==Ps&&(Ps=2),null===Ms?Ms=[o]:Ms.push(o),c=ou(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ua(s,fu(0,c,t));break e;case 1:o=c;var g=s.type,k=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===zs||!zs.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t,ua(s,du(s,o,t));break e}}s=s.return}while(null!==s)}kc(n)}catch(_){t=_,Ts===n&&null!==n&&(Ts=n=n.return);continue}break}}function dc(){var e=bs.current;return bs.current=nu,null===e?nu:e}function pc(){0!==Ps&&3!==Ps&&2!==Ps||(Ps=4),null===Ss||0===(268435455&Ds)&&0===(268435455&Os)||oc(Ss,Cs)}function vc(e,t){var n=Es;Es|=2;var r=dc();for(Ss===e&&Cs===t||(Vs=null,hc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(Yi(),Es=n,bs.current=r,null!==Ts)throw Error(a(261));return Ss=null,Cs=0,Ps}function yc(){for(;null!==Ts;)gc(Ts)}function mc(){for(;null!==Ts&&!Ye();)gc(Ts)}function gc(e){var t=_s(e.alternate,e,Ns);e.memoizedProps=e.pendingProps,null===t?kc(e):Ts=t,xs.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=ku(n,t,Ns)))return void(Ts=n)}else{if(null!==(n=Ku(n,t)))return n.flags&=32767,void(Ts=n);if(null===e)return Ps=6,void(Ts=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ts=t);Ts=t=e}while(null!==t);0===Ps&&(Ps=5)}function _c(e,t,n){var r=kt,i=Is.transition;try{Is.transition=null,kt=1,function(e,t,n,r){do{wc()}while(null!==Ks);if(0!==(6&Es))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ss&&(Ts=Ss=null,Cs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ws||(Ws=!0,Cc(tt,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Is.transition,Is.transition=null;var u=kt;kt=1;var s=Es;Es|=4,xs.current=null,function(e,t){if(ei=Wt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var u=0,s=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(s=u+i),f!==o||0!==r&&3!==f.nodeType||(c=u+r),3===f.nodeType&&(u+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++h===r&&(c=u),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Yu=t;null!==Yu;)if(e=(t=Yu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Yu=e;else for(;null!==Yu;){t=Yu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:Wi(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var _=t.stateNode.containerInfo;if(1===_.nodeType)_.textContent="";else if(9===_.nodeType){var w=_.body;null!=w&&(w.textContent="")}break;default:throw Error(a(163))}}catch(b){xc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Yu=e;break}Yu=t.return}v=$u,$u=!1}(e,n),ds(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,vs(n,e,i),Xe(),Es=s,kt=u,Is.transition=o}else e.current=n;if(Ws&&(Ws=!1,Ks=e,Gs=i),0===(o=e.pendingLanes)&&(zs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(qs)throw qs=!1,e=Bs,Bs=null,e;0!==(1&Gs)&&0!==e.tag&&wc(),0!==(1&(o=e.pendingLanes))?e===Qs?Hs++:(Hs=0,Qs=e):Hs=0,Bi()}(e,t,n,r)}finally{Is.transition=i,kt=r}return null}function wc(){if(null!==Ks){var e=_t(Gs),t=Is.transition,n=kt;try{if(Is.transition=null,kt=16>e?16:e,null===Ks)var r=!1;else{if(e=Ks,Ks=null,Gs=0,0!==(6&Es))throw Error(a(331));var i=Es;for(Es|=4,Yu=e.current;null!==Yu;){var o=Yu,u=o.child;if(0!==(16&Yu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Yu=l;null!==Yu;){var h=Yu;switch(h.tag){case 0:case 11:case 15:Zu(8,h,o)}var f=h.child;if(null!==f)f.return=h,Yu=f;else for(;null!==Yu;){var d=(h=Yu).sibling,p=h.return;if(ns(h),h===l){Yu=null;break}if(null!==d){d.return=p,Yu=d;break}Yu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Yu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Yu=u;else e:for(;null!==Yu;){if(0!==(2048&(o=Yu).flags))switch(o.tag){case 0:case 11:case 15:Zu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Yu=g;break e}Yu=o.return}}var k=e.current;for(Yu=k;null!==Yu;){var _=(u=Yu).child;if(0!==(2064&u.subtreeFlags)&&null!==_)_.return=u,Yu=_;else e:for(u=k;null!==Yu;){if(0!==(2048&(s=Yu).flags))try{switch(s.tag){case 0:case 11:case 15:es(9,s)}}catch(b){xc(s,s.return,b)}if(s===u){Yu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Yu=w;break e}Yu=s.return}}if(Es=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(b){}r=!0}return r}finally{kt=n,Is.transition=t}}return!1}function bc(e,t,n){aa(e,t=fu(0,t=ou(n,t),1)),t=Js(),null!==(e=ec(e,1))&&(mt(e,1,t),nc(e,t))}function xc(e,t,n){if(3===e.tag)bc(e,e,n);else for(;null!==t;){if(3===t.tag){bc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===zs||!zs.has(r))){aa(t,e=du(t,e=ou(n,e),1)),e=Js(),null!==(t=ec(t,1))&&(mt(t,1,e),nc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Js(),e.pingedLanes|=e.suspendedLanes&n,Ss===e&&(Cs&n)===n&&(4===Ps||3===Ps&&(130023424&Cs)===Cs&&500>Je()-js?hc(e,0):Ls|=n),nc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=Js();null!==(e=ec(e,t))&&(mt(e,t,n),nc(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ec(e,n)}function Cc(e,t){return He(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Nc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Oc(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=Ac(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Ac(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Ac(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Lc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case P:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ac(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Oc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={},e}function Mc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,a,o,u,s){return e=new jc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ac(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},na(a),e}function Vc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,u,s){return(e=Uc(n,r,!0,e,0,a,0,u,s)).context=qc(null),n=e.current,(a=ia(r=Js(),i=$s(n))).callback=void 0!==t&&null!==t?t:null,aa(n,a),e.current.lanes=i,mt(e,i,r),nc(e,r),e}function zc(e,t,n,r){var i=t.current,a=Js(),o=$s(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ia(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),aa(i,t),null!==(e=Zs(i,o,a))&&oa(e,i,o),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}_s=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Pu(t),Va();break;case 5:to(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:Za(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(Ki,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mu(e,t,n):(Si(ro,1&ro.current),null!==(e=Wu(e,t,n))?e.sibling:null);Si(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Wu(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,Ra&&0!==(1048576&t.flags)&&Ta(t,_a,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Pi(t,Ci.current);$i(t,n),i=_o(null,t,r,e,i,n);var o=wo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,na(t),i.updater=fa,t.stateNode=i,i._reactInternals=t,ya(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,Ra&&o&&Ca(t),bu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=Wi(r,e),i){case 0:t=Cu(null,t,r,e,n);break e;case 1:t=Nu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=Iu(null,t,r,Wi(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Nu(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 3:e:{if(Pu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ra(e,t),sa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ru(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Ru(e,t,r,n,i=Error(a(424)));break e}for(Pa=ci(t.stateNode.containerInfo.firstChild),Aa=t,Ra=!0,Da=null,n=Ha(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Va(),r===i){t=Wu(e,t,n);break e}bu(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Fa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),bu(e,t,u,n),t.child;case 6:return null===e&&Fa(t),null;case 13:return Mu(e,t,n);case 4:return Za(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ga(t,null,r,n):bu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 7:return bu(e,t,t.pendingProps,n),t.child;case 8:case 12:return bu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(Ki,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ia(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ji(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Ji(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}bu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,$i(t,n),r=r(i=Zi(i)),t.flags|=1,bu(e,t,r,n),t.child;case 14:return i=Wi(r=t.type,t.pendingProps),Iu(e,t,r,i=Wi(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,$i(t,n),pa(t,r,i),ya(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Hc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function Zc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Wc(o);u.call(e)}}zc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),cc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Wc(s);u.call(e)}}var s=Uc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),cc((function(){zc(t,s,n,r)})),s}(n,t,e,i,r);return Wc(o)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));zc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc((function(){zc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),nc(t,Je()),0===(6&Es)&&(Us=Je()+500,Bi()))}break;case 13:var r=Js();cc((function(){return Zs(e,1,r)})),Gc(e,1)}},bt=function(e){13===e.tag&&(Zs(e,134217728,Js()),Gc(e,134217728))},xt=function(e){if(13===e.tag){var t=Js(),n=$s(e);Zs(e,n,t),Gc(e,n)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},be=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),$(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=sc,Ne=cc;var el={usingClientEntryPoint:!1,Events:[ki,_i,wi,Se,Te,sc]},tl={findFiberByHostInstance:gi,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{it=rl.inject(nl),at=rl}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return Vc(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Hc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Hc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(cc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=sc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var _=k.prototype=new g;_.constructor=k,v(_,m.prototype),_.isPureReactComponent=!0;var w=Array.isArray,b=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)b.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.1.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,_(e),!v)if(null!==r(c))v=!0,D(b);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function b(e,n){v=!1,y&&(y=!1,g(S),S=-1),p=!0;var a=d;try{for(_(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var u=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?f.callback=u:f===r(c)&&i(c),_(n)}else i(c);f=r(c)}if(null!==f)var s=!0;else{var h=r(l);null!==h&&O(w,h.startTime-n),s=!1}return s}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,E=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(I=!1,E=null)}}else I=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,x=function(){R.postMessage(null)}}else x=function(){m(A,0)};function D(e){E=e,I||(I=!0,x())}function O(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(S),S=-1):y=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(b))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},458:function(e){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},990:function(e,t,n){var r={"./dummy-1.jpg":917,"./dummy-2.jpg":558,"./dummy-3.jpg":729,"./kakaopay.png":322,"./kv.jpeg":108,"./paper.jpeg":981,"./pencil.png":804};function i(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=a,e.exports=i,i.id=990},917:function(e,t,n){"use strict";e.exports=n.p+"static/media/dummy-1.a95c4474fa66a95160da.jpg"},558:function(e,t,n){"use strict";e.exports=n.p+"static/media/dummy-2.9d511b629936fbf17808.jpg"},729:function(e,t,n){"use strict";e.exports=n.p+"static/media/dummy-3.287078f8a9775f0aa2c3.jpg"},322:function(e,t,n){"use strict";e.exports=n.p+"static/media/kakaopay.6779b605870ee0eb8ab0.png"},108:function(e,t,n){"use strict";e.exports=n.p+"static/media/kv.2c4421139bb1aca7d9b4.jpeg"},981:function(e,t,n){"use strict";e.exports=n.p+"static/media/paper.620b111197d9d4a280f3.jpeg"},804:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAXAAAAFwBhyfMcAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAACXSURBVDiNzdI9CsJQEEXhzyI7CP5sxYXYuA4t3JO9XbS21ARBXILgAoRYJA9CiOElNh6YZuDcO8UwjBkyPLEZ6EpwQdmYbayc1gFrvBsBrxh5iiv2HSFZrBwaQ8iq3i+GyO2QpE+eo+iQy3qfjmkucRt79p/LCfIvcqF6316WY5sDu19kOLTkPObswAQP3HHCEWfVr0fxAbSiWClHz+v4AAAAAElFTkSuQmCC"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/yes-wedding/",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ur},SDK_VERSION:function(){return ta},_DEFAULT_ENTRY_NAME:function(){return Bi},_addComponent:function(){return Gi},_addOrOverwriteComponent:function(){return Hi},_apps:function(){return Wi},_clearComponents:function(){return Ji},_components:function(){return Ki},_getProvider:function(){return Yi},_registerComponent:function(){return Qi},_removeServiceInstance:function(){return Xi},deleteApp:function(){return aa},getApp:function(){return ra},getApps:function(){return ia},initializeApp:function(){return na},onLog:function(){return sa},registerVersion:function(){return ua},setLogLevel:function(){return ca}});var t=n(791),r=n(250),i="Kv_kv__5JmeM",a="Kv_kv__img__zfEeN",o="Kv_kv__img-wrap__wZ+Jl",u="Kv_kv__cont__-V1z-",s="Kv_kv__tit__8iPl2",c="Kv_kv__tit-and__ryNhW",l="Kv_kv__tit-sub__3cRdu",h="Kv_cont__Zf5-T",f="Kv_cont__thin__V0rtX",d="Kv_cont-wrap__78-7p",p="Kv_cont--place__HxWFA",v=n(184),y=function(e){return(0,v.jsxs)("section",{id:"kv",children:[(0,v.jsxs)("div",{className:i,children:[(0,v.jsx)("div",{className:o,children:(0,v.jsx)("img",{src:n(108),alt:"kv",className:a})}),(0,v.jsxs)("div",{className:u,children:[(0,v.jsxs)("div",{className:s,children:["\uc724\uc5ec\uc6c5 ",(0,v.jsx)("span",{className:c,children:"&"})," \uc720\uc740\uc194"]}),(0,v.jsx)("div",{className:l,children:"2022.00.00 Sat 12:00"})]})]}),(0,v.jsx)("div",{className:"section-flower",children:"\ud83d\udc90"}),(0,v.jsxs)("div",{className:d,children:[(0,v.jsxs)("div",{className:h,children:["\uc11c\ub85c\uac00 \ub9c8\uc8fc\ubcf4\uba70 \ub2e4\uc838\uc628 \uc0ac\ub791\uc744",(0,v.jsx)("br",{}),"\uc774\uc81c \ud568\uaed8 \ud55c \uacf3\uc744 \ubc14\ub77c\ubcf4\uba70",(0,v.jsx)("br",{}),"\uac78\uc5b4\uac08 \uc218 \uc788\ub294 \ud070 \uc0ac\ub791\uc73c\ub85c \ud0a4\uc6b0\uace0\uc790 \ud569\ub2c8\ub2e4.",(0,v.jsx)("br",{}),"\uc800\ud76c \ub450 \uc0ac\ub78c\uc774 \uc0ac\ub791\uc758 \uc774\ub984\uc73c\ub85c",(0,v.jsx)("br",{}),"\uc9c0\ucf1c\ub098\uac08 \uc218 \uc788\uac8c \uc55e\ub0a0\uc744",(0,v.jsx)("br",{}),"\ucd95\ubcf5\ud574 \uc8fc\uc2dc\uba74 \uac10\uc0ac\ud558\uaca0\uc2b5\ub2c8\ub2e4.",(0,v.jsx)("br",{})]}),(0,v.jsxs)("div",{className:h,children:[(0,v.jsxs)("div",{children:["\uc724\uc5ec\uc6c5 \uff65 \uc720\uc740\uc194",(0,v.jsx)("span",{className:f,children:"\uc758 \uc7a5\ub0a8"})," \uc5ec\uc6c5"]}),(0,v.jsxs)("div",{children:["\uc724\uc5ec\uc6c5 \uff65 \uc720\uc740\uc194",(0,v.jsx)("span",{className:f,children:"\uc758 \uc7a5\ub140"})," \uc740\uc194"]})]}),(0,v.jsxs)("div",{className:"".concat(h," ").concat(p),children:[(0,v.jsx)("div",{children:"2022.12.12 \ud1a0\uc694\uc77c \uc624\ud6c4 12\uc2dc 00\ubd84"}),(0,v.jsx)("div",{children:"\uc0c1\ub85d\uc544\ud2b8\ud640 \uadf8\ub79c\ub4dc\ubcfc\ub8f8\ud640"})]})]})]})};function m(e){if(Array.isArray(e))return e}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t){if(e){if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function _(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e,t){return m(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||k(e,t)||_()}var b=n(164),x={backdrop:"Modal_backdrop__1HSqd",modal:"Modal_modal__lLcOT",modal__btn:"Modal_modal__btn__jN-O2"},I=function(e){return(0,v.jsx)("div",{className:x.backdrop,onClick:e.onClose})},E=function(e){return(0,v.jsxs)("div",{className:x.modal,children:[(0,v.jsx)("button",{onClick:e.onClose,className:x.modal__btn,children:"\xd7"}),(0,v.jsx)("div",{className:x.content,children:e.children})]})},S=document.getElementById("overlays"),T=function(e){return(0,v.jsxs)(t.Fragment,{children:[b.createPortal((0,v.jsx)(I,{onClose:e.onClose}),S),b.createPortal((0,v.jsx)(E,{onClose:e.onClose,children:e.children}),S)]})};function C(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function N(e){return function(e){if(Array.isArray(e))return g(e)}(e)||C(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t,n){return t&&P(e.prototype,t),n&&P(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function D(e,t){return D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},D(e,t)}function O(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e,t){if(t&&("object"===F(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function V(e){var t=M();return function(){var n,r=L(e);if(t){var i=L(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return U(this,n)}}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var K=["children","className"],G=["className","tag","hasTrack","children"],H=["children","className"];function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Y="(prefers-reduced-motion: reduce)",X={CREATED:1,MOUNTED:2,IDLE:3,MOVING:4,SCROLLING:5,DRAGGING:6,DESTROYED:7};function J(e){e.length=0}function $(e,t,n){return Array.prototype.slice.call(e,t,n)}function Z(e){return e.bind.apply(e,[null].concat($(arguments,1)))}var ee=setTimeout,te=function(){};function ne(e){return requestAnimationFrame(e)}function re(e,t){return typeof t===e}function ie(e){return!ce(e)&&re("object",e)}var ae=Array.isArray,oe=Z(re,"function"),ue=Z(re,"string"),se=Z(re,"undefined");function ce(e){return null===e}function le(e){return e instanceof HTMLElement}function he(e){return ae(e)?e:[e]}function fe(e,t){he(e).forEach(t)}function de(e,t){return e.indexOf(t)>-1}function pe(e,t){return e.push.apply(e,he(t)),e}function ve(e,t,n){e&&fe(t,(function(t){t&&e.classList[n?"add":"remove"](t)}))}function ye(e,t){ve(e,ue(t)?t.split(" "):t,!0)}function me(e,t){fe(t,e.appendChild.bind(e))}function ge(e,t){fe(e,(function(e){var n=(t||e).parentNode;n&&n.insertBefore(e,t)}))}function ke(e,t){return le(e)&&(e.msMatchesSelector||e.matches).call(e,t)}function _e(e,t){var n=e?$(e.children):[];return t?n.filter((function(e){return ke(e,t)})):n}function we(e,t){return t?_e(e,t)[0]:e.firstElementChild}var be=Object.keys;function xe(e,t,n){if(e){var r=be(e);r=n?r.reverse():r;for(var i=0;i<r.length;i++){var a=r[i];if("__proto__"!==a&&!1===t(e[a],a))break}}return e}function Ie(e){return $(arguments,1).forEach((function(t){xe(t,(function(n,r){e[r]=t[r]}))})),e}function Ee(e){return $(arguments,1).forEach((function(t){xe(t,(function(t,n){ae(t)?e[n]=t.slice():ie(t)?e[n]=Ee({},ie(e[n])?e[n]:{},t):e[n]=t}))})),e}function Se(e,t){he(t||be(e)).forEach((function(t){delete e[t]}))}function Te(e,t){fe(e,(function(e){fe(t,(function(t){e&&e.removeAttribute(t)}))}))}function Ce(e,t,n){ie(t)?xe(t,(function(t,n){Ce(e,n,t)})):fe(e,(function(e){ce(n)||""===n?Te(e,t):e.setAttribute(t,String(n))}))}function Ne(e,t,n){var r=document.createElement(e);return t&&(ue(t)?ye(r,t):Ce(r,t)),n&&me(n,r),r}function Ae(e,t,n){if(se(n))return getComputedStyle(e)[t];ce(n)||(e.style[t]=""+n)}function Pe(e,t){Ae(e,"display",t)}function Re(e){e.setActive&&e.setActive()||e.focus({preventScroll:!0})}function De(e,t){return e.getAttribute(t)}function Oe(e,t){return e&&e.classList.contains(t)}function Le(e){return e.getBoundingClientRect()}function Me(e){fe(e,(function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}))}function Fe(e){return we((new DOMParser).parseFromString(e,"text/html").body)}function je(e,t){e.preventDefault(),t&&(e.stopPropagation(),e.stopImmediatePropagation())}function Ue(e,t){return e&&e.querySelector(t)}function Ve(e,t){return t?$(e.querySelectorAll(t)):[]}function qe(e,t){ve(e,t,!1)}function Be(e){return e.timeStamp}function ze(e){return ue(e)?e:e?e+"px":""}var We="splide",Ke="data-splide";function Ge(e,t){if(!e)throw new Error("[splide] "+(t||""))}var He=Math.min,Qe=Math.max,Ye=Math.floor,Xe=Math.ceil,Je=Math.abs;function $e(e,t,n){return Je(e-t)<n}function Ze(e,t,n,r){var i=He(t,n),a=Qe(t,n);return r?i<e&&e<a:i<=e&&e<=a}function et(e,t,n){var r=He(t,n),i=Qe(t,n);return He(Qe(r,e),i)}function tt(e){return+(e>0)-+(e<0)}function nt(e,t){return fe(t,(function(t){e=e.replace("%s",""+t)})),e}function rt(e){return e<10?"0"+e:""+e}var it={};function at(){var e=[];function t(e,t,n){fe(e,(function(e){e&&fe(t,(function(t){t.split(" ").forEach((function(t){var r=t.split(".");n(e,r[0],r[1])}))}))}))}return{bind:function(n,r,i,a){t(n,r,(function(t,n,r){var o="addEventListener"in t,u=o?t.removeEventListener.bind(t,n,i,a):t.removeListener.bind(t,i);o?t.addEventListener(n,i,a):t.addListener(i),e.push([t,n,r,i,u])}))},unbind:function(n,r,i){t(n,r,(function(t,n,r){e=e.filter((function(e){return!!(e[0]!==t||e[1]!==n||e[2]!==r||i&&e[3]!==i)||(e[4](),!1)}))}))},dispatch:function(e,t,n){var r;return"function"===typeof CustomEvent?r=new CustomEvent(t,{bubbles:true,detail:n}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,true,!1,n),e.dispatchEvent(r),r},destroy:function(){e.forEach((function(e){e[4]()})),J(e)}}}var ot="mounted",ut="ready",st="move",ct="moved",lt="shifted",ht="click",ft="active",dt="inactive",pt="visible",vt="hidden",yt="slide:keydown",mt="refresh",gt="updated",kt="resize",_t="resized",wt="drag",bt="dragging",xt="dragged",It="scroll",Et="scrolled",St="destroy",Tt="arrows:mounted",Ct="arrows:updated",Nt="pagination:mounted",At="pagination:updated",Pt="navigation:mounted",Rt="autoplay:play",Dt="autoplay:playing",Ot="autoplay:pause",Lt="lazyload:loaded";function Mt(e){var t=e?e.event.bus:document.createDocumentFragment(),n=at();return e&&e.event.on(St,n.destroy),Ie(n,{bus:t,on:function(e,r){n.bind(t,he(e).join(" "),(function(e){r.apply(r,ae(e.detail)?e.detail:[])}))},off:Z(n.unbind,t),emit:function(e){n.dispatch(t,e,$(arguments,1))}})}function Ft(e,t,n,r){var i,a,o=Date.now,u=0,s=!0,c=0;function l(){if(!s){if(u=e?He((o()-i)/e,1):1,n&&n(u),u>=1&&(t(),i=o(),r&&++c>=r))return h();ne(l)}}function h(){s=!0}function f(){a&&cancelAnimationFrame(a),u=0,a=0,s=!0}return{start:function(t){!t&&f(),i=o()-(t?u*e:0),s=!1,ne(l)},rewind:function(){i=o(),u=0,n&&n(u)},pause:h,cancel:f,set:function(t){e=t},isPaused:function(){return s}}}var jt="ArrowLeft",Ut="ArrowRight",Vt="ArrowUp",qt="ArrowDown",Bt="ttb",zt={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[Vt,Ut],ArrowRight:[qt,jt]};var Wt="role",Kt="tabindex",Gt="aria-controls",Ht="aria-current",Qt="aria-selected",Yt="aria-label",Xt="aria-labelledby",Jt="aria-hidden",$t="aria-orientation",Zt="aria-roledescription",en="aria-live",tn="aria-relevant",nn=[Wt,Kt,"disabled",Gt,Ht,Yt,Xt,Jt,$t,Zt],rn=We,an="splide__track",on="splide__list",un="splide__slide",sn=un+"--clone",cn="splide__arrows",ln="splide__arrow",hn=ln+"--prev",fn=ln+"--next",dn="splide__pagination",pn=dn+"__page",vn="splide__progress__bar",yn="splide__toggle",mn="is-active",gn="is-prev",kn="is-next",_n="is-visible",wn="is-loading",bn="is-focus-in",xn=[mn,_n,gn,kn,wn,bn],In={slide:un,clone:sn,arrows:cn,arrow:ln,prev:hn,next:fn,pagination:dn,page:pn,spinner:"splide__spinner"};var En="touchstart mousedown",Sn="touchmove mousemove",Tn="touchend touchcancel mouseup";var Cn="slide",Nn="loop",An="fade";function Pn(e,t,n,r){var i,a=Mt(e),o=a.on,u=a.emit,s=a.bind,c=e.Components,l=e.root,h=e.options,f=h.isNavigation,d=h.updateOnMove,p=h.i18n,v=h.pagination,y=h.slideFocus,m=c.Direction.resolve,g=De(r,"style"),k=De(r,Yt),_=n>-1,w=we(r,".splide__slide__container"),b=Ve(r,h.focusableNodes||"");function x(){var i=e.splides.map((function(e){var n=e.splide.Components.Slides.getAt(t);return n?n.slide.id:""})).join(" ");Ce(r,Yt,nt(p.slideX,(_?n:t)+1)),Ce(r,Gt,i),Ce(r,Wt,y?"button":""),y&&Te(r,Zt)}function I(){i||E()}function E(){if(!i){var n=e.index;!function(){var e=S();e!==Oe(r,mn)&&(ve(r,mn,e),Ce(r,Ht,f&&e||""),u(e?ft:dt,T))}(),function(){var t=function(){if(e.is(An))return S();var t=Le(c.Elements.track),n=Le(r),i=m("left"),a=m("right");return Ye(t[i])<=Xe(n[i])&&Ye(n[a])<=Xe(t[a])}(),n=!t&&(!S()||_);e.state.is([4,5])||Ce(r,Jt,n||"");Ce(b,Kt,n?-1:""),y&&Ce(r,Kt,n?-1:0);t!==Oe(r,_n)&&(ve(r,_n,t),u(t?pt:vt,T));if(!t&&document.activeElement===r){var i=c.Slides.getAt(e.index);i&&Re(i.slide)}}(),ve(r,gn,t===n-1),ve(r,kn,t===n+1)}}function S(){var r=e.index;return r===t||h.cloneStatus&&r===n}var T={index:t,slideIndex:n,slide:r,container:w,isClone:_,mount:function(){_||(r.id=l.id+"-slide"+rt(t+1),Ce(r,Wt,v?"tabpanel":"group"),Ce(r,Zt,p.slide),Ce(r,Yt,k||nt(p.slideLabel,[t+1,e.length]))),s(r,"click",Z(u,ht,T)),s(r,"keydown",Z(u,yt,T)),o([ct,lt,Et],E),o(Pt,x),d&&o(st,I)},destroy:function(){i=!0,a.destroy(),qe(r,xn),Te(r,nn),Ce(r,"style",g),Ce(r,Yt,k||"")},update:E,style:function(e,t,n){Ae(n&&w||r,e,t)},isWithin:function(n,r){var i=Je(n-t);return _||!h.rewind&&!e.is(Nn)||(i=He(i,e.length-i)),i<=r}};return T}var Rn={passive:!1,capture:!0};var Dn={Spacebar:" ",Right:Ut,Left:jt,Up:Vt,Down:qt};function On(e){return e=ue(e)?e:e.key,Dn[e]||e}var Ln="keydown";var Mn="data-splide-lazy",Fn="data-splide-lazy-srcset";var jn=[" ","Enter"];var Un=Object.freeze({__proto__:null,Media:function(e,t,n){var r=e.state,i=n.breakpoints||{},a=n.reducedMotion||{},o=at(),u=[];function s(e){e&&o.destroy()}function c(e,t){var n=matchMedia(t);o.bind(n,"change",l),u.push([e,n])}function l(){var t=r.is(7),i=n.direction,a=u.reduce((function(e,t){return Ee(e,t[1].matches?t[0]:{})}),{});Se(n),h(a),n.destroy?e.destroy("completely"===n.destroy):t?(s(!0),e.mount()):i!==n.direction&&e.refresh()}function h(t,i){Ee(n,t),i&&Ee(Object.getPrototypeOf(n),t),r.is(1)||e.emit(gt,n)}return{setup:function(){var e="min"===n.mediaQuery;be(i).sort((function(t,n){return e?+t-+n:+n-+t})).forEach((function(t){c(i[t],"("+(e?"min":"max")+"-width:"+t+"px)")})),c(a,Y),l()},destroy:s,reduce:function(e){matchMedia(Y).matches&&(e?Ee(n,a):Se(n,be(a)))},set:h}},Direction:function(e,t,n){return{resolve:function(e,t,r){var i="rtl"!==(r=r||n.direction)||t?r===Bt?0:-1:1;return zt[e]&&zt[e][i]||e.replace(/width|left|right/i,(function(e,t){var n=zt[e.toLowerCase()][i]||e;return t>0?n.charAt(0).toUpperCase()+n.slice(1):n}))},orient:function(e){return e*("rtl"===n.direction?1:-1)}}},Elements:function(e,t,n){var r,i,a,o=Mt(e),u=o.on,s=o.bind,c=e.root,l=n.i18n,h={},f=[],d=[],p=[];function v(){r=g("."+an),i=we(r,"."+on),Ge(r&&i,"A track/list element is missing."),pe(f,_e(i,".splide__slide:not(."+sn+")")),xe({arrows:cn,pagination:dn,prev:hn,next:fn,bar:vn,toggle:yn},(function(e,t){h[t]=g("."+e)})),Ie(h,{root:c,track:r,list:i,slides:f}),function(){var e=c.id||(a=We,""+a+rt(it[a]=(it[a]||0)+1)),t=n.role;var a;c.id=e,r.id=r.id||e+"-track",i.id=i.id||e+"-list",!De(c,Wt)&&"SECTION"!==c.tagName&&t&&Ce(c,Wt,t);Ce(c,Zt,l.carousel),Ce(i,Wt,"presentation")}(),m()}function y(e){var t=nn.concat("style");J(f),qe(c,d),qe(r,p),Te([r,i],t),Te(c,e?t:["style",Zt])}function m(){qe(c,d),qe(r,p),d=k(rn),p=k(an),ye(c,d),ye(r,p),Ce(c,Yt,n.label),Ce(c,Xt,n.labelledby)}function g(e){var t=Ue(c,e);return t&&function(e,t){if(oe(e.closest))return e.closest(t);for(var n=e;n&&1===n.nodeType&&!ke(n,t);)n=n.parentElement;return n}(t,".splide")===c?t:void 0}function k(e){return[e+"--"+n.type,e+"--"+n.direction,n.drag&&e+"--draggable",n.isNavigation&&e+"--nav",e===rn&&mn]}return Ie(h,{setup:v,mount:function(){u(mt,y),u(mt,v),u(gt,m),s(document,"touchstart mousedown keydown",(function(e){a="keydown"===e.type}),{capture:!0}),s(c,"focusin",(function(){ve(c,bn,!!a)}))},destroy:y})},Slides:function(e,t,n){var r=Mt(e),i=r.on,a=r.emit,o=r.bind,u=t.Elements,s=u.slides,c=u.list,l=[];function h(){s.forEach((function(e,t){d(e,t,-1)}))}function f(){v((function(e){e.destroy()})),J(l)}function d(t,n,r){var i=Pn(e,n,r,t);i.mount(),l.push(i)}function p(e){return e?y((function(e){return!e.isClone})):l}function v(e,t){p(t).forEach(e)}function y(e){return l.filter(oe(e)?e:function(t){return ue(e)?ke(t.slide,e):de(he(e),t.index)})}return{mount:function(){h(),i(mt,f),i(mt,h),i([ot,mt],(function(){l.sort((function(e,t){return e.index-t.index}))}))},destroy:f,update:function(){v((function(e){e.update()}))},register:d,get:p,getIn:function(e){var r=t.Controller,i=r.toIndex(e),a=r.hasFocus()?1:n.perPage;return y((function(e){return Ze(e.index,i,i+a-1)}))},getAt:function(e){return y(e)[0]},add:function(e,t){fe(e,(function(e){if(ue(e)&&(e=Fe(e)),le(e)){var r=s[t];r?ge(e,r):me(c,e),ye(e,n.classes.slide),function(e,t){var n=Ve(e,"img"),r=n.length;r?n.forEach((function(e){o(e,"load error",(function(){--r||t()}))})):t()}(e,Z(a,kt))}})),a(mt)},remove:function(e){Me(y(e).map((function(e){return e.slide}))),a(mt)},forEach:v,filter:y,style:function(e,t,n){v((function(r){r.style(e,t,n)}))},getLength:function(e){return e?s.length:l.length},isEnough:function(){return l.length>n.perPage}}},Layout:function(e,t,n){var r,i,a=Mt(e),o=a.on,u=a.bind,s=a.emit,c=t.Slides,l=t.Direction.resolve,h=t.Elements,f=h.root,d=h.track,p=h.list,v=c.getAt,y=c.style;function m(){i=null,r=n.direction===Bt,Ae(f,"maxWidth",ze(n.width)),Ae(d,l("paddingLeft"),k(!1)),Ae(d,l("paddingRight"),k(!0)),g()}function g(){var e=Le(f);i&&i.width===e.width&&i.height===e.height||(Ae(d,"height",function(){var e="";r&&(Ge(e=_(),"height or heightRatio is missing."),e="calc("+e+" - "+k(!1)+" - "+k(!0)+")");return e}()),y(l("marginRight"),ze(n.gap)),y("width",n.autoWidth?null:ze(n.fixedWidth)||(r?"":w())),y("height",ze(n.fixedHeight)||(r?n.autoHeight?null:w():_()),!0),i=e,s(_t))}function k(e){var t=n.padding,r=l(e?"right":"left");return t&&ze(t[r]||(ie(t)?0:t))||"0px"}function _(){return ze(n.height||Le(p).width*n.heightRatio)}function w(){var e=ze(n.gap);return"calc((100%"+(e&&" + "+e)+")/"+(n.perPage||1)+(e&&" - "+e)+")"}function b(e,t){var n=v(e);if(n){var r=Le(n.slide)[l("right")],i=Le(p)[l("left")];return Je(r-i)+(t?0:x())}return 0}function x(){var e=v(0);return e&&parseFloat(Ae(e.slide,l("marginRight")))||0}return{mount:function(){m(),u(window,"resize load",function(e,t){var n;return function(){n||(n=Ft(t||0,(function(){e(),n=null}),null,1)).start()}}(Z(s,kt))),o([gt,mt],m),o(kt,g)},listSize:function(){return Le(p)[l("width")]},slideSize:function(e,t){var n=v(e||0);return n?Le(n.slide)[l("width")]+(t?0:x()):0},sliderSize:function(){return b(e.length-1,!0)-b(-1,!0)},totalSize:b,getPadding:function(e){return parseFloat(Ae(d,l("padding"+(e?"Right":"Left"))))||0}}},Clones:function(e,t,n){var r,i=Mt(e),a=i.on,o=i.emit,u=t.Elements,s=t.Slides,c=t.Direction.resolve,l=[];function h(){(r=p())&&(!function(t){var r=s.get().slice(),i=r.length;if(i){for(;r.length<t;)pe(r,r);pe(r.slice(-t),r.slice(0,t)).forEach((function(a,o){var c=o<t,h=function(t,r){var i=t.cloneNode(!0);return ye(i,n.classes.clone),i.id=e.root.id+"-clone"+rt(r+1),i}(a.slide,o);c?ge(h,r[0].slide):me(u.list,h),pe(l,h),s.register(h,o-t+(c?0:i),a.index)}))}}(r),o(kt))}function f(){Me(l),J(l)}function d(){r<p()&&o(mt)}function p(){var r=n.clones;if(e.is(Nn)){if(!r){var i=n[c("fixedWidth")]&&t.Layout.slideSize(0);r=i&&Xe(Le(u.track)[c("width")]/i)||n[c("autoWidth")]&&e.length||2*n.perPage}}else r=0;return r}return{mount:function(){h(),a(mt,f),a(mt,h),a([gt,kt],d)},destroy:f}},Move:function(e,t,n){var r,i=Mt(e),a=i.on,o=i.emit,u=e.state.set,s=t.Layout,c=s.slideSize,l=s.getPadding,h=s.totalSize,f=s.listSize,d=s.sliderSize,p=t.Direction,v=p.resolve,y=p.orient,m=t.Elements,g=m.list,k=m.track;function _(){t.Controller.isBusy()||(t.Scroll.cancel(),w(e.index),t.Slides.update())}function w(e){b(E(e,!0))}function b(t,n){if(!e.is(An)){var r=n?t:function(t){if(e.is(Nn)){var n=y(t-S()),r=C(!1,t)&&n<0,i=C(!0,t)&&n>0;(r||i)&&(t=x(t,i))}return t}(t);Ae(g,"transform","translate"+v("X")+"("+r+"px)"),t!==r&&o(lt)}}function x(e,t){var n=e-T(t),r=d();return e-=y(r*(Xe(Je(n)/r)||1))*(t?1:-1)}function I(){b(S()),r.cancel()}function E(t,r){var i=y(h(t-1)-function(e){var t=n.focus;return"center"===t?(f()-c(e,!0))/2:+t*c(e)||0}(t));return r?function(t){n.trimSpace&&e.is(Cn)&&(t=et(t,0,y(d()-f())));return t}(i):i}function S(){var e=v("left");return Le(g)[e]-Le(k)[e]+y(l(!1))}function T(e){return E(e?t.Controller.getEnd():0,!!n.trimSpace)}function C(e,t){t=se(t)?S():t;var n=!0!==e&&y(t)<y(T(!1)),r=!1!==e&&y(t)>y(T(!0));return n||r}return{mount:function(){r=t.Transition,a([ot,_t,gt,mt],_)},move:function(e,t,n,i){var a=S();e!==t&&function(e){var t=y(x(S(),e));return e?t>=0:t<=g["scroll"+v("Width")]-Le(k)[v("width")]}(e>t)&&(I(),b(x(a,e>t),!0)),u(4),o(st,t,n,e),r.start(t,(function(){u(3),o(ct,t,n,e),i&&i()}))},jump:w,translate:b,shift:x,cancel:I,toIndex:function(e){for(var n=t.Slides.get(),r=0,i=1/0,a=0;a<n.length;a++){var o=n[a].index,u=Je(E(o,!0)-e);if(!(u<=i))break;i=u,r=o}return r},toPosition:E,getPosition:S,getLimit:T,exceededLimit:C,reposition:_}},Controller:function(e,t,n){var r,i,a,o=Mt(e).on,u=t.Move,s=u.getPosition,c=u.getLimit,l=u.toPosition,h=t.Slides,f=h.isEnough,d=h.getLength,p=e.is(Nn),v=e.is(Cn),y=Z(w,!1),m=Z(w,!0),g=n.start||0,k=g;function _(){r=d(!0),i=n.perMove,a=n.perPage;var e=et(g,0,r-1);e!==g&&(g=e,u.reposition())}function w(e,t){var n=i||(C()?1:a),r=b(g+n*(e?-1:1),g,!(i||C()));return-1===r&&v&&!$e(s(),c(!e),1)?e?0:I():t?r:x(r)}function b(t,i,o){if(f()){var u=I(),c=function(t){if(v&&"move"===n.trimSpace&&t!==g)for(var r=s();r===l(t,!0)&&Ze(t,0,e.length-1,!n.rewind);)t<g?--t:++t;return t}(t);c!==t&&(i=t,t=c,o=!1),t<0||t>u?t=Ze(0,t,i,!0)||Ze(u,i,t,!0)?E(S(t)):p?o?t<0?-(r%a||a):r:t:n.rewind?t<0?u:0:-1:o&&t!==i&&(t=E(S(i)+(t<i?-1:1)))}else t=-1;return t}function x(e){return p?(e+r)%r||0:e}function I(){return Qe(r-(C()||p&&i?1:a),0)}function E(e){return et(C()?e:a*e,0,I())}function S(e){return C()?e:Ye((e>=I()?r-1:e)/a)}function T(e){e!==g&&(k=g,g=e)}function C(){return!se(n.focus)||n.isNavigation}function N(){return e.state.is([4,5])&&!!n.waitForTransition}return{mount:function(){_(),o([gt,mt],_)},go:function(e,t,n){if(!N()){var r=function(e){var t=g;if(ue(e)){var n=e.match(/([+\-<>])(\d+)?/)||[],r=n[1],i=n[2];"+"===r||"-"===r?t=b(g+ +(""+r+(+i||1)),g):">"===r?t=i?E(+i):y(!0):"<"===r&&(t=m(!0))}else t=p?e:et(e,0,I());return t}(e),i=x(r);i>-1&&(t||i!==g)&&(T(i),u.move(r,i,k,n))}},scroll:function(e,n,r,i){t.Scroll.scroll(e,n,r,(function(){T(x(u.toIndex(u.getPosition()))),i&&i()}))},getNext:y,getPrev:m,getAdjacent:w,getEnd:I,setIndex:T,getIndex:function(e){return e?k:g},toIndex:E,toPage:S,toDest:function(e){var t=u.toIndex(e);return v?et(t,0,I()):t},hasFocus:C,isBusy:N}},Arrows:function(e,t,n){var r,i,a=Mt(e),o=a.on,u=a.bind,s=a.emit,c=n.classes,l=n.i18n,h=t.Elements,f=t.Controller,d=h.arrows,p=h.track,v=d,y=h.prev,m=h.next,g={};function k(){!function(){var e=n.arrows;!e||y&&m||(v=d||Ne("div",c.arrows),y=x(!0),m=x(!1),r=!0,me(v,[y,m]),!d&&ge(v,p));y&&m&&(Ie(g,{prev:y,next:m}),Pe(v,e?"":"none"),ye(v,i=cn+"--"+n.direction),e&&(o([ct,mt,Et],I),u(m,"click",Z(b,">")),u(y,"click",Z(b,"<")),I(),Ce([y,m],Gt,p.id),s(Tt,y,m)))}(),o(gt,_)}function _(){w(),k()}function w(){a.destroy(),qe(v,i),r?(Me(d?[y,m]:v),y=m=null):Te([y,m],nn)}function b(e){f.go(e,!0)}function x(e){return Fe('<button class="'+c.arrow+" "+(e?c.prev:c.next)+'" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40" focusable="false"><path d="'+(n.arrowPath||"m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z")+'" />')}function I(){var t=e.index,n=f.getPrev(),r=f.getNext(),i=n>-1&&t<n?l.last:l.prev,a=r>-1&&t>r?l.first:l.next;y.disabled=n<0,m.disabled=r<0,Ce(y,Yt,i),Ce(m,Yt,a),s(Ct,y,m,n,r)}return{arrows:g,mount:k,destroy:w}},Autoplay:function(e,t,n){var r,i,a=Mt(e),o=a.on,u=a.bind,s=a.emit,c=Ft(n.interval,e.go.bind(e,">"),(function(e){var t=h.bar;t&&Ae(t,"width",100*e+"%"),s(Dt,e)})),l=c.isPaused,h=t.Elements,f=t.Elements,d=f.root,p=f.toggle,v=n.autoplay,y="pause"===v;function m(){l()&&t.Slides.isEnough()&&(c.start(!n.resetProgress),i=r=y=!1,_(),s(Rt))}function g(e){void 0===e&&(e=!0),y=!!e,_(),l()||(c.pause(),s(Ot))}function k(){y||(r||i?g(!1):m())}function _(){p&&(ve(p,mn,!y),Ce(p,Yt,n.i18n[y?"play":"pause"]))}function w(e){var r=t.Slides.getAt(e);c.set(r&&+De(r.slide,"data-splide-interval")||n.interval)}return{mount:function(){v&&(!function(){n.pauseOnHover&&u(d,"mouseenter mouseleave",(function(e){r="mouseenter"===e.type,k()}));n.pauseOnFocus&&u(d,"focusin focusout",(function(e){i="focusin"===e.type,k()}));p&&u(p,"click",(function(){y?m():g(!0)}));o([st,It,mt],c.rewind),o(st,w)}(),p&&Ce(p,Gt,h.track.id),y||m(),_())},destroy:c.cancel,play:m,pause:g,isPaused:l}},Cover:function(e,t,n){var r=Mt(e).on;function i(e){t.Slides.forEach((function(t){var n=we(t.container||t.slide,"img");n&&n.src&&a(e,n,t)}))}function a(e,t,n){n.style("background",e?'center/cover no-repeat url("'+t.src+'")':"",!0),Pe(t,e?"none":"")}return{mount:function(){n.cover&&(r(Lt,Z(a,!0)),r([ot,gt,mt],Z(i,!0)))},destroy:Z(i,!1)}},Scroll:function(e,t,n){var r,i,a=Mt(e),o=a.on,u=a.emit,s=e.state.set,c=t.Move,l=c.getPosition,h=c.getLimit,f=c.exceededLimit,d=c.translate,p=1;function v(e,n,a,o,h){var f=l();if(g(),a){var d=t.Layout.sliderSize(),v=tt(e)*d*Ye(Je(e)/d)||0;e=c.toPosition(t.Controller.toDest(e%d))+v}var k=$e(f,e,1);p=1,n=k?0:n||Qe(Je(e-f)/1.5,800),i=o,r=Ft(n,y,Z(m,f,e,h),1),s(5),u(It),r.start()}function y(){s(3),i&&i(),u(Et)}function m(t,r,i,a){var o=l(),u=t+(r-t)*function(e){var t=n.easingFunc;return t?t(e):1-Math.pow(1-e,4)}(a),s=(u-o)*p;d(o+s),e.is(Cn)&&!i&&f()&&(p*=.6,Je(s)<10&&v(h(f(!0)),600,!1,void 0,!0))}function g(){r&&r.cancel()}function k(){r&&!r.isPaused()&&(g(),y())}return{mount:function(){o(st,g),o([gt,mt],k)},destroy:g,scroll:v,cancel:k}},Drag:function(e,t,n){var r,i,a,o,u,s,c,l,h=Mt(e),f=h.on,d=h.emit,p=h.bind,v=h.unbind,y=e.state,m=t.Move,g=t.Scroll,k=t.Controller,_=t.Elements.track,w=t.Media.reduce,b=t.Direction,x=b.resolve,I=b.orient,E=m.getPosition,S=m.exceededLimit,T=!1;function C(){var e=n.drag;U(!e),o="free"===e}function N(e){if(s=!1,!c){var t=j(e);!function(e){var t=n.noDrag;return!ke(e,".splide__pagination__page, ."+ln)&&(!t||!ke(e,t))}(e.target)||!t&&e.button||(k.isBusy()?je(e,!0):(l=t?_:window,u=y.is([4,5]),a=null,p(l,Sn,A,Rn),p(l,Tn,P,Rn),m.cancel(),g.cancel(),D(e)))}}function A(t){if(y.is(6)||(y.set(6),d(wt)),t.cancelable)if(u){m.translate(r+O(t)/(T&&e.is(Cn)?5:1));var i=L(t)>200,a=T!==(T=S());(i||a)&&D(t),s=!0,d(bt),je(t)}else(function(e){return Je(O(e))>Je(O(e,!0))})(t)&&(u=function(e){var t=n.dragMinThreshold,r=ie(t),i=r&&t.mouse||0,a=(r?t.touch:+t)||10;return Je(O(e))>(j(e)?a:i)}(t),je(t))}function P(r){y.is(6)&&(y.set(3),d(xt)),u&&(!function(r){var i=function(t){if(e.is(Nn)||!T){var n=L(t);if(n&&n<200)return O(t)/n}return 0}(r),a=function(e){return E()+tt(e)*He(Je(e)*(n.flickPower||600),o?1/0:t.Layout.listSize()*(n.flickMaxPages||1))}(i),u=n.rewind&&n.rewindByDrag;w(!1),o?k.scroll(a,0,n.snap):e.is(An)?k.go(I(tt(i))<0?u?"<":"-":u?">":"+"):e.is(Cn)&&T&&u?k.go(S(!0)?">":"<"):k.go(k.toDest(a),!0);w(!0)}(r),je(r)),v(l,Sn,A),v(l,Tn,P),u=!1}function R(e){!c&&s&&je(e,!0)}function D(e){a=i,i=e,r=E()}function O(e,t){return F(e,t)-F(M(e),t)}function L(e){return Be(e)-Be(M(e))}function M(e){return i===e&&a||i}function F(e,t){return(j(e)?e.changedTouches[0]:e)["page"+x(t?"Y":"X")]}function j(e){return"undefined"!==typeof TouchEvent&&e instanceof TouchEvent}function U(e){c=e}return{mount:function(){p(_,Sn,te,Rn),p(_,Tn,te,Rn),p(_,En,N,Rn),p(_,"click",R,{capture:!0}),p(_,"dragstart",je),f([ot,gt],C)},disable:U,isDragging:function(){return u}}},Keyboard:function(e,t,n){var r,i,a=Mt(e),o=a.on,u=a.bind,s=a.unbind,c=e.root,l=t.Direction.resolve;function h(){var e=n.keyboard;e&&(r="global"===e?window:c,u(r,Ln,p))}function f(){s(r,Ln)}function d(){var e=i;i=!0,ee((function(){i=e}))}function p(t){if(!i){var n=On(t);n===l(jt)?e.go("<"):n===l(Ut)&&e.go(">")}}return{mount:function(){h(),o(gt,f),o(gt,h),o(st,d)},destroy:f,disable:function(e){i=e}}},LazyLoad:function(e,t,n){var r=Mt(e),i=r.on,a=r.off,o=r.bind,u=r.emit,s="sequential"===n.lazyLoad,c=[ot,mt,ct,Et],l=[];function h(){J(l),t.Slides.forEach((function(e){Ve(e.slide,"[data-splide-lazy], [data-splide-lazy-srcset]").forEach((function(t){var r=De(t,Mn),i=De(t,Fn);if(r!==t.src||i!==t.srcset){var a=n.classes.spinner,o=t.parentElement,u=we(o,"."+a)||Ne("span",a,o);l.push([t,e,u]),t.src||Pe(t,"none")}}))})),s&&v()}function f(){(l=l.filter((function(t){var r=n.perPage*((n.preloadPages||1)+1)-1;return!t[1].isWithin(e.index,r)||d(t)}))).length||a(c)}function d(e){var t=e[0];ye(e[1].slide,wn),o(t,"load error",Z(p,e)),Ce(t,"src",De(t,Mn)),Ce(t,"srcset",De(t,Fn)),Te(t,Mn),Te(t,Fn)}function p(e,t){var n=e[0],r=e[1];qe(r.slide,wn),"error"!==t.type&&(Me(e[2]),Pe(n,""),u(Lt,n,r),u(kt)),s&&v()}function v(){l.length&&d(l.shift())}return{mount:function(){n.lazyLoad&&(h(),i(mt,h),s||i(c,f))},destroy:Z(J,l)}},Pagination:function(e,t,n){var r,i,a=Mt(e),o=a.on,u=a.emit,s=a.bind,c=t.Slides,l=t.Elements,h=t.Controller,f=h.hasFocus,d=h.getIndex,p=h.go,v=t.Direction.resolve,y=[];function m(){r&&(Me(l.pagination?$(r.children):r),qe(r,i),J(y),r=null),a.destroy()}function g(e){p(">"+e,!0)}function k(e,t){var n=y.length,r=On(t),i=_(),a=-1;r===v(Ut,!1,i)?a=++e%n:r===v(jt,!1,i)?a=(--e+n)%n:"Home"===r?a=0:"End"===r&&(a=n-1);var o=y[a];o&&(Re(o.button),p(">"+a),je(t,!0))}function _(){return n.paginationDirection||n.direction}function w(e){return y[h.toPage(e)]}function b(){var e=w(d(!0)),t=w(d());if(e){var n=e.button;qe(n,mn),Te(n,Qt),Ce(n,Kt,-1)}if(t){var i=t.button;ye(i,mn),Ce(i,Qt,!0),Ce(i,Kt,"")}u(At,{list:r,items:y},e,t)}return{items:y,mount:function t(){m(),o([gt,mt],t),n.pagination&&c.isEnough()&&(o([st,It,Et],b),function(){var t=e.length,a=n.classes,o=n.i18n,u=n.perPage,h=f()?t:Xe(t/u);ye(r=l.pagination||Ne("ul",a.pagination,l.track.parentElement),i=dn+"--"+_()),Ce(r,Wt,"tablist"),Ce(r,Yt,o.select),Ce(r,$t,_()===Bt?"vertical":"");for(var d=0;d<h;d++){var p=Ne("li",null,r),v=Ne("button",{class:a.page,type:"button"},p),m=c.getIn(d).map((function(e){return e.slide.id})),w=!f()&&u>1?o.pageX:o.slideX;s(v,"click",Z(g,d)),n.paginationKeyboard&&s(v,"keydown",Z(k,d)),Ce(p,Wt,"presentation"),Ce(v,Wt,"tab"),Ce(v,Gt,m.join(" ")),Ce(v,Yt,nt(w,d+1)),Ce(v,Kt,-1),y.push({li:p,button:v,page:d})}}(),b(),u(Nt,{list:r,items:y},w(e.index)))},destroy:m,getAt:w,update:b}},Sync:function(e,t,n){var r=n.isNavigation,i=n.slideFocus,a=[];function o(){e.splides.forEach((function(t){t.isParent||(s(e,t.splide),s(t.splide,e))})),r&&function(){var t=Mt(e),n=t.on;n(ht,l),n(yt,h),n([ot,gt],c),a.push(t),t.emit(Pt,e.splides)}()}function u(){a.forEach((function(e){e.destroy()})),J(a)}function s(e,t){var n=Mt(e);n.on(st,(function(e,n,r){t.go(t.is(Nn)?r:e)})),a.push(n)}function c(){Ce(t.Elements.list,$t,n.direction===Bt?"vertical":"")}function l(t){e.go(t.index)}function h(e,t){de(jn,On(t))&&(l(e),je(t))}return{setup:function(){e.options={slideFocus:se(i)?r:i}},mount:o,destroy:u,remount:function(){u(),o()}}},Wheel:function(e,t,n){var r=Mt(e).bind,i=0;function a(r){if(r.cancelable){var a=r.deltaY,o=a<0,u=Be(r),s=n.wheelMinThreshold||0,c=n.wheelSleep||0;Je(a)>s&&u-i>c&&(e.go(o?"<":">"),i=u),function(r){return!n.releaseWheel||e.state.is(4)||-1!==t.Controller.getAdjacent(r)}(o)&&je(r)}}return{mount:function(){n.wheel&&r(t.Elements.track,"wheel",a,Rn)}}},Live:function(e,t,n){var r=Mt(e).on,i=t.Elements.track,a=n.live&&!n.isNavigation,o=Ne("span","splide__sr");function u(e){a&&Ce(i,en,e?"off":"polite")}return{mount:function(){a&&(u(!t.Autoplay.isPaused()),Ce(i,tn,"additions"),o.textContent="\u2026",r(Rt,Z(u,!0)),r(Ot,Z(u,!1)),r([ct,Et],Z(me,i,o)))},disable:u,destroy:function(){Te(i,[en,tn]),Me(o)}}}}),Vn={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:In,i18n:{prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function qn(e,t,n){var r=Mt(e).on;return{mount:function(){r([ot,mt],(function(){ee((function(){t.Slides.style("transition","opacity "+n.speed+"ms "+n.easing)}))}))},start:function(e,n){var r=t.Elements.track;Ae(r,"height",ze(Le(r).height)),ee((function(){n(),Ae(r,"height","")}))},cancel:te}}function Bn(e,t,n){var r,i=Mt(e).bind,a=t.Move,o=t.Controller,u=t.Scroll,s=t.Elements.list,c=Z(Ae,s,"transition");function l(){c(""),u.cancel()}return{mount:function(){i(s,"transitionend",(function(e){e.target===s&&r&&(l(),r())}))},start:function(t,i){var s=a.toPosition(t,!0),l=a.getPosition(),h=function(t){var r=n.rewindSpeed;if(e.is(Cn)&&r){var i=o.getIndex(!0),a=o.getEnd();if(0===i&&t>=a||i>=a&&0===t)return r}return n.speed}(t);Je(s-l)>=1&&h>=1?n.useScroll?u.scroll(s,h,!1,i):(c("transform "+h+"ms "+n.easing),a.translate(s,!0),r=i):(a.jump(t),i())},cancel:l}}var zn=function(){function e(t,n){this.event=Mt(),this.Components={},this.state=function(e){var t=e;return{set:function(e){t=e},is:function(e){return de(he(e),t)}}}(1),this.splides=[],this._o={},this._E={};var r=ue(t)?Ue(document,t):t;Ge(r,r+" is invalid."),this.root=r,n=Ee({label:De(r,Yt)||"",labelledby:De(r,Xt)||""},Vn,e.defaults,n||{});try{Ee(n,JSON.parse(De(r,Ke)))}catch(i){Ge(!1,"Invalid JSON")}this._o=Object.create(Ee({},n))}var t,n,r,i=e.prototype;return i.mount=function(e,t){var n=this,r=this.state,i=this.Components;return Ge(r.is([1,7]),"Already mounted!"),r.set(1),this._C=i,this._T=t||this._T||(this.is(An)?qn:Bn),this._E=e||this._E,xe(Ie({},Un,this._E,{Transition:this._T}),(function(e,t){var r=e(n,i,n._o);i[t]=r,r.setup&&r.setup()})),xe(i,(function(e){e.mount&&e.mount()})),this.emit(ot),ye(this.root,"is-initialized"),r.set(3),this.emit(ut),this},i.sync=function(e){return this.splides.push({splide:e}),e.splides.push({splide:this,isParent:!0}),this.state.is(3)&&(this._C.Sync.remount(),e.Components.Sync.remount()),this},i.go=function(e){return this._C.Controller.go(e),this},i.on=function(e,t){return this.event.on(e,t),this},i.off=function(e){return this.event.off(e),this},i.emit=function(e){var t;return(t=this.event).emit.apply(t,[e].concat($(arguments,1))),this},i.add=function(e,t){return this._C.Slides.add(e,t),this},i.remove=function(e){return this._C.Slides.remove(e),this},i.is=function(e){return this._o.type===e},i.refresh=function(){return this.emit(mt),this},i.destroy=function(e){void 0===e&&(e=!0);var t=this.event,n=this.state;return n.is(1)?Mt(this).on(ut,this.destroy.bind(this,e)):(xe(this._C,(function(t){t.destroy&&t.destroy(e)}),!0),t.emit(St),t.destroy(),e&&J(this.splides),n.set(7)),this},t=e,(n=[{key:"options",get:function(){return this._o},set:function(e){this._C.Media.set(e,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}])&&Q(t.prototype,n),r&&Q(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Wn=zn;Wn.defaults={},Wn.STATES=X;var Kn=[[ot,"onMounted"],[ut,"onReady"],[st,"onMove"],[ct,"onMoved"],[ht,"onClick"],[ft,"onActive"],[dt,"onInactive"],[pt,"onVisible"],[vt,"onHidden"],[mt,"onRefresh"],[gt,"onUpdated"],[kt,"onResize"],[_t,"onResized"],[wt,"onDrag"],[bt,"onDragging"],[xt,"onDragged"],[It,"onScroll"],[Et,"onScrolled"],[St,"onDestroy"],[Tt,"onArrowsMounted"],[Ct,"onArrowsUpdated"],[Nt,"onPaginationMounted"],[At,"onPaginationUpdated"],[Pt,"onNavigationMounted"],[Rt,"onAutoplayPlay"],[Dt,"onAutoplayPlaying"],[Ot,"onAutoplayPause"],[Lt,"onLazyLoadLoaded"]];function Gn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function Hn(e){return null!==e&&"object"===typeof e}function Qn(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&!e.some((function(e,n){return!Qn(e,t[n])}));if(Hn(e)&&Hn(t)){var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&!n.some((function(n){return!Object.prototype.hasOwnProperty.call(t,n)||!Qn(e[n],t[n])}))}return e===t}function Yn(e,t){var n=e;return function(e,t){if(e)for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if("__proto__"!==i&&!1===t(e[i],i))break}}(t,(function(e,t){Array.isArray(e)?n[t]=e.slice():Hn(e)?n[t]=Yn(Hn(n[t])?n[t]:{},e):n[t]=e})),n}var Xn=function(e){var n=e.children,r=e.className,i=W(e,K);return t.createElement("div",z({className:Gn("splide__track",r)},i),t.createElement("ul",{className:"splide__list"},n))},Jn=function(e){O(r,e);var n=V(r);function r(){var e;return A(this,r),(e=n.apply(this,arguments)).splideRef=t.createRef(),e.slides=[],e}return R(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.options,n=e.extensions,r=e.transition,i=this.splideRef.current;i&&(this.splide=new Wn(i,t),this.bind(this.splide),this.splide.mount(n,r),this.options=Yn({},t||{}),this.slides=this.getSlides())}},{key:"componentWillUnmount",value:function(){this.splide&&(this.splide.destroy(),this.splide=void 0),this.options=void 0,this.slides.length=0}},{key:"componentDidUpdate",value:function(){if(this.splide){var e=this.props.options;e&&!Qn(this.options,e)&&(this.splide.options=e,this.options=Yn({},e));var t,n,r=this.getSlides();t=this.slides,n=r,(t.length!==n.length||t.some((function(e,t){return e!==n[t]})))&&(this.splide.refresh(),this.slides=r)}}},{key:"sync",value:function(e){var t;null==(t=this.splide)||t.sync(e)}},{key:"go",value:function(e){var t;null==(t=this.splide)||t.go(e)}},{key:"getSlides",value:function(){var e;if(this.splide){var t=null==(e=this.splide.Components.Elements)?void 0:e.list.children;return t&&Array.prototype.slice.call(t)||[]}return[]}},{key:"bind",value:function(e){var t=this;Kn.forEach((function(n){var r=w(n,2),i=r[0],a=r[1],o=t.props[a];"function"===typeof o&&e.on(i,(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];o.apply(void 0,[e].concat(n))}))}))}},{key:"omit",value:function(e,t){return t.forEach((function(t){Object.prototype.hasOwnProperty.call(e,t)&&delete e[t]})),e}},{key:"render",value:function(){var e=this.props,n=e.className,r=e.tag,i=void 0===r?"div":r,a=e.hasTrack,o=void 0===a||a,u=e.children,s=W(e,G);return t.createElement(i,z({className:Gn("splide",n),ref:this.splideRef},this.omit(s,["options"].concat(N(Kn.map((function(e){return e[1]})))))),o?t.createElement(Xn,null,u):u)}}]),r}(t.Component),$n=function(e){var n=e.children,r=e.className,i=W(e,H);return t.createElement("li",z({className:Gn("splide__slide",r)},i),n)},Zn=function(e){return(0,v.jsx)(Jn,{hasTrack:e.hasTrack,"data-splide":e.dataSplide,children:e.children})},er={slider__slide:"ImageSlider_slider__slide__tpini",slider__arrow:"ImageSlider_slider__arrow__d-kOy","slider__arrow--prev":"ImageSlider_slider__arrow--prev__lyv7o","slider__arrow--next":"ImageSlider_slider__arrow--next__G8MHU",slider__num:"ImageSlider_slider__num__V77qq"},tr=function(e){var r=w((0,t.useState)(e.currentImage),2),i=r[0],a=r[1],o=e.info.map((function(e){return(0,v.jsx)($n,{className:er.slider__slide,children:(0,v.jsx)("img",{src:n(990)("./".concat(e.imgPath)),alt:"slide ".concat(e.id)})},e.id)})),u=function(t){switch(t){case"prev":a(i-1<1?e.info.length:i-1);break;case"next":a(i+1>e.info.length?1:i+1);break;default:a(i)}};return(0,v.jsx)(T,{onClose:e.onClose,children:(0,v.jsxs)(Zn,{hasTrack:!1,dataSplide:'{"type":"loop", "pagination": false, "start": '.concat(e.currentImage-1,"}"),children:[(0,v.jsx)(Xn,{children:o}),(0,v.jsxs)("div",{className:"splide__arrows",children:[(0,v.jsx)("button",{onClick:function(){u("prev")},className:"splide__arrow splide__arrow--prev ".concat(er.slider__arrow," ").concat(er["slider__arrow--prev"]),children:(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 40 40",width:"40",height:"40",focusable:"false",children:(0,v.jsx)("path",{d:"m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z"})})}),(0,v.jsxs)("div",{className:er.slider__num,children:[(0,v.jsx)("span",{className:er["slider__num-cur"],children:i})," / ",(0,v.jsx)("span",{children:e.info.length})]}),(0,v.jsx)("button",{onClick:function(){u("next")},className:"splide__arrow splide__arrow--next ".concat(er.slider__arrow," ").concat(er["slider__arrow--next"]),children:(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 40 40",width:"40",height:"40",focusable:"false",children:(0,v.jsx)("path",{d:"m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z"})})})]})]})})},nr="Gallery_image__lQ6OQ",rr="Gallery_image-wrap__xFSlZ",ir="Gallery_image-inr__cBLWU",ar="Gallery_image-row__kch1u",or="Gallery_image__btn__AulPr",ur="Gallery_image__btn--down__XUSfP",sr="Gallery_image__btn--top__UnfNY",cr="Gallery_image__btn-wrap__i8ba5",lr=[{id:1,imgPath:"dummy-1.jpg"},{id:2,imgPath:"dummy-2.jpg"},{id:3,imgPath:"dummy-3.jpg"},{id:4,imgPath:"dummy-1.jpg"},{id:5,imgPath:"dummy-2.jpg"},{id:6,imgPath:"dummy-3.jpg"},{id:7,imgPath:"dummy-1.jpg"},{id:8,imgPath:"dummy-2.jpg"},{id:9,imgPath:"dummy-3.jpg"},{id:10,imgPath:"dummy-1.jpg"}],hr=function(e){var r=w((0,t.useState)(!1),2),i=r[0],a=r[1],o=w((0,t.useState)(!1),2),u=o[0],s=o[1],c=w((0,t.useState)(null),2),l=c[0],h=c[1],f=lr.filter((function(e){return e.id%2===1})).map((function(e){return(0,v.jsx)("button",{onClick:function(){p(e.id)},className:nr,children:(0,v.jsx)("img",{src:n(990)("./".concat(e.imgPath)),alt:"slide ".concat(e.id)})},e.id)})),d=lr.filter((function(e){return e.id%2===0})).map((function(e){return(0,v.jsx)("button",{onClick:function(){p(e.id)},className:nr,children:(0,v.jsx)("img",{src:n(990)("./".concat(e.imgPath)),alt:"slide ".concat(e.id)})},e.id)})),p=function(e){h(e),s(!0)};return(0,v.jsxs)("section",{id:"gallery",children:[(0,v.jsx)("div",{className:"section-flower",children:"\ud83c\udf3b"}),(0,v.jsx)("div",{id:"image-wrap",className:rr,children:(0,v.jsxs)("div",{className:ir,children:[(0,v.jsx)("div",{className:ar,children:f}),(0,v.jsx)("div",{className:ar,children:d})]})}),(0,v.jsxs)("button",{onClick:function(){var e=document.querySelector("section#gallery #image-wrap"),t=document.querySelectorAll("section#gallery #image-wrap div div"),n=t[0].clientHeight>t[1].clientHeight?t[0].clientHeight:t[1].clientHeight;i?(a(!1),e.style.height="550px"):(a(!0),e.style.height="".concat(n,"px"))},className:cr,children:[(0,v.jsxs)("svg",{className:"".concat(i?sr:ur," ").concat(or),width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,v.jsx)("path",{d:"M13.7893 0.393823C14.295 -0.131274 15.115 -0.131274 15.6207 0.393823C16.1264 0.91892 16.1264 1.77027 15.6207 2.29537L10.1264 8L15.6207 13.7046C16.1264 14.2297 16.1264 15.0811 15.6207 15.6062C15.115 16.1313 14.295 16.1313 13.7893 15.6062L7.3793 8.95077C6.87357 8.42567 6.87357 7.57432 7.3793 7.04923L13.7893 0.393823Z",fill:"#7c7f7f"}),(0,v.jsx)("path",{d:"M6.78928 0.393823C7.29501 -0.131274 8.11497 -0.131274 8.6207 0.393823C9.12643 0.91892 9.12643 1.77027 8.6207 2.29537L3.12643 8L8.6207 13.7046C9.12643 14.2297 9.12643 15.0811 8.6207 15.6062C8.11497 16.1313 7.29501 16.1313 6.78928 15.6062L0.3793 8.95077C-0.126432 8.42567 -0.126434 7.57432 0.3793 7.04923L6.78928 0.393823Z",fill:"#7c7f7f"})]}),(0,v.jsx)("div",{children:i?"\uc811\uae30":"\ub354 \ubcf4\uae30"})]}),u&&(0,v.jsx)(tr,{onClose:function(){s(!1)},info:lr,currentImage:l})]})};function fr(){fr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(S){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return E()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=s;var l={};function h(){}function f(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(I([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=h.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==F(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return f.prototype=d,u(m,"constructor",d),u(d,"constructor",f),f.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),u(m,o,"Generator"),u(m,i,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;b(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function dr(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(qa){return void n(qa)}u.done?t(s):Promise.resolve(s).then(r,i)}function pr(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){dr(a,r,i,o,u,"next",e)}function u(e){dr(a,r,i,o,u,"throw",e)}o(void 0)}))}}function vr(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=k(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function yr(e,t,n){return yr=M()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&D(i,n.prototype),i},yr.apply(null,arguments)}function mr(e){var t="function"===typeof Map?new Map:void 0;return mr=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return yr(e,arguments,L(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),D(n,e)},mr(e)}var gr=!1,kr=!1,_r="${JSCORE_VERSION}",wr=function(e,t){if(!e)throw br(t)},br=function(e){return new Error("Firebase Database ("+_r+") INTERNAL ASSERT FAILED: "+e)},xr=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ir={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,h=(3&a)<<4|u>>4,f=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(xr(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var h=u<<6&192|s;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Er=function(e){var t=xr(e);return Ir.encodeByteArray(t,!0)},Sr=function(e){return Er(e).replace(/\./g,"")},Tr=function(e){try{return Ir.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Cr(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Cr(e[n],t[n]));return e}var Nr=function(){function e(){var t=this;A(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return R(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Ar(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Sr(JSON.stringify({alg:"none",type:"JWT"})),Sr(JSON.stringify(a)),""].join(".")}function Pr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Rr(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pr())}function Dr(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Or(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Lr(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Mr(){var e=Pr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Fr(){return!0===gr||!0===kr}function jr(){return"object"===typeof indexedDB}var Ur=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(j(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(j(a),Vr.prototype.create),a}return R(n)}(mr(Error)),Vr=function(){function e(t,n,r){A(this,e),this.service=t,this.serviceName=n,this.errors=r}return R(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?qr(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Ur(n,a,t);return o}}]),e}();function qr(e,t){return e.replace(Br,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Br=/\{\$([^}]+)}/g;function zr(e){return JSON.parse(e)}function Wr(e){return JSON.stringify(e)}var Kr=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=zr(Tr(a[0])||""),n=zr(Tr(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Gr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Hr(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Qr(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Yr(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Xr(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Jr(u)&&Jr(s)){if(!Xr(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function Jr(e){return null!==e&&"object"===typeof e}function $r(e){for(var t=[],n=function(){var e=w(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Zr(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=w(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ei(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var ti=function(){function e(){A(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return R(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=f^l&(h^f),s=1518500249):(u=l^h^f,s=1859775393):p<60?(u=l&h|f&(l|h),s=2400959708):(u=l^h^f,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function ni(e,t){var n=new ri(e,t);return n.subscribe.bind(n)}var ri=function(){function e(t,n){var r=this;A(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return R(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=vr(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ii),void 0===r.error&&(r.error=ii),void 0===r.complete&&(r.complete=ii);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ii(){}function ai(e,t){return"".concat(e," failed: ").concat(t," argument ")}var oi=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function ui(e){return e&&e._delegate?e._delegate:e}var si=function(){function e(t,n,r){A(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return R(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ci="[DEFAULT]",li=function(){function e(t,n){A(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return R(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Nr;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ci})}catch(s){}var t,n=vr(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=w(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ci;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=pr(fr().mark((function e(){var t;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(N(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),N(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ci;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ci;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=vr(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=w(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=vr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(tR){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ci?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(tR){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ci;return this.component?this.component.multipleInstances?e:ci:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var hi,fi,di=function(){function e(t){A(this,e),this.name=t,this.providers=new Map}return R(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new li(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),pi=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(fi||(fi={}));var vi={debug:fi.DEBUG,verbose:fi.VERBOSE,info:fi.INFO,warn:fi.WARN,error:fi.ERROR,silent:fi.SILENT},yi=fi.INFO,mi=(q(hi={},fi.DEBUG,"log"),q(hi,fi.VERBOSE,"log"),q(hi,fi.INFO,"info"),q(hi,fi.WARN,"warn"),q(hi,fi.ERROR,"error"),hi),gi=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=mi[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ki=function(){function e(t){A(this,e),this.name=t,this._logLevel=yi,this._logHandler=gi,this._userLogHandler=null,pi.push(this)}return R(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in fi))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?vi[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,fi.DEBUG].concat(t)),this._logHandler.apply(this,[this,fi.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,fi.VERBOSE].concat(t)),this._logHandler.apply(this,[this,fi.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,fi.INFO].concat(t)),this._logHandler.apply(this,[this,fi.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,fi.WARN].concat(t)),this._logHandler.apply(this,[this,fi.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,fi.ERROR].concat(t)),this._logHandler.apply(this,[this,fi.ERROR].concat(t))}}]),e}();var _i,wi;var bi=new WeakMap,xi=new WeakMap,Ii=new WeakMap,Ei=new WeakMap,Si=new WeakMap;var Ti={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return xi.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ii.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ai(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ci(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(wi||(wi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Pi(this),n),Ai(bi.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ai(e.apply(Pi(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Pi(this),t].concat(r));return Ii.set(a,t.sort?t.sort():[t]),Ai(a)}}function Ni(e){return"function"===typeof e?Ci(e):(e instanceof IDBTransaction&&function(e){if(!xi.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));xi.set(e,t)}}(e),t=e,(_i||(_i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Ti):e);var t}function Ai(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Ai(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&bi.set(t,e)})).catch((function(){})),Si.set(t,e),t}(e);if(Ei.has(e))return Ei.get(e);var t=Ni(e);return t!==e&&(Ei.set(e,t),Si.set(t,e)),t}var Pi=function(e){return Si.get(e)};var Ri,Di,Oi=["get","getKey","getAll","getAllKeys","count"],Li=["put","add","delete","clear"],Mi=new Map;function Fi(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Mi.get(t))return Mi.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Li.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Oi.includes(n))){var a=function(){var e=pr(fr().mark((function e(t){var a,o,u,s,c,l,h=arguments;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=h.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=h[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Mi.set(t,a),a}}}Ti=function(e){return z(z({},e),{},{get:function(t,n,r){return Fi(t,n)||e.get(t,n,r)},has:function(t,n){return!!Fi(t,n)||e.has(t,n)}})}(Ti);var ji=function(){function e(t){A(this,e),this.container=t}return R(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ui="@firebase/app",Vi="0.7.25",qi=new ki("@firebase/app"),Bi="[DEFAULT]",zi=(q(Ri={},Ui,"fire-core"),q(Ri,"@firebase/app-compat","fire-core-compat"),q(Ri,"@firebase/analytics","fire-analytics"),q(Ri,"@firebase/analytics-compat","fire-analytics-compat"),q(Ri,"@firebase/app-check","fire-app-check"),q(Ri,"@firebase/app-check-compat","fire-app-check-compat"),q(Ri,"@firebase/auth","fire-auth"),q(Ri,"@firebase/auth-compat","fire-auth-compat"),q(Ri,"@firebase/database","fire-rtdb"),q(Ri,"@firebase/database-compat","fire-rtdb-compat"),q(Ri,"@firebase/functions","fire-fn"),q(Ri,"@firebase/functions-compat","fire-fn-compat"),q(Ri,"@firebase/installations","fire-iid"),q(Ri,"@firebase/installations-compat","fire-iid-compat"),q(Ri,"@firebase/messaging","fire-fcm"),q(Ri,"@firebase/messaging-compat","fire-fcm-compat"),q(Ri,"@firebase/performance","fire-perf"),q(Ri,"@firebase/performance-compat","fire-perf-compat"),q(Ri,"@firebase/remote-config","fire-rc"),q(Ri,"@firebase/remote-config-compat","fire-rc-compat"),q(Ri,"@firebase/storage","fire-gcs"),q(Ri,"@firebase/storage-compat","fire-gcs-compat"),q(Ri,"@firebase/firestore","fire-fst"),q(Ri,"@firebase/firestore-compat","fire-fst-compat"),q(Ri,"fire-js","fire-js"),q(Ri,"firebase","fire-js-all"),Ri),Wi=new Map,Ki=new Map;function Gi(e,t){try{e.container.addComponent(t)}catch(n){qi.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Hi(e,t){e.container.addOrOverwriteComponent(t)}function Qi(e){var t=e.name;if(Ki.has(t))return qi.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ki.set(t,e);var n,r=vr(Wi.values());try{for(r.s();!(n=r.n()).done;){Gi(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Yi(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Xi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bi;Yi(e,t).clearInstance(n)}function Ji(){Ki.clear()}var $i=(q(Di={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),q(Di,"bad-app-name","Illegal App name: '{$appName}"),q(Di,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),q(Di,"app-deleted","Firebase App named '{$appName}' already deleted"),q(Di,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),q(Di,"invalid-log-argument","First argument to `onLog` must be null or a function."),q(Di,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),q(Di,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),q(Di,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),q(Di,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Di),Zi=new Vr("app","Firebase",$i),ea=function(){function e(t,n,r){var i=this;A(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new si("app",(function(){return i}),"PUBLIC"))}return R(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Zi.create("app-deleted",{appName:this._name})}}]),e}(),ta="9.8.2";function na(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Bi,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Zi.create("bad-app-name",{appName:String(i)});var a=Wi.get(i);if(a){if(Xr(e,a.options)&&Xr(r,a.config))return a;throw Zi.create("duplicate-app",{appName:i})}var o,u=new di(i),s=vr(Ki.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(h){s.e(h)}finally{s.f()}var l=new ea(e,r,u);return Wi.set(i,l),l}function ra(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bi,t=Wi.get(e);if(!t)throw Zi.create("no-app",{appName:e});return t}function ia(){return Array.from(Wi.values())}function aa(e){return oa.apply(this,arguments)}function oa(){return(oa=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Wi.has(n)){e.next=6;break}return Wi.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ua(e,t,n){var r,i=null!==(r=zi[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void qi.warn(u.join(" "))}Qi(new si("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function sa(e,t){if(null!==e&&"function"!==typeof e)throw Zi.create("invalid-log-argument");!function(e,t){var n,r=vr(pi);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=vi[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:fi[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ca(e){var t;t=e,pi.forEach((function(e){e.setLogLevel(t)}))}var la="firebase-heartbeat-store",ha=null;function fa(){return ha||(ha=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Ai(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Ai(u.result),e.oldVersion,e.newVersion,Ai(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(la)}}).catch((function(e){throw Zi.create("storage-open",{originalErrorMessage:e.message})}))),ha}function da(e){return pa.apply(this,arguments)}function pa(){return pa=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fa();case 3:return n=e.sent,e.abrupt("return",n.transaction(la).objectStore(la).get(ma(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Zi.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),pa.apply(this,arguments)}function va(e,t){return ya.apply(this,arguments)}function ya(){return ya=pr(fr().mark((function e(t,n){var r,i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fa();case 3:return r=e.sent,i=r.transaction(la,"readwrite"),a=i.objectStore(la),e.next=8,a.put(n,ma(t));case 8:return e.abrupt("return",i.done);case 11:throw e.prev=11,e.t0=e.catch(0),Zi.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),ya.apply(this,arguments)}function ma(e){return"".concat(e.name,"!").concat(e.options.appId)}var ga=function(){function e(t){var n=this;A(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new ba(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return R(e,[{key:"triggerHeartbeat",value:function(){var e=pr(fr().mark((function e(){var t,n,r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=ka(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=pr(fr().mark((function e(){var t,n,r,i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=ka(),n=_a(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Sr(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ka(){return(new Date).toISOString().substring(0,10)}function _a(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=vr(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),xa(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),xa(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var wa,ba=function(){function e(t){A(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return R(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(jr()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(qa){t(qa)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=pr(fr().mark((function e(){var t;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,da(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=pr(fr().mark((function e(t){var n,r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",va(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=pr(fr().mark((function e(t){var n,r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",va(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(N(r.heartbeats),N(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function xa(e){return Sr(JSON.stringify({version:2,heartbeats:e})).length}wa="",Qi(new si("platform-logger",(function(e){return new ji(e)}),"PRIVATE")),Qi(new si("heartbeat",(function(e){return new ga(e)}),"PRIVATE")),ua(Ui,Vi,wa),ua(Ui,Vi,"esm2017"),ua("fire-js","");var Ia="@firebase/database",Ea="0.13.0",Sa="";var Ta=function(){function e(t){A(this,e),this.domStorage_=t,this.prefix_="firebase:"}return R(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Wr(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:zr(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),Ca=function(){function e(){A(this,e),this.cache_={},this.isInMemoryStorage=!0}return R(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Gr(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),Na=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Ta(t)}}catch(n){}return new Ca},Aa=Na("localStorage"),Pa=Na("sessionStorage"),Ra=new ki("@firebase/database"),Da=function(){var e=1;return function(){return e++}}(),Oa=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,wr(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new ti;n.update(t);var r=n.digest();return Ir.encodeByteArray(r)},La=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?Wr(r):r,t+=" "}return t},Ma=null,Fa=!0,ja=function(e,t){wr(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Ra.logLevel=fi.VERBOSE,Ma=Ra.log.bind(Ra),t&&Pa.set("logging_enabled",!0)):"function"===typeof e?Ma=e:(Ma=null,Pa.remove("logging_enabled"))},Ua=function(){if(!0===Fa&&(Fa=!1,null===Ma&&!0===Pa.get("logging_enabled")&&ja(!0)),Ma){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=La.apply(null,t);Ma(r)}},Va=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Ua.apply(void 0,[e].concat(n))}},qa=function(){var e="FIREBASE INTERNAL ERROR: "+La.apply(void 0,arguments);Ra.error(e)},Ba=function(){var e="FIREBASE FATAL ERROR: ".concat(La.apply(void 0,arguments));throw Ra.error(e),new Error(e)},za=function(){var e="FIREBASE WARNING: "+La.apply(void 0,arguments);Ra.warn(e)},Wa=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Ka="[MIN_NAME]",Ga="[MAX_NAME]",Ha=function(e,t){if(e===t)return 0;if(e===Ka||t===Ga)return-1;if(t===Ka||e===Ga)return 1;var n=ro(e),r=ro(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Qa=function(e,t){return e===t?0:e<t?-1:1},Ya=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Wr(t))},Xa=function e(t){if("object"!==typeof t||null===t)return Wr(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=Wr(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Ja=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function $a(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Za=function(e){wr(!Wa(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var eo=new RegExp("^-?(0*)\\d{1,10}$"),to=-2147483648,no=2147483647,ro=function(e){if(eo.test(e)){var t=Number(e);if(t>=to&&t<=no)return t}return null},io=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw za("Exception was thrown by user callback.",e),t}),Math.floor(0))}},ao=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},oo=function(){function e(t,n){var r=this;A(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return R(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){za('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),uo=function(){function e(t,n,r){var i=this;A(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return R(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Ua("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',za(e)}}]),e}(),so=function(){function e(t){A(this,e),this.accessToken=t}return R(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();so.OWNER="owner";var co="5",lo=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ho="websocket",fo="long_polling",po=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];A(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Aa.get("host:"+t)||this._host}return R(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Aa.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function vo(e,t,n){var r;if(wr("string"===typeof t,"typeof type must == string"),wr("object"===typeof n,"typeof params must == object"),t===ho)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==fo)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return $a(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var yo=function(){function e(){A(this,e),this.counters_={}}return R(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Gr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Cr(void 0,this.counters_)}}]),e}(),mo={},go={};function ko(e){var t=e.toString();return mo[t]||(mo[t]=new yo),mo[t]}var _o=function(){function e(t){A(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return R(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&io((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),wo="start",bo="close",xo=function(){function e(t,n,r,i,a,o,u){var s=this;A(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Va(t),this.stats_=ko(n),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),vo(n,fo,e)}}return R(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new _o(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Fr()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Io((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===wo)n.id=a,n.password=o;else{if(i!==bo)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=co,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&lo.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=Wr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Er(t),r=Ja(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Fr()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=Wr(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Fr()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Io=function(){function e(t,n,r,i){if(A(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Fr())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Da(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){Ua("frame writing exception"),u.stack&&Ua(u.stack),Ua(u)}}}return R(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Fr()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Ua("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ua("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),Eo=null;"undefined"!==typeof MozWebSocket?Eo=MozWebSocket:"undefined"!==typeof WebSocket&&(Eo=WebSocket);var So=function(){function e(t,n,r,i,a,o,u){A(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Va(this.connId),this.stats_=ko(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return R(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Aa.set("previous_websocket_failure",!0);try{if(Fr()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat(co,"/").concat(Sa,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/yes-wedding",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_KAKAO_APPKEY:"//dapi.kakao.com/v2/maps/sdk.js?appkey=3dc1d032c1b57d7534b09b562373275d",REACT_APP_FIREBASE_APIKEY:"AIzaSyCmdbkjtH47HqFKrnnCg0nmuSch9bmoXp0",REACT_APP_FIREBASE_AUTHDOMAIN:"yes-wedding-29451.firebaseapp.com",REACT_APP_FIREBASE_DATABASEURL:"https://yes-wedding-29451-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_PROJECTID:"yes-wedding-29451",REACT_APP_FIREBASE_STORAGEBUCKET:"yes-wedding-29451.appspot.com",REACT_APP_FIREBASE_MESSAGINGSENDERID:"1010300792442",REACT_APP_FIREBASE_APPID:"1:1010300792442:web:d6858688466e8b838955c3"},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o})}this.mySock=new Eo(this.connURL,[],undefined)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Aa.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=zr(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(wr(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=Wr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Ja(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=co,!Fr()&&"undefined"!==typeof location&&location.hostname&&lo.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),vo(e,ho,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Eo&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Aa.isInMemoryStorage||!0===Aa.get("previous_websocket_failure")}}]),e}();So.responsesRequiredToBeHealthy=2,So.healthyTimeout=3e4;var To=function(){function e(t){A(this,e),this.initTransports_(t)}return R(e,[{key:"initTransports_",value:function(t){var n=So&&So.isAvailable(),r=n&&!So.previouslyFailed();if(t.webSocketOnly&&(n||za("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[So];else{var i,a=this.transports_=[],o=vr(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[xo,So]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();To.globalTransportInitialized_=!1;var Co=function(){function e(t,n,r,i,a,o,u,s,c,l){A(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Va("c:"+this.id+":"),this.transportManager_=new To(n),this.log_("Connection created"),this.start_()}return R(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=ao((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Ya("t",e),n=Ya("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Ya("t",e),n=Ya("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Ya("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?qa("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qa("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),co!==n&&za("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ao((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ao((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Aa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),No=function(){function e(){A(this,e)}return R(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Ao=function(){function e(t){A(this,e),this.allowedEvents_=t,this.listeners_={},wr(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return R(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=N(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){wr(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Po=function(e){O(n,e);var t=V(n);function n(){var e;return A(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Rr()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return R(n,[{key:"getInitialEvent",value:function(e){return wr("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Ao),Ro=function(){function e(t,n){if(A(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return R(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Do(){return new Ro("")}function Oo(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Lo(e){return e.pieces_.length-e.pieceNum_}function Mo(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Ro(e.pieces_,t)}function Fo(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function jo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Uo(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Ro(t,0)}function Vo(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Ro)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Ro(n,0)}function qo(e){return e.pieceNum_>=e.pieces_.length}function Bo(e,t){var n=Oo(e),r=Oo(t);if(null===n)return t;if(n===r)return Bo(Mo(e),Mo(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function zo(e,t){if(Lo(e)!==Lo(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Wo(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Lo(e)>Lo(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Ko=R((function e(t,n){A(this,e),this.errorPrefix_=n,this.parts_=jo(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=oi(this.parts_[r]);Go(this)}));function Go(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ho(e))}function Ho(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Qo=function(e){O(n,e);var t=V(n);function n(){var e,r,i;return A(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return R(n,[{key:"getInitialEvent",value:function(e){return wr("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Ao),Yo=1e3,Xo=function(e){O(n,e);var t=V(n);function n(e,r,i,a,o,u,s,c){var l;if(A(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=Va("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Yo,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Fr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Qo.getInstance().on("visible",l.onVisible_,j(l)),-1===e.host.indexOf("fblocal")&&Po.getInstance().on("online",l.onOnline_,j(l)),l}return R(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Wr(i)),wr(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new Nr,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),wr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),wr(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Kr(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Kr(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),wr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+Wr(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):qa("Unrecognized action received from server: "+Wr(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;wr(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Yo,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Yo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Yo),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=pr(fr().mark((function e(){var t,r,i,a,o,u,s,c,l,h,f,d,p,v,y=this;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,c=function(){s?s.close():(u=!0,i())},l=function(e){wr(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:c,sendRequest:l},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:f=e.sent,d=w(f,2),p=d[0],v=d[1],u?Ua("getToken() completed but was canceled"):(Ua("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,s=new Co(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){za(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&za(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Ua("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Ua("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Qr(this.interruptReasons_)&&(this.reconnectDelay_=Yo,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Xa(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Ro(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Ua("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Ua("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=vr(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=vr(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Fr()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Sa.replace(/\./g,"-")]=1,Rr()?e["framework.cordova"]=1:Lr()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Po.getInstance().currentlyOnline();return Qr(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Gr(e,"w")){var n=Hr(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();za("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(No);Xo.nextPersistentConnectionId_=0,Xo.nextConnectionId_=0;var Jo,$o=function(){function e(t,n){A(this,e),this.name=t,this.node=n}return R(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Zo=function(){function e(){A(this,e)}return R(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new $o(Ka,e),r=new $o(Ka,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return $o.MIN}}]),e}(),eu=function(e){O(n,e);var t=V(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"compare",value:function(e,t){return Ha(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw br("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return $o.MIN}},{key:"maxPost",value:function(){return new $o(Ga,Jo)}},{key:"makePost",value:function(e,t){return wr("string"===typeof e,"KeyIndex indexValue must always be a string."),new $o(e,Jo)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Jo},set:function(e){Jo=e}}]),n}(Zo),tu=new eu,nu=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;A(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return R(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),ru=function(){function e(t,n,r,i,a){A(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:ou.EMPTY_NODE,this.right=null!=a?a:ou.EMPTY_NODE}return R(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return ou.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return ou.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();ru.RED=!0,ru.BLACK=!1;var iu,au=function(){function e(){A(this,e)}return R(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new ru(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),ou=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;A(this,e),this.comparator_=t,this.root_=n}return R(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,ru.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ru.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new nu(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new nu(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new nu(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new nu(this.root_,null,this.comparator_,!0,e)}}]),e}();function uu(e,t){return Ha(e.name,t.name)}function su(e,t){return Ha(e,t)}ou.EMPTY_NODE=new au;var cu,lu,hu,fu=function(e){return"number"===typeof e?"number:"+Za(e):"string:"+e},du=function(e){if(e.isLeafNode()){var t=e.val();wr("string"===typeof t||"number"===typeof t||"object"===typeof t&&Gr(t,".sv"),"Priority must be a string or number.")}else wr(e===iu||e.isEmpty(),"priority of unexpected type.");wr(e===iu||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},pu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;A(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,wr(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),du(this.priorityNode_)}return R(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return qo(t)?this:".priority"===Oo(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Oo(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(wr(".priority"!==r||1===Lo(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Mo(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+fu(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Za(this.value_):this.value_,this.lazyHash_=Oa(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(wr(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return wr(i>=0,"Unknown leaf type: "+n),wr(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return cu},set:function(e){cu=e}}]),e}();pu.VALUE_TYPE_ORDER=["object","boolean","number","string"];var vu,yu,mu=function(e){O(n,e);var t=V(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Ha(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return $o.MIN}},{key:"maxPost",value:function(){return new $o(Ga,new pu("[PRIORITY-POST]",hu))}},{key:"makePost",value:function(e,t){var n=lu(e);return new $o(t,new pu("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Zo),gu=new mu,ku=Math.log(2),_u=function(){function e(t){A(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/ku,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return R(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),wu=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new ru(o,a.node,ru.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new ru(o,a.node,ru.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],h=n?n(l):l;s(new ru(h,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?u(h,ru.BLACK):(u(h,ru.BLACK),u(h,ru.RED))}return a}(new _u(e.length));return new ou(r||t,a)},bu={},xu=function(){function e(t,n){A(this,e),this.indexes_=t,this.indexSet_=n}return R(e,[{key:"get",value:function(e){var t=Hr(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ou?t:null}},{key:"hasIndex",value:function(e){return Gr(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){wr(t!==tu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator($o.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?wu(i,t.getCompare()):bu;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Yr(this.indexes_,(function(e,i){var a=Hr(r.indexSet_,i);if(wr(a,"Missing index implementation for "+i),e===bu){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator($o.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),wu(o,a.getCompare())}return bu}var c=n.get(t.name),l=e;return c&&(l=l.remove(new $o(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Yr(this.indexes_,(function(e){if(e===bu)return e;var r=n.get(t.name);return r?e.remove(new $o(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return wr(bu&&gu,"ChildrenNode.ts has not been loaded"),vu=vu||new e({".priority":bu},{".priority":gu})}}]),e}(),Iu=function(){function e(t,n,r){A(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&du(this.priorityNode_),this.children_.isEmpty()&&wr(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return R(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||yu}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?yu:t}},{key:"getChild",value:function(e){var t=Oo(e);return null===t?this:this.getImmediateChild(t).getChild(Mo(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(wr(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new $o(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?yu:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Oo(e);if(null===n)return t;wr(".priority"!==Oo(e)||1===Lo(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Mo(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(gu,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+fu(this.getPriority().val())+":"),this.forEachChild(gu,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Oa(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new $o(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new $o(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new $o(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,$o.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,$o.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Eu?-1:0}},{key:"withIndex",value:function(t){if(t===tu||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===tu||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(gu),r=t.getIterator(gu),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===tu?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return yu||(yu=new e(new ou(su),null,xu.Default))}}]),e}();Iu.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Eu=new(function(e){O(n,e);var t=V(n);function n(){return A(this,n),t.call(this,new ou(su),Iu.EMPTY_NODE,xu.Default)}return R(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return Iu.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(Iu));Object.defineProperties($o,{MIN:{value:new $o(Ka,Iu.EMPTY_NODE)},MAX:{value:new $o(Ga,Eu)}}),eu.__EMPTY_NODE=Iu.EMPTY_NODE,pu.__childrenNodeConstructor=Iu,iu=Eu,function(e){hu=e}(Eu);function Su(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Iu.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),wr(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new pu(n,Su(t))}if(e instanceof Array){var r=Iu.EMPTY_NODE;return $a(e,(function(t,n){if(Gr(e,t)&&"."!==t.substring(0,1)){var i=Su(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(Su(t))}var i=[],a=!1,o=e;if($a(o,(function(e,t){if("."!==e.substring(0,1)){var n=Su(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new $o(e,n)))}})),0===i.length)return Iu.EMPTY_NODE;var u=wu(i,uu,(function(e){return e.name}),su);if(a){var s=wu(i,gu.getCompare());return new Iu(u,Su(t),new xu({".priority":s},{".priority":gu}))}return new Iu(u,Su(t),xu.Default)}!function(e){lu=e}(Su);var Tu=function(e){O(n,e);var t=V(n);function n(e){var r;return A(this,n),(r=t.call(this)).indexPath_=e,wr(!qo(e)&&".priority"!==Oo(e),"Can't create PathIndex with empty path or .priority key"),r}return R(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Ha(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Su(e),r=Iu.EMPTY_NODE.updateChild(this.indexPath_,n);return new $o(t,r)}},{key:"maxPost",value:function(){var e=Iu.EMPTY_NODE.updateChild(this.indexPath_,Eu);return new $o(Ga,e)}},{key:"toString",value:function(){return jo(this.indexPath_,0).join("/")}}]),n}(Zo),Cu=function(e){O(n,e);var t=V(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Ha(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return $o.MIN}},{key:"maxPost",value:function(){return $o.MAX}},{key:"makePost",value:function(e,t){var n=Su(e);return new $o(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Zo),Nu=new Cu,Au="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Pu=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=Au.charAt(n%64),n=Math.floor(n/64);wr(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=Au.charAt(t[r]);return wr(20===o.length,"nextPushId: Length should be 20."),o}}();function Ru(e){return{type:"value",snapshotNode:e}}function Du(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ou(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Lu(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Mu=function(){function e(t){A(this,e),this.index_=t}return R(e,[{key:"updateChild",value:function(e,t,n,r,i,a){wr(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Ou(t,o)):wr(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(Du(t,n)):a.trackChildChange(Lu(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(gu,(function(e,r){t.hasChild(e)||n.trackChildChange(Ou(e,r))})),t.isLeafNode()||t.forEachChild(gu,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Lu(t,r,i))}else n.trackChildChange(Du(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?Iu.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),Fu=function(){function e(t){A(this,e),this.indexedFilter_=new Mu(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return R(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new $o(t,n))||(n=Iu.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=Iu.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(Iu.EMPTY_NODE);var i=this;return t.forEachChild(gu,(function(e,t){i.matches(new $o(e,t))||(r=r.updateImmediateChild(e,Iu.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),ju=function(){function e(t){A(this,e),this.rangedFilter_=new Fu(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return R(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new $o(t,n))||(n=Iu.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=Iu.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=Iu.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var u,s,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(Iu.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else l=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var f=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(u,p)<=0&&(d=!0),d&&f<this.limit_&&c(p,s)<=0?f++:r=r.updateImmediateChild(p.name,Iu.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;wr(u.numChildren()===this.limit_,"");var s=new $o(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var h=u.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Lu(t,n,h)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Ou(t,h));var p=u.updateImmediateChild(t,Iu.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Du(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(Ou(c.name,c.node)),i.trackChildChange(Du(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,Iu.EMPTY_NODE)):e}}]),e}(),Uu=function(){function e(){A(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=gu}return R(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return wr(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return wr(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ka}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return wr(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return wr(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ga}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return wr(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===gu}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Vu(e){var t,n={};return e.isDefault()||(e.index_===gu?t="$priority":e.index_===Nu?t="$value":e.index_===tu?t="$key":(wr(e.index_ instanceof Tu,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Wr(t),e.startSet_&&(n.startAt=Wr(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+Wr(e.indexStartName_))),e.endSet_&&(n.endAt=Wr(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+Wr(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function qu(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==gu&&(t.i=e.index_.toString()),t}var Bu=function(e){O(n,e);var t=V(n);function n(e,r,i,a){var o;return A(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=Va("p:rest:"),o.listens_={},o}return R(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=Vu(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Hr(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Vu(e._queryParams),r=e._path.toString(),i=new Nr;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=w(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+$r(n);t.log_("Sending REST request for "+s);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+s+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=zr(c.responseText)}catch(n){za("Failed to parse JSON response for "+s+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&za("Got unsuccessful REST response for "+s+" Status: "+c.status),r(c.status);r=null}},c.open("GET",s,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(wr(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(No),zu=function(){function e(){A(this,e),this.rootNode_=Iu.EMPTY_NODE}return R(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Wu(){return{value:null,children:new Map}}function Ku(e,t,n){if(qo(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Oo(t);e.children.has(r)||e.children.set(r,Wu()),Ku(e.children.get(r),t=Mo(t),n)}}function Gu(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Gu(r,new Ro(t.toString()+"/"+e),n)}))}var Hu,Qu=function(){function e(t){A(this,e),this.collection_=t,this.last_=null}return R(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&$a(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Yu=function(){function e(t,n){A(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Qu(t);var r=1e4+2e4*Math.random();ao(this.reportStats_.bind(this),Math.floor(r))}return R(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;$a(t,(function(t,i){i>0&&Gr(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),ao(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Xu(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Hu||(Hu={}));var Ju,$u=function(){function e(t,n,r){A(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Hu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return R(e,[{key:"operationForChild",value:function(t){if(qo(this.path)){if(null!=this.affectedTree.value)return wr(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Ro(t));return new e(Do(),n,this.revert)}return wr(Oo(this.path)===t,"operationForChild called for unrelated child."),new e(Mo(this.path),this.affectedTree,this.revert)}}]),e}(),Zu=function(){function e(t,n,r){A(this,e),this.source=t,this.path=n,this.snap=r,this.type=Hu.OVERWRITE}return R(e,[{key:"operationForChild",value:function(t){return qo(this.path)?new e(this.source,Do(),this.snap.getImmediateChild(t)):new e(this.source,Mo(this.path),this.snap)}}]),e}(),es=function(){function e(t,n,r){A(this,e),this.source=t,this.path=n,this.children=r,this.type=Hu.MERGE}return R(e,[{key:"operationForChild",value:function(t){if(qo(this.path)){var n=this.children.subtree(new Ro(t));return n.isEmpty()?null:n.value?new Zu(this.source,Do(),n.value):new e(this.source,Do(),n)}return wr(Oo(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Mo(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),ts=function(){function e(t,n,r){A(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return R(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(qo(e))return this.isFullyInitialized()&&!this.filtered_;var t=Oo(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),ns=R((function e(t){A(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function rs(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw br("Should only compare child_ events.");var r=new $o(t.childName,t.snapshotNode),i=new $o(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function is(e,t){return{eventCache:e,serverCache:t}}function as(e,t,n,r){return is(new ts(t,n,r),e.serverCache)}function os(e,t,n,r){return is(e.eventCache,new ts(t,n,r))}function us(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ss(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var cs=function(){return Ju||(Ju=new ou(Qa)),Ju},ls=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cs();A(this,e),this.value=t,this.children=n}return R(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Do(),value:this.value};if(qo(e))return null;var n=Oo(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Mo(e),t);return null!=i?{path:Vo(new Ro(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(qo(t))return this;var n=Oo(t),r=this.children.get(n);return null!==r?r.subtree(Mo(t)):new e(null)}},{key:"set",value:function(t,n){if(qo(t))return new e(n,this.children);var r=Oo(t),i=(this.children.get(r)||new e(null)).set(Mo(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(qo(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Oo(t),r=this.children.get(n);if(r){var i,a=r.remove(Mo(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(qo(e))return this.value;var t=Oo(e),n=this.children.get(t);return n?n.get(Mo(e)):null}},{key:"setTree",value:function(t,n){if(qo(t))return n;var r,i=Oo(t),a=(this.children.get(i)||new e(null)).setTree(Mo(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Do(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Vo(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Do(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(qo(e))return null;var i=Oo(e),a=this.children.get(i);return a?a.findOnPath_(Mo(e),Vo(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Do(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(qo(t))return this;this.value&&r(n,this.value);var i=Oo(t),a=this.children.get(i);return a?a.foreachOnPath_(Mo(t),Vo(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Do(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Vo(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return $a(t,(function(e,t){n=n.set(new Ro(e),t)})),n}}]),e}(),hs=function(){function e(t){A(this,e),this.writeTree_=t}return R(e,null,[{key:"empty",value:function(){return new e(new ls(null))}}]),e}();function fs(e,t,n){if(qo(t))return new hs(new ls(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Bo(i,t);return a=a.updateChild(o,n),new hs(e.writeTree_.set(i,a))}var u=new ls(n),s=e.writeTree_.setTree(t,u);return new hs(s)}function ds(e,t,n){var r=e;return $a(n,(function(e,n){r=fs(r,Vo(t,e),n)})),r}function ps(e,t){if(qo(t))return hs.empty();var n=e.writeTree_.setTree(t,new ls(null));return new hs(n)}function vs(e,t){return null!=ys(e,t)}function ys(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Bo(n.path,t)):null}function ms(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(gu,(function(e,n){t.push(new $o(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new $o(e,n.value))})),t}function gs(e,t){if(qo(t))return e;var n=ys(e,t);return new hs(null!=n?new ls(n):e.writeTree_.subtree(t))}function ks(e){return e.writeTree_.isEmpty()}function _s(e,t){return ws(Do(),e.writeTree_,t)}function ws(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(wr(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=ws(Vo(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Vo(e,".priority"),r)),n}function bs(e,t){return Ms(t,e)}function xs(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function Is(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));wr(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&Es(u,r.path)?i=!1:Wo(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=Ts(e.allWrites,Ss,Do()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=ps(e.visibleWrites,r.path):$a(r.children,(function(t){e.visibleWrites=ps(e.visibleWrites,Vo(r.path,t))}));return!0}return!1}function Es(e,t){if(e.snap)return Wo(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Wo(Vo(e.path,n),t))return!0;return!1}function Ss(e){return e.visible}function Ts(e,t,n){for(var r=hs.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)Wo(n,o)?r=fs(r,u=Bo(n,o),a.snap):Wo(o,n)&&(u=Bo(o,n),r=fs(r,Do(),a.snap.getChild(u)));else{if(!a.children)throw br("WriteRecord should have .snap or .children");if(Wo(n,o))r=ds(r,u=Bo(n,o),a.children);else if(Wo(o,n))if(qo(u=Bo(o,n)))r=ds(r,Do(),a.children);else{var s=Hr(a.children,Oo(u));if(s){var c=s.getChild(Mo(u));r=fs(r,Do(),c)}}}}}return r}function Cs(e,t,n,r,i){if(r||i){var a=gs(e.visibleWrites,t);if(!i&&ks(a))return n;if(i||null!=n||vs(a,Do())){return _s(Ts(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Wo(e.path,t)||Wo(t,e.path))}),t),n||Iu.EMPTY_NODE)}return null}var o=ys(e.visibleWrites,t);if(null!=o)return o;var u=gs(e.visibleWrites,t);return ks(u)?n:null!=n||vs(u,Do())?_s(u,n||Iu.EMPTY_NODE):null}function Ns(e,t,n,r){return Cs(e.writeTree,e.treePath,t,n,r)}function As(e,t){return function(e,t,n){var r=Iu.EMPTY_NODE,i=ys(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(gu,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=gs(e.visibleWrites,t);return n.forEachChild(gu,(function(e,t){var n=_s(gs(a,new Ro(e)),t);r=r.updateImmediateChild(e,n)})),ms(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return ms(gs(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Ps(e,t,n,r){return function(e,t,n,r,i){wr(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Vo(t,n);if(vs(e.visibleWrites,a))return null;var o=gs(e.visibleWrites,a);return ks(o)?i.getChild(n):_s(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Rs(e,t){return function(e,t){return ys(e.visibleWrites,t)}(e.writeTree,Vo(e.treePath,t))}function Ds(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=gs(e.visibleWrites,t),c=ys(s,Do());if(null!=c)u=c;else{if(null==n)return[];u=_s(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function Os(e,t,n){return function(e,t,n,r){var i=Vo(t,n),a=ys(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?_s(gs(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Ls(e,t){return Ms(Vo(e.treePath,t),e.writeTree)}function Ms(e,t){return{treePath:e,writeTree:t}}var Fs=function(){function e(){A(this,e),this.changeMap=new Map}return R(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;wr("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),wr(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Lu(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Ou(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Du(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw br("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Lu(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),js=new(function(){function e(){A(this,e)}return R(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Us=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;A(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return R(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new ts(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Os(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ss(this.viewCache_),i=Ds(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function Vs(e,t,n,r,i){var a,o,u=new Fs;if(n.type===Hu.OVERWRITE){var s=n;s.source.fromUser?a=zs(e,t,s.path,s.snap,r,i,u):(wr(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!qo(s.path),a=Bs(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===Hu.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=Vo(n,r);Ws(t,Oo(c))&&(u=zs(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=Vo(n,r);Ws(t,Oo(c))||(u=zs(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(wr(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=Gs(e,t,c.path,c.children,r,i,o,u))}else if(n.type===Hu.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=Rs(r,n))return t;var u,s=new Us(r,t,i),c=t.eventCache.getNode();if(qo(n)||".priority"===Oo(n)){var l;if(t.serverCache.isFullyInitialized())l=Ns(r,ss(t));else{var h=t.serverCache.getNode();wr(h instanceof Iu,"serverChildren would be complete if leaf node"),l=As(r,h)}u=e.filter.updateFullNode(c,l,a)}else{var f=Oo(n),d=Os(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(u=null!=d?e.filter.updateChild(c,f,d,Mo(n),s,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,Iu.EMPTY_NODE,Mo(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Ns(r,ss(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=Rs(r,Do()),as(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=Rs(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(qo(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return Bs(e,t,n,s.getNode().getChild(n),i,a,u,o);if(qo(n)){var c=new ls(null);return s.getNode().forEachChild(tu,(function(e,t){c=c.set(new Ro(e),t)})),Gs(e,t,n,c,i,a,u,o)}return t}var l=new ls(null);return r.foreach((function(e,t){var r=Vo(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),Gs(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==Hu.LISTEN_COMPLETE)throw br("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=os(t,a.getNode(),a.isFullyInitialized()||qo(n),a.isFiltered());return qs(e,o,n,r,js,i)}(e,t,n.path,r,u)}var h=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=us(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Ru(us(t)))}}(t,a,h),{viewCache:a,changes:h}}function qs(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=Rs(r,n))return t;if(qo(n))if(wr(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=ss(t),l=As(r,c instanceof Iu?c:Iu.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=Ns(r,ss(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=Oo(n);if(".priority"===f){wr(1===Lo(n),"Can't have a priority with additional path components");var d=s.getNode(),p=Ps(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=Mo(n);if(s.isCompleteForChild(f)){u=t.serverCache.getNode();var m=Ps(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(f).updateChild(y,m):s.getNode().getImmediateChild(f)}else v=Os(r,f,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),f,v,y,i,a):s.getNode()}}return as(t,o,s.isFullyInitialized()||qo(n),e.filter.filtersNodes())}function Bs(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(qo(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),h,null)}else{var f=Oo(n);if(!c.isCompleteForPath(n)&&Lo(n)>1)return t;var d=Mo(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);s=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,js,null)}var v=os(t,s,c.isFullyInitialized()||qo(n),l.filtersNodes());return qs(e,v,n,i,new Us(i,v,a),u)}function zs(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new Us(i,t,a);if(qo(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=as(t,s,!0,e.filter.filtersNodes());else{var h=Oo(n);if(".priority"===h)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=as(t,s,c.isFullyInitialized(),c.isFiltered());else{var f,d=Mo(n),p=c.getNode().getImmediateChild(h);if(qo(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===Fo(d)&&v.getChild(Uo(d)).isEmpty()?v:v.updateChild(d,r):Iu.EMPTY_NODE}if(p.equals(f))u=t;else u=as(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function Ws(e,t){return e.eventCache.isCompleteForChild(t)}function Ks(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Gs(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=qo(n)?r:new ls(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=Ks(0,t.serverCache.getNode().getImmediateChild(n),r);c=Bs(e,c,new Ro(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!s){var h=Ks(0,t.serverCache.getNode().getImmediateChild(n),r);c=Bs(e,c,new Ro(n),h,i,a,o,u)}})),c}var Hs,Qs=function(){function e(t,n){A(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new Mu(i.getIndex()),o=(r=i).loadsAllData()?new Mu(r.getIndex()):r.hasLimit()?new ju(r):new Fu(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(Iu.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(Iu.EMPTY_NODE,s.getNode(),null),h=new ts(c,u.isFullyInitialized(),a.filtersNodes()),f=new ts(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=is(f,h),this.eventGenerator_=new ns(this.query_)}return R(e,[{key:"query",get:function(){return this.query_}}]),e}();function Ys(e,t){var n=ss(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!qo(t)&&!n.getImmediateChild(Oo(t)).isEmpty())?n.getChild(t):null}function Xs(e,t,n,r){t.type===Hu.MERGE&&null!==t.source.queryId&&(wr(ss(e.viewCache_),"We should always have a full cache before handling merges"),wr(us(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=Vs(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,wr(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),wr(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),wr(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,Js(e,u.changes,u.viewCache.eventCache.getNode(),null)}function Js(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),rs(e,i,"child_removed",t,r,n),rs(e,i,"child_added",t,r,n),rs(e,i,"child_moved",a,r,n),rs(e,i,"child_changed",t,r,n),rs(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var $s,Zs=R((function e(){A(this,e),this.views=new Map}));function ec(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return wr(null!=a,"SyncTree gave us an op for an invalid query."),Xs(a,t,n,r)}var o,u=[],s=vr(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(Xs(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function tc(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=Ns(n,i?r:null),s=!1;u?s=!0:r instanceof Iu?(u=As(n,r),s=!1):(u=Iu.EMPTY_NODE,s=!1);var c=is(new ts(u,s,!1),new ts(r,i,!1));return new Qs(t,c)}return o}function nc(e,t){var n,r=null,i=vr(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Ys(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}var rc=R((function e(t){A(this,e),this.listenProvider_=t,this.syncPointTree_=new ls(null),this.pendingWriteTree_={visibleWrites:hs.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function ic(e,t,n,r,i){return function(e,t,n,r,i){wr(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=fs(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?cc(e,new Zu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function ac(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=xs(e.pendingWriteTree_,t),i=Is(e.pendingWriteTree_,t);if(i){var a=new ls(null);return null!=r.snap?a=a.set(Do(),!0):$a(r.children,(function(e){a=a.set(new Ro(e),!0)})),cc(e,new $u(r.path,a,n))}return[]}function oc(e,t,n){return cc(e,new Zu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function uc(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=nc(n,Bo(e,t));if(r)return r}));return Cs(r,t,i,n,!0)}function sc(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=Bo(e,n);r=r||nc(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||nc(i,Do()):(i=new Zs,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new ts(r,!0,!1):null;return function(e){return us(e.viewCache_)}(tc(i,t,bs(e.pendingWriteTree_,t._path),a?o.getNode():Iu.EMPTY_NODE,a))}function cc(e,t){return lc(t,e.syncPointTree_,null,bs(e.pendingWriteTree_,Do()))}function lc(e,t,n,r){if(qo(e.path))return hc(e,t,n,r);var i=t.get(Do());null==n&&null!=i&&(n=nc(i,Do()));var a=[],o=Oo(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=Ls(r,o);a=a.concat(lc(u,s,c,l))}return i&&(a=a.concat(ec(i,e,r,n))),a}function hc(e,t,n,r){var i=t.get(Do());null==n&&null!=i&&(n=nc(i,Do()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=Ls(r,t),s=e.operationForChild(t);s&&(a=a.concat(hc(s,i,o,u)))})),i&&(a=a.concat(ec(i,e,r,n))),a}function fc(e,t){return e.tagToQueryMap.get(t)}function dc(e){var t=e.indexOf("$");return wr(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Ro(e.substr(0,t))}}function pc(e,t,n){var r=e.syncPointTree_.get(t);return wr(r,"Missing sync point for query tag that we're tracking"),ec(r,n,bs(e.pendingWriteTree_,t),null)}var vc=function(){function e(t){A(this,e),this.node_=t}return R(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),yc=function(){function e(t,n){A(this,e),this.syncTree_=t,this.path_=n}return R(e,[{key:"getImmediateChild",value:function(t){var n=Vo(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return uc(this.syncTree_,this.path_)}}]),e}(),mc=function(e,t,n){return e&&"object"===typeof e?(wr(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?gc(e[".sv"],t,n):"object"===typeof e[".sv"]?kc(e[".sv"],t):void wr(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},gc=function(e,t,n){if("timestamp"===e)return n.timestamp;wr(!1,"Unexpected server value: "+e)},kc=function(e,t,n){e.hasOwnProperty("increment")||wr(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&wr(!1,"Unexpected increment value: "+r);var i=t.node();if(wr(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},_c=function(e,t,n,r){return bc(t,new yc(n,e),r)},wc=function(e,t,n){return bc(e,new vc(t),n)};function bc(e,t,n){var r,i=e.getPriority().val(),a=mc(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=mc(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new pu(u,Su(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new pu(a))),s.forEachChild(gu,(function(e,i){var a=bc(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var xc=R((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};A(this,e),this.name=t,this.parent=n,this.node=r}));function Ic(e,t){for(var n=t instanceof Ro?t:new Ro(t),r=e,i=Oo(n);null!==i;){var a=Hr(r.node.children,i)||{children:{},childCount:0};r=new xc(i,r,a),i=Oo(n=Mo(n))}return r}function Ec(e){return e.node.value}function Sc(e,t){e.node.value=t,Pc(e)}function Tc(e){return e.node.childCount>0}function Cc(e,t){$a(e.node.children,(function(n,r){t(new xc(n,e,r))}))}function Nc(e,t,n,r){n&&!r&&t(e),Cc(e,(function(e){Nc(e,t,!0,r)})),n&&r&&t(e)}function Ac(e){return new Ro(null===e.parent?e.name:Ac(e.parent)+"/"+e.name)}function Pc(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Ec(e)&&!Tc(e)}(n),i=Gr(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Pc(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Pc(e))}(e.parent,e.name,e)}var Rc=/[\[\].#$\/\u0000-\u001F\u007F]/,Dc=/[\[\].#$\u0000-\u001F\u007F]/,Oc=10485760,Lc=function(e){return"string"===typeof e&&0!==e.length&&!Rc.test(e)},Mc=function(e){return"string"===typeof e&&0!==e.length&&!Dc.test(e)},Fc=function(e,t,n,r){r&&void 0===t||jc(ai(e,"value"),t,n)},jc=function e(t,n,r){var i=r instanceof Ro?new Ko(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Ho(i));if("function"===typeof n)throw new Error(t+"contains a function "+Ho(i)+" with contents = "+n.toString());if(Wa(n))throw new Error(t+"contains "+n.toString()+" "+Ho(i));if("string"===typeof n&&n.length>Oc/3&&oi(n)>Oc)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+Ho(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if($a(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!Lc(n)))throw new Error(t+" contains an invalid key ("+n+") "+Ho(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=oi(t),Go(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=oi(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Ho(i)+" in addition to actual children.")}},Uc=function(e,t,n,r){if((!r||void 0!==n)&&!Mc(n))throw new Error(ai(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Vc=function(e,t){if(".info"===Oo(t))throw new Error(e+" failed = Can't modify data under /.info/")},qc=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Lc(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Mc(e)}(n))throw new Error(ai(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Bc=R((function e(){A(this,e),this.eventLists_=[],this.recursionDepth_=0}));function zc(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||zo(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Wc(e,t,n){zc(e,n),Gc(e,(function(e){return zo(e,t)}))}function Kc(e,t,n){zc(e,n),Gc(e,(function(e){return Wo(e,t)||Wo(t,e)}))}function Gc(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Hc(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Hc(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Ma&&Ua("event: "+n.toString()),io(r)}}}var Qc="repo_interrupt",Yc=function(){function e(t,n,r,i){A(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Bc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Wu(),this.transactionQueueTree_=new xc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return R(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function Xc(e,t,n){if(e.stats_=ko(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Bu(e.repoInfo_,(function(t,n,r,i){Zc(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return el(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Wr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Xo(e.repoInfo_,t,(function(t,n,r,i){Zc(e,t,n,r,i)}),(function(t){el(e,t)}),(function(t){!function(e,t){$a(t,(function(t,n){tl(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return go[n]||(go[n]=t()),go[n]}(e.repoInfo_,(function(){return new Yu(e.stats_,e.server_)})),e.infoData_=new zu,e.infoSyncTree_=new rc({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=oc(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),tl(e,"connected",!1),e.serverSyncTree_=new rc({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);Kc(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function Jc(e){var t=e.infoData_.getNode(new Ro(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function $c(e){return(t=(t={timestamp:Jc(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Zc(e,t,n,r,i){e.dataUpdateCount++;var a=new Ro(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=Yr(n,(function(e){return Su(e)}));o=function(e,t,n,r){var i=fc(e,r);if(i){var a=dc(i),o=a.path,u=a.queryId,s=Bo(o,t),c=ls.fromObject(n);return pc(e,o,new es(Xu(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=Su(n);o=function(e,t,n,r){var i=fc(e,r);if(null!=i){var a=dc(i),o=a.path,u=a.queryId,s=Bo(o,t);return pc(e,o,new Zu(Xu(u),s,n))}return[]}(e.serverSyncTree_,a,s,i)}else if(r){var c=Yr(n,(function(e){return Su(e)}));o=function(e,t,n){var r=ls.fromObject(n);return cc(e,new es({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=Su(n);o=oc(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=ll(e,a)),Kc(e.eventQueue_,h,o)}function el(e,t){tl(e,"connected",t),!1===t&&function(e){al(e,"onDisconnectEvents");var t=$c(e),n=Wu();Gu(e.onDisconnect_,Do(),(function(r,i){var a=_c(r,i,e.serverSyncTree_,t);Ku(n,r,a)}));var r=[];Gu(n,Do(),(function(t,n){r=r.concat(oc(e.serverSyncTree_,t,n));var i=vl(e,t);ll(e,i)})),e.onDisconnect_=Wu(),Kc(e.eventQueue_,Do(),r)}(e)}function tl(e,t,n){var r=new Ro("/.info/"+t),i=Su(n);e.infoData_.updateSnapshot(r,i);var a=oc(e.infoSyncTree_,r,i);Kc(e.eventQueue_,r,a)}function nl(e){return e.nextWriteId_++}function rl(e,t,n,r,i){al(e,"set",{path:t.toString(),value:n,priority:r});var a=$c(e),o=Su(n,r),u=uc(e.serverSyncTree_,t),s=wc(o,u,a),c=nl(e),l=ic(e.serverSyncTree_,t,s,c,!0);zc(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||za("set at "+t+" failed: "+n);var o=ac(e.serverSyncTree_,c,!a);Kc(e.eventQueue_,t,o),ol(e,i,n,r)}));var h=vl(e,t);ll(e,h),Kc(e.eventQueue_,h,[])}function il(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Qc)}function al(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Ua.apply(void 0,[t].concat(r))}function ol(e,t,n,r){t&&io((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function ul(e,t,n){return uc(e.serverSyncTree_,t,n)||Iu.EMPTY_NODE}function sl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||pl(e,t),Ec(t)){var n=fl(e,t);wr(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&cl(e,Ac(t),n)}else Tc(t)&&Cc(t,(function(t){sl(e,t)}))}function cl(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=ul(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];wr(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=Bo(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){al(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(ac(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);pl(e,Ic(e.transactionQueueTree_,t)),sl(e,e.transactionQueueTree_),Kc(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)io(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{za("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}ll(e,t)}}),o)}function ll(e,t){var n=hl(e,t),r=Ac(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s=t[a],c=Bo(n,s.path),l=!1,h=void 0;if(wr(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,h=s.abortReason,i=i.concat(ac(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)l=!0,h="maxretry",i=i.concat(ac(e.serverSyncTree_,s.currentWriteId,!0));else{var f=ul(e,s.path,o);s.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){jc("transaction failed: Data returned ",d,s.path);var p=Su(d);"object"===typeof d&&null!=d&&Gr(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=s.currentWriteId,y=$c(e),m=wc(p,f,y);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=m,s.currentWriteId=nl(e),o.splice(o.indexOf(v),1),i=(i=i.concat(ic(e.serverSyncTree_,s.path,m,s.currentWriteId,s.applyLocally))).concat(ac(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(ac(e.serverSyncTree_,s.currentWriteId,!0))}Kc(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},s=0;s<t.length;s++)u(s);pl(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)io(r[c]);sl(e,e.transactionQueueTree_)}(e,fl(e,n),r),r}function hl(e,t){var n,r=e.transactionQueueTree_;for(n=Oo(t);null!==n&&void 0===Ec(r);)r=Ic(r,n),n=Oo(t=Mo(t));return r}function fl(e,t){var n=[];return dl(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function dl(e,t,n){var r=Ec(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Cc(t,(function(t){dl(e,t,n)}))}function pl(e,t){var n=Ec(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Sc(t,n.length>0?n:void 0)}Cc(t,(function(t){pl(e,t)}))}function vl(e,t){var n=Ac(hl(e,t)),r=Ic(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){yl(e,t)})),yl(e,r),Nc(r,(function(t){yl(e,t)})),n}function yl(e,t){var n=Ec(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(wr(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(wr(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(ac(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Sc(t,void 0):n.length=a+1,Kc(e.eventQueue_,Ac(t),i);for(var u=0;u<r.length;u++)io(r[u])}}var ml=function(e,t){var n=gl(e),r=n.namespace;"firebase.com"===n.domain&&Ba(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Ba("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&za("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new po(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Ro(n.pathString)}},gl=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=vr(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):za("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},kl=function(){function e(t,n,r,i){A(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return R(e,[{key:"key",get:function(){return qo(this._path)?null:Fo(this._path)}},{key:"ref",get:function(){return new _l(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=qu(this._queryParams),t=Xa(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return qu(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=ui(t))instanceof e))return!1;var n=this._repo===t._repo,r=zo(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var _l=function(e){O(n,e);var t=V(n);function n(e,r){return A(this,n),t.call(this,e,r,new Uu,!1)}return R(n,[{key:"parent",get:function(){var e=Uo(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(kl),wl=function(){function e(t,n,r){A(this,e),this._node=t,this.ref=n,this._index=r}return R(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new Ro(t),r=xl(this.ref,t);return new e(this._node.getChild(n),r,gu)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,xl(n.ref,r),gu))}))}},{key:"hasChild",value:function(e){var t=new Ro(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function bl(e,t){return(e=ui(e))._checkNotDeleted("ref"),void 0!==t?xl(e._root,t):e._root}function xl(e,t){var n,r,i,a;return null===Oo((e=ui(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Uc(n,r,i,a)):Uc("child","path",t,!1),new _l(e._repo,Vo(e._path,t))}function Il(e,t){e=ui(e),Vc("set",e._path),Fc("set",t,e._path,!1);var n=new Nr;return rl(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function El(e){return function(e,t){var n=sc(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=Su(n).withIndex(t._queryParams.getIndex()),i=oc(e.serverSyncTree_,t._path,r);return Wc(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return al(e,"get for query "+Wr(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=ui(e))._repo,e).then((function(t){return new wl(t,new _l(e._repo,e._path),e._queryParams.getIndex())}))}!function(e){wr(!Hs,"__referenceConstructor has already been defined"),Hs=e}(_l),function(e){wr(!$s,"__referenceConstructor has already been defined"),$s=e}(_l);var Sl={},Tl=!1;function Cl(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Ba("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ua("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=ml(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/yes-wedding",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_KAKAO_APPKEY:"//dapi.kakao.com/v2/maps/sdk.js?appkey=3dc1d032c1b57d7534b09b562373275d",REACT_APP_FIREBASE_APIKEY:"AIzaSyCmdbkjtH47HqFKrnnCg0nmuSch9bmoXp0",REACT_APP_FIREBASE_AUTHDOMAIN:"yes-wedding-29451.firebaseapp.com",REACT_APP_FIREBASE_DATABASEURL:"https://yes-wedding-29451-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_PROJECTID:"yes-wedding-29451",REACT_APP_FIREBASE_STORAGEBUCKET:"yes-wedding-29451.appspot.com",REACT_APP_FIREBASE_MESSAGINGSENDERID:"1010300792442",REACT_APP_FIREBASE_APPID:"1:1010300792442:web:d6858688466e8b838955c3"}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=ml(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new so(so.OWNER):new uo(e.name,e.options,t);qc("Invalid Firebase Database URL",u),qo(u.path)||Ba("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=Sl[t.name];i||(i={},Sl[t.name]=i);var a=i[e.toURLString()];a&&Ba("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new Yc(e,Tl,n,r),i[e.toURLString()]=a,a}(s,e,l,new oo(e.name,n));return new Nl(h,e)}var Nl=function(){function e(t,n){A(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return R(e,[{key:"_repo",get:function(){return this._instanceStarted||(Xc(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new _l(this._repo,Do())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=Sl[t];n&&n[e.key]===e||Ba("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),il(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Ba("Cannot call "+e+" on a deleted database.")}}]),e}();function Al(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ra(),t=arguments.length>1?arguments[1]:void 0;return Yi(e,"database").getImmediate({identifier:t})}Xo.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Xo.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){Sa=e}(ta),Qi(new si("database",(function(e,t){var n=t.instanceIdentifier;return Cl(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),ua(Ia,Ea,e),ua(Ia,Ea,"esm2017")}();var Pl,Rl="GuestCard_card__o6u+X",Dl="GuestCard_card__cont__P2tmn",Ol="GuestCard_card__cont--message__Wpd34",Ll="GuestCard_card__cont--time__IjNy6",Ml=function(e){var r=e.guestList.map((function(e){return(0,v.jsxs)($n,{className:Rl,children:[(0,v.jsx)("img",{src:n(981),alt:"paper card"}),(0,v.jsxs)("div",{className:Dl,children:[(0,v.jsx)("div",{children:e.name}),(0,v.jsx)("div",{className:Ol,children:e.message}),(0,v.jsx)("div",{className:Ll,children:e.time})]})]},e.id)}));return(0,v.jsx)(t.Fragment,{children:(0,v.jsx)(Zn,{dataSplide:'{ "type":"loop", "perPage":2, "perMove":2, "padding":"20px", "gap":"10px", "width":"100%", "pagination": false, "arrows": false }',children:r})})},Fl="SetGuest_cont__info__76M0Z",jl="SetGuest_cont__name__uNVb7",Ul="SetGuest_cont__password__0ayzZ",Vl="SetGuest_cont__message__nQtvv",ql="SetGuest_cont__btn__m0JK1",Bl=function(e){var n=(0,t.useRef)(""),r=(0,t.useRef)(""),i=(0,t.useRef)(""),a=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate(),r=e.getHours(),i=e.getMinutes();return"".concat(t,"\uc6d4 ").concat(n,"\uc77c ").concat(r,":").concat(i<10?"0".concat(i):i)};return a(),(0,v.jsxs)("form",{onSubmit:function(t){t.preventDefault();var o={name:n.current.value,password:r.current.value,message:i.current.value,time:a()};e.onSetGuest(o),n.current.value="",r.current.value="",i.current.value=""},children:[(0,v.jsxs)("div",{className:Fl,children:[(0,v.jsx)("label",{htmlFor:"name"}),(0,v.jsx)("input",{type:"text",id:"name",placeholder:"\uc774\ub984",ref:n,className:jl}),(0,v.jsx)("label",{htmlFor:"password"}),(0,v.jsx)("input",{type:"text",id:"password",placeholder:"\ube44\ubc00\ubc88\ud638",ref:r,className:Ul})]}),(0,v.jsx)("label",{htmlFor:"message"}),(0,v.jsx)("textarea",{type:"text",id:"message",placeholder:"\uba54\uc2dc\uc9c0",ref:i,className:Vl}),(0,v.jsx)("button",{className:ql,children:"\ubc29\uba85\ub85d \uc791\uc131"})]})},zl="GuestForm_cont-wrap__ZtOSV",Wl=function(e){return(0,v.jsx)(T,{onClose:e.onHideForm,children:(0,v.jsx)("div",{className:zl,children:(0,v.jsx)(Bl,{onSetGuest:e.onSetGuest})})})},Kl="EnterPassword_container__jZ5-M",Gl="EnterPassword_password__35l7O",Hl="EnterPassword_btn__OzcBu",Ql=function(e){var n=w((0,t.useState)(!1),2),r=n[0],i=n[1],a=(0,t.useRef)(""),o=e.currentGuest,u=Al(),s=function(){!function(e){Vc("remove",e._path),Il(e,null)}(bl(u,"guest/"+o.id)),e.onFetchGuestHandler(),alert("\uc0ad\uc81c \uc131\uacf5\ud83e\udd1f"),e.onSetPassModal()},c=(0,v.jsxs)("form",{onSubmit:function(t){t.preventDefault(),o.password===a.current.value?"update"===e.type?i(!0):"delete"===e.type&&s():(alert("\ube44\ubc00\ubc88\ud638\uac00 \ud2c0\ub9bd\ub2c8\ub2e4\ud83e\udd72"),a.current.value="")},className:Kl,children:[(0,v.jsx)("label",{htmlFor:"password"}),(0,v.jsx)("input",{type:"text",id:"password",placeholder:"\ube44\ubc00\ubc88\ud638",ref:a,className:Gl}),(0,v.jsx)("button",{className:Hl,children:"\ud655\uc778"})]});return(0,v.jsx)(T,{onClose:e.onSetPassModal,children:r?(0,v.jsx)(Bl,{onSetGuest:function(t){Il(bl(u,"guest/"+o.id),t),e.onFetchGuestHandler(),e.onSetPassModal()}}):c})},Yl="GuestList_list__name__h+3IB",Xl="GuestList_list__message__LlFSO",Jl="GuestList_list__time__XbIy4",$l="GuestList_list-wrap__dwOP1",Zl="GuestList_btn__5Xj0u",eh="GuestList_btn-wrap__DEUC+",th=function(e){var r=w((0,t.useState)({openState:!1,type:null}),2),i=r[0],a=r[1],o=w((0,t.useState)({}),2),u=o[0],s=o[1],c=e.guestList.map((function(e){return(0,v.jsxs)("div",{className:$l,children:[(0,v.jsx)("div",{className:Yl,children:e.name}),(0,v.jsx)("div",{className:Xl,children:e.message}),(0,v.jsx)("div",{className:Jl,children:e.time}),(0,v.jsxs)("div",{className:eh,children:[(0,v.jsx)("button",{onClick:function(){l(!0,"update"),s(e)},className:Zl,children:(0,v.jsx)("img",{src:n(804),alt:"paper card"})}),(0,v.jsx)("button",{onClick:function(){l(!0,"delete"),s(e)},className:Zl,children:(0,v.jsx)("svg",{width:"20",height:"22",viewBox:"0 0 20 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.29289 2.29289C7.48043 2.10536 7.73478 2 8 2H12C12.2652 2 12.5196 2.10536 12.7071 2.29289C12.8946 2.48043 13 2.73478 13 3V4L7 4V3C7 2.73478 7.10536 2.48043 7.29289 2.29289ZM15 3V4L19 4C19.5523 4 20 4.44772 20 5C20 5.55229 19.5523 6 19 6H18V19C18 19.7956 17.6839 20.5587 17.1213 21.1213C16.5587 21.6839 15.7957 22 15 22H5C4.20435 22 3.44129 21.6839 2.87868 21.1213C2.31607 20.5587 2 19.7956 2 19L2 6H1C0.447715 6 0 5.55228 0 5C0 4.44772 0.447715 4 1 4H5V3C5 2.20435 5.31607 1.44129 5.87868 0.87868C6.44129 0.31607 7.20435 0 8 0H12C12.7956 0 13.5587 0.316071 14.1213 0.87868C14.6839 1.44129 15 2.20435 15 3ZM9 10C9 9.44771 8.55228 9 8 9C7.44771 9 7 9.44771 7 10V16C7 16.5523 7.44771 17 8 17C8.55228 17 9 16.5523 9 16V10ZM12 9C11.4477 9 11 9.44771 11 10V16C11 16.5523 11.4477 17 12 17C12.5523 17 13 16.5523 13 16V10C13 9.44771 12.5523 9 12 9Z",fill:"#222"})})})]})]},e.id)})),l=function(e,t){a({openState:e,type:t})};return(0,v.jsx)(T,{onClose:e.onHideList,children:i.openState?(0,v.jsx)(Ql,{onSetPassModal:function(){l(!1,null)},onFetchGuestHandler:e.onFetchGuestHandler,type:i.type,currentGuest:u}):c})},nh={btn:"Guest_btn__Pk7jO"},rh=function(e){var n=w((0,t.useState)([]),2),r=n[0],i=n[1],a=w((0,t.useState)(null),2),o=a[0],u=a[1],s=w((0,t.useState)(!1),2),c=s[0],l=s[1],h=w((0,t.useState)(!1),2),f=h[0],d=h[1],p=Al(),y=(0,t.useCallback)((function(){u(null),El(xl(bl(p),"guest/")).then((function(e){if(e.exists()){var t=e.val(),n=[];for(var r in t)n.push({id:r,name:t[r].name,password:t[r].password,message:t[r].message,time:t[r].time});i(n)}else u("No data available")})).catch((function(e){u(e.message)}))}),[p]);(0,t.useEffect)((function(){y()}),[y]);return(0,v.jsxs)("section",{id:"guest",children:[(0,v.jsx)("div",{className:"section-flower",children:"\ud83c\udf37"}),(0,v.jsx)("h2",{children:"\ubc29\uba85\ub85d"}),(0,v.jsx)("div",{className:nh.cards,children:o?(0,v.jsx)("p",{children:o}):(0,v.jsx)(Ml,{guestList:r})}),(0,v.jsxs)("div",{className:nh.btn,children:[(0,v.jsx)("button",{onClick:function(){l(!0)},children:"\uc804\uccb4\ubcf4\uae30"}),(0,v.jsx)("button",{onClick:function(){d(!0)},children:"\ubc29\uba85\ub85d \uc791\uc131"})]}),c&&(0,v.jsx)(th,{onHideList:function(){l(!1)},guestList:r,onFetchGuestHandler:y}),f&&(0,v.jsx)(Wl,{onHideForm:function(){d(!1)},onSetGuest:function(e){""!==e.name?""!==e.password?""!==e.message?(Il(function(e,t){e=ui(e),Vc("push",e._path),Fc("push",t,e._path,!0);var n,r=Jc(e._repo),i=Pu(r),a=xl(e,i),o=xl(e,i);return n=null!=t?Il(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}(bl(p,"guest")),e),y(),d(!1)):alert("\uba54\uc2dc\uc9c0\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694\ud83d\ude22"):alert("\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694\ud83d\ude4f"):alert("\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694\ud83d\ude25")}})]})},ih="Map_place__g-ONj",ah="Map_cont__zixBW",oh="Map_btn__6Vi9c",uh="Map_btn-wrap__o6n-Q",sh="Map_info__zQGoT",ch="Map_info__tit__LeJoy",lh="Map_info__cont__B4VPU",hh=window.kakao,fh=function(e){return(0,t.useEffect)((function(){var e=document.getElementById("map-cont"),t=new hh.maps.LatLng(33.450701,126.570667),n={center:t,level:3},r=new hh.maps.Marker({position:t}),i=new hh.maps.Map(e,n);r.setMap(i)}),[]),(0,v.jsxs)("section",{id:"map",children:[(0,v.jsx)("div",{className:"section-flower",children:"\ud83c\udf3a"}),(0,v.jsx)("h2",{children:"\uc624\uc2dc\ub294 \uae38"}),(0,v.jsxs)("h3",{className:ih,children:["\uc0c1\ub85d\uc544\ud2b8\ud640 L\uce35 \uadf8\ub79c\ub4dc\ubcfc\ub8f8\ud640",(0,v.jsx)("br",{}),"\uc11c\uc6b8 \uac15\ub0a8\uad6c \uc5b8\uc8fc\ub85c 508"]}),(0,v.jsx)("div",{id:"map-cont",className:ah}),(0,v.jsxs)("div",{className:uh,children:[(0,v.jsxs)("a",{href:"//map.kakao.com/link/map/18577297",className:oh,children:[(0,v.jsx)("svg",{width:"19",height:"18",viewBox:"0 0 19 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.45026 0C4.27749 0 0 3.4 0 7.7C0 10.4 1.79058 12.8 4.37696 14.2L3.48168 17.6C3.48168 17.7 3.48168 17.8 3.58115 17.9C3.58115 17.9 3.68063 18 3.7801 18C3.87958 18 3.87958 18 3.97906 18L7.85864 15.3C8.4555 15.4 8.95288 15.4 9.54974 15.4C14.7225 15.4 19 11.9 19 7.7C18.9005 3.4 14.7225 0 9.45026 0Z",fill:"#fae100"})}),(0,v.jsx)("span",{children:"\uce74\uce74\uc624 \uc9c0\ub3c4"})]}),(0,v.jsxs)("a",{href:"http://naver.me/5Z0vUHi3",className:oh,children:[(0,v.jsx)("svg",{width:"18",height:"17",viewBox:"0 0 18 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{d:"M11.9 0V8.6L6.2 0H0V17H6.1V8.4L11.8 17H18V0H11.9Z",fill:"#5ECC69"})}),(0,v.jsx)("span",{children:"\ub124\uc774\ubc84 \uc9c0\ub3c4"})]})]}),(0,v.jsxs)("div",{className:sh,children:[(0,v.jsx)("div",{className:ch,children:"\uc790\uac00\uc6a9"}),(0,v.jsxs)("p",{className:lh,children:["\u2022 \ub124\ube44\uac8c\uc774\uc158 \uc774\uc6a9\uc2dc : \u201c\uc11c\uc6b8\uc0c1\ub85d\ud68c\uad00\u201d \ub610\ub294 \u201c\uc11c\uc6b8\uc2dc \uac15\ub0a8\uad6c \uc5b8\uc8fc\ub85c 508\u201d \uc785\ub825",(0,v.jsx)("br",{}),"\u2022 \uacbd\ubd80\uace0\uc18d\ub3c4\ub85c : \uc591\uc7acIC \uc9c4\uc785\ud558\uc2dc\uc5b4 \uc591\uc7ac\ub300\ub85c\uc5d0\uc11c \ub9e4\ubd09\ud130\ub110, \uac15\ub0a8 \uc138\ube0c\ub780\uc2a4 \ubcd1\uc6d0 \ubc29\uba74\uc73c\ub85c \uc9c4\uc785\ud558\uc5ec \uc9c1\uc9c4",(0,v.jsx)("br",{}),"\u2714\ufe0f\uc8fc\ucc28\uc7a5 : \uc0c1\ub85d\uc544\ud2b8\ud640 \uc9c0\uc0c1/\uc9c0\ud558 \uc8fc\ucc28\uc7a5 \uc774\uc6a9(1\uc2dc\uac04 30\ubd84 \ubb34\ub8cc)",(0,v.jsx)("br",{})]}),(0,v.jsx)("div",{className:ch,children:"\uc9c0\ud558\ucca0"}),(0,v.jsxs)("p",{className:lh,children:["2\ud638\uc120/\ubd84\ub2f9\uc120 \u201c\uc120\ub989\uc5ed\u201d 5\ubc88\ucd9c\uad6c \ub3c4\ubcf45\ubd84",(0,v.jsx)("br",{}),"\u2714\ufe0f\uc154\ud2c0\ubc84\uc2a4 \uc218\uc2dc\uc6b4\ud589 : \uc120\ub989\uc5ed 5\ubc88\ucd9c\uad6c",(0,v.jsx)("br",{})]}),(0,v.jsx)("div",{className:ch,children:"\ubc84\uc2a4"}),(0,v.jsxs)("p",{className:lh,children:["(KT\uac15\ub0a8\uc9c0\uc0ac \ud558\ucc28) \uac04\uc120 141, \uc9c0\uc120 3422",(0,v.jsx)("br",{}),"(\uc11c\uc6b8\uc0c1\ub85d\ud68c\uad00, \ud55c\uad6d\uae30\uc220\uc13c\ud130 \ud558\ucc28)",(0,v.jsx)("br",{}),"\uac04\uc120 146, 360, 740",(0,v.jsx)("br",{})]})]})]})},dh=n(29),ph={account:"Account_account__WEioe",account__btn:"Account_account__btn__Tb-dX","account__btn-wrap":"Account_account__btn-wrap__PaeWG"},vh=function(e){var t=e.account,r=(0,v.jsx)("a",{href:t.kakao,className:ph.account__btn,children:(0,v.jsx)("img",{src:n(322),alt:"kakaopay"})}),i=(0,v.jsxs)("div",{className:ph.account,children:[(0,v.jsxs)("div",{className:ph["account__num-wrap"],children:[(0,v.jsx)("div",{children:t["account-num"]}),(0,v.jsx)("div",{children:t["account-bank"]}),(0,v.jsx)("div",{children:t["account-name"]})]}),(0,v.jsxs)("div",{className:ph["account__btn-wrap"],children:[(0,v.jsx)(dh.CopyToClipboard,{text:"".concat(t["account-bank"]," ").concat(t["account-num"]," ").concat(t["account-name"]),children:(0,v.jsx)("button",{onClick:function(){alert("\ubcf5\uc0ac \uc644\ub8cc!!")},children:"\ubcf5\uc0ac\ud558\uae30"})}),t.kakao&&r]})]});return(0,v.jsx)(T,{onClose:e.onClose,children:i})},yh={"contact__cont-wrap":"ContactItem_contact__cont-wrap__XleO3",contact__btn:"ContactItem_contact__btn__8TV8M","contact__btn-wrap":"ContactItem_contact__btn-wrap__9Qb++"},mh=function(e){var n=e.contactItem,r=w((0,t.useState)(!1),2),i=r[0],a=r[1];return(0,v.jsxs)("div",{className:"".concat(yh.contact__cont),children:[(0,v.jsx)("div",{children:n.name}),(0,v.jsxs)("div",{className:"".concat(yh["contact__btn-wrap"]),children:[(0,v.jsx)("a",{href:"tel:".concat(n.telephone),className:"".concat(yh.contact__btn),children:(0,v.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{d:"M17.206 13.372L14.2221 11.2742C13.128 10.4751 12.3323 10.9745 11.835 11.474C11.4372 11.7737 10.9398 12.5728 10.3431 12.1732C9.05004 11.3741 7.45864 9.77581 6.46401 8.5771C5.96669 8.07764 5.17099 7.27849 5.6683 6.77903C6.26508 6.07978 7.45864 5.28063 6.86186 4.18181C6.7624 3.78224 5.17099 1.48471 4.57421 0.685563C3.18173 -1.01262 0.894082 0.785456 0.297304 2.38374C-0.995715 6.37946 2.1871 10.2753 4.8726 13.0723C7.85649 15.9692 13.2275 20.2646 17.0071 16.5685C17.6039 15.8693 18.7974 14.4708 17.206 13.372Z",fill:"#7c7f7f"})})}),(0,v.jsx)("a",{href:"sms:".concat(n.telephone),className:"".concat(yh.contact__btn),children:(0,v.jsx)("svg",{width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.4974 0.3L10.5527 7.5C10.2512 7.8 9.8492 7.8 9.54769 7.5L0.602989 0.3C0.803994 0.1 1.206 0 1.50751 0H18.5929C18.8944 0 19.2964 0.1 19.4974 0.3ZM20 12.8L14.3719 6.40005L20 1.80005V12.5V12.8ZM0 1.80005V12.5V12.8L5.62813 6.40005L0 1.80005ZM10.0502 9.30005C10.6532 9.30005 11.1558 9.10005 11.5578 8.70005L13.1658 7.30005L18.9949 13.9C18.8944 14 18.7939 14 18.5929 14H1.50753H1.00502L6.83415 7.40005L8.54269 8.70005C8.9447 9.10005 9.54772 9.30005 10.0502 9.30005Z",fill:"#7c7f7f"})})}),(0,v.jsx)("button",{onClick:function(){a(!0)},className:"".concat(yh.contact__btn),children:(0,v.jsx)("svg",{width:"20",height:"17",viewBox:"0 0 20 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{d:"M1.03248 8.06051C-0.34416 6.68772 -0.34416 4.4618 1.03248 3.08901L3.09873 1.0296C4.47537 -0.343199 6.70864 -0.343199 8.08528 1.0296L10 2.93827L11.9147 1.0296C13.2914 -0.343199 15.5246 -0.343199 16.9013 1.0296L18.9675 3.08901C20.3442 4.4618 20.3442 6.68772 18.9675 8.06051L14.5862 12.4279L14.5595 12.4548L10 17L5.44048 12.4548L5.41379 12.4279L1.03248 8.06051Z",fill:"#7c7f7f"})})}),i&&(0,v.jsx)(vh,{onClose:function(){a(!1)},account:n})]})]})},gh={contact__self:"Contact_contact__self__t0QIu","contact__parent-wrap":"Contact_contact__parent-wrap__m91YM"},kh=function(e){var t={groom:{self:{name:"\uc2e0\ub791 \uc724\uc5ec\uc6c5",telephone:"010-2013-5513","account-num":"3020648196361","account-bank":"\ub18d\ud611","account-name":"\uc720\ub2e4\uc194",kakao:"http://kko.to/T7HuzTh80"},father:{name:"\uc544\ubc84\uc9c0 \uc724\uc5ec\uc6c5",telephone:"010-2013-5513","account-num":"3020648196361","account-bank":"\ub18d\ud611","account-name":"\uc720\ub2e4\uc194"},mother:{name:"\uc5b4\uba38\ub2c8 \uc724\uc5ec\uc6c5",telephone:"010-2013-5513","account-num":"3020648196361","account-bank":"\ub18d\ud611","account-name":"\uc720\ub2e4\uc194"}},bride:{self:{name:"\uc2e0\ubd80 \uc720\uc740\uc194",telephone:"010-2013-5513","account-num":"3020648196361","account-bank":"\ub18d\ud611","account-name":"\uc720\ub2e4\uc194",kakao:"http://kko.to/T7HuzTh80"},father:{name:"\uc544\ubc84\uc9c0 \uc720\uc740\uc194",telephone:"010-2013-5513","account-num":"3020648196361","account-bank":"\ub18d\ud611","account-name":"\uc720\ub2e4\uc194"},mother:{name:"\uc5b4\uba38\ub2c8 \uc720\uc740\uc194",telephone:"010-2013-5513","account-num":"3020648196361","account-bank":"\ub18d\ud611","account-name":"\uc720\ub2e4\uc194"}}};return(0,v.jsxs)("section",{id:"contact",children:[(0,v.jsx)("div",{className:"section-flower",children:"\ud83c\udf39"}),(0,v.jsx)("h2",{children:"\ub9c8\uc74c \uc804\ud558\uae30"}),(0,v.jsxs)("div",{className:"".concat(gh.contact__self),children:[(0,v.jsx)(mh,{contactItem:t.groom.self}),(0,v.jsx)(mh,{contactItem:t.bride.self})]}),(0,v.jsxs)("div",{className:"".concat(gh["contact__parent-wrap"]),children:[(0,v.jsxs)("div",{className:"".concat(gh.contact__parent),children:[(0,v.jsx)("div",{children:"\uc2e0\ub791\uce21 \ud63c\uc8fc"}),(0,v.jsx)(mh,{contactItem:t.groom.mother}),(0,v.jsx)(mh,{contactItem:t.groom.father})]}),(0,v.jsxs)("div",{className:"".concat(gh.contact__parent),children:[(0,v.jsx)("div",{children:"\uc2e0\ubd80\uce21 \ud63c\uc8fc"}),(0,v.jsx)(mh,{contactItem:t.bride.mother}),(0,v.jsx)(mh,{contactItem:t.bride.father})]})]})]})},_h=function(){function e(t,n){var r=this;A(this,e),this._delegate=t,this.firebase=n,Gi(t,new si("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return R(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),aa(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bi;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bi;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Gi(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Hi(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),wh=(q(Pl={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),q(Pl,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Pl),bh=new Vr("app-compat","Firebase",wh);var xh=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=na(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Gr(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ua,setLogLevel:ca,onLog:sa,apps:null,SDK_VERSION:ta,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Qi(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw bh.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Cr(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Gr(n,e=e||Bi))throw bh.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(_h);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Cr(n,e)},createSubscribe:ni,ErrorFactory:Vr,deepExtend:Cr}),n}(),Ih=new ki("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Ih.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Eh=self.firebase.SDK_VERSION;Eh&&Eh.indexOf("LITE")>=0&&Ih.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Sh=xh;!function(e){ua("@firebase/app-compat","0.1.26",e)}();function Th(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}function Ch(){return Ch="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Th(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ch.apply(this,arguments)}Sh.registerVersion("firebase","9.8.2","app-compat");function Nh(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Ah;Object.create;var Ph="facebook.com",Rh="github.com",Dh="google.com",Oh="password",Lh="twitter.com",Mh="EMAIL_SIGNIN",Fh="PASSWORD_RESET",jh="RECOVER_EMAIL",Uh="REVERT_SECOND_FACTOR_ADDITION",Vh="VERIFY_AND_CHANGE_EMAIL",qh="VERIFY_EMAIL";function Bh(){return q({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var zh=function(){var e;return q(e={},"admin-restricted-operation","This operation is restricted to administrators only."),q(e,"argument-error",""),q(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),q(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),q(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),q(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),q(e,"cordova-not-ready","Cordova framework is not ready."),q(e,"cors-unsupported","This browser is not supported."),q(e,"credential-already-in-use","This credential is already associated with a different user account."),q(e,"custom-token-mismatch","The custom token corresponds to a different audience."),q(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),q(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),q(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),q(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),q(e,"email-already-in-use","The email address is already in use by another account."),q(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),q(e,"expired-action-code","The action code has expired."),q(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),q(e,"internal-error","An internal AuthError has occurred."),q(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),q(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),q(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),q(e,"invalid-auth-event","An internal AuthError has occurred."),q(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),q(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),q(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),q(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),q(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),q(e,"invalid-email","The email address is badly formatted."),q(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),q(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),q(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),q(e,"invalid-credential","The supplied auth credential is malformed or has expired."),q(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),q(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),q(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),q(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),q(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),q(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),q(e,"wrong-password","The password is invalid or the user does not have a password."),q(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),q(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),q(e,"invalid-provider-id","The specified provider ID is invalid."),q(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),q(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),q(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),q(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),q(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),q(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),q(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),q(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),q(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),q(e,"missing-continue-uri","A continue URL must be provided in the request."),q(e,"missing-iframe-start","An internal AuthError has occurred."),q(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),q(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),q(e,"missing-multi-factor-info","No second factor identifier is provided."),q(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),q(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),q(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),q(e,"app-deleted","This instance of FirebaseApp has been deleted."),q(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),q(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),q(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),q(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),q(e,"no-auth-event","An internal AuthError has occurred."),q(e,"no-such-provider","User was not linked to an account with the given provider."),q(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),q(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),q(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),q(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),q(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),q(e,"provider-already-linked","User can only be linked to one identity for the given provider."),q(e,"quota-exceeded","The project's quota for this operation has been exceeded."),q(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),q(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),q(e,"rejected-credential","The request contains malformed or mismatching credentials."),q(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),q(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),q(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),q(e,"timeout","The operation has timed out."),q(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),q(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),q(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),q(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),q(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),q(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),q(e,"unverified-email","The operation requires a verified email."),q(e,"user-cancelled","The user did not grant your application the permissions it requested."),q(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),q(e,"user-disabled","The user account has been disabled by an administrator."),q(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),q(e,"user-signed-out",""),q(e,"weak-password","The password must be 6 characters long or more."),q(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),q(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Wh=Bh,Kh=new Vr("auth","Firebase",Bh()),Gh=new ki("@firebase/auth");function Hh(e){if(Gh.logLevel<=fi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Gh.error.apply(Gh,["Auth (".concat(ta,"): ").concat(e)].concat(n))}}function Qh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw $h.apply(void 0,[e].concat(n))}function Yh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $h.apply(void 0,[e].concat(n))}function Xh(e,t,n){var r=Object.assign(Object.assign({},Wh()),q({},t,n));return new Vr("auth","Firebase",r).create(t,{appName:e.name})}function Jh(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Qh(e,"argument-error"),Xh(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function $h(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=N(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(N(o)))}return Kh.create.apply(Kh,[e].concat(n))}function Zh(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw $h.apply(void 0,[t].concat(r))}}function ef(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Hh(t),new Error(t)}function tf(e,t){e||ef(t)}var nf=new Map;function rf(e){tf(e instanceof Function,"Expected a class definition");var t=nf.get(e);return t?(tf(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,nf.set(e,t),t)}function af(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function of(){return"http:"===uf()||"https:"===uf()}function uf(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var sf=function(){function e(t,n){A(this,e),this.shortDelay=t,this.longDelay=n,tf(n>t,"Short delay should be less than long delay!"),this.isMobile=Rr()||Lr()}return R(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(of()||Or()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function cf(e,t){tf(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var lf=function(){function e(){A(this,e)}return R(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void ef("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void ef("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void ef("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),hf=(q(Ah={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),q(Ah,"MISSING_CUSTOM_TOKEN","internal-error"),q(Ah,"INVALID_IDENTIFIER","invalid-email"),q(Ah,"MISSING_CONTINUE_URI","internal-error"),q(Ah,"INVALID_PASSWORD","wrong-password"),q(Ah,"MISSING_PASSWORD","internal-error"),q(Ah,"EMAIL_EXISTS","email-already-in-use"),q(Ah,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),q(Ah,"INVALID_IDP_RESPONSE","invalid-credential"),q(Ah,"INVALID_PENDING_TOKEN","invalid-credential"),q(Ah,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),q(Ah,"MISSING_REQ_TYPE","internal-error"),q(Ah,"EMAIL_NOT_FOUND","user-not-found"),q(Ah,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),q(Ah,"EXPIRED_OOB_CODE","expired-action-code"),q(Ah,"INVALID_OOB_CODE","invalid-action-code"),q(Ah,"MISSING_OOB_CODE","internal-error"),q(Ah,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),q(Ah,"INVALID_ID_TOKEN","invalid-user-token"),q(Ah,"TOKEN_EXPIRED","user-token-expired"),q(Ah,"USER_NOT_FOUND","user-token-expired"),q(Ah,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),q(Ah,"INVALID_CODE","invalid-verification-code"),q(Ah,"INVALID_SESSION_INFO","invalid-verification-id"),q(Ah,"INVALID_TEMPORARY_PROOF","invalid-credential"),q(Ah,"MISSING_SESSION_INFO","missing-verification-id"),q(Ah,"SESSION_EXPIRED","code-expired"),q(Ah,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),q(Ah,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),q(Ah,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),q(Ah,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),q(Ah,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),q(Ah,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),q(Ah,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),q(Ah,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),q(Ah,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),q(Ah,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),q(Ah,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ah),ff=new sf(3e4,6e4);function df(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function pf(e,t,n,r){return vf.apply(this,arguments)}function vf(){return vf=pr(fr().mark((function e(t,n,r,i){var a,o=arguments;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",yf(t,a,pr(fr().mark((function e(){var a,o,u,s;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=$r(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",lf.fetch()(_f(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),vf.apply(this,arguments)}function yf(e,t,n){return mf.apply(this,arguments)}function mf(){return(mf=pr(fr().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f,d;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},hf),n),e.prev=2,a=new wf(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw bf(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=w(c,2),h=l[0],f=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw bf(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw bf(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw bf(t,"user-disabled",u);case 29:if(d=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!f){e.next=34;break}throw Xh(t,d,f);case 34:Qh(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Ur)){e.next=41;break}throw e.t0;case 41:Qh(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function gf(e,t,n,r){return kf.apply(this,arguments)}function kf(){return kf=pr(fr().mark((function e(t,n,r,i){var a,o,u=arguments;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,pf(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Qh(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),kf.apply(this,arguments)}function _f(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?cf(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var wf=function(){function e(t){var n=this;A(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Yh(n.auth,"network-request-failed"))}),ff.get())}))}return R(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function bf(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Yh(e,t,r);return i.customData._tokenResponse=n,i}function xf(e,t){return If.apply(this,arguments)}function If(){return(If=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pf(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ef(e,t){return Sf.apply(this,arguments)}function Sf(){return(Sf=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pf(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tf(e,t){return Cf.apply(this,arguments)}function Cf(){return(Cf=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pf(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nf(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Af(){return Af=pr(fr().mark((function e(t){var n,r,i,a,o,u,s=arguments;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=ui(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Zh((a=Rf(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Nf(Pf(a.auth_time)),issuedAtTime:Nf(Pf(a.iat)),expirationTime:Nf(Pf(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Af.apply(this,arguments)}function Pf(e){return 1e3*Number(e)}function Rf(e){var t=w(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Hh("JWT malformed, contained fewer than 3 sections"),null;try{var a=Tr(r);return a?JSON.parse(a):(Hh("Failed to decode base64 JWT payload"),null)}catch(o){return Hh("Caught error parsing JWT payload as JSON",o),null}}function Df(e,t){return Of.apply(this,arguments)}function Of(){return Of=pr(fr().mark((function e(t,n){var r=arguments;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ur&&Lf(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Of.apply(this,arguments)}function Lf(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Mf=function(){function e(t){A(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return R(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(pr(fr().mark((function t(){return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ff=function(){function e(t,n){A(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return R(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Nf(this.lastLoginAt),this.creationTime=Nf(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function jf(e){return Uf.apply(this,arguments)}function Uf(){return Uf=pr(fr().mark((function e(t){var n,r,i,a,o,u,s,c,l,h,f;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Df(t,Tf(r,{idToken:i}));case 6:Zh(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Bf(o.providerUserInfo):[],s=qf(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Ff(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),Uf.apply(this,arguments)}function Vf(){return(Vf=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ui(t),e.next=3,jf(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qf(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(N(n),N(t))}function Bf(e){return e.map((function(e){var t=e.providerId,n=Nh(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function zf(e,t){return Wf.apply(this,arguments)}function Wf(){return(Wf=pr(fr().mark((function e(t,n){var r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yf(t,{},pr(fr().mark((function e(){var r,i,a,o,u,s;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$r({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=_f(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",lf.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kf=function(){function e(){A(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return R(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Zh(e.idToken,"internal-error"),Zh("undefined"!==typeof e.idToken,"internal-error"),Zh("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Rf(e);return Zh(t,"internal-error"),Zh("undefined"!==typeof t.exp,"internal-error"),Zh("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=pr(fr().mark((function e(t){var n,r=arguments;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Zh(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=pr(fr().mark((function e(t,n){var r,i,a,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zf(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return ef("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Zh("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Zh("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Zh("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Gf(e,t){Zh("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Hf=function(){function e(t){A(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Nh(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?N(a.providerData):[],this.metadata=new Ff(a.createdAt||void 0,a.lastLoginAt||void 0)}return R(e,[{key:"getIdToken",value:function(){var e=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Df(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Zh(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Af.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Vf.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Zh(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Zh(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=pr(fr().mark((function e(t){var n,r,i=arguments;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,jf(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=pr(fr().mark((function e(){var t;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Df(this,xf(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,_=n.emailVerified,w=n.isAnonymous,b=n.providerData,x=n.stsTokenManager;Zh(k&&x,t,"internal-error");var I=Kf.fromJSON(this.name,x);Zh("string"===typeof k,t,"internal-error"),Gf(h,t.name),Gf(f,t.name),Zh("boolean"===typeof _,t,"internal-error"),Zh("boolean"===typeof w,t,"internal-error"),Gf(d,t.name),Gf(p,t.name),Gf(v,t.name),Gf(y,t.name),Gf(m,t.name),Gf(g,t.name);var E=new e({uid:k,auth:t,email:f,emailVerified:_,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return b&&Array.isArray(b)&&(E.providerData=b.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=pr(fr().mark((function t(n,r){var i,a,o,u=arguments;return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Kf).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,jf(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Qf=function(){function e(){A(this,e),this.type="NONE",this.storage={}}return R(e,[{key:"_isAvailable",value:function(){var e=pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Qf.type="NONE";var Yf=Qf;function Xf(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Jf=function(){function e(t,n,r){A(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Xf(this.userKey,a.apiKey,o),this.fullPersistenceKey=Xf("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return R(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=pr(fr().mark((function e(){var t;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Hf._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=pr(fr().mark((function t(n,r){var i,a,o,u,s,c,l,h,f,d,p,v=arguments;return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(rf(Yf),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||rf(Yf),u=Xf(i,n.config.apiKey,n.name),s=null,c=vr(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(u);case 17:if(!(f=t.sent)){t.next=23;break}return d=Hf._fromJSON(n,f),h!==o&&(s=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function $f(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(nd(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Zf(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(id(t))return"Blackberry";if(ad(t))return"Webos";if(ed(t))return"Safari";if((t.includes("chrome/")||td(t))&&!t.includes("edge/"))return"Chrome";if(rd(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Zf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr();return/firefox\//i.test(e)}function ed(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function td(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr();return/crios\//i.test(e)}function nd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr();return/iemobile/i.test(e)}function rd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr();return/android/i.test(e)}function id(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr();return/blackberry/i.test(e)}function ad(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr();return/webos/i.test(e)}function od(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr();return/iphone|ipad|ipod/i.test(e)}function ud(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr();return od(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function sd(){return Mr()&&10===document.documentMode}function cd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr();return od(e)||rd(e)||ad(e)||id(e)||/windows phone/i.test(e)||nd(e)}function ld(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=$f(Pr());break;case"Worker":t="".concat($f(Pr()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ta,"/").concat(r)}var hd=function(){function e(t){A(this,e),this.auth=t,this.queue=[]}return R(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=pr(fr().mark((function e(t){var n,r,i,a,o,u,s;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=vr(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=vr(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),fd=function(){function e(t,n,r){A(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pd(this),this.idTokenSubscription=new pd(this),this.beforeStateQueue=new hd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Kh,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return R(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=rf(t)),this._initializationPromise=this.queue(pr(fr().mark((function r(){var i,a;return fr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Jf.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=pr(fr().mark((function e(){var t;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=pr(fr().mark((function e(t){var n,r,i,a,o,u,s;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Zh(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jf(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ui(t):null)&&Zh(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=pr(fr().mark((function e(t){var n,r=this,i=arguments;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Zh(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(pr(fr().mark((function n(){return fr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(rf(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Vr("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=pr(fr().mark((function e(t,n){var r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Zh(n=t&&rf(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Jf.create(this,[rf(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=pr(fr().mark((function e(t){var n,r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=pr(fr().mark((function e(t){var n=this;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Zh(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Zh(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ld(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=pr(fr().mark((function e(){var t,n,r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=q({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function dd(e){return ui(e)}var pd=function(){function e(t){var n=this;A(this,e),this.auth=t,this.observer=null,this.addObserver=ni((function(e){return n.observer=e}))}return R(e,[{key:"next",get:function(){return Zh(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function vd(e,t,n){var r=dd(e);Zh(r._canInitEmulator,r,"emulator-config-failed"),Zh(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=yd(t),o=function(e){var t=yd(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:md(r.substr(a.length+1))}}var o=w(r.split(":"),2);return{host:o[0],port:md(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function yd(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function md(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var gd=function(){function e(t,n){A(this,e),this.providerId=t,this.signInMethod=n}return R(e,[{key:"toJSON",value:function(){return ef("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return ef("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return ef("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return ef("not implemented")}}]),e}();function kd(e,t){return _d.apply(this,arguments)}function _d(){return(_d=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pf(t,"POST","/v1/accounts:resetPassword",df(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wd(e,t){return bd.apply(this,arguments)}function bd(){return(bd=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pf(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xd(e,t){return Id.apply(this,arguments)}function Id(){return(Id=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pf(t,"POST","/v1/accounts:update",df(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ed(e,t){return Sd.apply(this,arguments)}function Sd(){return(Sd=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gf(t,"POST","/v1/accounts:signInWithPassword",df(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Td(e,t){return Cd.apply(this,arguments)}function Cd(){return(Cd=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pf(t,"POST","/v1/accounts:sendOobCode",df(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nd(e,t){return Ad.apply(this,arguments)}function Ad(){return(Ad=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Td(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pd(e,t){return Rd.apply(this,arguments)}function Rd(){return(Rd=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Td(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dd(e,t){return Od.apply(this,arguments)}function Od(){return(Od=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Td(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ld(e,t){return Md.apply(this,arguments)}function Md(){return(Md=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Td(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fd(e,t){return jd.apply(this,arguments)}function jd(){return(jd=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gf(t,"POST","/v1/accounts:signInWithEmailLink",df(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ud(e,t){return Vd.apply(this,arguments)}function Vd(){return(Vd=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gf(t,"POST","/v1/accounts:signInWithEmailLink",df(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qd=function(e){O(n,e);var t=V(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return A(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return R(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ed(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Fd(t,{email:this._email,oobCode:this._password}));case 5:Qh(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",wd(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ud(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Qh(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(gd);function Bd(e,t){return zd.apply(this,arguments)}function zd(){return(zd=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gf(t,"POST","/v1/accounts:signInWithIdp",df(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wd=function(e){O(n,e);var t=V(n);function n(){var e;return A(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return R(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Bd(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Bd(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Bd(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$r(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qh("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Nh(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(gd);function Kd(e,t){return Gd.apply(this,arguments)}function Gd(){return(Gd=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pf(t,"POST","/v1/accounts:sendVerificationCode",df(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hd(){return(Hd=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gf(t,"POST","/v1/accounts:signInWithPhoneNumber",df(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qd(){return(Qd=pr(fr().mark((function e(t,n){var r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gf(t,"POST","/v1/accounts:signInWithPhoneNumber",df(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw bf(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Yd=q({},"USER_NOT_FOUND","user-not-found");function Xd(){return(Xd=pr(fr().mark((function e(t,n){var r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",gf(t,"POST","/v1/accounts:signInWithPhoneNumber",df(t,r),Yd));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Jd=function(e){O(n,e);var t=V(n);function n(e){var r;return A(this,n),(r=t.call(this,"phone","phone")).params=e,r}return R(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Hd.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Qd.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Xd.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(gd);var $d=function(){function e(t){var n,r,i,a,o,u;A(this,e);var s=Zr(ei(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Zh(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return R(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Zr(ei(e)).link,n=t?Zr(ei(t)).deep_link_id:null,r=Zr(ei(e)).deep_link_id;return(r?Zr(ei(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(tR){return null}}}]),e}();var Zd=function(){function e(){A(this,e),this.providerId=e.PROVIDER_ID}return R(e,null,[{key:"credential",value:function(e,t){return qd._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=$d.parseLink(t);return Zh(n,"argument-error"),qd._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Zd.PROVIDER_ID="password",Zd.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Zd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ep=function(){function e(t){A(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return R(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),tp=function(e){O(n,e);var t=V(n);function n(){var e;return A(this,n),(e=t.apply(this,arguments)).scopes=[],e}return R(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return N(this.scopes)}}]),n}(ep),np=function(e){O(n,e);var t=V(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Zh(e.idToken||e.accessToken,"argument-error"),Wd._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Zh("providerId"in t&&"signInMethod"in t,"argument-error"),Wd._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(tp),rp=function(e){O(n,e);var t=V(n);function n(){return A(this,n),t.call(this,"facebook.com")}return R(n,null,[{key:"credential",value:function(e){return Wd._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(tR){return null}}}]),n}(tp);rp.FACEBOOK_SIGN_IN_METHOD="facebook.com",rp.PROVIDER_ID="facebook.com";var ip=function(e){O(n,e);var t=V(n);function n(){var e;return A(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return R(n,null,[{key:"credential",value:function(e,t){return Wd._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(tR){return null}}}]),n}(tp);ip.GOOGLE_SIGN_IN_METHOD="google.com",ip.PROVIDER_ID="google.com";var ap=function(e){O(n,e);var t=V(n);function n(){return A(this,n),t.call(this,"github.com")}return R(n,null,[{key:"credential",value:function(e){return Wd._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(tR){return null}}}]),n}(tp);ap.GITHUB_SIGN_IN_METHOD="github.com",ap.PROVIDER_ID="github.com";var op=function(e){O(n,e);var t=V(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return R(n,[{key:"_getIdTokenResponse",value:function(e){return Bd(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Bd(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Bd(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(gd),up=function(e){O(n,e);var t=V(n);function n(e){return A(this,n),Zh(e.startsWith("saml."),"argument-error"),t.call(this,e)}return R(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=op.fromJSON(e);return Zh(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return op._create(r,n)}catch(i){return null}}}]),n}(ep),sp=function(e){O(n,e);var t=V(n);function n(){return A(this,n),t.call(this,"twitter.com")}return R(n,null,[{key:"credential",value:function(e,t){return Wd._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(tR){return null}}}]),n}(tp);function cp(e,t){return lp.apply(this,arguments)}function lp(){return(lp=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gf(t,"POST","/v1/accounts:signUp",df(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}sp.TWITTER_SIGN_IN_METHOD="twitter.com",sp.PROVIDER_ID="twitter.com";var hp=function(){function e(t){A(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return R(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=pr(fr().mark((function t(n,r,i){var a,o,u,s,c=arguments;return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Hf._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=fp(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=pr(fr().mark((function t(n,r,i){var a;return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=fp(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function fp(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function dp(){return dp=pr(fr().mark((function e(t){var n,r,i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=dd(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new hp({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,cp(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,hp._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),dp.apply(this,arguments)}var pp=function(e){O(n,e);var t=V(n);function n(e,r,i,a){var o,u;return A(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(j(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return R(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ur);function vp(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw pp._fromErrorAndOperation(e,n,t,r);throw n}))}function yp(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function mp(e,t){return gp.apply(this,arguments)}function gp(){return gp=pr(fr().mark((function e(t,n){var r,i,a,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ui(t),e.next=3,wp(!0,r,n);case 3:return e.t0=Ef,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=yp(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),gp.apply(this,arguments)}function kp(e,t){return _p.apply(this,arguments)}function _p(){return _p=pr(fr().mark((function e(t,n){var r,i,a=arguments;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Df,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",hp._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),_p.apply(this,arguments)}function wp(e,t,n){return bp.apply(this,arguments)}function bp(){return(bp=pr(fr().mark((function e(t,n,r){var i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jf(n);case 2:i=yp(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Zh(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xp(e,t){return Ip.apply(this,arguments)}function Ip(){return Ip=pr(fr().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Df(t,vp(i,a,n,t),r);case 6:return Zh((o=e.sent).idToken,i,"internal-error"),Zh(u=Rf(o.idToken),i,"internal-error"),s=u.sub,Zh(t.uid===s,i,"user-mismatch"),e.abrupt("return",hp._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Qh(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ip.apply(this,arguments)}function Ep(e,t){return Sp.apply(this,arguments)}function Sp(){return Sp=pr(fr().mark((function e(t,n){var r,i,a,o,u=arguments;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,vp(t,i,n);case 4:return a=e.sent,e.next=7,hp._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Sp.apply(this,arguments)}function Tp(e,t){return Cp.apply(this,arguments)}function Cp(){return(Cp=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ep(dd(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Np(e,t){return Ap.apply(this,arguments)}function Ap(){return(Ap=pr(fr().mark((function e(t,n){var r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ui(t),e.next=3,wp(!1,r,n.providerId);case 3:return e.abrupt("return",kp(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pp(e,t){return Rp.apply(this,arguments)}function Rp(){return(Rp=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xp(ui(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dp(e,t){return Op.apply(this,arguments)}function Op(){return(Op=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gf(t,"POST","/v1/accounts:signInWithCustomToken",df(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lp(){return(Lp=pr(fr().mark((function e(t,n){var r,i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=dd(t),e.next=3,Dp(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,hp._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mp=function(){function e(t,n){A(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return R(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Fp._fromServerResponse(e,t):Qh(e,"internal-error")}}]),e}(),Fp=function(e){O(n,e);var t=V(n);function n(e){var r;return A(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return R(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Mp);function jp(e,t,n){var r;Zh((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Zh("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Zh(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Zh(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Up(){return(Up=pr(fr().mark((function e(t,n,r){var i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ui(t),a={requestType:"PASSWORD_RESET",email:n},r&&jp(i,a,r),e.next=5,Pd(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vp(){return(Vp=pr(fr().mark((function e(t,n,r){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kd(ui(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qp(){return(qp=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xd(ui(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bp(e,t){return zp.apply(this,arguments)}function zp(){return(zp=pr(fr().mark((function e(t,n){var r,i,a,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ui(t),e.next=3,kd(r,{oobCode:n});case 3:i=e.sent,Zh(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Zh(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Zh(i.mfaInfo,r,"internal-error");case 13:Zh(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Mp._fromServerResponse(dd(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wp(){return(Wp=pr(fr().mark((function e(t,n){var r,i;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bp(ui(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kp(e,t,n){return Gp.apply(this,arguments)}function Gp(){return(Gp=pr(fr().mark((function e(t,n,r){var i,a,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=dd(t),e.next=3,cp(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,hp._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hp(){return(Hp=pr(fr().mark((function e(t,n,r){var i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ui(t),a={requestType:"EMAIL_SIGNIN",email:n},Zh(r.handleCodeInApp,i,"argument-error"),r&&jp(i,a,r),e.next=6,Dd(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qp(){return(Qp=pr(fr().mark((function e(t,n,r){var i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ui(t),Zh((a=Zd.credentialWithLink(n,r||af()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Tp(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yp(e,t){return Xp.apply(this,arguments)}function Xp(){return(Xp=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pf(t,"POST","/v1/accounts:createAuthUri",df(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jp(){return(Jp=pr(fr().mark((function e(t,n){var r,i,a,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=of()?af():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Yp(ui(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $p(){return($p=pr(fr().mark((function e(t,n){var r,i,a,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ui(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&jp(r.auth,a,n),e.next=8,Nd(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zp(){return(Zp=pr(fr().mark((function e(t,n,r){var i,a,o,u;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ui(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&jp(i.auth,o,r),e.next=8,Ld(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ev(e,t){return tv.apply(this,arguments)}function tv(){return(tv=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pf(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nv(){return(nv=pr(fr().mark((function e(t,n){var r,i,a,o,u,s,c;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ui(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Df(a,ev(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rv(e,t,n){return iv.apply(this,arguments)}function iv(){return(iv=pr(fr().mark((function e(t,n,r){var i,a,o,u;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Df(t,wd(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var av=R((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};A(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),ov=function(e){O(n,e);var t=V(n);function n(e,r,i,a){var o;return A(this,n),(o=t.call(this,e,r,i)).username=a,o}return R(n)}(av),uv=function(e){O(n,e);var t=V(n);function n(e,r){return A(this,n),t.call(this,e,"facebook.com",r)}return R(n)}(av),sv=function(e){O(n,e);var t=V(n);function n(e,r){return A(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return R(n)}(ov),cv=function(e){O(n,e);var t=V(n);function n(e,r){return A(this,n),t.call(this,e,"google.com",r)}return R(n)}(av),lv=function(e){O(n,e);var t=V(n);function n(e,r,i){return A(this,n),t.call(this,e,"twitter.com",r,i)}return R(n)}(ov);function hv(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Rf(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new av(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new uv(a,i);case"github.com":return new sv(a,i);case"google.com":return new cv(a,i);case"twitter.com":return new lv(a,i,e.screenName||null);case"custom":case"anonymous":return new av(a,null);default:return new av(a,r,i)}}(n)}var fv=function(){function e(t,n){A(this,e),this.type=t,this.credential=n}return R(e,[{key:"toJSON",value:function(){return{multiFactorSession:q({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),dv=function(){function e(t,n,r){A(this,e),this.session=t,this.hints=n,this.signInResolver=r}return R(e,[{key:"resolveSignIn",value:function(){var e=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=dd(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Mp._fromServerResponse(r,e)}));Zh(i.mfaPendingCredential,r,"internal-error");var o=fv._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=pr(fr().mark((function e(t){var a,u,s;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,hp._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Zh(n.user,r,"internal-error"),e.abrupt("return",hp._forOperation(n.user,n.operationType,u));case 17:Qh(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function pv(e,t){return pf(e,"POST","/v2/accounts/mfaEnrollment:start",df(e,t))}var vv=function(){function e(t){var n=this;A(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Mp._fromServerResponse(t.auth,e)})))}))}return R(e,[{key:"getSession",value:function(){var e=pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fv,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=pr(fr().mark((function e(t,n){var r,i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Df(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=pr(fr().mark((function e(t){var n,r,i;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Df(this.user,pf(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",df(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),yv=new WeakMap;var mv="__sak",gv=function(){function e(t,n){A(this,e),this.storageRetriever=t,this.type=n}return R(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(mv,"1"),this.storage.removeItem(mv),Promise.resolve(!0)):Promise.resolve(!1)}catch(tR){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var kv=function(e){O(n,e);var t=V(n);function n(){var e;return A(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Pr();return ed(e)||od(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=cd(),e._shouldAllowMigration=!0,e}return R(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);sd()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=pr(fr().mark((function e(t,r){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ch(L(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=pr(fr().mark((function e(t){var r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ch(L(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ch(L(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(gv);kv.type="LOCAL";var _v=kv,wv=function(e){O(n,e);var t=V(n);function n(){return A(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return R(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(gv);wv.type="SESSION";var bv=wv;function xv(e){return Promise.all(e.map(function(){var e=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Iv=function(){function e(t){A(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return R(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=pr(fr().mark((function e(t){var n,r,i,a,o,u,s,c;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,xv(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ev(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Iv.receivers=[];var Sv=function(){function e(t){A(this,e),this.target=t,this.handlers=new Set}return R(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=pr(fr().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Ev("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Tv(){return window}function Cv(){return"undefined"!==typeof Tv().WorkerGlobalScope&&"function"===typeof Tv().importScripts}function Nv(){return Av.apply(this,arguments)}function Av(){return(Av=pr(fr().mark((function e(){var t;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Pv(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Rv="firebaseLocalStorageDb",Dv="firebaseLocalStorage",Ov="fbase_key",Lv=function(){function e(t){A(this,e),this.request=t}return R(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Mv(e,t){return e.transaction([Dv],t?"readwrite":"readonly").objectStore(Dv)}function Fv(){var e=indexedDB.deleteDatabase(Rv);return new Lv(e).toPromise()}function jv(){var e=indexedDB.open(Rv,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Dv,{keyPath:Ov})}catch(r){n(r)}})),e.addEventListener("success",pr(fr().mark((function n(){var r;return fr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Dv)){n.next=12;break}return r.close(),n.next=5,Fv();case 5:return n.t0=t,n.next=8,jv();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Uv(e,t,n){return Vv.apply(this,arguments)}function Vv(){return Vv=pr(fr().mark((function e(t,n,r){var i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Mv(t,!0).put((q(i={},Ov,n),q(i,"value",r),i)),e.abrupt("return",new Lv(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Vv.apply(this,arguments)}function qv(e,t){return Bv.apply(this,arguments)}function Bv(){return Bv=pr(fr().mark((function e(t,n){var r,i;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Mv(t,!1).get(n),e.next=3,new Lv(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Bv.apply(this,arguments)}function zv(e,t){var n=Mv(e,!0).delete(t);return new Lv(n).toPromise()}var Wv=function(){function e(){A(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return R(e,[{key:"_openDb",value:function(){var e=pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,jv();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=pr(fr().mark((function e(t){var n,r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cv()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=pr(fr().mark((function e(){var t=this;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Iv._getInstance(Cv()?self:null),this.receiver._subscribe("keyChanged",function(){var e=pr(fr().mark((function e(n,r){var i;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=pr(fr().mark((function e(){var t,n,r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nv();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Sv(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Pv()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=pr(fr().mark((function e(){var t;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,jv();case 5:return t=e.sent,e.next=8,Uv(t,mv,"1");case 8:return e.next=10,zv(t,mv);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=pr(fr().mark((function e(t,n){var r=this;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Uv(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return qv(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=pr(fr().mark((function e(t){var n=this;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return zv(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=pr(fr().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Mv(e,!1).getAll();return new Lv(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=vr(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(pr(fr().mark((function t(){return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Wv.type="LOCAL";var Kv=Wv;function Gv(e,t){return pf(e,"POST","/v2/accounts/mfaSignIn:start",df(e,t))}function Hv(e){return Qv.apply(this,arguments)}function Qv(){return(Qv=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pf(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yv(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Yh("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Xv(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Jv=1e12,$v=function(){function e(t){A(this,e),this.auth=t,this.counter=Jv,this._widgets=new Map}return R(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Zv(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Jv;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Jv;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=pr(fr().mark((function e(t){var n,r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Jv,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Zv=function(){function e(t,n,r){var i=this;A(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Zh(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return R(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var ey=Xv("rcb"),ty=new sf(3e4,6e4),ny="https://www.google.com/recaptcha/api.js?",ry=function(){function e(){A(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Tv().grecaptcha}return R(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Zh(iy(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Tv().grecaptcha):new Promise((function(r,i){var a=Tv().setTimeout((function(){i(Yh(e,"network-request-failed"))}),ty.get());Tv()[ey]=function(){Tv().clearTimeout(a),delete Tv()[ey];var o=Tv().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Yh(e,"internal-error"))},Yv("".concat(ny,"?").concat($r({onload:ey,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Yh(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Tv().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function iy(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var ay=function(){function e(){A(this,e)}return R(e,[{key:"load",value:function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new $v(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),oy="recaptcha",uy={theme:"light",type:"image"},sy=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},uy),r=arguments.length>2?arguments[2]:void 0;A(this,e),this.parameters=n,this.type=oy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=dd(r),this.isInvisible="invisible"===this.parameters.size,Zh("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Zh(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ay:new ry,this.validateStartingState()}return R(e,[{key:"verify",value:function(){var e=pr(fr().mark((function e(){var t,n,r,i=this;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Zh(!this.parameters.sitekey,this.auth,"argument-error"),Zh(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Zh("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Tv()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Zh(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=pr(fr().mark((function e(){var t,n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=pr(fr().mark((function e(){var t;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zh(of()&&!Cv(),this.auth,"internal-error"),e.next=3,cy();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Hv(this.auth);case 8:Zh(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Zh(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function cy(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var ly=function(){function e(t,n){A(this,e),this.verificationId=t,this.onConfirmation=n}return R(e,[{key:"confirm",value:function(e){var t=Jd._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function hy(){return(hy=pr(fr().mark((function e(t,n,r){var i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=dd(t),e.next=3,vy(i,n,ui(r));case 3:return a=e.sent,e.abrupt("return",new ly(a,(function(e){return Tp(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fy(e,t,n){return dy.apply(this,arguments)}function dy(){return(dy=pr(fr().mark((function e(t,n,r){var i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ui(t),e.next=3,wp(!1,i,"phone");case 3:return e.next=5,vy(i.auth,n,ui(r));case 5:return a=e.sent,e.abrupt("return",new ly(a,(function(e){return Np(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function py(){return(py=pr(fr().mark((function e(t,n,r){var i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ui(t),e.next=3,vy(i.auth,n,ui(r));case 3:return a=e.sent,e.abrupt("return",new ly(a,(function(e){return Pp(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vy(e,t,n){return yy.apply(this,arguments)}function yy(){return yy=pr(fr().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Zh("string"===typeof a,t,"argument-error"),Zh(r.type===oy,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Zh("enroll"===u.type,t,"internal-error"),e.next=13,pv(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Zh("signin"===u.type,t,"internal-error"),Zh(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Gv(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Kd(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),yy.apply(this,arguments)}function my(){return(my=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kp(ui(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gy=function(){function e(t){A(this,e),this.providerId=e.PROVIDER_ID,this.auth=dd(t)}return R(e,[{key:"verifyPhoneNumber",value:function(e,t){return vy(this.auth,e,ui(t))}}],[{key:"credential",value:function(e,t){return Jd._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Jd._fromTokenResponse(n,r):null}}]),e}();function ky(e,t){return t?rf(t):(Zh(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}gy.PROVIDER_ID="phone",gy.PHONE_SIGN_IN_METHOD="phone";var _y=function(e){O(n,e);var t=V(n);function n(e){var r;return A(this,n),(r=t.call(this,"custom","custom")).params=e,r}return R(n,[{key:"_getIdTokenResponse",value:function(e){return Bd(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Bd(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Bd(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(gd);function wy(e){return Ep(e.auth,new _y(e),e.bypassAuthState)}function by(e){var t=e.auth,n=e.user;return Zh(n,t,"internal-error"),xp(n,new _y(e),e.bypassAuthState)}function xy(e){return Iy.apply(this,arguments)}function Iy(){return(Iy=pr(fr().mark((function e(t){var n,r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Zh(r=t.user,n,"internal-error"),e.abrupt("return",kp(r,new _y(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ey=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];A(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return R(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=pr(fr().mark((function t(n,r){return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=pr(fr().mark((function e(t){var n,r,i,a,o,u,s;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wy;case"linkViaPopup":case"linkViaRedirect":return xy;case"reauthViaPopup":case"reauthViaRedirect":return by;default:Qh(this.auth,"internal-error")}}},{key:"resolve",value:function(e){tf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){tf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Sy=new sf(2e3,1e4);function Ty(e,t,n){return Cy.apply(this,arguments)}function Cy(){return(Cy=pr(fr().mark((function e(t,n,r){var i,a,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=dd(t),Jh(t,n,ep),a=ky(i,r),o=new Ry(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ny(){return(Ny=pr(fr().mark((function e(t,n,r){var i,a,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jh((i=ui(t)).auth,n,ep),a=ky(i.auth,r),o=new Ry(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ay(e,t,n){return Py.apply(this,arguments)}function Py(){return(Py=pr(fr().mark((function e(t,n,r){var i,a,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jh((i=ui(t)).auth,n,ep),a=ky(i.auth,r),o=new Ry(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ry=function(e){O(n,e);var t=V(n);function n(e,r,i,a,o){var u;return A(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=j(u),u}return R(n,[{key:"executeNotNull",value:function(){var e=pr(fr().mark((function e(){var t;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Zh(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=pr(fr().mark((function e(){var t,n=this;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tf(1===this.filter.length,"Popup operations only handle one event"),t=Ev(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Yh(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Yh(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Yh(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Sy.get())}()}}]),n}(Ey);Ry.currentPopupAction=null;var Dy=new Map,Oy=function(e){O(n,e);var t=V(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return A(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return R(n,[{key:"execute",value:function(){var e=pr(fr().mark((function e(){var t,r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Dy.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Ly(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Ch(L(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Dy.set(this.auth._key(),t);case 21:return this.bypassAuthState||Dy.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=pr(fr().mark((function e(t){var r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Ch(L(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Ch(L(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Ey);function Ly(e,t){return My.apply(this,arguments)}function My(){return(My=pr(fr().mark((function e(t,n){var r,i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qy(n),i=Vy(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fy(e,t){return jy.apply(this,arguments)}function jy(){return(jy=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vy(t)._set(qy(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uy(e,t){Dy.set(e._key(),t)}function Vy(e){return rf(e._redirectPersistence)}function qy(e){return Xf("pendingRedirect",e.config.apiKey,e.name)}function By(e,t,n){return function(e,t,n){return zy.apply(this,arguments)}(e,t,n)}function zy(){return(zy=pr(fr().mark((function e(t,n,r){var i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=dd(t),Jh(t,n,ep),a=ky(i,r),e.next=5,Fy(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wy(e,t,n){return function(e,t,n){return Ky.apply(this,arguments)}(e,t,n)}function Ky(){return(Ky=pr(fr().mark((function e(t,n,r){var i,a,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jh((i=ui(t)).auth,n,ep),a=ky(i.auth,r),e.next=5,Fy(a,i.auth);case 5:return e.next=7,$y(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gy(e,t,n){return function(e,t,n){return Hy.apply(this,arguments)}(e,t,n)}function Hy(){return(Hy=pr(fr().mark((function e(t,n,r){var i,a,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jh((i=ui(t)).auth,n,ep),a=ky(i.auth,r),e.next=5,wp(!1,i,n.providerId);case 5:return e.next=7,Fy(a,i.auth);case 7:return e.next=9,$y(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qy(e,t){return Yy.apply(this,arguments)}function Yy(){return(Yy=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dd(t)._initializationPromise;case 2:return e.abrupt("return",Xy(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xy(e,t){return Jy.apply(this,arguments)}function Jy(){return Jy=pr(fr().mark((function e(t,n){var r,i,a,o,u,s=arguments;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=dd(t),a=ky(i,n),o=new Oy(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Jy.apply(this,arguments)}function $y(e){return Zy.apply(this,arguments)}function Zy(){return(Zy=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ev("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var em=function(){function e(t){A(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return R(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nm(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!nm(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Yh(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tm(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(tm(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function tm(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function nm(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function rm(e){return im.apply(this,arguments)}function im(){return im=pr(fr().mark((function e(t){var n,r=arguments;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",pf(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),im.apply(this,arguments)}var am=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,om=/^https?/;function um(){return(um=pr(fr().mark((function e(t){var n,r,i,a,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,rm(t);case 4:n=e.sent,r=n.authorizedDomains,i=vr(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!sm(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Qh(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function sm(e){var t=af(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!om.test(r))return!1;if(am.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var cm=new sf(3e4,6e4);function lm(){var e=Tv().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=N(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var hm=null;function fm(e){return hm=hm||function(e){return new Promise((function(t,n){var r,i,a;function o(){lm(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){lm(),n(Yh(e,"network-request-failed"))},timeout:cm.get()})}if(null===(i=null===(r=Tv().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Tv().gapi)||void 0===a?void 0:a.load)){var u=Xv("iframefcb");return Tv()[u]=function(){gapi.load?o():n(Yh(e,"network-request-failed"))},Yv("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw hm=null,e}))}(e),hm}var dm=new sf(5e3,15e3),pm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ym(e){var t=e.config;Zh(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?cf(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:ta},i=vm.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat($r(r).slice(1))}function mm(e){return gm.apply(this,arguments)}function gm(){return gm=pr(fr().mark((function e(t){var n,r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fm(t);case 2:return n=e.sent,Zh(r=Tv().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:ym(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pm,dontclear:!0},(function(e){return new Promise(function(){var n=pr(fr().mark((function n(r,i){var a,o,u;return fr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Tv().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Yh(t,"network-request-failed"),o=Tv().setTimeout((function(){i(a)}),dm.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),gm.apply(this,arguments)}var km={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_m="_blank",wm="http://localhost",bm=function(){function e(t){A(this,e),this.window=t,this.associatedEvent=null}return R(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function xm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},km),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Pr().toLowerCase();n&&(u=td(c)?_m:n),Zf(c)&&(t=t||wm,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=w(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(ud(c)&&"_self"!==u)return Im(t||"",u),new bm(null);var h=window.open(t||"",u,l);Zh(h,e,"popup-blocked");try{h.focus()}catch(f){}return new bm(h)}function Im(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Em="__/auth/handler",Sm="emulator/auth/handler";function Tm(e,t,n,r,i,a){Zh(e.config.authDomain,e,"auth-domain-config-required"),Zh(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ta,eventId:i};if(t instanceof ep){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Qr(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=w(s[u],2),l=c[0],h=c[1];o[l]=h}}if(t instanceof tp){var f=t.getScopes().filter((function(e){return""!==e}));f.length>0&&(o.scopes=f.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Em);return cf(t,Sm)}(e),"?").concat($r(d).slice(1))}var Cm="webStorageSupport",Nm=function(){function e(){A(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bv,this._completeRedirectFn=Xy,this._overrideRedirectResult=Uy}return R(e,[{key:"_openPopup",value:function(){var e=pr(fr().mark((function e(t,n,r,i){var a,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tf(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Tm(t,n,r,af(),i),e.abrupt("return",xm(t,o,Ev()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=pr(fr().mark((function e(t,n,r,i){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Tm(t,n,r,af(),i),Tv().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(tf(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=pr(fr().mark((function e(t){var n,r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mm(t);case 2:return n=e.sent,r=new em(t),n.register("authEvent",(function(e){return Zh(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Cm,{type:Cm},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Qh(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return um.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return cd()||ed()||od()}}]),e}(),Am=Nm,Pm=function(e){O(n,e);var t=V(n);function n(e){var r;return A(this,n),(r=t.call(this,"phone")).credential=e,r}return R(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return pf(e,"POST","/v2/accounts/mfaEnrollment:finalize",df(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return pf(e,"POST","/v2/accounts/mfaSignIn:finalize",df(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){A(this,e),this.factorId=t}return R(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return ef("unexpected MultiFactorSessionType")}}}]),e}()),Rm=function(){function e(){A(this,e)}return R(e,null,[{key:"assertion",value:function(e){return Pm._fromCredential(e)}}]),e}();Rm.FACTOR_ID="phone";var Dm,Om="@firebase/auth",Lm="0.20.2",Mm=function(){function e(t){A(this,e),this.auth=t,this.internalListeners=new Map}return R(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Zh(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Fm(){return window}Dm="Browser",Qi(new si("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Zh(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Zh(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Dm,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ld(Dm)},i=new fd(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(rf);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Qi(new si("auth-internal",(function(e){return function(e){return new Mm(e)}(dd(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ua(Om,Lm,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Dm)),ua(Om,Lm,"esm2017");function jm(e,t,n){return Um.apply(this,arguments)}function Um(){return Um=pr(fr().mark((function e(t,n,r){var i,a,o,u,s;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Fm(),o=a.BuildInfo,tf(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Km(n.sessionId);case 4:return u=e.sent,s={},od()?s.ibi=o.packageName:rd()?s.apn=o.packageName:Qh(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Tm(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Um.apply(this,arguments)}function Vm(){return(Vm=pr(fr().mark((function e(t){var n,r,i;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fm(),r=n.BuildInfo,i={},od()?i.iosBundleId=r.packageName:rd()?i.androidPackageName=r.packageName:Qh(t,"operation-not-supported-in-this-environment"),e.next=5,rm(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qm(e){var t=Fm().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Bm(e,t,n){return zm.apply(this,arguments)}function zm(){return zm=pr(fr().mark((function e(t,n,r){var i,a,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fm(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Yh(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),rd()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),zm.apply(this,arguments)}function Wm(e){var t,n,r,i,a,o,u,s,c,l,h=Fm();Zh("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Zh("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Zh("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Zh("function"===typeof(null===(s=null===(u=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Zh("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Km(e){return Gm.apply(this,arguments)}function Gm(){return(Gm=pr(fr().mark((function e(t){var n,r,i;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Hm(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hm(e){if(tf(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Qm=function(e){O(n,e);var t=V(n);function n(){var e;return A(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return R(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Ch(L(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(em);function Ym(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:eg(),postBody:null,tenantId:e.tenantId,error:Yh(e,"no-auth-event")}}function Xm(e,t){return tg()._set(ng(e),t)}function Jm(e){return $m.apply(this,arguments)}function $m(){return($m=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tg()._get(ng(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,tg()._remove(ng(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zm(e,t){var n,r,i=function(e){var t=rg(e),n=t.link?decodeURIComponent(t.link):void 0,r=rg(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return rg(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=rg(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Yh(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function eg(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function tg(){return rf(_v)}function ng(e){return Xf("authEvent",e.config.apiKey,e.name)}function rg(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=m(t=n)||C(t)||k(t)||_();r[0];return Zr(r.slice(1).join("?"))}var ig=function(){function e(){A(this,e),this._redirectPersistence=bv,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Xy,this._overrideRedirectResult=Uy}return R(e,[{key:"_initialize",value:function(){var e=pr(fr().mark((function e(t){var n,r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Qm(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Qh(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=pr(fr().mark((function e(t,n,r,i){var a,o,u,s;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wm(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Dy.clear(),e.next=10,this._originValidation(t);case 10:return o=Ym(t,r,i),e.next=13,Xm(t,o);case 13:return e.next=15,jm(t,o,n);case 15:return u=e.sent,e.next=18,qm(u);case 18:return s=e.sent,e.abrupt("return",Bm(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Vm.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Fm(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(pr(fr().mark((function n(){return fr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Jm(e);case 2:t.onEvent(og());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=pr(fr().mark((function n(r){var i,a;return fr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Jm(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Zm(i,r.url)),t.onEvent(a||og());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Fm().handleOpenURL=function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),ag=ig;function og(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Yh("no-auth-event")}}function ug(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function sg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr();return!("file:"!==ug()&&"ionic:"!==ug()&&"capacitor:"!==ug()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function cg(){return Mr()&&11===(null===document||void 0===document?void 0:document.documentMode)}function lg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr();return/Edge\/\d+/.test(e)}function hg(){try{var e=self.localStorage,t=Ev();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr();return cg()||lg(e)}()||jr()}catch(n){return fg()&&jr()}return!1}function fg(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function dg(){return("http:"===ug()||"https:"===ug()||Or()||sg())&&!(Lr()||Dr())&&hg()&&!fg()}function pg(){return sg()&&"undefined"!==typeof document}function vg(){return yg.apply(this,arguments)}function yg(){return(yg=pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pg()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mg={LOCAL:"local",NONE:"none",SESSION:"session"},gg=Zh,kg="persistence";function _g(e,t){gg(Object.values(mg).includes(t),e,"invalid-persistence-type"),Lr()?gg(t!==mg.SESSION,e,"unsupported-persistence-type"):Dr()?gg(t===mg.NONE,e,"unsupported-persistence-type"):fg()?gg(t===mg.NONE||t===mg.LOCAL&&jr(),e,"unsupported-persistence-type"):gg(t===mg.NONE||hg(),e,"unsupported-persistence-type")}function wg(e){return bg.apply(this,arguments)}function bg(){return(bg=pr(fr().mark((function e(t){var n,r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=xg(),r=Xf(kg,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xg(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Ig=Zh,Eg=function(){function e(){A(this,e),this.browserResolver=rf(Am),this.cordovaResolver=rf(ag),this.underlyingResolver=null,this._redirectPersistence=bv,this._completeRedirectFn=Xy,this._overrideRedirectResult=Uy}return R(e,[{key:"_initialize",value:function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=pr(fr().mark((function e(t,n,r,i){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=pr(fr().mark((function e(t,n,r,i){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return pg()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Ig(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=pr(fr().mark((function e(){var t;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,vg();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Sg(e){return e.unwrap()}function Tg(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Rg(e,function(e,t){var n,r=ui(e),i=t;return Zh(t.customData.operationType,r,"argument-error"),Zh(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),dv._fromError(r,i)}(e,t));else if(r){var i=Cg(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Cg(e){var t=(e instanceof Ur?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Ur)&&"temporaryProof"in t&&"phoneNumber"in t)return gy.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Oh)return null;switch(r){case Dh:n=ip;break;case Ph:n=rp;break;case Rh:n=ap;break;case Lh:n=sp;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?op._create(r,u):Wd._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new np(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Ur?n.credentialFromError(e):n.credentialFromResult(e)}function Ng(e,t){return t.catch((function(t){throw t instanceof Ur&&Tg(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Cg(t)),additionalUserInfo:hv(e),user:Dg.getOrCreate(r)}}))}function Ag(e,t){return Pg.apply(this,arguments)}function Pg(){return(Pg=pr(fr().mark((function e(t,n){var r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Ng(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rg=function(){function e(t,n){A(this,e),this.resolver=n,this.auth=t.wrapped()}return R(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Ng(Sg(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Dg=function(){function e(t){A(this,e),this._delegate=t,this.multiFactor=function(e){var t=ui(e);return yv.has(t)||yv.set(t,vv._fromUser(t)),yv.get(t)}(t)}return R(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ng(this.auth,Np(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ag(this.auth,fy(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ng(this.auth,Ay(this._delegate,t,Eg)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wg(dd(this.auth));case 2:return e.abrupt("return",Gy(this._delegate,t,Eg));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ng(this.auth,Pp(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Ag(this.auth,function(e,t,n){return py.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Ng(this.auth,function(e,t,n){return Ny.apply(this,arguments)}(this._delegate,e,Eg))}},{key:"reauthenticateWithRedirect",value:function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wg(dd(this.auth));case 2:return e.abrupt("return",Wy(this._delegate,t,Eg));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return $p.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mp(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return rv(ui(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return rv(ui(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return my.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return nv.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Zp.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Dg.USER_MAP=new WeakMap;var Og=Zh,Lg=function(){function e(t,n){if(A(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Og(r,"invalid-api-key",{appName:t.name}),Og(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Eg:void 0;this._delegate=n.initialize({options:{persistence:Fg(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(zh),this.linkUnderlyingAuth()}return R(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Dg.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){vd(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return qp.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Bp(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Vp.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ng(this._delegate,Kp(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Jp.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=$d.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=pr(fr().mark((function e(){var t;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Og(dg(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Qy(this._delegate,Eg);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Ng(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){dd(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Mg(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Mg(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Hp.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Up.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=pr(fr().mark((function e(t){var n,r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_g(this._delegate,t),e.t0=t,e.next=e.t0===mg.SESSION?4:e.t0===mg.LOCAL?6:e.t0===mg.NONE?11:13;break;case 4:return n=bv,e.abrupt("break",14);case 6:return e.next=8,rf(Kv)._isAvailable();case 8:return r=e.sent,n=r?Kv:_v,e.abrupt("break",14);case 11:return n=Yf,e.abrupt("break",14);case 13:return e.abrupt("return",Qh("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Ng(this._delegate,function(e){return dp.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Ng(this._delegate,Tp(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Ng(this._delegate,function(e,t){return Lp.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Ng(this._delegate,function(e,t,n){return Tp(ui(e),Zd.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Ng(this._delegate,function(e,t,n){return Qp.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Ag(this._delegate,function(e,t,n){return hy.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Og(dg(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Ng(this._delegate,Ty(this._delegate,t,Eg)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Og(dg(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,wg(this._delegate);case 3:return e.abrupt("return",By(this._delegate,t,Eg));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Wp.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Mg(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Dg.getOrCreate(e))},error:t,complete:n}}function Fg(e,t){var n=function(e,t){var n=xg();if(!n)return[];var r=Xf(kg,e,t);switch(n.getItem(r)){case mg.NONE:return[Yf];case mg.LOCAL:return[Kv,bv];case mg.SESSION:return[bv];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Kv)||n.push(Kv),"undefined"!==typeof window)for(var r=0,i=[_v,bv];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Yf)||n.push(Yf),n}Lg.Persistence=mg;var jg=function(){function e(){A(this,e),this.providerId="phone",this._delegate=new gy(Sg(Sh.auth()))}return R(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return gy.credential(e,t)}}]),e}();jg.PHONE_SIGN_IN_METHOD=gy.PHONE_SIGN_IN_METHOD,jg.PROVIDER_ID=gy.PROVIDER_ID;var Ug,Vg=Zh,qg=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sh.app();A(this,e),Vg(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new sy(t,n,i.auth()),this.type=this._delegate.type}return R(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Ug=Sh).INTERNAL.registerComponent(new si("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Lg(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Mh,PASSWORD_RESET:Fh,RECOVER_EMAIL:jh,REVERT_SECOND_FACTOR_ADDITION:Uh,VERIFY_AND_CHANGE_EMAIL:Vh,VERIFY_EMAIL:qh}},EmailAuthProvider:Zd,FacebookAuthProvider:rp,GithubAuthProvider:ap,GoogleAuthProvider:ip,OAuthProvider:np,SAMLAuthProvider:up,PhoneAuthProvider:jg,PhoneMultiFactorGenerator:Rm,RecaptchaVerifier:qg,TwitterAuthProvider:sp,Auth:Lg,AuthCredential:gd,Error:Ur}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ug.registerVersion("@firebase/auth-compat","0.2.15");var Bg,zg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Wg={},Kg=Kg||{},Gg=zg||self;function Hg(){}function Qg(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Yg(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Xg="closure_uid_"+(1e9*Math.random()>>>0),Jg=0;function $g(e,t,n){return e.call.apply(e.bind,arguments)}function Zg(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ek(e,t,n){return(ek=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$g:Zg).apply(null,arguments)}function tk(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function nk(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function rk(){this.s=this.s,this.o=this.o}var ik={};rk.prototype.s=!1,rk.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Xg)&&e[Xg]||(e[Xg]=++Jg)}(this);delete ik[e]}},rk.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ak=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},ok=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function uk(e){return Array.prototype.concat.apply([],arguments)}function sk(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ck(e){return/^[\s\xa0]*$/.test(e)}var lk,hk=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function fk(e,t){return-1!=e.indexOf(t)}function dk(e,t){return e<t?-1:e>t?1:0}e:{var pk=Gg.navigator;if(pk){var vk=pk.userAgent;if(vk){lk=vk;break e}}lk=""}function yk(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function mk(e){var t={};for(var n in e)t[n]=e[n];return t}var gk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kk(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<gk.length;a++)n=gk[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _k(e){return _k[" "](e),e}_k[" "]=Hg;var wk,bk=fk(lk,"Opera"),xk=fk(lk,"Trident")||fk(lk,"MSIE"),Ik=fk(lk,"Edge"),Ek=Ik||xk,Sk=fk(lk,"Gecko")&&!(fk(lk.toLowerCase(),"webkit")&&!fk(lk,"Edge"))&&!(fk(lk,"Trident")||fk(lk,"MSIE"))&&!fk(lk,"Edge"),Tk=fk(lk.toLowerCase(),"webkit")&&!fk(lk,"Edge");function Ck(){var e=Gg.document;return e?e.documentMode:void 0}e:{var Nk="",Ak=function(){var e=lk;return Sk?/rv:([^\);]+)(\)|;)/.exec(e):Ik?/Edge\/([\d\.]+)/.exec(e):xk?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Tk?/WebKit\/(\S+)/.exec(e):bk?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ak&&(Nk=Ak?Ak[1]:""),xk){var Pk=Ck();if(null!=Pk&&Pk>parseFloat(Nk)){wk=String(Pk);break e}}wk=Nk}var Rk,Dk={};function Ok(){return function(e){var t=Dk;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=hk(String(wk)).split("."),n=hk("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=dk(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||dk(0==a[2].length,0==o[2].length)||dk(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Gg.document&&xk){var Lk=Ck();Rk=Lk||(parseInt(wk,10)||void 0)}else Rk=void 0;var Mk=Rk,Fk=function(){if(!Gg.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Gg.addEventListener("test",Hg,t),Gg.removeEventListener("test",Hg,t)}catch(n){}return e}();function jk(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Uk(e,t){if(jk.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Sk){e:{try{_k(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Vk[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Uk.Z.h.call(this)}}jk.prototype.h=function(){this.defaultPrevented=!0},nk(Uk,jk);var Vk={2:"touch",3:"pen",4:"mouse"};Uk.prototype.h=function(){Uk.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var qk="closure_listenable_"+(1e6*Math.random()|0),Bk=0;function zk(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Bk,this.ca=this.fa=!1}function Wk(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Kk(e){this.src=e,this.g={},this.h=0}function Gk(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=ak(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Wk(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Hk(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Kk.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Hk(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new zk(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Qk="closure_lm_"+(1e6*Math.random()|0),Yk={};function Xk(e,t,n,r,i){if(r&&r.once)return $k(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Xk(e,t[a],n,r,i);return null}return n=a_(n),e&&e[qk]?e.N(t,n,Yg(r)?!!r.capture:!!r,i):Jk(e,t,n,!1,r,i)}function Jk(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Yg(i)?!!i.capture:!!i,u=r_(e);if(u||(e[Qk]=u=new Kk(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=n_;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Fk||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(t_(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function $k(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)$k(e,t[a],n,r,i);return null}return n=a_(n),e&&e[qk]?e.O(t,n,Yg(r)?!!r.capture:!!r,i):Jk(e,t,n,!0,r,i)}function Zk(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Zk(e,t[a],n,r,i);else r=Yg(r)?!!r.capture:!!r,n=a_(n),e&&e[qk]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Hk(a=e.g[t],n,r,i))&&(Wk(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=r_(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Hk(t,n,r,i)),(n=-1<e?t[e]:null)&&e_(n))}function e_(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[qk])Gk(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(t_(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=r_(t))?(Gk(n,e),0==n.h&&(n.src=null,t[Qk]=null)):Wk(e)}}}function t_(e){return e in Yk?Yk[e]:Yk[e]="on"+e}function n_(e,t){if(e.ca)e=!0;else{t=new Uk(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&e_(e),e=n.call(r,t)}return e}function r_(e){return(e=e[Qk])instanceof Kk?e:null}var i_="__closure_events_fn_"+(1e9*Math.random()>>>0);function a_(e){return"function"===typeof e?e:(e[i_]||(e[i_]=function(t){return e.handleEvent(t)}),e[i_])}function o_(){rk.call(this),this.i=new Kk(this),this.P=this,this.I=null}function u_(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new jk(t,e);else if(t instanceof jk)t.target=t.target||e;else{var i=t;kk(t=new jk(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=s_(o,r,!0,t)&&i}if(i=s_(o=t.g=e,r,!0,t)&&i,i=s_(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=s_(o=t.g=n[a],r,!1,t)&&i}function s_(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Gk(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}nk(o_,rk),o_.prototype[qk]=!0,o_.prototype.removeEventListener=function(e,t,n,r){Zk(this,e,t,n,r)},o_.prototype.M=function(){if(o_.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Wk(n[r]);delete t.g[e],t.h--}}this.I=null},o_.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},o_.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var c_=Gg.JSON.stringify;function l_(){var e=g_,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var h_,f_=function(){function e(){A(this,e),this.h=this.g=null}return R(e,[{key:"add",value:function(e,t){var n=d_.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),d_=new(function(){function e(t,n){A(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return R(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new p_}),(function(e){return e.reset()})),p_=function(){function e(){A(this,e),this.next=this.g=this.h=null}return R(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function v_(e){Gg.setTimeout((function(){throw e}),0)}function y_(e,t){h_||function(){var e=Gg.Promise.resolve(void 0);h_=function(){e.then(k_)}}(),m_||(h_(),m_=!0),g_.add(e,t)}var m_=!1,g_=new f_;function k_(){for(var e;e=l_();){try{e.h.call(e.g)}catch(n){v_(n)}var t=d_;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}m_=!1}function __(e,t){o_.call(this),this.h=e||1,this.g=t||Gg,this.j=ek(this.kb,this),this.l=Date.now()}function w_(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function b_(e,t,n){if("function"===typeof e)n&&(e=ek(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ek(e.handleEvent,e)}return 2147483647<Number(t)?-1:Gg.setTimeout(e,t||0)}function x_(e){e.g=b_((function(){e.g=null,e.i&&(e.i=!1,x_(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}nk(__,o_),(Bg=__.prototype).da=!1,Bg.S=null,Bg.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),u_(this,"tick"),this.da&&(w_(this),this.start()))}},Bg.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Bg.M=function(){__.Z.M.call(this),w_(this),delete this.g};var I_=function(e){O(n,e);var t=V(n);function n(e,r){var i;return A(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return R(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:x_(this)}},{key:"M",value:function(){Ch(L(n.prototype),"M",this).call(this),this.g&&(Gg.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(rk);function E_(e){rk.call(this),this.h=e,this.g={}}nk(E_,rk);var S_=[];function T_(e,t,n,r){Array.isArray(n)||(n&&(S_[0]=n.toString()),n=S_);for(var i=0;i<n.length;i++){var a=Xk(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function C_(e){yk(e.g,(function(e,t){this.g.hasOwnProperty(t)&&e_(e)}),e),e.g={}}function N_(){this.g=!0}function A_(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return c_(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}E_.prototype.M=function(){E_.Z.M.call(this),C_(this)},E_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},N_.prototype.Aa=function(){this.g=!1},N_.prototype.info=function(){};var P_={},R_=null;function D_(){return R_=R_||new o_}function O_(e){jk.call(this,P_.Ma,e)}function L_(e){var t=D_();u_(t,new O_(t,e))}function M_(e,t){jk.call(this,P_.STAT_EVENT,e),this.stat=t}function F_(e){var t=D_();u_(t,new M_(t,e))}function j_(e,t){jk.call(this,P_.Na,e),this.size=t}function U_(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Gg.setTimeout((function(){e()}),t)}P_.Ma="serverreachability",nk(O_,jk),P_.STAT_EVENT="statevent",nk(M_,jk),P_.Na="timingevent",nk(j_,jk);var V_={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},q_={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function B_(){}function z_(e){return e.h||(e.h=e.i())}function W_(){}B_.prototype.h=null;var K_,G_={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function H_(){jk.call(this,"d")}function Q_(){jk.call(this,"c")}function Y_(){}function X_(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new E_(this),this.P=$_,e=Ek?125:void 0,this.W=new __(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new J_}function J_(){this.i=null,this.g="",this.h=!1}nk(H_,jk),nk(Q_,jk),nk(Y_,B_),Y_.prototype.g=function(){return new XMLHttpRequest},Y_.prototype.i=function(){return{}},K_=new Y_;var $_=45e3,Z_={},ew={};function tw(e,t,n){e.K=1,e.v=Iw(gw(t)),e.s=n,e.U=!0,nw(e,null)}function nw(e,t){e.F=Date.now(),ow(e),e.A=gw(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Fw(n.h,"t",r),e.C=0,n=e.l.H,e.h=new J_,e.g=Ub(e.l,n?t:null,!e.s),0<e.O&&(e.L=new I_(ek(e.Ia,e,e.g),e.O)),T_(e.V,e.g,"readystatechange",e.gb),t=e.H?mk(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),L_(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function rw(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function iw(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=aw(e,n))==ew){4==t&&(e.o=4,F_(14),i=!1),A_(e.j,e.m,null,"[Incomplete Response]");break}if(r==Z_){e.o=4,F_(15),A_(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}A_(e.j,e.m,r,null),hw(e,r)}rw(e)&&r!=ew&&r!=Z_&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,F_(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Pb(t),t.L=!0,F_(11))):(A_(e.j,e.m,n,"[Invalid Chunked Response]"),lw(e),cw(e))}function aw(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ew:(n=Number(t.substring(n,r)),isNaN(n)?Z_:(r+=1)+n>t.length?ew:(t=t.substr(r,n),e.C=r+n,t))}function ow(e){e.Y=Date.now()+e.P,uw(e,e.P)}function uw(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=U_(ek(e.eb,e),t)}function sw(e){e.B&&(Gg.clearTimeout(e.B),e.B=null)}function cw(e){0==e.l.G||e.I||Ob(e.l,e)}function lw(e){sw(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,w_(e.W),C_(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function hw(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Kw(n.i,e)))if(n.I=e.N,!e.J&&Kw(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Db(n),bb(n)}Ab(n),F_(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=U_(ek(n.ab,n),6e3));if(1>=Ww(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Mb(n,11)}else if((e.J||n.g==e)&&Db(n),!ck(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(fk(l,"spdy")||fk(l,"quic")||fk(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Gw(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,xw(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=jb(r,r.H?r.la:null,r.W),d.J){Hw(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(sw(p),ow(p)),r.g=d}else Nb(r);0<n.l.length&&Eb(n)}else"stop"!=a[0]&&"close"!=a[0]||Mb(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Mb(n,7):wb(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}L_(4)}catch(a){}}function fw(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Qg(e)||"string"===typeof e)ok(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Qg(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Qg(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function dw(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof dw)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function pw(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];vw(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)vw(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function vw(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Bg=X_.prototype).setTimeout=function(e){this.P=e},Bg.gb=function(e){e=e.target;var t=this.L;t&&3==yb(e)?t.l():this.Ia(e)},Bg.Ia=function(e){try{if(e==this.g)e:{var t=yb(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Ek||this.g&&(this.h.h||this.g.ga()||mb(this.g)))){this.I||4!=t||7==n||L_(8==n||0>=r?3:2),sw(this);var i=this.g.ba();this.N=i;t:if(rw(this)){var a=mb(this.g);e="";var o=a.length,u=4==yb(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){lw(this),cw(this);var s="";break t}this.h.i=new Gg.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ck(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,F_(12),lw(this),cw(this);break e}A_(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,hw(this,i)}this.U?(iw(this,t,s),Ek&&this.i&&3==t&&(T_(this.V,this.W,"tick",this.fb),this.W.start())):(A_(this.j,this.m,s,null),hw(this,s)),4==t&&lw(this),this.i&&!this.I&&(4==t?Ob(this.l,this):(this.i=!1,ow(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,F_(12)):(this.o=0,F_(13)),lw(this),cw(this)}}}catch(t){}},Bg.fb=function(){if(this.g){var e=yb(this.g),t=this.g.ga();this.C<t.length&&(sw(this),iw(this,e,t),this.i&&4!=e&&ow(this))}},Bg.cancel=function(){this.I=!0,lw(this)},Bg.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(L_(3),F_(17)),lw(this),this.o=2,cw(this)):uw(this,this.Y-e)},(Bg=dw.prototype).R=function(){pw(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Bg.T=function(){return pw(this),this.g.concat()},Bg.get=function(e,t){return vw(this.h,e)?this.h[e]:t},Bg.set=function(e,t){vw(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Bg.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var yw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function mw(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof mw){this.g=void 0!==t?t:e.g,kw(this,e.j),this.s=e.s,_w(this,e.i),ww(this,e.m),this.l=e.l,t=e.h;var n=new Dw;n.i=t.i,t.g&&(n.g=new dw(t.g),n.h=t.h),bw(this,n),this.o=e.o}else e&&(n=String(e).match(yw))?(this.g=!!t,kw(this,n[1]||"",!0),this.s=Ew(n[2]||""),_w(this,n[3]||"",!0),ww(this,n[4]),this.l=Ew(n[5]||"",!0),bw(this,n[6]||"",!0),this.o=Ew(n[7]||"")):(this.g=!!t,this.h=new Dw(null,this.g))}function gw(e){return new mw(e)}function kw(e,t,n){e.j=n?Ew(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function _w(e,t,n){e.i=n?Ew(t,!0):t}function ww(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function bw(e,t,n){t instanceof Dw?(e.h=t,function(e,t){t&&!e.j&&(Ow(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Lw(this,t),Fw(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Sw(t,Pw)),e.h=new Dw(t,e.g))}function xw(e,t,n){e.h.set(t,n)}function Iw(e){return xw(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ew(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Sw(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Tw),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Tw(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}mw.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Sw(t,Cw,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Sw(t,Cw,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Sw(n,"/"==n.charAt(0)?Aw:Nw,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Sw(n,Rw)),e.join("")};var Cw=/[#\/\?@]/g,Nw=/[#\?:]/g,Aw=/[#\?]/g,Pw=/[#\?@]/g,Rw=/#/g;function Dw(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ow(e){e.g||(e.g=new dw,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Lw(e,t){Ow(e),t=jw(e,t),vw(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,vw((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&pw(e)))}function Mw(e,t){return Ow(e),t=jw(e,t),vw(e.g.h,t)}function Fw(e,t,n){Lw(e,t),0<n.length&&(e.i=null,e.g.set(jw(e,t),sk(n)),e.h+=n.length)}function jw(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Bg=Dw.prototype).add=function(e,t){Ow(this),this.i=null,e=jw(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Bg.forEach=function(e,t){Ow(this),this.g.forEach((function(n,r){ok(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Bg.T=function(){Ow(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Bg.R=function(e){Ow(this);var t=[];if("string"===typeof e)Mw(this,e)&&(t=uk(t,this.g.get(jw(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=uk(t,e[n])}return t},Bg.set=function(e,t){return Ow(this),this.i=null,Mw(this,e=jw(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Bg.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Bg.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Uw=R((function e(t,n){A(this,e),this.h=t,this.g=n}));function Vw(e){this.l=e||Bw,Gg.PerformanceNavigationTiming?e=0<(e=Gg.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Gg.g&&Gg.g.Ea&&Gg.g.Ea()&&Gg.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var qw,Bw=10;function zw(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ww(e){return e.h?1:e.g?e.g.size:0}function Kw(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Gw(e,t){e.g?e.g.add(t):e.h=t}function Hw(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Qw(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=vr(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return sk(e.i)}function Yw(){}function Xw(){this.g=new Yw}function Jw(e,t,n){var r=n||"";try{fw(e,(function(e,n){var i=e;Yg(e)&&(i=c_(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function $w(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Zw(e){this.l=e.$b||null,this.j=e.ib||!1}function eb(e,t){o_.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=tb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vw.prototype.cancel=function(){if(this.i=Qw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=vr(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Yw.prototype.stringify=function(e){return Gg.JSON.stringify(e,void 0)},Yw.prototype.parse=function(e){return Gg.JSON.parse(e,void 0)},nk(Zw,B_),Zw.prototype.g=function(){return new eb(this.l,this.j)},Zw.prototype.i=(qw={},function(){return qw}),nk(eb,o_);var tb=0;function nb(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function rb(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ib(e)}function ib(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Bg=eb.prototype).open=function(e,t){if(this.readyState!=tb)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ib(this)},Bg.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Gg).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Bg.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,rb(this)),this.readyState=tb},Bg.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ib(this)),this.g&&(this.readyState=3,ib(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Gg.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;nb(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Bg.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?rb(this):ib(this),3==this.readyState&&nb(this)}},Bg.Ua=function(e){this.g&&(this.response=this.responseText=e,rb(this))},Bg.Ta=function(e){this.g&&(this.response=e,rb(this))},Bg.ha=function(){this.g&&rb(this)},Bg.setRequestHeader=function(e,t){this.v.append(e,t)},Bg.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Bg.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(eb.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ab=Gg.JSON.parse;function ob(e){o_.call(this),this.headers=new dw,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ub,this.K=this.L=!1}nk(ob,o_);var ub="",sb=/^https?$/i,cb=["POST","PUT"];function lb(e){return"content-type"==e.toLowerCase()}function hb(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,fb(e),pb(e)}function fb(e){e.D||(e.D=!0,u_(e,"complete"),u_(e,"error"))}function db(e){if(e.h&&"undefined"!=typeof Kg&&(!e.C[1]||4!=yb(e)||2!=e.ba()))if(e.v&&4==yb(e))b_(e.Fa,0,e);else if(u_(e,"readystatechange"),4==yb(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(yw)[1]||null;if(!a&&Gg.self&&Gg.self.location){var o=Gg.self.location.protocol;a=o.substr(0,o.length-1)}i=!sb.test(a?a.toLowerCase():"")}t=i}if(t)u_(e,"complete"),u_(e,"success");else{e.m=6;try{var u=2<yb(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",fb(e)}}finally{pb(e)}}}function pb(e,t){if(e.g){vb(e);var n=e.g,r=e.C[0]?Hg:null;e.g=null,e.C=null,t||u_(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function vb(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Gg.clearTimeout(e.A),e.A=null)}function yb(e){return e.g?e.g.readyState:0}function mb(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ub:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function gb(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return yk(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):xw(e,t,n))}function kb(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function _b(e){this.za=0,this.l=[],this.h=new N_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=kb("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=kb("baseRetryDelayMs",5e3,e),this.$a=kb("retryDelaySeedMs",1e4,e),this.Ya=kb("forwardChannelMaxRetries",2,e),this.ra=kb("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Vw(e&&e.concurrentRequestLimit),this.Ca=new Xw,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function wb(e){if(xb(e),3==e.G){var t=e.V++,n=gw(e.F);xw(n,"SID",e.J),xw(n,"RID",t),xw(n,"TYPE","terminate"),Tb(e,n),(t=new X_(e,e.h,t,void 0)).K=2,t.v=Iw(gw(n)),n=!1,Gg.navigator&&Gg.navigator.sendBeacon&&(n=Gg.navigator.sendBeacon(t.v.toString(),"")),!n&&Gg.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ub(t.l,null),t.g.ea(t.v)),t.F=Date.now(),ow(t)}Fb(e)}function bb(e){e.g&&(Pb(e),e.g.cancel(),e.g=null)}function xb(e){bb(e),e.u&&(Gg.clearTimeout(e.u),e.u=null),Db(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Gg.clearTimeout(e.m),e.m=null)}function Ib(e,t){e.l.push(new Uw(e.Za++,t)),3==e.G&&Eb(e)}function Eb(e){zw(e.i)||e.m||(e.m=!0,y_(e.Ha,e),e.C=0)}function Sb(e,t){var n;n=t?t.m:e.V++;var r=gw(e.F);xw(r,"SID",e.J),xw(r,"RID",n),xw(r,"AID",e.U),Tb(e,r),e.o&&e.s&&gb(r,e.o,e.s),n=new X_(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Cb(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Gw(e.i,n),tw(n,r,t)}function Tb(e,t){e.j&&fw({},(function(e,n){xw(t,n,e)}))}function Cb(e,t,n){n=Math.min(e.l.length,n);var r=e.j?ek(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Jw(l,o,"req"+c+"_")}catch(dx){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Nb(e){e.g||e.u||(e.Y=1,y_(e.Ga,e),e.A=0)}function Ab(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=U_(ek(e.Ga,e),Lb(e,e.A)),e.A++,!0)}function Pb(e){null!=e.B&&(Gg.clearTimeout(e.B),e.B=null)}function Rb(e){e.g=new X_(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=gw(e.oa);xw(t,"RID","rpc"),xw(t,"SID",e.J),xw(t,"CI",e.N?"0":"1"),xw(t,"AID",e.U),Tb(e,t),xw(t,"TYPE","xmlhttp"),e.o&&e.s&&gb(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Iw(gw(t)),n.s=null,n.U=!0,nw(n,e)}function Db(e){null!=e.v&&(Gg.clearTimeout(e.v),e.v=null)}function Ob(e,t){var n=null;if(e.g==t){Db(e),Pb(e),e.g=null;var r=2}else{if(!Kw(e.i,t))return;n=t.D,Hw(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;u_(r=D_(),new j_(r,n,t,i)),Eb(e)}else Nb(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Ww(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=U_(ek(e.Ha,e,t),Lb(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ab(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Mb(e,5);break;case 4:Mb(e,10);break;case 3:Mb(e,6);break;default:Mb(e,2)}}function Lb(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Mb(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=ek(e.jb,e);n||(n=new mw("//www.google.com/images/cleardot.gif"),Gg.location&&"http"==Gg.location.protocol||kw(n,"https"),Iw(n)),function(e,t){var n=new N_;if(Gg.Image){var r=new Image;r.onload=tk($w,n,r,"TestLoadImage: loaded",!0,t),r.onerror=tk($w,n,r,"TestLoadImage: error",!1,t),r.onabort=tk($w,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=tk($w,n,r,"TestLoadImage: timeout",!1,t),Gg.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else F_(2);e.G=0,e.j&&e.j.va(t),Fb(e),xb(e)}function Fb(e){e.G=0,e.I=-1,e.j&&(0==Qw(e.i).length&&0==e.l.length||(e.i.i.length=0,sk(e.l),e.l.length=0),e.j.ua())}function jb(e,t,n){var r=function(e){return e instanceof mw?gw(e):new mw(e,void 0)}(n);if(""!=r.i)t&&_w(r,t+"."+r.i),ww(r,r.m);else{var i=Gg.location;r=function(e,t,n,r){var i=new mw(null,void 0);return e&&kw(i,e),t&&_w(i,t),n&&ww(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&yk(e.aa,(function(e,t){xw(r,t,e)})),t=e.D,n=e.sa,t&&n&&xw(r,t,n),xw(r,"VER",e.ma),Tb(e,r),r}function Ub(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new ob(new Zw({ib:!0})):new ob(e.qa)).L=e.H,t}function Vb(){}function qb(){if(xk&&!(10<=Number(Mk)))throw Error("Environmental error: no available transport.")}function Bb(e,t){o_.call(this),this.g=new _b(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!ck(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ck(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Kb(this)}function zb(e){H_.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Wb(){Q_.call(this),this.status=1}function Kb(e){this.g=e}(Bg=ob.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():K_.g(),this.C=this.u?z_(this.u):z_(K_),this.g.onreadystatechange=ek(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void hb(this,a)}e=n||"";var i=new dw(this.headers);r&&fw(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=lb,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Gg.FormData&&e instanceof Gg.FormData,!(0<=ak(cb,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{vb(this),0<this.B&&((this.K=function(e){return xk&&Ok()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ek(this.pa,this)):this.A=b_(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){hb(this,a)}},Bg.pa=function(){"undefined"!=typeof Kg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,u_(this,"timeout"),this.abort(8))},Bg.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,u_(this,"complete"),u_(this,"abort"),pb(this))},Bg.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pb(this,!0)),ob.Z.M.call(this)},Bg.Fa=function(){this.s||(this.F||this.v||this.l?db(this):this.cb())},Bg.cb=function(){db(this)},Bg.ba=function(){try{return 2<yb(this)?this.g.status:-1}catch(qw){return-1}},Bg.ga=function(){try{return this.g?this.g.responseText:""}catch(qw){return""}},Bg.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ab(t)}},Bg.Da=function(){return this.m},Bg.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Bg=_b.prototype).ma=8,Bg.G=1,Bg.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Bg.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new X_(this,this.h,e,void 0),n=this.s;if(this.P&&(n?kk(n=mk(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Cb(this,t,r),xw(i=gw(this.F),"RID",e),xw(i,"CVER",22),this.D&&xw(i,"X-HTTP-Session-Id",this.D),Tb(this,i),this.o&&n&&gb(i,this.o,n),Gw(this.i,t),this.Ra&&xw(i,"TYPE","init"),this.ja?(xw(i,"$req",r),xw(i,"SID","null"),t.$=!0,tw(t,i,null)):tw(t,i,r),this.G=2}}else 3==this.G&&(e?Sb(this,e):0==this.l.length||zw(this.i)||Sb(this))},Bg.Ga=function(){if(this.u=null,Rb(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=U_(ek(this.bb,this),e)}},Bg.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,F_(10),bb(this),Rb(this))},Bg.ab=function(){null!=this.v&&(this.v=null,bb(this),Ab(this),F_(19))},Bg.jb=function(e){e?(this.h.info("Successfully pinged google.com"),F_(2)):(this.h.info("Failed to ping google.com"),F_(1))},(Bg=Vb.prototype).xa=function(){},Bg.wa=function(){},Bg.va=function(){},Bg.ua=function(){},Bg.Oa=function(){},qb.prototype.g=function(e,t){return new Bb(e,t)},nk(Bb,o_),Bb.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),y_(ek(e.hb,e,t))),F_(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=jb(e,null,e.W),Eb(e)},Bb.prototype.close=function(){wb(this.g)},Bb.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Ib(this.g,t)}else this.v?((t={}).__data__=c_(e),Ib(this.g,t)):Ib(this.g,e)},Bb.prototype.M=function(){this.g.j=null,delete this.j,wb(this.g),delete this.g,Bb.Z.M.call(this)},nk(zb,H_),nk(Wb,Q_),nk(Kb,Vb),Kb.prototype.xa=function(){u_(this.g,"a")},Kb.prototype.wa=function(e){u_(this.g,new zb(e))},Kb.prototype.va=function(e){u_(this.g,new Wb(e))},Kb.prototype.ua=function(){u_(this.g,"b")},qb.prototype.createWebChannel=qb.prototype.g,Bb.prototype.send=Bb.prototype.u,Bb.prototype.open=Bb.prototype.m,Bb.prototype.close=Bb.prototype.close,V_.NO_ERROR=0,V_.TIMEOUT=8,V_.HTTP_ERROR=6,q_.COMPLETE="complete",W_.EventType=G_,G_.OPEN="a",G_.CLOSE="b",G_.ERROR="c",G_.MESSAGE="d",o_.prototype.listen=o_.prototype.N,ob.prototype.listenOnce=ob.prototype.O,ob.prototype.getLastError=ob.prototype.La,ob.prototype.getLastErrorCode=ob.prototype.Da,ob.prototype.getStatus=ob.prototype.ba,ob.prototype.getResponseJson=ob.prototype.Qa,ob.prototype.getResponseText=ob.prototype.ga,ob.prototype.send=ob.prototype.ea;var Gb=Wg.createWebChannelTransport=function(){return new qb},Hb=Wg.getStatEventTarget=function(){return D_()},Qb=Wg.ErrorCode=V_,Yb=Wg.EventType=q_,Xb=Wg.Event=P_,Jb=Wg.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},$b=Wg.FetchXmlHttpFactory=Zw,Zb=Wg.WebChannel=W_,ex=Wg.XhrIo=ob,tx="@firebase/firestore",nx=function(){function e(t){A(this,e),this.uid=t}return R(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();nx.UNAUTHENTICATED=new nx(null),nx.GOOGLE_CREDENTIALS=new nx("google-credentials-uid"),nx.FIRST_PARTY=new nx("first-party-uid"),nx.MOCK_USER=new nx("mock-user");var rx="9.8.0",ix=new ki("@firebase/firestore");function ax(){return ix.logLevel}function ox(e){if(ix.logLevel<=fi.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(cx);ix.debug.apply(ix,["Firestore (".concat(rx,"): ").concat(e)].concat(N(i)))}}function ux(e){if(ix.logLevel<=fi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(cx);ix.error.apply(ix,["Firestore (".concat(rx,"): ").concat(e)].concat(N(i)))}}function sx(e){if(ix.logLevel<=fi.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(cx);ix.warn.apply(ix,["Firestore (".concat(rx,"): ").concat(e)].concat(N(i)))}}function cx(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function lx(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(rx,") INTERNAL ASSERTION FAILED: ")+e;throw ux(t),new Error(t)}function hx(e,t){e||lx()}function fx(e,t){return e}var dx={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},px=function(e){O(n,e);var t=V(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return R(n)}(Ur),vx=R((function e(){var t=this;A(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),yx=R((function e(t,n){A(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),mx=function(){function e(){A(this,e)}return R(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(nx.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),gx=function(){function e(t){A(this,e),this.token=t,this.changeListener=null}return R(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),kx=function(){function e(t){A(this,e),this.t=t,this.currentUser=nx.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return R(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new vx;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new vx,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){ox("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(ox("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new vx)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ox("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(hx("string"==typeof n.accessToken),new yx(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return hx(null===e||"string"==typeof e),new nx(e)}}]),e}(),_x=R((function e(t,n,r){A(this,e),this.type="FirstParty",this.user=nx.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),wx=function(){function e(t,n,r){A(this,e),this.h=t,this.l=n,this.m=r}return R(e,[{key:"getToken",value:function(){return Promise.resolve(new _x(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(nx.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),bx=R((function e(t){A(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),xx=function(){function e(t){A(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return R(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ox("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,ox("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){ox("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):ox("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(hx("string"==typeof t.token),e.p=t.token,new bx(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Ix=function(){function e(t,n){var r=this;A(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return R(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Ex(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Ix.A=-1;var Sx=function(){function e(){A(this,e)}return R(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Ex(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Tx(e,t){return e<t?-1:e>t?1:0}function Cx(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Nx(e){return e+"\0"}var Ax=function(){function e(t,n){if(A(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new px(dx.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new px(dx.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new px(dx.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new px(dx.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return R(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Tx(this.nanoseconds,e.nanoseconds):Tx(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Px=function(){function e(t){A(this,e),this.timestamp=t}return R(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Ax(0,0))}},{key:"max",value:function(){return new e(new Ax(253402300799,999999999))}}]),e}();function Rx(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Dx(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ox(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Lx=function(){function e(t,n,r){A(this,e),void 0===n?n=0:n>t.length&&lx(),void 0===r?r=t.length-n:r>t.length-n&&lx(),this.segments=t,this.offset=n,this.len=r}return R(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Mx=function(e){O(n,e);var t=V(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new px(dx.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,N(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Lx),Fx=/^[_a-zA-Z][_a-zA-Z0-9]*$/,jx=function(e){O(n,e);var t=V(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Fx.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new px(dx.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new px(dx.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new px(dx.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new px(dx.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Lx),Ux=function(){function e(t){A(this,e),this.fields=t,t.sort(jx.comparator)}return R(e,[{key:"covers",value:function(e){var t,n=vr(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Cx(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Vx=function(e){function t(e){A(this,t),this.binaryString=e}return R(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Tx(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Vx.EMPTY_BYTE_STRING=new Vx("");var qx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bx(e){if(hx(!!e),"string"==typeof e){var t=0,n=qx.exec(e);if(hx(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:zx(e.seconds),nanos:zx(e.nanos)}}function zx(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Wx(e){return"string"==typeof e?Vx.fromBase64String(e):Vx.fromUint8Array(e)}function Kx(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Gx(e){var t=e.mapValue.fields.__previous_value__;return Kx(t)?Gx(t):t}function Hx(e){var t=Bx(e.mapValue.fields.__local_write_time__.timestampValue);return new Ax(t.seconds,t.nanos)}var Qx=R((function e(t,n,r,i,a,o,u,s){A(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Yx=function(){function e(t,n){A(this,e),this.projectId=t,this.database=n||"(default)"}return R(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Xx(e){return null==e}function Jx(e){return 0===e&&1/e==-1/0}function $x(e){return"number"==typeof e&&Number.isInteger(e)&&!Jx(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Zx=function(){function e(t){A(this,e),this.path=t}return R(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Mx.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Mx.fromString(t))}},{key:"fromName",value:function(t){return new e(Mx.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Mx.emptyPath())}},{key:"comparator",value:function(e,t){return Mx.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Mx(t.slice()))}}]),e}(),eI={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},tI={nullValue:"NULL_VALUE"};function nI(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Kx(e)?4:yI(e)?9007199254740991:10:lx()}function rI(e,t){if(e===t)return!0;var n=nI(e);if(n!==nI(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Hx(e).isEqual(Hx(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Bx(e.timestampValue),r=Bx(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Wx(e.bytesValue).isEqual(Wx(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return zx(e.geoPointValue.latitude)===zx(t.geoPointValue.latitude)&&zx(e.geoPointValue.longitude)===zx(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return zx(e.integerValue)===zx(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=zx(e.doubleValue),r=zx(t.doubleValue);return n===r?Jx(n)===Jx(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Cx(e.arrayValue.values||[],t.arrayValue.values||[],rI);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Rx(n)!==Rx(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!rI(n[i],r[i])))return!1;return!0}(e,t);default:return lx()}}function iI(e,t){return void 0!==(e.values||[]).find((function(e){return rI(e,t)}))}function aI(e,t){if(e===t)return 0;var n=nI(e),r=nI(t);if(n!==r)return Tx(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Tx(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=zx(e.integerValue||e.doubleValue),r=zx(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return oI(e.timestampValue,t.timestampValue);case 4:return oI(Hx(e),Hx(t));case 5:return Tx(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Wx(e),r=Wx(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Tx(n[i],r[i]);if(0!==a)return a}return Tx(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Tx(zx(e.latitude),zx(t.latitude));return 0!==n?n:Tx(zx(e.longitude),zx(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=aI(n[i],r[i]);if(a)return a}return Tx(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===eI.mapValue&&t===eI.mapValue)return 0;if(e===eI.mapValue)return 1;if(t===eI.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Tx(r[o],a[o]);if(0!==u)return u;var s=aI(n[r[o]],i[a[o]]);if(0!==s)return s}return Tx(r.length,a.length)}(e.mapValue,t.mapValue);default:throw lx()}}function oI(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Tx(e,t);var n=Bx(e),r=Bx(t),i=Tx(n.seconds,r.seconds);return 0!==i?i:Tx(n.nanos,r.nanos)}function uI(e){return sI(e)}function sI(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Bx(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Wx(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Zx.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=vr(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=sI(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=vr(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(sI(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):lx();var t,n}function cI(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function lI(e){return!!e&&"integerValue"in e}function hI(e){return!!e&&"arrayValue"in e}function fI(e){return!!e&&"nullValue"in e}function dI(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function pI(e){return!!e&&"mapValue"in e}function vI(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Dx(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=vI(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=vI(e.arrayValue.values[r]);return n}return Object.assign({},e)}function yI(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function mI(e){return"nullValue"in e?tI:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?cI(Yx.empty(),Zx.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:lx()}function gI(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?cI(Yx.empty(),Zx.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?eI:lx()}function kI(e,t){var n=aI(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function _I(e,t){var n=aI(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var wI=function(){function e(t){A(this,e),this.value=t}return R(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!pI(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vI(t)}},{key:"setAll",value:function(e){var t=this,n=jx.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=vI(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());pI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return rI(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];pI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Dx(t,(function(t,n){return e[t]=n}));var r,i=vr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(vI(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function bI(e){var t=[];return Dx(e.fields,(function(e,n){var r=new jx([e]);if(pI(n)){var i=bI(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=vr(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Ux(t)}var xI=function(){function e(t,n,r,i,a,o){A(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return R(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=wI.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=wI.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Px.min(),Px.min(),wI.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Px.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Px.min(),wI.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Px.min(),wI.empty(),2)}}]),e}(),II=R((function e(t,n,r,i){A(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function EI(e){return e.fields.find((function(e){return 2===e.kind}))}function SI(e){return e.fields.filter((function(e){return 2!==e.kind}))}II.UNKNOWN_ID=-1;var TI=R((function e(t,n){A(this,e),this.fieldPath=t,this.kind=n})),CI=function(){function e(t,n){A(this,e),this.sequenceNumber=t,this.offset=n}return R(e,null,[{key:"empty",value:function(){return new e(0,PI.min())}}]),e}();function NI(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Px.fromTimestamp(1e9===r?new Ax(n+1,0):new Ax(n,r));return new PI(i,Zx.empty(),t)}function AI(e){return new PI(e.readTime,e.key,-1)}var PI=function(){function e(t,n,r){A(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return R(e,null,[{key:"min",value:function(){return new e(Px.min(),Zx.empty(),-1)}},{key:"max",value:function(){return new e(Px.max(),Zx.empty(),-1)}}]),e}();function RI(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Zx.comparator(e.documentKey,t.documentKey))?n:Tx(e.largestBatchId,t.largestBatchId)}var DI=function(){function e(t,n){A(this,e),this.comparator=t,this.root=n||LI.EMPTY}return R(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,LI.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,LI.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new OI(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new OI(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new OI(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new OI(this.root,e,this.comparator,!0)}}]),e}(),OI=function(){function e(t,n,r,i){A(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return R(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),LI=function(){function e(t,n,r,i,a){A(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return R(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw lx();if(this.right.isRed())throw lx();var e=this.left.check();if(e!==this.right.check())throw lx();return e+(this.isRed()?0:1)}}]),e}();LI.EMPTY=null,LI.RED=!0,LI.BLACK=!1,LI.EMPTY=new(function(){function e(){A(this,e),this.size=0}return R(e,[{key:"key",get:function(){throw lx()}},{key:"value",get:function(){throw lx()}},{key:"color",get:function(){throw lx()}},{key:"left",get:function(){throw lx()}},{key:"right",get:function(){throw lx()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new LI(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var MI=function(){function e(t){A(this,e),this.comparator=t,this.data=new DI(this.comparator)}return R(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new FI(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new FI(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),FI=function(){function e(t){A(this,e),this.iter=t}return R(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function jI(e){return e.hasNext()?e.getNext():void 0}var UI=R((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;A(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function VI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new UI(e,t,n,r,i,a,o)}function qI(e){var t=fx(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+uI(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Xx(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return uI(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return uI(e)})).join(",")),t.P=n}return t.P}function BI(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!iE(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!rI(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!oE(e.startAt,t.startAt)&&oE(e.endAt,t.endAt)}function zI(e){return Zx.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function WI(e,t){return e.filters.filter((function(e){return e instanceof HI&&e.field.isEqual(t)}))}function KI(e,t,n){var r,i=tI,a=!0,o=vr(WI(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=tI,c=!0;switch(u.op){case"<":case"<=":s=mI(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=tI}kI({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];kI({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function GI(e,t,n){var r,i=eI,a=!0,o=vr(WI(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=eI,c=!0;switch(u.op){case">=":case">":s=gI(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=eI}_I({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];_I({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var HI=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return R(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(aI(t,this.value)):null!==t&&nI(this.value)===nI(t)&&this.v(aI(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lx()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new QI(e,t,r):"array-contains"===t?new $I(e,r):"in"===t?new ZI(e,r):"not-in"===t?new eE(e,r):"array-contains-any"===t?new tE(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new YI(e,n):new XI(e,n)}}]),n}(function(){return R((function e(){A(this,e)}))}()),QI=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this,e,r,i)).key=Zx.fromName(i.referenceValue),a}return R(n,[{key:"matches",value:function(e){var t=Zx.comparator(e.key,this.key);return this.v(t)}}]),n}(HI),YI=function(e){O(n,e);var t=V(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e,"in",r)).keys=JI("in",r),i}return R(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(HI),XI=function(e){O(n,e);var t=V(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e,"not-in",r)).keys=JI("not-in",r),i}return R(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(HI);function JI(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Zx.fromName(e.referenceValue)}))}var $I=function(e){O(n,e);var t=V(n);function n(e,r){return A(this,n),t.call(this,e,"array-contains",r)}return R(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return hI(t)&&iI(t.arrayValue,this.value)}}]),n}(HI),ZI=function(e){O(n,e);var t=V(n);function n(e,r){return A(this,n),t.call(this,e,"in",r)}return R(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&iI(this.value.arrayValue,t)}}]),n}(HI),eE=function(e){O(n,e);var t=V(n);function n(e,r){return A(this,n),t.call(this,e,"not-in",r)}return R(n,[{key:"matches",value:function(e){if(iI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!iI(this.value.arrayValue,t)}}]),n}(HI),tE=function(e){O(n,e);var t=V(n);function n(e,r){return A(this,n),t.call(this,e,"array-contains-any",r)}return R(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!hI(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return iI(t.value.arrayValue,e)}))}}]),n}(HI),nE=R((function e(t,n){A(this,e),this.position=t,this.inclusive=n})),rE=R((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";A(this,e),this.field=t,this.dir=n}));function iE(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function aE(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Zx.comparator(Zx.fromName(o.referenceValue),n.key):aI(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function oE(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!rI(e.position[n],t.position[n]))return!1;return!0}var uE=R((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;A(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function sE(e,t,n,r,i,a,o,u){return new uE(e,t,n,r,i,a,o,u)}function cE(e){return new uE(e)}function lE(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function hE(e){var t,n=vr(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function fE(e){return null!==e.collectionGroup}function dE(e){var t=fx(e);if(null===t.D){t.D=[];var n=hE(t),r=lE(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new rE(n)),t.D.push(new rE(jx.keyField(),"asc"));else{var i,a=!1,o=vr(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new rE(jx.keyField(),s))}}}return t.D}function pE(e){var t=fx(e);if(!t.C)if("F"===t.limitType)t.C=VI(t.path,t.collectionGroup,dE(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=vr(dE(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new rE(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new nE(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new nE(t.startAt.position,t.startAt.inclusive):null;t.C=VI(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function vE(e,t,n){return new uE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function yE(e,t){return BI(pE(e),pE(t))&&e.limitType===t.limitType}function mE(e){return"".concat(qI(pE(e)),"|lt:").concat(e.limitType)}function gE(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(uI(t.value));var t})).join(", "),"]")),Xx(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return uI(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return uI(e)})).join(",")),"Target(".concat(t,")")}(pE(e)),"; limitType=").concat(e.limitType,")")}function kE(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Zx.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=vr(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=vr(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=aE(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,dE(e),t))&&!(e.endAt&&!function(e,t,n){var r=aE(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,dE(e),t))}(e,t)}function _E(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function wE(e){return function(t,n){var r,i=!1,a=vr(dE(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=bE(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function bE(e,t,n){var r=e.field.isKeyField()?Zx.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?aI(r,i):lx()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return lx()}}function xE(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jx(t)?"-0":t}}function IE(e){return{integerValue:""+e}}function EE(e,t){return $x(t)?IE(t):xE(e,t)}var SE=R((function e(){A(this,e),this._=void 0}));function TE(e,t,n){return e instanceof AE?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof PE?RE(e,t):e instanceof DE?OE(e,t):function(e,t){var n=NE(e,t),r=ME(n)+ME(e.k);return lI(n)&&lI(e.k)?IE(r):xE(e.M,r)}(e,t)}function CE(e,t,n){return e instanceof PE?RE(e,t):e instanceof DE?OE(e,t):n}function NE(e,t){return e instanceof LE?lI(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var AE=function(e){O(n,e);var t=V(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n)}(SE),PE=function(e){O(n,e);var t=V(n);function n(e){var r;return A(this,n),(r=t.call(this)).elements=e,r}return R(n)}(SE);function RE(e,t){var n,r=FE(t),i=vr(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return rI(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var DE=function(e){O(n,e);var t=V(n);function n(e){var r;return A(this,n),(r=t.call(this)).elements=e,r}return R(n)}(SE);function OE(e,t){var n,r=FE(t),i=vr(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!rI(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var LE=function(e){O(n,e);var t=V(n);function n(e,r){var i;return A(this,n),(i=t.call(this)).M=e,i.k=r,i}return R(n)}(SE);function ME(e){return zx(e.integerValue||e.doubleValue)}function FE(e){return hI(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var jE=R((function e(t,n){A(this,e),this.field=t,this.transform=n}));var UE=R((function e(t,n){A(this,e),this.version=t,this.transformResults=n})),VE=function(){function e(t,n){A(this,e),this.updateTime=t,this.exists=n}return R(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function qE(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var BE=R((function e(){A(this,e)}));function zE(e,t,n){e instanceof QE?function(e,t,n){var r=e.value.clone(),i=JE(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof YE?function(e,t,n){if(qE(e.precondition,t)){var r=JE(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(XE(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function WE(e,t,n){e instanceof QE?function(e,t,n){if(qE(e.precondition,t)){var r=e.value.clone(),i=$E(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(HE(t),r).setHasLocalMutations()}}(e,t,n):e instanceof YE?function(e,t,n){if(qE(e.precondition,t)){var r=$E(e.fieldTransforms,n,t),i=t.data;i.setAll(XE(e)),i.setAll(r),t.convertToFoundDocument(HE(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){qE(e.precondition,t)&&t.convertToNoDocument(Px.min())}(e,t)}function KE(e,t){var n,r=null,i=vr(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=NE(a.transform,o||null);null!=u&&(null==r&&(r=wI.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function GE(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Cx(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof PE&&t instanceof PE||e instanceof DE&&t instanceof DE?Cx(e.elements,t.elements,rI):e instanceof LE&&t instanceof LE?rI(e.k,t.k):e instanceof AE&&t instanceof AE}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function HE(e){return e.isFoundDocument()?e.version:Px.min()}var QE=function(e){O(n,e);var t=V(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return A(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return R(n)}(BE),YE=function(e){O(n,e);var t=V(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return A(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return R(n)}(BE);function XE(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function JE(e,t,n){var r=new Map;hx(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,CE(o,u,n[i]))}return r}function $E(e,t,n){var r,i=new Map,a=vr(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,TE(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var ZE,eS,tS=function(e){O(n,e);var t=V(n);function n(e,r){var i;return A(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return R(n)}(BE),nS=function(e){O(n,e);var t=V(n);function n(e,r){var i;return A(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return R(n)}(BE),rS=R((function e(t){A(this,e),this.count=t}));function iS(e){switch(e){default:return lx();case dx.CANCELLED:case dx.UNKNOWN:case dx.DEADLINE_EXCEEDED:case dx.RESOURCE_EXHAUSTED:case dx.INTERNAL:case dx.UNAVAILABLE:case dx.UNAUTHENTICATED:return!1;case dx.INVALID_ARGUMENT:case dx.NOT_FOUND:case dx.ALREADY_EXISTS:case dx.PERMISSION_DENIED:case dx.FAILED_PRECONDITION:case dx.ABORTED:case dx.OUT_OF_RANGE:case dx.UNIMPLEMENTED:case dx.DATA_LOSS:return!0}}function aS(e){if(void 0===e)return ux("GRPC error has no .code"),dx.UNKNOWN;switch(e){case ZE.OK:return dx.OK;case ZE.CANCELLED:return dx.CANCELLED;case ZE.UNKNOWN:return dx.UNKNOWN;case ZE.DEADLINE_EXCEEDED:return dx.DEADLINE_EXCEEDED;case ZE.RESOURCE_EXHAUSTED:return dx.RESOURCE_EXHAUSTED;case ZE.INTERNAL:return dx.INTERNAL;case ZE.UNAVAILABLE:return dx.UNAVAILABLE;case ZE.UNAUTHENTICATED:return dx.UNAUTHENTICATED;case ZE.INVALID_ARGUMENT:return dx.INVALID_ARGUMENT;case ZE.NOT_FOUND:return dx.NOT_FOUND;case ZE.ALREADY_EXISTS:return dx.ALREADY_EXISTS;case ZE.PERMISSION_DENIED:return dx.PERMISSION_DENIED;case ZE.FAILED_PRECONDITION:return dx.FAILED_PRECONDITION;case ZE.ABORTED:return dx.ABORTED;case ZE.OUT_OF_RANGE:return dx.OUT_OF_RANGE;case ZE.UNIMPLEMENTED:return dx.UNIMPLEMENTED;case ZE.DATA_LOSS:return dx.DATA_LOSS;default:return lx()}}(eS=ZE||(ZE={}))[eS.OK=0]="OK",eS[eS.CANCELLED=1]="CANCELLED",eS[eS.UNKNOWN=2]="UNKNOWN",eS[eS.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",eS[eS.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",eS[eS.NOT_FOUND=5]="NOT_FOUND",eS[eS.ALREADY_EXISTS=6]="ALREADY_EXISTS",eS[eS.PERMISSION_DENIED=7]="PERMISSION_DENIED",eS[eS.UNAUTHENTICATED=16]="UNAUTHENTICATED",eS[eS.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",eS[eS.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",eS[eS.ABORTED=10]="ABORTED",eS[eS.OUT_OF_RANGE=11]="OUT_OF_RANGE",eS[eS.UNIMPLEMENTED=12]="UNIMPLEMENTED",eS[eS.INTERNAL=13]="INTERNAL",eS[eS.UNAVAILABLE=14]="UNAVAILABLE",eS[eS.DATA_LOSS=15]="DATA_LOSS";var oS=function(){function e(t,n){A(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return R(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=vr(n);try{for(i.s();!(r=i.n()).done;){var a=w(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Dx(this.inner,(function(t,n){var r,i=vr(n);try{for(i.s();!(r=i.n()).done;){var a=w(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Ox(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),uS=new DI(Zx.comparator);function sS(){return uS}var cS=new DI(Zx.comparator);function lS(){for(var e=cS,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function hS(){return new oS((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var fS=new DI(Zx.comparator),dS=new MI(Zx.comparator);function pS(){for(var e=dS,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var vS=new MI(Tx);function yS(){return vS}var mS=function(){function e(t,n,r,i,a){A(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return R(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,gS.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Px.min(),r,yS(),sS(),pS())}}]),e}(),gS=function(){function e(t,n,r,i,a){A(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return R(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Vx.EMPTY_BYTE_STRING,n,pS(),pS(),pS())}}]),e}(),kS=R((function e(t,n,r,i){A(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),_S=R((function e(t,n){A(this,e),this.targetId=t,this.$=n})),wS=R((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vx.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;A(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),bS=function(){function e(){A(this,e),this.B=0,this.L=ES(),this.U=Vx.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return R(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=pS(),t=pS(),n=pS();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:lx()}})),new gS(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=ES()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),xS=function(){function e(t){A(this,e),this.nt=t,this.st=new Map,this.it=sS(),this.rt=IS(),this.ot=new MI(Tx)}return R(e,[{key:"ut",value:function(e){var t,n=vr(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=vr(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:lx()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(zI(i))if(0===n){var a=new Zx(i.path);this.ct(t,a,xI.newNoDocument(a,Px.min()))}else hx(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&zI(a.target)){var o=new Zx(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,xI.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=pS();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new mS(e,n,this.ot,this.it,r);return this.it=sS(),this.rt=IS(),this.ot=new MI(Tx),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new bS,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new MI(Tx),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||ox("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new bS),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function IS(){return new DI(Zx.comparator)}function ES(){return new DI(Zx.comparator)}var SS={asc:"ASCENDING",desc:"DESCENDING"},TS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CS=R((function e(t,n){A(this,e),this.databaseId=t,this.N=n}));function NS(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function AS(e,t){return e.N?t.toBase64():t.toUint8Array()}function PS(e,t){return NS(e,t.toTimestamp())}function RS(e){return hx(!!e),Px.fromTimestamp(function(e){var t=Bx(e);return new Ax(t.seconds,t.nanos)}(e))}function DS(e,t){return function(e){return new Mx(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function OS(e){var t=Mx.fromString(e);return hx(rT(t)),t}function LS(e,t){return DS(e.databaseId,t.path)}function MS(e,t){var n=OS(t);if(n.get(1)!==e.databaseId.projectId)throw new px(dx.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new px(dx.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Zx(VS(n))}function FS(e,t){return DS(e.databaseId,t)}function jS(e){var t=OS(e);return 4===t.length?Mx.emptyPath():VS(t)}function US(e){return new Mx(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function VS(e){return hx(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function qS(e,t,n){return{name:LS(e,t),fields:n.value.mapValue.fields}}function BS(e,t,n){var r=MS(e,t.name),i=RS(t.updateTime),a=new wI({mapValue:{fields:t.fields}}),o=xI.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function zS(e,t){return"found"in t?function(e,t){hx(!!t.found),t.found.name,t.found.updateTime;var n=MS(e,t.found.name),r=RS(t.found.updateTime),i=new wI({mapValue:{fields:t.found.fields}});return xI.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){hx(!!t.missing),hx(!!t.readTime);var n=MS(e,t.missing),r=RS(t.readTime);return xI.newNoDocument(n,r)}(e,t):lx()}function WS(e,t){var n;if(t instanceof QE)n={update:qS(e,t.key,t.value)};else if(t instanceof tS)n={delete:LS(e,t.key)};else if(t instanceof YE)n={update:qS(e,t.key,t.data),updateMask:nT(t.fieldMask)};else{if(!(t instanceof nS))return lx();n={verify:LS(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof AE)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof PE)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof DE)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof LE)return{fieldPath:t.field.canonicalString(),increment:n.k};throw lx()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:PS(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:lx()}(e,t.precondition)),n}function KS(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?VE.updateTime(RS(e.updateTime)):void 0!==e.exists?VE.exists(e.exists):VE.none()}(t.currentDocument):VE.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)hx("REQUEST_TIME"===t.setToServerValue),n=new AE;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new PE(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new DE(i)}else"increment"in t?n=new LE(e,t.increment):lx();var a=jx.fromServerFormat(t.fieldPath);return new jE(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=MS(e,t.update.name),a=new wI({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Ux(t.map((function(e){return jx.fromServerFormat(e)})))}(t.updateMask);return new YE(i,a,o,n,r)}return new QE(i,a,n,r)}if(t.delete){var u=MS(e,t.delete);return new tS(u,n)}if(t.verify){var s=MS(e,t.verify);return new nS(s,n)}return lx()}function GS(e,t){return{documents:[FS(e,t.path)]}}function HS(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=FS(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=FS(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(dI(e.value))return{unaryFilter:{field:$S(e.field),op:"IS_NAN"}};if(fI(e.value))return{unaryFilter:{field:$S(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(dI(e.value))return{unaryFilter:{field:$S(e.field),op:"IS_NOT_NAN"}};if(fI(e.value))return{unaryFilter:{field:$S(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$S(e.field),op:JS(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:$S(e.field),direction:XS(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||Xx(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function QS(e){var t=jS(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){hx(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=YS(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new rE(ZS(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Xx(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new nE(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new nE(n,t)}(n.endAt)),sE(t,i,u,o,s,"F",c,l)}function YS(e){return e?void 0!==e.unaryFilter?[tT(e)]:void 0!==e.fieldFilter?[eT(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return YS(e)})).reduce((function(e,t){return e.concat(t)})):lx():[]}function XS(e){return SS[e]}function JS(e){return TS[e]}function $S(e){return{fieldPath:e.canonicalString()}}function ZS(e){return jx.fromServerFormat(e.fieldPath)}function eT(e){return HI.create(ZS(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lx()}}(e.fieldFilter.op),e.fieldFilter.value)}function tT(e){switch(e.unaryFilter.op){case"IS_NAN":var t=ZS(e.unaryFilter.field);return HI.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=ZS(e.unaryFilter.field);return HI.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ZS(e.unaryFilter.field);return HI.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ZS(e.unaryFilter.field);return HI.create(i,"!=",{nullValue:"NULL_VALUE"});default:return lx()}}function nT(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function rT(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function iT(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=oT(t)),t=aT(e.get(n),t);return oT(t)}function aT(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function oT(e){return e+"\x01\x01"}function uT(e){var t=e.length;if(hx(t>=2),2===t)return hx("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Mx.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&lx(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:lx()}a=o+2}return new Mx(r)}var sT=["userId","batchId"];function cT(e,t){return[e,iT(t)]}function lT(e,t,n){return[e,iT(t),n]}var hT={},fT=["prefixPath","collectionGroup","readTime","documentId"],dT=["prefixPath","collectionGroup","documentId"],pT=["collectionGroup","readTime","prefixPath","documentId"],vT=["canonicalId","targetId"],yT=["targetId","path"],mT=["path","targetId"],gT=["collectionId","parent"],kT=["indexId","uid"],_T=["uid","sequenceNumber"],wT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bT=["indexId","uid","orderedDocumentKey"],xT=["userId","collectionPath","documentId"],IT=["userId","collectionPath","largestBatchId"],ET=["userId","collectionGroup","largestBatchId"],ST=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),TT=[].concat(N(ST),["documentOverlays"]),CT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],NT=[].concat(CT,["indexConfiguration","indexState","indexEntries"]),AT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",PT=function(){function e(){A(this,e),this.onCommittedListeners=[]}return R(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),RT=function(){function e(t){var n=this;A(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return R(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&lx(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=vr(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),DT=function(){function e(t,n){var r=this;A(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new vx,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new MT(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=qT(e.target.error);r.At.reject(new MT(t,n))}}return R(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(ox("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new jT(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new MT(n,t)}}}]),e}(),OT=function(){function e(t,n,r){A(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(Pr())&&ux("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return R(e,[{key:"Nt",value:function(){var e=pr(fr().mark((function e(t){var n=this;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return ox("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new MT(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new px(dx.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new px(dx.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new MT(t,n))},i.onupgradeneeded=function(e){ox("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){ox("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=pr(fr().mark((function e(t,n,r,i){var a,o,u,s,c=this;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(fr().mark((function e(){var n,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=DT.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),RT.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,ox("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return ox("SimpleDb","Removing database:",e),UT(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!jr())return!1;if(e.St())return!0;var t=Pr(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/yes-wedding",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_KAKAO_APPKEY:"//dapi.kakao.com/v2/maps/sdk.js?appkey=3dc1d032c1b57d7534b09b562373275d",REACT_APP_FIREBASE_APIKEY:"AIzaSyCmdbkjtH47HqFKrnnCg0nmuSch9bmoXp0",REACT_APP_FIREBASE_AUTHDOMAIN:"yes-wedding-29451.firebaseapp.com",REACT_APP_FIREBASE_DATABASEURL:"https://yes-wedding-29451-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_PROJECTID:"yes-wedding-29451",REACT_APP_FIREBASE_STORAGEBUCKET:"yes-wedding-29451.appspot.com",REACT_APP_FIREBASE_MESSAGINGSENDERID:"1010300792442",REACT_APP_FIREBASE_APPID:"1:1010300792442:web:d6858688466e8b838955c3"})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),LT=function(){function e(t){A(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return R(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return UT(this.Ft.delete())}}]),e}(),MT=function(e){O(n,e);var t=V(n);function n(e,r){var i;return A(this,n),(i=t.call(this,dx.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return R(n)}(px);function FT(e){return"IndexedDbTransactionError"===e.name}var jT=function(){function e(t){A(this,e),this.store=t}return R(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(ox("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ox("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),UT(n)}},{key:"add",value:function(e){return ox("SimpleDb","ADD",this.store.name,e,e),UT(this.store.add(e))}},{key:"get",value:function(e){var t=this;return UT(this.store.get(e)).next((function(n){return void 0===n&&(n=null),ox("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return ox("SimpleDb","DELETE",this.store.name,e),UT(this.store.delete(e))}},{key:"count",value:function(){return ox("SimpleDb","COUNT",this.store.name),UT(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new RT((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new RT((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){ox("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new RT((function(n,r){t.onerror=function(e){var t=qT(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new RT((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new LT(i),o=t(i.primaryKey,i.value,a);if(o instanceof RT){var u=o.catch((function(e){return a.done(),RT.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return RT.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function UT(e){return new RT((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=qT(e.target.error);n(t)}}))}var VT=!1;function qT(e){var t=OT.Vt(Pr());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new px("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return VT||(VT=!0,setTimeout((function(){throw r}),0)),r}}return e}var BT=function(e){O(n,e);var t=V(n);function n(e,r){var i;return A(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return R(n)}(PT);function zT(e,t){var n=fx(e);return OT.xt(n.Ht,t)}var WT=function(){function e(t,n,r,i){A(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return R(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&zE(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=vr(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&WE(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=vr(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&WE(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Px.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),pS())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Cx(this.mutations,e.mutations,(function(e,t){return GE(e,t)}))&&Cx(this.baseMutations,e.baseMutations,(function(e,t){return GE(e,t)}))}}]),e}(),KT=function(){function e(t,n,r,i){A(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return R(e,null,[{key:"from",value:function(t,n,r){hx(t.mutations.length===r.length);for(var i=fS,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),GT=function(){function e(t,n){A(this,e),this.largestBatchId=t,this.mutation=n}return R(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),HT=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Px.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Px.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Vx.EMPTY_BYTE_STRING;A(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return R(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),QT=R((function e(t){A(this,e),this.Jt=t}));function YT(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:XT(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:LS(e,t.key),fields:t.data.value.mapValue.fields,updateTime:NS(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:JT(t.version)};else{if(!t.isUnknownDocument())return lx();r.unknownDocument={path:n.path.toArray(),version:JT(t.version)}}return r}function XT(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function JT(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function $T(e){var t=new Ax(e.seconds,e.nanoseconds);return Px.fromTimestamp(t)}function ZT(e,t){for(var n=(t.baseMutations||[]).map((function(t){return KS(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return KS(e.Jt,t)})),u=Ax.fromMillis(t.localWriteTimeMs);return new WT(t.batchId,u,n,o)}function eC(e){var t,n,r=$T(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?$T(e.lastLimboFreeSnapshotVersion):Px.min();return void 0!==e.query.documents?(hx(1===(n=e.query).documents.length),t=pE(cE(jS(n.documents[0])))):t=function(e){return pE(QS(e))}(e.query),new HT(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Vx.fromBase64String(e.resumeToken))}function tC(e,t){var n,r=JT(t.snapshotVersion),i=JT(t.lastLimboFreeSnapshotVersion);n=zI(t.target)?GS(e.Jt,t.target):HS(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:qI(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function nC(e){var t=QS({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?vE(t,t.limit,"L"):t}function rC(e,t){return new GT(t.largestBatchId,KS(e.Jt,t.overlayMutation))}function iC(e,t){var n=t.path.lastSegment();return[e,iT(t.path.popLast()),n]}var aC=function(){function e(){A(this,e)}return R(e,[{key:"getBundleMetadata",value:function(e,t){return oC(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:$T(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return oC(e).put({bundleId:(n=t).id,createTime:JT(RS(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return uC(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:nC(t.bundledQuery),readTime:$T(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return uC(e).put(function(e){return{name:e.name,readTime:JT(RS(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function oC(e){return zT(e,"bundles")}function uC(e){return zT(e,"namedQueries")}var sC=function(){function e(t,n){A(this,e),this.M=t,this.userId=n}return R(e,[{key:"getOverlay",value:function(e,t){var n=this;return cC(e).get(iC(this.userId,t)).next((function(e){return e?rC(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new GT(t,a);i.push(r.Xt(e,o))})),RT.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(iT(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(cC(e).Qt("collectionPathOverlayIndex",i))})),RT.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=hS(),a=iT(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return cC(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=vr(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=rC(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=hS(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cC(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=rC(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return cC(e).put(function(e,t,n){var r=w(iC(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:WS(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function cC(e){return zT(e,"documentOverlays")}var lC=function(){function e(){A(this,e)}return R(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(zx(e.integerValue));else if("doubleValue"in e){var n=zx(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Jx(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Wx(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?yI(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):lx()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=vr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),Zx.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function hC(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function fC(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=hC(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}lC.fe=new lC;var dC=function(){function e(){A(this,e),this.buffer=new Uint8Array(1024),this.position=0}return R(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=vr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=vr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=fC(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=fC(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),pC=function(){function e(t){A(this,e),this.De=t}return R(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),vC=function(){function e(t){A(this,e),this.De=t}return R(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),yC=function(){function e(){A(this,e),this.De=new dC,this.Ce=new pC(this.De),this.xe=new vC(this.De)}return R(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),mC=function(){function e(t,n,r,i){A(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return R(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function gC(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=kC(e.arrayValue,t.arrayValue))?n:0!==(n=kC(e.directionalValue,t.directionalValue))?n:Zx.comparator(e.documentKey,t.documentKey)}function kC(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var _C=function(){function e(t){A(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=vr(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return R(e,[{key:"$e",value:function(e){var t=EI(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=SI(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=vr(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),wC=function(){function e(){A(this,e),this.qe=new bC}return R(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),RT.resolve()}},{key:"getCollectionParents",value:function(e,t){return RT.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return RT.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return RT.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return RT.resolve(null)}},{key:"getIndexType",value:function(e,t){return RT.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return RT.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return RT.resolve(null)}},{key:"getMinOffset",value:function(e,t){return RT.resolve(PI.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return RT.resolve()}},{key:"updateIndexEntries",value:function(e,t){return RT.resolve()}}]),e}(),bC=function(){function e(){A(this,e),this.index={}}return R(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new MI(Mx.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new MI(Mx.comparator)).toArray()}}]),e}(),xC=new Uint8Array(0),IC=function(){function e(t,n){A(this,e),this.user=t,this.databaseId=n,this.Ke=new bC,this.Ge=new oS((function(e){return qI(e)}),(function(e,t){return BI(e,t)})),this.uid=t.uid||""}return R(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:iT(i)};return EC(e).put(a)}return RT.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Nx(t),""],!1,!0);return EC(e).qt(r).next((function(e){var r,i=vr(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(uT(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=TC(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=TC(e),r=CC(e),i=SC(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=SC(e),i=!0,a=new Map;return RT.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=pS(),o=[];return RT.forEach(a,(function(i,a){var u;ox("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(qI(t)));var s=function(e,t){var n=EI(t);if(void 0===n)return null;var r,i=vr(WI(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=vr(SI(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=vr(WI(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=vr(SI(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?KI(e,o.fieldPath,e.startAt):GI(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new nE(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=vr(SI(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?GI(e,o.fieldPath,e.endAt):KI(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new nE(r,i)}(a,i),f=n.We(i,a,l),d=n.We(i,a,h),p=n.ze(i,a,c),v=n.He(i.indexId,s,f,l.inclusive,d,h.inclusive,p);return RT.forEach(v,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=Zx.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return RT.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"He",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],h=function(s){var h=t?u.Je(t[s/c]):xC,f=u.Ye(e,h,n[s%c],r),d=u.Xe(e,h,i[s%c],a),p=o.map((function(t){return u.Ye(e,h,t,!0)}));l.push.apply(l,N(u.createRange(f,d,p)))},f=0;f<s;++f)h(f);return l}},{key:"Ye",value:function(e,t,n,r){var i=new mC(e,Zx.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new mC(e,Zx.empty(),t,n);return r?i.ke():i}},{key:"je",value:function(e,t){var n=new _C(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=vr(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.$e(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return RT.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new MI(jx.comparator),r=!1,i=vr(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=vr(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"Ze",value:function(e,t){var n,r=new yC,i=vr(SI(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);lC.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"Je",value:function(e){var t=new yC;return lC.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new yC;return lC.fe.Zt(cI(this.databaseId,t),n.Ne(function(e){var t=SI(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"ze",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new yC);var i,a=0,o=vr(SI(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=vr(r);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(this.en(t,s.fieldPath)&&hI(c))r=this.nn(r,s,c);else{var f=h.Ne(s.kind);lC.fe.Zt(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"We",value:function(e,t,n){return this.ze(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=N(e),a=[],o=vr(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=vr(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=new yC;h.seed(l.Se()),lC.fe.Zt(s,h.Ne(t.kind)),a.push(h)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof HI&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=TC(e),i=CC(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return RT.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new CI(t.sequenceNumber,new PI($T(t.readTime),new Zx(uT(t.documentKey)),t.largestBatchId)):CI.empty(),r=e.fields.map((function(e){var t=w(e,2),n=t[0],r=t[1];return new TI(jx.fromServerFormat(n),r)}));return new II(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Tx(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=TC(e),a=CC(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return RT.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:JT(r.readTime),documentKey:iT(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return RT.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?RT.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),RT.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?RT.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return SC(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return SC(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=SC(e),i=new MI(gC);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new mC(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new MI(gC),r=this.Ze(t,e);if(null==r)return n;var i=EI(t);if(null!=i){var a=e.data.field(i.fieldPath);if(hI(a)){var o,u=vr(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new mC(t.indexId,e.key,this.Je(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new mC(t.indexId,e.key,xC,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;ox("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=jI(a),s=jI(o);u||s;){var c=!1,l=!1;if(u&&s){var h=n(u,s);h<0?l=!0:h>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=jI(o)):l?(i(u),u=jI(a)):(u=jI(a),s=jI(o))}}(r,i,gC,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),RT.waitFor(o)}},{key:"rn",value:function(e){var t=1;return CC(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return gC(e,t)})).filter((function(e,t,n){return!t||0!==gC(e,n[t-1])}));var r=[];r.push(e);var i,a=vr(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=gC(o,e),s=gC(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(h){a.e(h)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,xC,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,xC,[]]));return c}},{key:"getMinOffset",value:function(e,t){var n,r=this;return RT.forEach(this.Qe(t),(function(t){return r.je(e,t).next((function(e){e?(!n||RI(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=PI.min()}))})).next((function(){return n}))}}]),e}();function EC(e){return zT(e,"collectionParents")}function SC(e){return zT(e,"indexEntries")}function TC(e){return zT(e,"indexConfiguration")}function CC(e){return zT(e,"indexState")}var NC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},AC=function(){function e(t,n,r){A(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return R(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function PC(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){hx(1===u)})));var c,l=[],h=vr(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=lT(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return RT.waitFor(a).next((function(){return l}))}function RC(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw lx();t=e.noDocument}return JSON.stringify(t).length}AC.DEFAULT_COLLECTION_PERCENTILE=10,AC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,AC.DEFAULT=new AC(41943040,AC.DEFAULT_COLLECTION_PERCENTILE,AC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),AC.DISABLED=new AC(-1,0,0);var DC=function(){function e(t,n,r,i){A(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return R(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return LC(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=MC(e),o=LC(e);return o.add({}).next((function(u){hx("number"==typeof u);var s,c=new WT(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return WS(e.Jt,t)})),i=n.mutations.map((function(t){return WS(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),h=[],f=new MI((function(e,t){return Tx(e.canonicalString(),t.canonicalString())})),d=vr(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=lT(i.userId,p.key.path,u);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,hT))}}catch(y){d.e(y)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[u]=c.keys()})),RT.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return LC(e).get(t).next((function(e){return e?(hx(e.userId===n.userId),ZT(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?RT.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return LC(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(hx(t.batchId>=r),a=ZT(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return LC(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return LC(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return ZT(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=cT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return MC(e).Wt({range:i},(function(r,i,o){var u=w(r,3),s=u[0],c=u[1],l=u[2],h=uT(c);if(s===n.userId&&t.path.isEqual(h))return LC(e).get(l).next((function(e){if(!e)throw lx();hx(e.userId===n.userId),a.push(ZT(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new MI(Tx),i=[];return t.forEach((function(t){var a=cT(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=MC(e).Wt({range:o},(function(e,i,a){var o=w(e,3),u=o[0],s=o[1],c=o[2],l=uT(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),RT.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=cT(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new MI(Tx);return MC(e).Wt({range:o},(function(e,t,a){var o=w(e,3),s=o[0],c=o[1],l=o[2],h=uT(c);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.dn(e,u)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(LC(e).get(t).next((function(e){if(null===e)throw lx();hx(e.userId===n.userId),r.push(ZT(n.M,e))})))})),RT.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return PC(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),RT.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return RT.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return MC(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=uT(e[1]);i.push(a)}else r.done()})).next((function(){hx(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return OC(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return FC(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return hx(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function OC(e,t,n){var r=cT(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return MC(e).Wt({range:a,jt:!0},(function(e,n,r){var a=w(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function LC(e){return zT(e,"mutations")}function MC(e){return zT(e,"documentMutations")}function FC(e){return zT(e,"mutationQueues")}var jC=function(){function e(t){A(this,e),this.mn=t}return R(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),UC=function(){function e(t,n){A(this,e),this.referenceDelegate=t,this.M=n}return R(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new jC(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return Px.fromTimestamp(new Ax(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return VC(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return hx(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return VC(e).Wt((function(o,u){var s=eC(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return RT.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return VC(e).Wt((function(e,n){var r=eC(n);t(r)}))}},{key:"pn",value:function(e){return qC(e).get("targetGlobalKey").next((function(e){return hx(null!==e),e}))}},{key:"In",value:function(e,t){return qC(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return VC(e).put(tC(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=qI(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return VC(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=eC(n);BI(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=BC(e);return t.forEach((function(t){var o=iT(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),RT.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=BC(e);return RT.forEach(t,(function(t){var a=iT(t.path);return RT.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=BC(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=BC(e),i=pS();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=uT(e[1]),a=new Zx(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=iT(t.path),r=IDBKeyRange.bound([n],[Nx(n)],!1,!0),i=0;return BC(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=w(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return VC(e).get(t).next((function(e){return e?eC(e):null}))}}]),e}();function VC(e){return zT(e,"targets")}function qC(e){return zT(e,"targetGlobal")}function BC(e){return zT(e,"targetDocuments")}function zC(e){return WC.apply(this,arguments)}function WC(){return WC=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===dx.FAILED_PRECONDITION&&t.message===AT){e.next=2;break}throw t;case 2:ox("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),WC.apply(this,arguments)}function KC(e,t){var n=w(e,2),r=n[0],i=n[1],a=w(t,2),o=a[0],u=a[1],s=Tx(r,o);return 0===s?Tx(i,u):s}var GC=function(){function e(t){A(this,e),this.An=t,this.buffer=new MI(KC),this.Rn=0}return R(e,[{key:"bn",value:function(){return++this.Rn}},{key:"Pn",value:function(e){var t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();KC(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),HC=function(){function e(t,n){A(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return R(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;ox("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,pr(fr().mark((function n(){return fr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!FT(n.t0)){n.next=12;break}ox("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,zC(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),QC=function(){function e(t,n){A(this,e),this.Dn=t,this.params=n}return R(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return RT.resolve(Ix.A);var r=new GC(t);return this.Dn.forEachTarget(e,(function(e){return r.Pn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.Pn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ox("LruGarbageCollector","Garbage collection skipped; disabled"),RT.resolve(NC)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(ox("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),NC):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(ox("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),ax()<=fi.DEBUG&&ox("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),RT.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),YC=function(){function e(t,n){A(this,e),this.db=t,this.garbageCollector=function(e,t){return new QC(e,t)}(this,n)}return R(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return XC(e,n)}},{key:"removeReference",value:function(e,t,n){return XC(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return XC(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return FC(e).zt((function(r){return OC(e,r,t).next((function(e){return e&&(n=!0),RT.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,u){if(u<=t){var s=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Px.min()),BC(e).delete([0,iT(o.path)])}))}));i.push(s)}})).next((function(){return RT.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return XC(e,t)}},{key:"Mn",value:function(e,t){var n,r=BC(e),i=Ix.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=w(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Ix.A&&t(new Zx(uT(n)),i),i=s,n=u):i=Ix.A})).next((function(){i!==Ix.A&&t(new Zx(uT(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function XC(e,t){return BC(e).put(function(e,t){return{targetId:0,path:iT(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var JC=function(){function e(){A(this,e),this.changes=new oS((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return R(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,xI.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?RT.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),$C=function(){function e(t){A(this,e),this.M=t}return R(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return tN(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return tN(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],XT(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=xI.newInvalidDocument(t);return tN(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(nN(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:xI.newInvalidDocument(t)};return tN(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(nN(t))},(function(e,i){r={document:n.$n(t,i),size:RC(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=sS();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=sS(),i=new DI(Zx.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,RC(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return RT.resolve();var r=new MI(iN);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(nN(r.first()),nN(r.last())),a=r.getIterator(),o=a.getNext();return tN(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Zx.fromSegments([].concat(N(t.prefixPath),[t.collectionGroup,t.documentId]));o&&iN(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(nN(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),XT(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return tN(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=sS(),i=vr(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(Zx.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=sS(),o=rN(t,n),u=rN(t,PI.max());return tN(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.$n(Zx.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new ZC(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return eN(e).get("remoteDocumentGlobalKey").next((function(e){return hx(!!e),e}))}},{key:"Fn",value:function(e,t){return eN(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=BS(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Zx.fromSegments(t.noDocument.path),i=$T(t.noDocument.readTime);n=xI.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return lx();var a=Zx.fromSegments(t.unknownDocument.path),o=$T(t.unknownDocument.version);n=xI.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Ax(e[0],e[1]);return Px.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Px.min()))return n}return xI.newInvalidDocument(e)}}]),e}(),ZC=function(e){O(n,e);var t=V(n);function n(e,r){var i;return A(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new oS((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return R(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new MI((function(e,t){return Tx(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=YT(t.Kn.M,o);i=i.add(a.path.popLast());var c=RC(s);r+=c-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=YT(t.Kn.M,o.convertToNoDocument(Px.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),RT.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(JC);function eN(e){return zT(e,"remoteDocumentGlobal")}function tN(e){return zT(e,"remoteDocumentsV14")}function nN(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function rN(e,t){var n=t.documentKey.path.toArray();return[e,XT(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function iN(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Tx(n[a],r[a]))return i;return(i=Tx(n.length,r.length))||((i=Tx(n[n.length-2],r[r.length-2]))||Tx(n[n.length-1],r[r.length-1]))}var aN=function(){function e(t){A(this,e),this.M=t}return R(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new DT("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sT,{unique:!0}),e.createObjectStore("documentMutations")}(e),oN(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=RT.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),oN(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Px.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sT,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return RT.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:xT});t.createIndex("collectionPathOverlayIndex",IT,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ET,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:fT});t.createIndex("documentKeyIndex",dT),t.createIndex("collectionGroupIndex",pT)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:kT}).createIndex("sequenceNumberIndex",_T,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:wT}).createIndex("documentKeyIndex",bT,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=RC(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return RT.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return RT.forEach(r,(function(r){hx(r.userId===n.userId);var i=ZT(t.M,r);return PC(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Mx(n),o=function(e){return[0,iT(e)]}(a);r.push(t.get(o).next((function(n){return n?RT.resolve():function(n){return t.put({targetId:0,path:iT(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return RT.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:gT});var n=t.store("collectionParents"),r=new bC,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:iT(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Mx(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=w(e,3),r=(n[0],n[1]),a=(n[2],uT(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=eC(r),a=tC(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Zx(Mx.fromString(i.document.name).popFirst(5)):i.noDocument?Zx.fromSegments(i.noDocument.path):i.unknownDocument?Zx.fromSegments(i.unknownDocument.path):lx()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return RT.waitFor(r)}))}}]),e}();function oN(e){e.createObjectStore("targetDocuments",{keyPath:yT}).createIndex("documentTargetsIndex",mT,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vT,{unique:!0}),e.createObjectStore("targetGlobal")}var uN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sN=function(){function e(t,n,r,i,a,o,u,s,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(A(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=u,this.Xn=c,this.Zn=l,this.ts=h,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new px(dx.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new YC(this,i),this.hs=n+"main",this.M=new QT(s),this.ls=new OT(this.hs,this.ts,new aN(this.M)),this.fs=new UC(this.referenceDelegate,this.M),this.ds=function(e){return new $C(e)}(this.M),this._s=new aC,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&ux("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return R(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new px(dx.FAILED_PRECONDITION,uN);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new Ix(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=pr(fr().mark((function n(r){return fr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=pr(fr().mark((function t(n){return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return lN(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.bs(t).next((function(){return!0}))}))})).catch((function(t){if(FT(t))return ox("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return ox("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return cN(e).get("owner").next((function(e){return RT.resolve(t.Ps(e))}))}},{key:"Vs",value:function(e){return lN(e).delete(this.clientId)}},{key:"vs",value:function(){var e=pr(fr().mark((function e(){var t,n,r,i,a=this;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=zT(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return RT.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=vr(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"Ps",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?RT.resolve(!0):cN(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.Ps(n)&&t.networkEnabled)return!0;if(!t.Ps(n)){if(!n.allowTabSynchronization)throw new px(dx.FAILED_PRECONDITION,uN);return!1}}return!(!t.networkEnabled||!t.inForeground)||lN(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&ox("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=pr(fr().mark((function e(){var t=this;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new BT(e,Ix.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return lN(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return DC.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new IC(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return sC.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;ox("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?NT:13===i?CT:12===i?TT:11===i?ST:void lx();return this.ls.runTransaction(e,o,u,(function(i){return a=new BT(i,r.es?r.es.next():Ix.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw ux("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new px(dx.FAILED_PRECONDITION,AT);return n(a)})).next((function(e){return r.bs(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return cN(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.Ps(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new px(dx.FAILED_PRECONDITION,uN)}))}},{key:"bs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cN(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=cN(e);return n.get("owner").next((function(e){return t.Ps(e)?(ox("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):RT.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(ux("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!Dr()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return ox("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ux("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(nk){ux("Failed to set zombie client id.",nk)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(nk){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return OT.vt()}}]),e}();function cN(e){return zT(e,"owner")}function lN(e){return zT(e,"clientMetadata")}function hN(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var fN=function(){function e(t,n,r){A(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return R(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=vr(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=vr(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return Zx.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):fE(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new Zx(t)).next((function(e){var t=lS();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=lS();return this.indexManager.getCollectionParents(e,i).next((function(o){return RT.forEach(o,(function(o){var u=function(e,t){return new uE(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=vr(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=vr(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=xI.newInvalidDocument(s),r=r.insert(s,c)),WE(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){kE(t,n)||(r=r.remove(e))})),r}))}}]),e}(),dN=function(){function e(t,n,r,i){A(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return R(e,null,[{key:"Ys",value:function(t,n){var r,i=pS(),a=pS(),o=vr(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),pN=function(){function e(){A(this,e),this.Xs=!1}return R(e,[{key:"initialize",value:function(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}},{key:"Qs",value:function(e,t,n,r){var i=this;return this.ti(e,t).next((function(a){return a||i.ei(e,t,r,n)})).next((function(n){return n||i.ni(e,t)}))}},{key:"ti",value:function(e,t){return RT.resolve(null)}},{key:"ei",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Px.min())?this.ni(e,t):this.Zs.Ks(e,n).next((function(a){var o=i.si(t,a);return i.ii(t,o,n,r)?i.ni(e,t):(ax()<=fi.DEBUG&&ox("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gE(t)),i.ri(e,o,t,NI(r,-1)))}))}},{key:"si",value:function(e,t){var n=new MI(wE(e));return t.forEach((function(t,r){kE(e,r)&&(n=n.add(r))})),n}},{key:"ii",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ni",value:function(e,t){return ax()<=fi.DEBUG&&ox("QueryEngine","Using full collection scan to execute query:",gE(t)),this.Zs.Qs(e,t,PI.min())}},{key:"ri",value:function(e,t,n,r){return this.Zs.Qs(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),vN=function(){function e(t,n,r,i){A(this,e),this.persistence=t,this.oi=n,this.M=i,this.ui=new DI(Tx),this.ai=new oS((function(e){return qI(e)}),BI),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}return R(e,[{key:"li",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new fN(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ui)}))}}]),e}();function yN(e,t,n,r){return new vN(e,t,n,r)}function mN(e,t){return gN.apply(this,arguments)}function gN(){return gN=pr(fr().mark((function e(t,n){var r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fx(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.li(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=pS(),s=vr(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,h=vr(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;u=u.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=vr(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=vr(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.fi.Ks(e,u).next((function(e){return{di:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),gN.apply(this,arguments)}function kN(e,t){var n=fx(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=RT.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);hx(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}function _N(e){var t=fx(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function wN(e,t){var n=fx(e),r=t.snapshotVersion,i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Vx.EMPTY_BYTE_STRING,Px.min()).withLastLimboFreeSnapshotVersion(Px.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var u=sS();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(bN(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(Px.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return RT.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.fi.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.ui=i,e}))}function bN(e,t,n){var r=pS();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=sS();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Px.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):ox("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function xN(e,t){var n=fx(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function IN(e,t){var n=fx(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,RT.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new HT(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e}))}function EN(e,t,n){return SN.apply(this,arguments)}function SN(){return SN=pr(fr().mark((function e(t,n,r){var i,a,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=fx(t),a=i.ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),FT(e.t1)){e.next=12;break}throw e.t1;case 12:ox("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ui=i.ui.remove(n),i.ai.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),SN.apply(this,arguments)}function TN(e,t,n){var r=fx(e),i=Px.min(),a=pS();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=fx(e),i=r.ai.get(n);return void 0!==i?RT.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,pE(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.oi.Qs(e,t,n?i:Px.min(),n?a:pS())})).next((function(e){return AN(r,_E(t),e),{documents:e,_i:a}}))}))}function CN(e,t){var n=fx(e),r=fx(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function NN(e,t){var n=fx(e),r=n.ci.get(t)||Px.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.hi.getAllFromCollectionGroup(e,t,NI(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return AN(n,t,e),e}))}function AN(e,t,n){var r=Px.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ci.set(t,r)}function PN(e,t,n,r){return RN.apply(this,arguments)}function RN(){return RN=pr(fr().mark((function e(t,n,r,i){var a,o,u,s,c,l,h,f,d,p;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=fx(t),o=pS(),u=sS(),s=vr(r);try{for(s.s();!(c=s.n()).done;)l=c.value,h=n.wi(l.metadata.name),l.document&&(o=o.add(h)),(f=n.mi(l)).setReadTime(n.gi(l.metadata.readTime)),u=u.insert(h,f)}catch(v){s.e(v)}finally{s.f()}return d=a.hi.newChangeBuffer({trackRemovals:!0}),e.next=7,IN(a,function(e){return pE(cE(Mx.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return bN(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.fs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.fi.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),RN.apply(this,arguments)}function DN(e,t){return ON.apply(this,arguments)}function ON(){return ON=pr(fr().mark((function e(t,n){var r,i,a,o=arguments;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:pS(),e.next=3,IN(t,pE(nC(n.bundledQuery)));case 3:return i=e.sent,a=fx(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=RS(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(Vx.EMPTY_BYTE_STRING,t);return a.ui=a.ui.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),ON.apply(this,arguments)}var LN=function(){function e(t){A(this,e),this.M=t,this.yi=new Map,this.pi=new Map}return R(e,[{key:"getBundleMetadata",value:function(e,t){return RT.resolve(this.yi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:RS(n.createTime)}),RT.resolve()}},{key:"getNamedQuery",value:function(e,t){return RT.resolve(this.pi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:nC(e.bundledQuery),readTime:RS(e.readTime)}}(t)),RT.resolve()}}]),e}(),MN=function(){function e(){A(this,e),this.overlays=new DI(Zx.comparator),this.Ii=new Map}return R(e,[{key:"getOverlay",value:function(e,t){return RT.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),RT.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Ii.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Ii.delete(n)),RT.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=hS(),i=t.length+1,a=new Zx(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return RT.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new DI((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=hS(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=hS(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return RT.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new GT(t,n));var a=this.Ii.get(t);void 0===a&&(a=pS(),this.Ii.set(t,a)),this.Ii.set(t,a.add(n.key))}}}]),e}(),FN=function(){function e(){A(this,e),this.Ti=new MI(jN.Ei),this.Ai=new MI(jN.Ri)}return R(e,[{key:"isEmpty",value:function(){return this.Ti.isEmpty()}},{key:"addReference",value:function(e,t){var n=new jN(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}},{key:"bi",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Pi(new jN(e,t))}},{key:"Vi",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"vi",value:function(e){var t=this,n=new Zx(new Mx([])),r=new jN(n,e),i=new jN(n,e+1),a=[];return this.Ai.forEachInRange([r,i],(function(e){t.Pi(e),a.push(e.key)})),a}},{key:"Si",value:function(){var e=this;this.Ti.forEach((function(t){return e.Pi(t)}))}},{key:"Pi",value:function(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}},{key:"Di",value:function(e){var t=new Zx(new Mx([])),n=new jN(t,e),r=new jN(t,e+1),i=pS();return this.Ai.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new jN(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),jN=function(){function e(t,n){A(this,e),this.key=t,this.Ci=n}return R(e,null,[{key:"Ei",value:function(e,t){return Zx.comparator(e.key,t.key)||Tx(e.Ci,t.Ci)}},{key:"Ri",value:function(e,t){return Tx(e.Ci,t.Ci)||Zx.comparator(e.key,t.key)}}]),e}(),UN=function(){function e(t,n){A(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new MI(jN.Ei)}return R(e,[{key:"checkEmpty",value:function(e){return RT.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new WT(i,t,n,r);this.Bs.push(a);var o,u=vr(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Ni=this.Ni.add(new jN(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return RT.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return RT.resolve(this.ki(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Mi(n),i=r<0?0:r;return RT.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return RT.resolve(0===this.Bs.length?-1:this.xi-1)}},{key:"getAllMutationBatches",value:function(e){return RT.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new jN(t,0),i=new jN(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],(function(e){var t=n.ki(e.Ci);a.push(t)})),RT.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new MI(Tx);return t.forEach((function(e){var t=new jN(e,0),i=new jN(e,Number.POSITIVE_INFINITY);n.Ni.forEachInRange([t,i],(function(e){r=r.add(e.Ci)}))})),RT.resolve(this.Oi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Zx.isDocumentKey(i)||(i=i.child(""));var a=new jN(new Zx(i),0),o=new MI(Tx);return this.Ni.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)}),a),RT.resolve(this.Oi(o))}},{key:"Oi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ki(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;hx(0===this.Fi(t.batchId,"removed")),this.Bs.shift();var r=this.Ni;return RT.forEach(t.mutations,(function(i){var a=new jN(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Ni=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new jN(t,0),r=this.Ni.firstAfterOrEqual(n);return RT.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,RT.resolve()}},{key:"Fi",value:function(e,t){return this.Mi(e)}},{key:"Mi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"ki",value:function(e){var t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),VN=function(){function e(t){A(this,e),this.$i=t,this.docs=new DI(Zx.comparator),this.size=0}return R(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return RT.resolve(n?n.document.mutableCopy():xI.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=sS();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():xI.newInvalidDocument(e))})),RT.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=sS(),i=new Zx(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||RI(AI(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return RT.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){lx()}},{key:"Bi",value:function(e,t){return RT.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new qN(this)}},{key:"getSize",value:function(e){return RT.resolve(this.size)}}]),e}(),qN=function(e){O(n,e);var t=V(n);function n(e){var r;return A(this,n),(r=t.call(this)).Kn=e,r}return R(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),RT.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(JC),BN=function(){function e(t){A(this,e),this.persistence=t,this.Li=new oS((function(e){return qI(e)}),BI),this.lastRemoteSnapshotVersion=Px.min(),this.highestTargetId=0,this.Ui=0,this.qi=new FN,this.targetCount=0,this.Ki=jC.gn()}return R(e,[{key:"forEachTarget",value:function(e,t){return this.Li.forEach((function(e,n){return t(n)})),RT.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return RT.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return RT.resolve(this.Ui)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ki.next(),RT.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),RT.resolve()}},{key:"Tn",value:function(e){this.Li.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ki=new jC(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,RT.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),RT.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,RT.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Li.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Li.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),RT.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return RT.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Li.get(t)||null;return RT.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.qi.bi(t,n),RT.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.qi.Vi(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),RT.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.qi.vi(t),RT.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.qi.Di(t);return RT.resolve(n)}},{key:"containsKey",value:function(e,t){return RT.resolve(this.qi.containsKey(t))}}]),e}(),zN=function(){function e(t,n){var r=this;A(this,e),this.Gi={},this.overlays={},this.es=new Ix(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new BN(this),this.indexManager=new wC,this.ds=new VN((function(e){return r.referenceDelegate.Qi(e)})),this.M=new QT(n),this._s=new LN(this.M)}return R(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new MN,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Gi[e.toKey()];return n||(n=new UN(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;ox("MemoryPersistence","Starting transaction:",e);var i=new WN(this.es.next());return this.referenceDelegate.ji(),n(i).next((function(e){return r.referenceDelegate.Wi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zi",value:function(e,t){return RT.or(Object.values(this.Gi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),WN=function(e){O(n,e);var t=V(n);function n(e){var r;return A(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return R(n)}(PT),KN=function(){function e(t){A(this,e),this.persistence=t,this.Hi=new FN,this.Ji=null}return R(e,[{key:"Xi",get:function(){if(this.Ji)return this.Ji;throw lx()}},{key:"addReference",value:function(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),RT.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),RT.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xi.add(t.toString()),RT.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Hi.vi(t.targetId).forEach((function(e){return n.Xi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Xi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ji",value:function(){this.Ji=new Set}},{key:"Wi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return RT.forEach(this.Xi,(function(r){var i=Zx.fromPath(r);return t.Zi(e,i).next((function(e){e||n.removeEntry(i,Px.min())}))})).next((function(){return t.Ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zi(e,t).next((function(e){e?n.Xi.delete(t.toString()):n.Xi.add(t.toString())}))}},{key:"Qi",value:function(e){return 0}},{key:"Zi",value:function(e,t){var n=this;return RT.or([function(){return RT.resolve(n.Hi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zi(e,t)}])}}],[{key:"Yi",value:function(t){return new e(t)}}]),e}();function GN(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function HN(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function QN(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var YN=function(){function e(t,n,r,i){A(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return R(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new px(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(ux("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),XN=function(){function e(t,n,r){A(this,e),this.targetId=t,this.state=n,this.error=r}return R(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new px(i.error.code,i.error.message))),a?new e(t,i.state,r):(ux("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),JN=function(){function e(t,n){A(this,e),this.clientId=t,this.activeTargetIds=n}return R(e,null,[{key:"tr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=yS(),o=0;i&&o<r.activeTargetIds.length;++o)i=$x(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(ux("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),$N=function(){function e(t,n){A(this,e),this.clientId=t,this.onlineState=n}return R(e,null,[{key:"tr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ux("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),ZN=function(){function e(){A(this,e),this.activeTargetIds=yS()}return R(e,[{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"er",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),eA=function(){function e(t,n,r,i,a){A(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new DI(Tx),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=GN(this.persistenceKey,this.ir),this.lr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new ZN),this.dr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this._r=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.wr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.mr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.gr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}return R(e,[{key:"start",value:function(){var e=pr(fr().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h,f=this;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=vr(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.ir){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(GN(this.persistenceKey,i)))&&(o=JN.tr(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.yr(),(u=this.storage.getItem(this.mr))&&(s=this.pr(u))&&this.Ir(s),c=vr(this.cr);try{for(c.s();!(l=c.n()).done;)h=l.value,this.ur(h)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.lr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Tr(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Er(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Er(e,t,n),this.Ar(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(QN(this.persistenceKey,e));if(n){var r=XN.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Rr.sr(e),this.yr()}},{key:"isLocalQueryTarget",value:function(e){return this.Rr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(QN(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.br(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ar(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Pr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return ox("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){ox("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){ox("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ur",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(ox("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void ux("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(pr(fr().mark((function e(){var r,i,a,o,u,s,c;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.dr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Sr(r,null));case 6:if(!(i=t.Dr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Sr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t._r.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Cr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Nr(a));case 16:e.next=41;break;case 18:if(!t.wr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.kr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.mr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ir(u));case 30:e.next=41;break;case 32:if(n.key!==t.lr){e.next=37;break}s=function(e){var t=Ix.A;if(null!=e)try{var n=JSON.parse(e);hx("number"==typeof n),t=n}catch(e){ux("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Ix.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.gr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Rr",get:function(){return this.ar.get(this.ir)}},{key:"yr",value:function(){this.setItem(this.hr,this.Rr.er())}},{key:"Er",value:function(e,t,n){var r=new YN(this.currentUser,e,t,n),i=HN(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}},{key:"Ar",value:function(e){var t=HN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Pr",value:function(e){var t={clientId:this.ir,onlineState:e};this.storage.setItem(this.mr,JSON.stringify(t))}},{key:"br",value:function(e,t,n){var r=QN(this.persistenceKey,e),i=new XN(e,t,n);this.setItem(r,i.er())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}},{key:"vr",value:function(e){var t=this.dr.exec(e);return t?t[1]:null}},{key:"Dr",value:function(e,t){var n=this.vr(e);return JN.tr(n,t)}},{key:"Cr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return YN.tr(new nx(i),r,t)}},{key:"kr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]);return XN.tr(r,t)}},{key:"pr",value:function(e){return $N.tr(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Nr",value:function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:ox("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}},{key:"Sr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Lr(o,u).then((function(){n.ar=r}))}},{key:"Ir",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Tr",value:function(e){var t=yS();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),tA=function(){function e(){A(this,e),this.Ur=new ZN,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return R(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.nr(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.sr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new ZN,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),nA=function(){function e(){A(this,e)}return R(e,[{key:"Kr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),rA=function(){function e(){var t=this;A(this,e),this.Gr=function(){return t.Qr()},this.jr=function(){return t.Wr()},this.zr=[],this.Hr()}return R(e,[{key:"Kr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}},{key:"Hr",value:function(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}},{key:"Qr",value:function(){ox("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=vr(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){ox("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=vr(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),iA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},aA=function(){function e(t){A(this,e),this.Jr=t.Jr,this.Yr=t.Yr}return R(e,[{key:"Xr",value:function(e){this.Zr=e}},{key:"eo",value:function(e){this.no=e}},{key:"onMessage",value:function(e){this.so=e}},{key:"close",value:function(){this.Yr()}},{key:"send",value:function(e){this.Jr(e)}},{key:"io",value:function(){this.Zr()}},{key:"ro",value:function(e){this.no(e)}},{key:"oo",value:function(e){this.so(e)}}]),e}(),oA=function(e){O(n,e);var t=V(n);function n(e){var r;return A(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return R(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new ex;o.listenOnce(Yb.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Qb.NO_ERROR:var t=o.getResponseJson();ox("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Qb.TIMEOUT:ox("Connection",'RPC "'+e+'" timed out'),a(new px(dx.DEADLINE_EXCEEDED,"Request time out"));break;case Qb.HTTP_ERROR:var n=o.getStatus();if(ox("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(dx).indexOf(t)>=0?t:dx.UNKNOWN}(r.status);a(new px(u,r.message))}else a(new px(dx.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new px(dx.UNAVAILABLE,"Connection failed."));break;default:lx()}}finally{ox("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Gb(),a=Hb(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new $b({})),this.lo(o.initMessageHeaders,t,n),Rr()||Lr()||Pr().indexOf("Electron/")>=0||Mr()||Pr().indexOf("MSAppHost/")>=0||Or()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");ox("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,h=new aA({Jr:function(e){l?ox("Connection","Not sending because WebChannel is closed:",e):(c||(ox("Connection","Opening WebChannel transport."),s.open(),c=!0),ox("Connection","WebChannel sending:",e),s.send(e))},Yr:function(){return s.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(s,Zb.EventType.OPEN,(function(){l||ox("Connection","WebChannel transport opened.")})),f(s,Zb.EventType.CLOSE,(function(){l||(l=!0,ox("Connection","WebChannel transport closed"),h.ro())})),f(s,Zb.EventType.ERROR,(function(e){l||(l=!0,sx("Connection","WebChannel transport errored:",e),h.ro(new px(dx.UNAVAILABLE,"The operation could not be completed")))})),f(s,Zb.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];hx(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){ox("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=ZE[e];if(void 0!==t)return aS(t)}(a),u=i.message;void 0===o&&(o=dx.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,h.ro(new px(o,u)),s.close()}else ox("Connection","WebChannel received:",n),h.oo(n)}})),f(a,Xb.STAT_EVENT,(function(e){e.stat===Jb.PROXY?ox("Connection","Detected buffering proxy"):e.stat===Jb.NOPROXY&&ox("Connection","Detected no buffering proxy")})),setTimeout((function(){h.io()}),0),h}}]),n}(function(){function e(t){A(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.uo=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return R(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ho(e,t);ox("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return ox("RestConnection","Received: ",e),e}),(function(t){throw sx("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i){return this.co(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+rx,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=iA[e];return"".concat(this.uo,"/v1/").concat(t,":").concat(n)}}]),e}());function uA(){return"undefined"!=typeof window?window:null}function sA(){return"undefined"!=typeof document?document:null}function cA(e){return new CS(e,!0)}var lA=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;A(this,e),this.Yn=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return R(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&ox("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),hA=function(){function e(t,n,r,i,a,o,u,s){A(this,e),this.Yn=t,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new lA(t,n)}return R(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,(function(){return e.Bo()})))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===dx.RESOURCE_EXHAUSTED?(ux(n.toString()),ux("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===dx.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.eo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=w(t,2),i=r[0],a=r[1];e.Do===n&&e.Qo(i,a)}),(function(n){t((function(){var t=new px(dx.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)}))}))}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.xo=n.Yn.enqueueAfterDelay(n.vo,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.eo((function(e){r((function(){return n.jo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.No.Ro(pr(fr().mark((function t(){return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"jo",value:function(e){return ox("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Do===e?n():(ox("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),fA=function(e){O(n,e);var t=V(n);function n(e,r,i,a,o,u){var s;return A(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return R(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:lx()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(hx(void 0===t||"string"==typeof t),Vx.fromBase64String(t||"")):(hx(void 0===t||t instanceof Uint8Array),Vx.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?dx.UNKNOWN:aS(e.code);return new px(t,e.message||"")}(o);n=new wS(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=MS(e,s.document.name),l=RS(s.document.updateTime),h=new wI({mapValue:{fields:s.document.fields}}),f=xI.newFoundDocument(c,l,h),d=s.targetIds||[],p=s.removedTargetIds||[];n=new kS(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=MS(e,v.document),m=v.readTime?RS(v.readTime):Px.min(),g=xI.newNoDocument(y,m),k=v.removedTargetIds||[];n=new kS([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var _=t.documentRemove;_.document;var w=MS(e,_.document),b=_.removedTargetIds||[];n=new kS([],b,w,null)}else{if(!("filter"in t))return lx();t.filter;var x=t.filter;x.targetId;var I=x.count||0,E=new rS(I),S=x.targetId;n=new _S(S,E)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Px.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Px.min():t.readTime?RS(t.readTime):Px.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=US(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=zI(r)?{documents:GS(e,r)}:{query:HS(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=AS(e,t.resumeToken):t.snapshotVersion.compareTo(Px.min())>0&&(n.readTime=NS(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lx()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=US(this.M),t.removeTarget=e,this.Lo(t)}}]),n}(hA),dA=function(e){O(n,e);var t=V(n);function n(e,r,i,a,o,u){var s;return A(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.Yo=!1,s}return R(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,Ch(L(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(hx(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(hx(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?RS(e.updateTime):RS(t);return n.isEqual(Px.min())&&(n=RS(t)),new UE(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=RS(e.commitTime);return this.listener.tu(n,t)}return hx(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=US(this.M),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return WS(t.M,e)}))};this.Lo(n)}}]),n}(hA),pA=function(e){O(n,e);var t=V(n);function n(e,r,i,a){var o;return A(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.M=a,o.su=!1,o}return R(n,[{key:"iu",value:function(){if(this.su)throw new px(dx.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=w(i,2),o=a[0],u=a[1];return r.So.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===dx.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new px(dx.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=w(i,2),o=a[0],u=a[1];return r.So._o(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===dx.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new px(dx.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){return R((function e(){A(this,e)}))}()),vA=function(){function e(t,n){A(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return R(e,[{key:"au",value:function(){var e=this;0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"lu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(ux(t),this.uu=!1):ox("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),yA=R((function e(t,n,r,i,a){var o=this;A(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr((function(e){r.enqueueAndForget(pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=TA(o),!e.t0){e.next=5;break}return ox("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=fx(t)).wu.add(4),e.next=4,kA(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,mA(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.yu=new vA(r,i)}));function mA(e){return gA.apply(this,arguments)}function gA(){return gA=pr(fr().mark((function e(t){var n,r,i;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!TA(t)){e.next=18;break}n=vr(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),gA.apply(this,arguments)}function kA(e){return _A.apply(this,arguments)}function _A(){return _A=pr(fr().mark((function e(t){var n,r,i;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=vr(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),_A.apply(this,arguments)}function wA(e,t){var n=fx(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),SA(n)?EA(n):nP(n).Mo()&&xA(n,t))}function bA(e,t){var n=fx(e),r=nP(n);n._u.delete(t),r.Mo()&&IA(n,t),0===n._u.size&&(r.Mo()?r.$o():TA(n)&&n.yu.set("Unknown"))}function xA(e,t){e.pu.Z(t.targetId),nP(e).Ho(t)}function IA(e,t){e.pu.Z(t),nP(e).Jo(t)}function EA(e){e.pu=new xS({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e._u.get(t)||null}}),nP(e).start(),e.yu.au()}function SA(e){return TA(e)&&!nP(e).ko()&&e._u.size>0}function TA(e){return 0===fx(e).wu.size}function CA(e){e.pu=void 0}function NA(e){return AA.apply(this,arguments)}function AA(){return AA=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach((function(e,n){xA(t,e)}));case 1:case"end":return e.stop()}}),e)}))),AA.apply(this,arguments)}function PA(e,t){return RA.apply(this,arguments)}function RA(){return RA=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:CA(t),SA(t)?(t.yu.lu(n),EA(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),RA.apply(this,arguments)}function DA(e,t,n){return OA.apply(this,arguments)}function OA(){return OA=pr(fr().mark((function e(t,n,r){var i;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof wS&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=pr(fr().mark((function e(t,n){var r,i,a,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=vr(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ox("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,LA(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof kS?t.pu.ut(n):n instanceof _S?t.pu._t(n):t.pu.ht(n),r.isEqual(Px.min())){e.next=29;break}return e.prev=14,e.next=17,_N(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(Vx.EMPTY_BYTE_STRING,n.snapshotVersion)),IA(e,t);var r=new HT(n.target,t,1,n.sequenceNumber);xA(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ox("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,LA(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),OA.apply(this,arguments)}function LA(e,t,n){return MA.apply(this,arguments)}function MA(){return MA=pr(fr().mark((function e(t,n,r){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(FT(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,kA(t);case 5:t.yu.set("Offline"),r||(r=function(){return _N(t.localStore)}),t.asyncQueue.enqueueRetryable(pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ox("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,mA(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),MA.apply(this,arguments)}function FA(e,t){return t().catch((function(n){return LA(e,n,t)}))}function jA(e){return UA.apply(this,arguments)}function UA(){return UA=pr(fr().mark((function e(t){var n,r,i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=fx(t),r=rP(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!VA(n)){e.next=19;break}return e.prev=3,e.next=6,xN(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,qA(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,LA(n,e.t0);case 17:e.next=2;break;case 19:BA(n)&&zA(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),UA.apply(this,arguments)}function VA(e){return TA(e)&&e.du.length<10}function qA(e,t){e.du.push(t);var n=rP(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function BA(e){return TA(e)&&!rP(e).ko()&&e.du.length>0}function zA(e){rP(e).start()}function WA(e){return KA.apply(this,arguments)}function KA(){return KA=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:rP(t).nu();case 1:case"end":return e.stop()}}),e)}))),KA.apply(this,arguments)}function GA(e){return HA.apply(this,arguments)}function HA(){return HA=pr(fr().mark((function e(t){var n,r,i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=rP(t),r=vr(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),HA.apply(this,arguments)}function QA(e,t,n){return YA.apply(this,arguments)}function YA(){return YA=pr(fr().mark((function e(t,n,r){var i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=KT.from(i,n,r),e.next=3,FA(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,jA(t);case 5:case"end":return e.stop()}}),e)}))),YA.apply(this,arguments)}function XA(e,t){return JA.apply(this,arguments)}function JA(){return JA=pr(fr().mark((function e(t,n){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&rP(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=pr(fr().mark((function e(t,n){var r,i;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!iS(i=n.code)||i===dx.ABORTED){e.next=7;break}return r=t.du.shift(),rP(t).Fo(),e.next=5,FA(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,jA(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:BA(t)&&zA(t);case 5:case"end":return e.stop()}}),e)}))),JA.apply(this,arguments)}function $A(e,t){return ZA.apply(this,arguments)}function ZA(){return ZA=pr(fr().mark((function e(t,n){var r,i;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=fx(t)).asyncQueue.verifyOperationInProgress(),ox("RemoteStore","RemoteStore received new credentials"),i=TA(r),r.wu.add(3),e.next=6,kA(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,mA(r);case 12:case"end":return e.stop()}}),e)}))),ZA.apply(this,arguments)}function eP(e,t){return tP.apply(this,arguments)}function tP(){return tP=pr(fr().mark((function e(t,n){var r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fx(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,mA(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,kA(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),tP.apply(this,arguments)}function nP(e){return e.Iu||(e.Iu=function(e,t,n){var r=fx(e);return r.iu(),new fA(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:NA.bind(null,e),eo:PA.bind(null,e),zo:DA.bind(null,e)}),e.mu.push(function(){var t=pr(fr().mark((function t(n){return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),SA(e)?EA(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:CA(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}function rP(e){return e.Tu||(e.Tu=function(e,t,n){var r=fx(e);return r.iu(),new dA(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:WA.bind(null,e),eo:XA.bind(null,e),eu:GA.bind(null,e),tu:QA.bind(null,e)}),e.mu.push(function(){var t=pr(fr().mark((function t(n){return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,jA(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(ox("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var iP=function(){function e(t,n,r,i,a){A(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new vx,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return R(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new px(dx.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function aP(e,t){if(ux("AsyncQueue","".concat(t,": ").concat(e)),FT(e))return new px(dx.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var oP=function(){function e(t){A(this,e),this.comparator=t?function(e,n){return t(e,n)||Zx.comparator(e.key,n.key)}:function(e,t){return Zx.comparator(e.key,t.key)},this.keyedMap=lS(),this.sortedSet=new DI(this.comparator)}return R(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),uP=function(){function e(){A(this,e),this.Eu=new DI(Zx.comparator)}return R(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):lx():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),sP=function(){function e(t,n,r,i,a,o,u,s){A(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return R(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,oP.emptySet(n),a,r,i,!0,!1)}}]),e}(),cP=R((function e(){A(this,e),this.Ru=void 0,this.listeners=[]})),lP=R((function e(){A(this,e),this.queries=new oS((function(e){return mE(e)}),yE),this.onlineState="Unknown",this.bu=new Set}));function hP(e,t){return fP.apply(this,arguments)}function fP(){return fP=pr(fr().mark((function e(t,n){var r,i,a,o,u;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fx(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new cP),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=aP(e.t0,"Initialization of query '".concat(gE(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.Vu(o.Ru)&&mP(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),fP.apply(this,arguments)}function dP(e,t){return pP.apply(this,arguments)}function pP(){return pP=pr(fr().mark((function e(t,n){var r,i,a,o,u;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fx(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),pP.apply(this,arguments)}function vP(e,t){var n,r=fx(e),i=!1,a=vr(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=vr(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}s.Ru=o}}}catch(h){a.e(h)}finally{a.f()}i&&mP(r)}function yP(e,t,n){var r=fx(e),i=r.queries.get(t);if(i){var a,o=vr(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function mP(e){e.bu.forEach((function(e){e.next()}))}var gP=function(){function e(t,n,r){A(this,e),this.query=t,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return R(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=vr(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new sP(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.ku||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=sP.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}]),e}(),kP=function(){function e(t,n){A(this,e),this.payload=t,this.byteLength=n}return R(e,[{key:"Mu",value:function(){return"metadata"in this.payload}}]),e}(),_P=function(){function e(t){A(this,e),this.M=t}return R(e,[{key:"wi",value:function(e){return MS(this.M,e)}},{key:"mi",value:function(e){return e.metadata.exists?BS(this.M,e.document,!1):xI.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}},{key:"gi",value:function(e){return RS(e)}}]),e}(),wP=function(){function e(t,n,r){A(this,e),this.Ou=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bP(t)}return R(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Mx.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new _P(this.M),i=vr(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.wi(a.metadata.name),s=vr(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||pS()).add(u);n.set(c,l)}}catch(h){s.e(h)}finally{s.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=pr(fr().mark((function e(){var t,n,r,i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,PN(this.localStore,new _P(this.M),this.documents,this.Ou.id);case 2:t=e.sent,n=this.$u(this.documents),r=vr(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,DN(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function bP(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var xP=R((function e(t){A(this,e),this.key=t})),IP=R((function e(t){A(this,e),this.key=t})),EP=function(){function e(t,n){A(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=pS(),this.mutatedKeys=pS(),this.Gu=wE(t),this.Qu=new oP(this.Gu)}return R(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new uP,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=kE(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Hu(l,h)||(r.track({type:2,doc:h}),p=!0,(s&&n.Gu(h,s)>0||c&&n.Gu(h,c)<0)&&(u=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,ii:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lx()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new sP(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new uP,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=pS(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new IP(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new xP(e))})),n}},{key:"ta",value:function(e){this.Uu=e._i,this.Ku=pS();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ea",value:function(){return sP.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),SP=R((function e(t,n,r){A(this,e),this.query=t,this.targetId=n,this.view=r})),TP=R((function e(t){A(this,e),this.key=t,this.na=!1})),CP=function(){function e(t,n,r,i,a,o){A(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new oS((function(e){return mE(e)}),yE),this.ra=new Map,this.oa=new Set,this.ua=new DI(Zx.comparator),this.aa=new Map,this.ca=new FN,this.ha={},this.la=new Map,this.fa=jC.yn(),this.onlineState="Unknown",this.da=void 0}return R(e,[{key:"isPrimaryClient",get:function(){return!0===this.da}}]),e}();function NP(e,t){return AP.apply(this,arguments)}function AP(){return AP=pr(fr().mark((function e(t,n){var r,i,a,o,u,s;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=bR(t),!(o=r.ia.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ea(),e.next=15;break;case 6:return e.next=8,IN(r.localStore,pE(n));case 8:return u=e.sent,r.isPrimaryClient&&wA(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,PP(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),AP.apply(this,arguments)}function PP(e,t,n,r){return RP.apply(this,arguments)}function RP(){return RP=pr(fr().mark((function e(t,n,r,i){var a,o,u,s,c,l;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._a=function(e,n,r){return function(){var e=pr(fr().mark((function e(t,n,r,i){var a,o,u;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.ii,!e.t0){e.next=6;break}return e.next=5,TN(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",($P(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,TN(t.localStore,n,!0);case 3:return a=e.sent,o=new EP(n,a._i),u=o.Wu(a.documents),s=gS.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),$P(t,r,c.Xu),l=new SP(n,r,o),e.abrupt("return",(t.ia.set(n,l),t.ra.has(r)?t.ra.get(r).push(n):t.ra.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),RP.apply(this,arguments)}function DP(e,t){return OP.apply(this,arguments)}function OP(){return OP=pr(fr().mark((function e(t,n){var r,i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fx(t),i=r.ia.get(n),!((a=r.ra.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ra.set(i.targetId,a.filter((function(e){return!yE(e,n)}))),void r.ia.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,EN(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),bA(r.remoteStore,i.targetId),XP(r,i.targetId)})).catch(zC);case 9:e.next=14;break;case 11:return XP(r,i.targetId),e.next=14,EN(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),OP.apply(this,arguments)}function LP(e,t,n){return MP.apply(this,arguments)}function MP(){return MP=pr(fr().mark((function e(t,n,r){var i,a,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xR(t),e.prev=1,e.next=4,function(e,t){var n,r=fx(e),i=Ax.now(),a=t.reduce((function(e,t){return e.add(t.key)}),pS());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.fi.Ks(e,a).next((function(a){n=a;var o,u=[],s=vr(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=KE(c,n.get(c.key));null!=l&&u.push(new YE(c.key,l,bI(l.value.mapValue),VE.exists(!0)))}}catch(h){s.e(h)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ha[e.currentUser.toKey()];r||(r=new DI(Tx)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,tR(i,a.changes);case 9:return e.next=11,jA(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=aP(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),MP.apply(this,arguments)}function FP(e,t){return jP.apply(this,arguments)}function jP(){return jP=pr(fr().mark((function e(t,n){var r,i;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fx(t),e.prev=1,e.next=4,wN(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.aa.get(t);n&&(hx(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?hx(n.na):e.removedDocuments.size>0&&(hx(n.na),n.na=!1))})),e.next=8,tR(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,zC(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),jP.apply(this,arguments)}function UP(e,t,n){var r=fx(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ia.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=fx(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=vr(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&mP(n)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function VP(e,t,n){return qP.apply(this,arguments)}function qP(){return qP=pr(fr().mark((function e(t,n,r){var i,a,o,u,s,c;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=fx(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.aa.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new DI(Zx.comparator)).insert(o,xI.newNoDocument(o,Px.min())),s=pS().add(o),c=new mS(Px.min(),new Map,new MI(Tx),u,s),e.next=9,FP(i,c);case 9:i.ua=i.ua.remove(o),i.aa.delete(n),eR(i),e.next=16;break;case 14:return e.next=16,EN(i.localStore,n,!1).then((function(){return XP(i,n,r)})).catch(zC);case 16:case"end":return e.stop()}}),e)}))),qP.apply(this,arguments)}function BP(e,t){return zP.apply(this,arguments)}function zP(){return zP=pr(fr().mark((function e(t,n){var r,i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fx(t),i=n.batch.batchId,e.prev=1,e.next=4,kN(r.localStore,n);case 4:return a=e.sent,YP(r,i,null),QP(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,tR(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,zC(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),zP.apply(this,arguments)}function WP(e,t,n){return KP.apply(this,arguments)}function KP(){return KP=pr(fr().mark((function e(t,n,r){var i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fx(t),e.prev=1,e.next=4,function(e,t){var n=fx(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return hx(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,YP(i,n,r),QP(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,tR(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,zC(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),KP.apply(this,arguments)}function GP(e,t){return HP.apply(this,arguments)}function HP(){return HP=pr(fr().mark((function e(t,n){var r,i,a,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return TA((r=fx(t)).remoteStore)||ox("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=fx(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.la.get(i)||[]).push(n),r.la.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=aP(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),HP.apply(this,arguments)}function QP(e,t){(e.la.get(t)||[]).forEach((function(e){e.resolve()})),e.la.delete(t)}function YP(e,t,n){var r=fx(e),i=r.ha[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function XP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=vr(e.ra.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ia.delete(a),n&&e.sa.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach((function(t){e.ca.containsKey(t)||JP(e,t)}))}function JP(e,t){e.oa.delete(t.path.canonicalString());var n=e.ua.get(t);null!==n&&(bA(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),eR(e))}function $P(e,t,n){var r,i=vr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof xP?(e.ca.addReference(a.key,t),ZP(e,a)):a instanceof IP?(ox("SyncEngine","Document no longer in limbo: "+a.key),e.ca.removeReference(a.key,t),e.ca.containsKey(a.key)||JP(e,a.key)):lx()}}catch(o){i.e(o)}finally{i.f()}}function ZP(e,t){var n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(ox("SyncEngine","New document in limbo: "+n),e.oa.add(r),eR(e))}function eR(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){var t=e.oa.values().next().value;e.oa.delete(t);var n=new Zx(Mx.fromString(t)),r=e.fa.next();e.aa.set(r,new TP(n)),e.ua=e.ua.insert(n,r),wA(e.remoteStore,new HT(pE(cE(n.path)),r,2,Ix.A))}}function tR(e,t,n){return nR.apply(this,arguments)}function nR(){return nR=pr(fr().mark((function e(t,n,r){var i,a,o,u;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=fx(t),a=[],o=[],u=[],e.t0=i.ia.isEmpty(),e.t0){e.next=9;break}return i.ia.forEach((function(e,t){u.push(i._a(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=dN.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sa.zo(a),e.next=9,function(){var e=pr(fr().mark((function e(t,n){var r,i,a,o,u,s,c,l;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fx(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return RT.forEach(n,(function(t){return RT.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return RT.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),FT(e.t0)){e.next=10;break}throw e.t0;case 10:ox("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=vr(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.ui=r.ui.insert(u,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),nR.apply(this,arguments)}function rR(e,t){return iR.apply(this,arguments)}function iR(){return iR=pr(fr().mark((function e(t,n){var r,i;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=fx(t)).currentUser.isEqual(n)){e.next=11;break}return ox("SyncEngine","User change. New user:",n.toKey()),e.next=5,mN(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.la.forEach((function(e){e.forEach((function(e){e.reject(new px(dx.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.la.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,tR(r,i.di);case 11:case"end":return e.stop()}}),e)}))),iR.apply(this,arguments)}function aR(e,t){var n=fx(e),r=n.aa.get(t);if(r&&r.na)return pS().add(r.key);var i=pS(),a=n.ra.get(t);if(!a)return i;var o,u=vr(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ia.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function oR(e,t){return uR.apply(this,arguments)}function uR(){return uR=pr(fr().mark((function e(t,n){var r,i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fx(t),e.next=3,TN(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ta(i),e.abrupt("return",(r.isPrimaryClient&&$P(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),uR.apply(this,arguments)}function sR(e,t){return cR.apply(this,arguments)}function cR(){return cR=pr(fr().mark((function e(t,n){var r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fx(t),e.abrupt("return",NN(r.localStore,n).then((function(e){return tR(r,e)})));case 2:case"end":return e.stop()}}),e)}))),cR.apply(this,arguments)}function lR(e,t,n,r){return hR.apply(this,arguments)}function hR(){return hR=pr(fr().mark((function e(t,n,r,i){var a,o;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=fx(t),e.next=3,function(e,t){var n=fx(e),r=fx(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.fi.Ks(e,t):RT.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,jA(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(YP(a,n,i||null),QP(a,n),function(e,t){fx(fx(e).Bs)._n(t)}(a.localStore,n)):lx();case 11:return e.next=13,tR(a,o);case 13:e.next=16;break;case 15:ox("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),hR.apply(this,arguments)}function fR(e,t){return dR.apply(this,arguments)}function dR(){return dR=pr(fr().mark((function e(t,n){var r,i,a,o,u,s,c,l;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(bR(r=fx(t)),xR(r),!0!==n||!0===r.da){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,pR(r,i.toArray());case 5:return a=e.sent,r.da=!0,e.next=9,eP(r.remoteStore,!0);case 9:o=vr(a);try{for(o.s();!(u=o.n()).done;)s=u.value,wA(r.remoteStore,s)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.da){e.next=25;break}return c=[],l=Promise.resolve(),r.ra.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return XP(r,t),EN(r.localStore,t,!0)})),bA(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,pR(r,c);case 21:return function(e){var t=fx(e);t.aa.forEach((function(e,n){bA(t.remoteStore,n)})),t.ca.Si(),t.aa=new Map,t.ua=new DI(Zx.comparator)}(r),r.da=!1,e.next=25,eP(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),dR.apply(this,arguments)}function pR(e,t,n){return vR.apply(this,arguments)}function vR(){return vR=pr(fr().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f,d,p,v,y,m;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=fx(t),a=[],o=[],u=vr(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(h=i.ra.get(c))||0===h.length){e.next=34;break}return e.next=11,IN(i.localStore,pE(h[0]));case 11:l=e.sent,f=vr(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return p=d.value,v=i.ia.get(p),e.next=20,oR(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,CN(i.localStore,c);case 36:return m=e.sent,e.next=39,IN(i.localStore,m);case 39:return l=e.sent,e.next=42,PP(i,yR(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sa.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),vR.apply(this,arguments)}function yR(e){return sE(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function mR(e){var t=fx(e);return fx(fx(t.localStore).persistence).Fs()}function gR(e,t,n,r){return kR.apply(this,arguments)}function kR(){return kR=pr(fr().mark((function e(t,n,r,i){var a,o,u,s;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=fx(t)).da){e.next=3;break}return e.abrupt("return",void ox("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ra.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,NN(a.localStore,_E(o[0]));case 10:return u=e.sent,s=mS.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,tR(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,EN(a.localStore,n,!0);case 17:return XP(a,n,i),e.abrupt("break",20);case 19:lx();case 20:case"end":return e.stop()}}),e)}))),kR.apply(this,arguments)}function _R(e,t,n){return wR.apply(this,arguments)}function wR(){return wR=pr(fr().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=bR(t)).da){e.next=45;break}a=vr(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ra.has(u)){e.next=10;break}return ox("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,CN(i.localStore,u);case 12:return s=e.sent,e.next=15,IN(i.localStore,s);case 15:return c=e.sent,e.next=18,PP(i,yR(s),c.targetId,!1);case 18:wA(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=vr(r),e.prev=30,f=fr().mark((function e(){var t;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ra.has(t),!e.t0){e.next=5;break}return e.next=5,EN(i.localStore,t,!1).then((function(){bA(i.remoteStore,t),XP(i,t)})).catch(zC);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),wR.apply(this,arguments)}function bR(e){var t=fx(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=FP.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=aR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=VP.bind(null,t),t.sa.zo=vP.bind(null,t.eventManager),t.sa.wa=yP.bind(null,t.eventManager),t}function xR(e){var t=fx(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=BP.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=WP.bind(null,t),t}function IR(e,t,n){var r=fx(e);(function(){var e=pr(fr().mark((function e(t,n,r){var i,a,o,u,s;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=fx(e),r=RS(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(bP(i)),a=new wP(i,t.localStore,n.M),e.next=15,n.ma();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.ma();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,tR(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=fx(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(sx("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var ER=function(){function e(){A(this,e),this.synchronizeTabs=!1}return R(e,[{key:"initialize",value:function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=cA(t.databaseInfo.databaseId),this.sharedClientState=this.ga(t),this.persistence=this.ya(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.pa(t),this.localStore=this.Ia(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pa",value:function(e){return null}},{key:"Ia",value:function(e){return yN(this.persistence,new pN,e.initialUser,this.M)}},{key:"ya",value:function(e){return new zN(KN.Yi,this.M)}},{key:"ga",value:function(e){return new tA}},{key:"terminate",value:function(){var e=pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),SR=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this)).Ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return R(n,[{key:"initialize",value:function(){var e=pr(fr().mark((function e(t){var r=this;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ch(L(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ta.initialize(this,t);case 4:return e.next=6,xR(this.Ta.syncEngine);case 6:return e.next=8,jA(this.Ta.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ia",value:function(e){return yN(this.persistence,new pN,e.initialUser,this.M)}},{key:"pa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new HC(t,e.asyncQueue)}},{key:"ya",value:function(e){var t=hN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?AC.withCacheSize(this.cacheSizeBytes):AC.DEFAULT;return new sN(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,uA(),sA(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"ga",value:function(e){return new tA}}]),n}(ER),TR=function(e){O(n,e);var t=V(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e,r,!1)).Ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return R(n,[{key:"initialize",value:function(){var e=pr(fr().mark((function e(t){var r,i=this;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ch(L(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ta.syncEngine,e.t0=this.sharedClientState instanceof eA,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:lR.bind(null,r),Br:gR.bind(null,r),Lr:_R.bind(null,r),Fs:mR.bind(null,r),Fr:sR.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fR(i.Ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){var t=uA();if(!eA.vt(t))throw new px(dx.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=hN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new eA(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(SR),CR=function(){function e(){A(this,e)}return R(e,[{key:"initialize",value:function(){var e=pr(fr().mark((function e(t,n){var r=this;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return UP(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=rR.bind(null,this.syncEngine),e.next=12,eP(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new lP}},{key:"createDatastore",value:function(e){var t,n=cA(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new oA(t));return function(e,t,n,r){return new pA(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return UP(o.syncEngine,e,0)},a=rA.vt()?new rA:new nA,new yA(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new CP(e,t,n,r,i,a);return o&&(u.da=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fx(t),ox("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,kA(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function NR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return pr(fr().mark((function r(){var i;return fr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var AR=function(){function e(t){A(this,e),this.observer=t,this.muted=!1}return R(e,[{key:"next",value:function(e){this.observer.next&&this.Ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Aa",value:function(){this.muted=!0}},{key:"Ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),PR=function(){function e(t,n){var r=this;A(this,e),this.Ra=t,this.M=n,this.metadata=new vx,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then((function(e){e&&e.Mu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return R(e,[{key:"close",value:function(){return this.Ra.cancel()}},{key:"getMetadata",value:function(){var e=pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ma",value:function(){var e=pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Pa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){var e=pr(fr().mark((function e(){var t,n,r,i;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Va();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ba.decode(t),r=Number(n),isNaN(r)&&this.va("length string (".concat(n,") is not valid number")),e.next=9,this.Sa(r);case 9:return i=e.sent,e.abrupt("return",new kP(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Va",value:function(){var e=pr(fr().mark((function e(){var t,n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Da()<0)){e.next=7;break}return e.next=3,this.Ca();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Da())<0&&this.va("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Sa",value:function(){var e=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ca();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.va("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ba.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"va",value:function(e){throw this.Ra.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ca",value:function(){var e=pr(fr().mark((function e(){var t,n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),RR=function(){function e(t){A(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return R(e,[{key:"lookup",value:function(){var e=pr(fr().mark((function e(t){var n,r=this;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new px(dx.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=pr(fr().mark((function e(t,n){var r,i,a,o,u,s;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fx(t),i=US(r.M)+"/documents",a={documents:n.map((function(e){return LS(r.M,e)}))},e.next=5,r._o("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=zS(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());hx(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new tS(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=pr(fr().mark((function e(){var t,n=this;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Zx.fromPath(t);n.mutations.push(new nS(r,n.precondition(r)))})),e.next=7,function(){var e=pr(fr().mark((function e(t,n){var r,i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fx(t),i=US(r.M)+"/documents",a={writes:n.map((function(e){return WS(r.M,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lx();t=Px.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new px(dx.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?VE.updateTime(t):VE.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Px.min()))throw new px(dx.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return VE.updateTime(t)}return VE.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),DR=function(){function e(t,n,r,i,a){A(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new lA(this.asyncQueue,"transaction_retry")}return R(e,[{key:"run",value:function(){this.xa-=1,this.Na()}},{key:"Na",value:function(){var e=this;this.No.Ro(pr(fr().mark((function t(){var n,r;return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new RR(e.datastore),(r=e.ka(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ma(t)}))}))})).catch((function(t){e.Ma(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"ka",value:function(e){try{var t=this.updateFunction(e);return!Xx(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ma",value:function(e){var t=this;this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Na(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Oa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!iS(t)}return!1}}]),e}(),OR=function(){function e(t,n,r,i){var a=this;A(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=nx.UNAUTHENTICATED,this.clientId=Sx.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ox("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ox("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return R(e,[{key:"getConfiguration",value:function(){var e=pr(fr().mark((function e(){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new px(dx.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new vx;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(pr(fr().mark((function n(){var r;return fr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=aP(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function LR(e,t){return MR.apply(this,arguments)}function MR(){return MR=pr(fr().mark((function e(t,n){var r,i;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ox("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,mN(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),MR.apply(this,arguments)}function FR(e,t){return jR.apply(this,arguments)}function jR(){return jR=pr(fr().mark((function e(t,n){var r,i;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,UR(t);case 3:return r=e.sent,ox("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return $A(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return $A(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),jR.apply(this,arguments)}function UR(e){return VR.apply(this,arguments)}function VR(){return VR=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return ox("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,LR(t,new ER);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),VR.apply(this,arguments)}function qR(e){return BR.apply(this,arguments)}function BR(){return BR=pr(fr().mark((function e(t){return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return ox("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,FR(t,new CR);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),BR.apply(this,arguments)}function zR(e){return UR(e).then((function(e){return e.persistence}))}function WR(e){return UR(e).then((function(e){return e.localStore}))}function KR(e){return qR(e).then((function(e){return e.remoteStore}))}function GR(e){return qR(e).then((function(e){return e.syncEngine}))}function HR(e){return QR.apply(this,arguments)}function QR(){return QR=pr(fr().mark((function e(t){var n,r;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qR(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=NP.bind(null,n.syncEngine),r.onUnlisten=DP.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),QR.apply(this,arguments)}function YR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new vx;return e.asyncQueue.enqueueAndForget(pr(fr().mark((function i(){return fr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new AR({next:function(a){t.enqueueAndForget((function(){return dP(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new px(dx.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new px(dx.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new gP(cE(n.path),a,{includeMetadataChanges:!0,ku:!0});return hP(e,o)},i.next=3,HR(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function XR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new vx;return e.asyncQueue.enqueueAndForget(pr(fr().mark((function i(){return fr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new AR({next:function(n){t.enqueueAndForget((function(){return dP(e,o)})),n.fromCache&&"server"===r.source?i.reject(new px(dx.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new gP(n,a,{includeMetadataChanges:!0,ku:!0});return hP(e,o)},i.next=3,HR(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var JR=new Map;function $R(e,t,n){if(!n)throw new px(dx.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ZR(e,t,n,r){if(!0===t&&!0===r)throw new px(dx.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function eD(e){if(!Zx.isDocumentKey(e))throw new px(dx.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function tD(e){if(Zx.isDocumentKey(e))throw new px(dx.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function nD(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":lx()}function rD(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new px(dx.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=nD(e);throw new px(dx.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function iD(e,t){if(t<=0)throw new px(dx.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var aD=function(){function e(t){var n;if(A(this,e),void 0===t.host){if(void 0!==t.ssl)throw new px(dx.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new px(dx.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,ZR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return R(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),oD=function(){function e(t,n,r){A(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aD({}),this._settingsFrozen=!1,t instanceof Yx?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new px(dx.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yx(e.options.projectId)}(t))}return R(e,[{key:"app",get:function(){if(!this._app)throw new px(dx.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new px(dx.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aD(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new mx;switch(e.type){case"gapi":var t=e.client;return hx(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new wx(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new px(dx.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=JR.get(e);t&&(ox("ComponentProvider","Removing Datastore"),JR.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function uD(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=rD(e,oD))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&sx("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=nx.MOCK_USER;else{o=Ar(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new px(dx.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new nx(s)}e._authCredentials=new gx(new yx(o,u))}}var sD=function(){function e(t,n,r){A(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return R(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new lD(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),cD=function(){function e(t,n,r){A(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return R(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),lD=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this,e,r,cE(i)))._path=i,a.type="collection",a}return R(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new sD(this.firestore,null,new Zx(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(cD);function hD(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ui(e),$R("collection","path",t),e instanceof oD){var a=Mx.fromString.apply(Mx,[t].concat(r));return tD(a),new lD(e,null,a)}if(!(e instanceof sD||e instanceof lD))throw new px(dx.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Mx.fromString.apply(Mx,[t].concat(r)));return tD(o),new lD(e.firestore,null,o)}function fD(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ui(e),1===arguments.length&&(t=Sx.R()),$R("doc","path",t),e instanceof oD){var a=Mx.fromString.apply(Mx,[t].concat(r));return eD(a),new sD(e,null,new Zx(a))}if(!(e instanceof sD||e instanceof lD))throw new px(dx.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Mx.fromString.apply(Mx,[t].concat(r)));return eD(o),new sD(e.firestore,e instanceof lD?e.converter:null,new Zx(o))}function dD(e,t){return e=ui(e),t=ui(t),(e instanceof sD||e instanceof lD)&&(t instanceof sD||t instanceof lD)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function pD(e,t){return e=ui(e),t=ui(t),e instanceof cD&&t instanceof cD&&e.firestore===t.firestore&&yE(e._query,t._query)&&e.converter===t.converter}var vD=function(){function e(){var t=this;A(this,e),this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new lA(this,"async_queue_retry"),this.Qa=function(){var e=sA();e&&ox("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=sA();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Qa)}return R(e,[{key:"isShuttingDown",get:function(){return this.Ba}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ja(),this.Wa(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;var t=sA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.ja(),this.Ba)return new Promise((function(){}));var n=new vx;return this.Wa((function(){return t.Ba&&t.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.$a.push(e),t.za()}))}},{key:"za",value:function(){var e=pr(fr().mark((function e(){var t=this;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.$a.length){e.next=14;break}return e.prev=1,e.next=4,this.$a[0]();case 4:this.$a.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),FT(e.t0)){e.next=12;break}throw e.t0;case 12:ox("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.$a.length>0&&this.No.Ro((function(){return t.za()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t=this,n=this.Fa.then((function(){return t.qa=!0,e().catch((function(e){t.Ua=e,t.qa=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ux("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.qa=!1,e}))}));return this.Fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ja(),this.Ga.indexOf(e)>-1&&(t=0);var i=iP.createAndSchedule(this,e,t,n,(function(e){return r.Ha(e)}));return this.La.push(i),i}},{key:"ja",value:function(){this.Ua&&lx()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ja",value:function(){var e=pr(fr().mark((function e(){var t;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Fa,e.next=3,t;case 3:if(t!==this.Fa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ya",value:function(e){var t,n=vr(this.La);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Xa",value:function(e){var t=this;return this.Ja().then((function(){t.La.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=vr(t.La);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ja()}))}},{key:"Za",value:function(e){this.Ga.push(e)}},{key:"Ha",value:function(e){var t=this.La.indexOf(e);this.La.splice(t,1)}}]),e}();function yD(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=vr(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var mD=function(){function e(){A(this,e),this._progressObserver={},this._taskCompletionResolver=new vx,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return R(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),gD=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new vD,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return R(n,[{key:"_terminate",value:function(){return this._firestoreClient||_D(this),this._firestoreClient.terminate()}}]),n}(oD);function kD(e){return e._firestoreClient||_D(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function _D(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Qx(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new OR(e._authCredentials,e._appCheckCredentials,e._queue,r)}function wD(e,t,n){var r=new vx;return e.asyncQueue.enqueue(pr(fr().mark((function i(){return fr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,LR(e,n);case 3:return i.next=5,FR(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===dx.FAILED_PRECONDITION||e.code===dx.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function bD(e){return function(e){return e.asyncQueue.enqueue(pr(fr().mark((function t(){var n,r;return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zR(e);case 2:return n=t.sent,t.next=5,KR(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=fx(e);return t.wu.delete(0),mA(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(kD(e=rD(e,gD)))}function xD(e){return function(e){return e.asyncQueue.enqueue(pr(fr().mark((function t(){var n,r;return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zR(e);case 2:return n=t.sent,t.next=5,KR(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=fx(t)).wu.add(0),e.next=4,kA(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(kD(e=rD(e,gD)))}function ID(e,t){var n=kD(e=rD(e,gD)),r=new mD;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new PR(e,t)}(function(e,t){if(e instanceof Uint8Array)return NR(e,t);if(e instanceof ArrayBuffer)return NR(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,cA(t));e.asyncQueue.enqueueAndForget(pr(fr().mark((function t(){return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=IR,t.next=3,GR(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function ED(e,t){return function(e,t){return e.asyncQueue.enqueue(pr(fr().mark((function n(){return fr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=fx(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,WR(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(kD(e=rD(e,gD)),t).then((function(t){return t?new cD(e,null,t.query):null}))}function SD(e){if(e._initialized||e._terminated)throw new px(dx.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var TD=function(){function e(){A(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new px(dx.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jx(n)}return R(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var CD=function(){function e(t){A(this,e),this._byteString=t}return R(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Vx.fromBase64String(t))}catch(t){throw new px(dx.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Vx.fromUint8Array(t))}}]),e}(),ND=R((function e(t){A(this,e),this._methodName=t})),AD=function(){function e(t,n){if(A(this,e),!isFinite(t)||t<-90||t>90)throw new px(dx.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new px(dx.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return R(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Tx(this._lat,e._lat)||Tx(this._long,e._long)}}]),e}(),PD=/^__.*__$/,RD=function(){function e(t,n,r){A(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return R(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new YE(e,this.data,this.fieldMask,t,this.fieldTransforms):new QE(e,this.data,t,this.fieldTransforms)}}]),e}(),DD=function(){function e(t,n,r){A(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return R(e,[{key:"toMutation",value:function(e,t){return new YE(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function OD(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lx()}}var LD=function(){function e(t,n,r,i,a,o){A(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return R(e,[{key:"path",get:function(){return this.settings.path}},{key:"ec",get:function(){return this.settings.ec}},{key:"nc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}},{key:"oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}},{key:"uc",value:function(e){return this.nc({path:void 0,ic:!0})}},{key:"ac",value:function(e){return tO(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"tc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.rc(this.path.get(e))}},{key:"rc",value:function(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(OD(this.ec)&&PD.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}]),e}(),MD=function(){function e(t,n,r){A(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||cA(t)}return R(e,[{key:"lc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new LD({ec:e,methodName:t,hc:n,path:jx.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function FD(e){var t=e._freezeSettings(),n=cA(e._databaseId);return new MD(e._databaseId,!!t.ignoreUndefinedProperties,n)}function jD(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.lc(a.merge||a.mergeFields?2:0,t,n,i);JD("Data must be an object, but it was:",o,r);var u,s,c=YD(r,o);if(a.merge)u=new Ux(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=vr(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=$D(t,d,n);if(!o.contains(p))throw new px(dx.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));nO(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}u=new Ux(h),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new RD(new wI(c),u,s)}var UD=function(e){O(n,e);var t=V(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ec)throw 1===e.ec?e.ac("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ac("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(ND);function VD(e,t,n){return new LD({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var qD=function(e){O(n,e);var t=V(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"_toFieldTransform",value:function(e){return new jE(e.path,new AE)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(ND),BD=function(e){O(n,e);var t=V(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e)).fc=r,i}return R(n,[{key:"_toFieldTransform",value:function(e){var t=VD(this,e,!0),n=this.fc.map((function(e){return QD(e,t)})),r=new PE(n);return new jE(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ND),zD=function(e){O(n,e);var t=V(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e)).fc=r,i}return R(n,[{key:"_toFieldTransform",value:function(e){var t=VD(this,e,!0),n=this.fc.map((function(e){return QD(e,t)})),r=new DE(n);return new jE(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ND),WD=function(e){O(n,e);var t=V(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e)).dc=r,i}return R(n,[{key:"_toFieldTransform",value:function(e){var t=new LE(e.M,EE(e.M,this.dc));return new jE(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ND);function KD(e,t,n,r){var i=e.lc(1,t,n);JD("Data must be an object, but it was:",i,r);var a=[],o=wI.empty();Dx(r,(function(e,r){var u=eO(t,e,n);r=ui(r);var s=i.oc(u);if(r instanceof UD)a.push(u);else{var c=QD(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Ux(a);return new DD(o,u,i.fieldTransforms)}function GD(e,t,n,r,i,a){var o=e.lc(1,t,n),u=[$D(t,r,n)],s=[i];if(a.length%2!=0)throw new px(dx.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push($D(t,a[c])),s.push(a[c+1]);for(var l=[],h=wI.empty(),f=u.length-1;f>=0;--f)if(!nO(l,u[f])){var d=u[f],p=s[f];p=ui(p);var v=o.oc(d);if(p instanceof UD)l.push(d);else{var y=QD(p,v);null!=y&&(l.push(d),h.set(d,y))}}var m=new Ux(l);return new DD(h,m,o.fieldTransforms)}function HD(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return QD(n,e.lc(r?4:3,t))}function QD(e,t){if(XD(e=ui(e)))return JD("Unsupported field value:",t,e),YD(e,t);if(e instanceof ND)return function(e,t){if(!OD(t.ec))throw t.ac("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ac("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=vr(e);try{for(a.s();!(n=a.n()).done;){var o=QD(n.value,t.uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ui(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return EE(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Ax.fromDate(e);return{timestampValue:NS(t.M,n)}}if(e instanceof Ax){var r=new Ax(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:NS(t.M,r)}}if(e instanceof AD)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof CD)return{bytesValue:AS(t.M,e._byteString)};if(e instanceof sD){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ac("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:DS(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac("Unsupported field value: ".concat(nD(e)))}(e,t)}function YD(e,t){var n={};return Ox(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Dx(e,(function(e,r){var i=QD(r,t.sc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function XD(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ax||e instanceof AD||e instanceof CD||e instanceof sD||e instanceof ND)}function JD(e,t,n){if(!XD(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=nD(n);throw"an object"===r?t.ac(e+" a custom object"):t.ac(e+" "+r)}}function $D(e,t,n){if((t=ui(t))instanceof TD)return t._internalPath;if("string"==typeof t)return eO(e,t);throw tO("Field path arguments must be of type string or ",e,!1,void 0,n)}var ZD=new RegExp("[~\\*/\\[\\]]");function eO(e,t,n){if(t.search(ZD)>=0)throw tO("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return yr(TD,N(t.split(".")))._internalPath}catch(r){throw tO("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function tO(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new px(dx.INVALID_ARGUMENT,u+e+s)}function nO(e,t){return e.some((function(e){return e.isEqual(t)}))}var rO=function(){function e(t,n,r,i,a){A(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return R(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new sD(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new iO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(aO("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),iO=function(e){O(n,e);var t=V(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"data",value:function(){return Ch(L(n.prototype),"data",this).call(this)}}]),n}(rO);function aO(e,t){return"string"==typeof t?eO(e,t):t instanceof TD?t._internalPath:t._delegate._internalPath}var oO=function(){function e(t,n){A(this,e),this.hasPendingWrites=t,this.fromCache=n}return R(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),uO=function(e){O(n,e);var t=V(n);function n(e,r,i,a,o,u){var s;return A(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return R(n,[{key:"exists",value:function(){return Ch(L(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new sO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(aO("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(rO),sO=function(e){O(n,e);var t=V(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ch(L(n.prototype),"data",this).call(this,e)}}]),n}(uO),cO=function(){function e(t,n,r,i){A(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new oO(i.hasPendingWrites,i.fromCache),this.query=r}return R(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new sO(n._firestore,n._userDataWriter,r.key,r,new oO(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new px(dx.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new sO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new oO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new sO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new oO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:lO(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function lO(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lx()}}function hO(e,t){return e instanceof uO&&t instanceof uO?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof cO&&t instanceof cO&&e._firestore===t._firestore&&pD(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function fO(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new px(dx.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var dO=R((function e(){A(this,e)}));function pO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var vO=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this))._c=e,a.wc=r,a.mc=i,a.type="where",a}return R(n,[{key:"_apply",value:function(e){var t=FD(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new px(dx.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){SO(o,a);var s,c=[],l=vr(o);try{for(l.s();!(s=l.n()).done;){var h=s.value;c.push(EO(r,e,h))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=EO(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||SO(o,a),u=HD(n,"where",o,"in"===a||"not-in"===a);var f=HI.create(i,a,u);return function(e,t){if(t.S()){var n=hE(e);if(null!==n&&!n.isEqual(t.field))throw new px(dx.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=lE(e);null!==r&&TO(e,t.field,r)}var i=function(e,t){var n,r=vr(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new px(dx.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new px(dx.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new cD(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new uE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(dO);var yO=function(e){O(n,e);var t=V(n);function n(e,r){var i;return A(this,n),(i=t.call(this))._c=e,i.gc=r,i.type="orderBy",i}return R(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new px(dx.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new px(dx.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new rE(t,n);return function(e,t){if(null===lE(e)){var n=hE(e);null!==n&&TO(e,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new cD(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new uE(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(dO);var mO=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this)).type=e,a.yc=r,a.Ic=i,a}return R(n,[{key:"_apply",value:function(e){return new cD(e.firestore,e.converter,vE(e._query,this.yc,this.Ic))}}]),n}(dO);var gO=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return R(n,[{key:"_apply",value:function(e){var t=IO(e,this.type,this.Tc,this.Ec);return new cD(e.firestore,e.converter,function(e,t){return new uE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(dO);function kO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gO("startAt",t,!0)}function _O(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gO("startAfter",t,!1)}var wO=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return R(n,[{key:"_apply",value:function(e){var t=IO(e,this.type,this.Tc,this.Ec);return new cD(e.firestore,e.converter,function(e,t){return new uE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(dO);function bO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new wO("endBefore",t,!1)}function xO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new wO("endAt",t,!0)}function IO(e,t,n,r){if(n[0]=ui(n[0]),n[0]instanceof rO)return function(e,t,n,r,i){if(!r)throw new px(dx.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=vr(dE(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(cI(t,r.key));else{var c=r.data.field(s.field);if(Kx(c))throw new px(dx.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new px(dx.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){u.e(h)}finally{u.f()}return new nE(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=FD(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new px(dx.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new px(dx.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!fE(e)&&-1!==c.indexOf("/"))throw new px(dx.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Mx.fromString(c));if(!Zx.isDocumentKey(l))throw new px(dx.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new Zx(l);u.push(cI(t,h))}else{var f=HD(n,r,c);u.push(f)}}return new nE(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function EO(e,t,n){if("string"==typeof(n=ui(n))){if(""===n)throw new px(dx.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fE(t)&&-1!==n.indexOf("/"))throw new px(dx.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Mx.fromString(n));if(!Zx.isDocumentKey(r))throw new px(dx.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return cI(e,new Zx(r))}if(n instanceof sD)return cI(e,n._key);throw new px(dx.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(nD(n),"."))}function SO(e,t){if(!Array.isArray(e)||0===e.length)throw new px(dx.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new px(dx.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function TO(e,t,n){if(!n.isEqual(t))throw new px(dx.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var CO={maxAttempts:5},NO=function(){function e(){A(this,e)}return R(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(nI(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zx(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wx(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lx()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Dx(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new AD(zx(e.latitude),zx(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Gx(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Hx(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Bx(e);return new Ax(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Mx.fromString(e);hx(rT(n));var r=new Yx(n.get(1),n.get(3)),i=new Zx(n.popFirst(5));return r.isEqual(t)||ux("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function AO(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var PO=function(e){O(n,e);var t=V(n);function n(e){var r;return A(this,n),(r=t.call(this)).firestore=e,r}return R(n,[{key:"convertBytes",value:function(e){return new CD(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new sD(this.firestore,null,t)}}]),n}(NO),RO=function(){function e(t,n){A(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=FD(t)}return R(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=DO(e,this._firestore),i=AO(r.converter,t,n),a=jD(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,VE.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=DO(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ui(t))||t instanceof TD?GD(this._dataReader,"WriteBatch.update",i._key,t,n,o):KD(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,VE.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=DO(e,this._firestore);return this._mutations=this._mutations.concat(new tS(t._key,VE.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new px(dx.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function DO(e,t){if((e=ui(e)).firestore!==t)throw new px(dx.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var OO=function(e){O(n,e);var t=V(n);function n(e){var r;return A(this,n),(r=t.call(this)).firestore=e,r}return R(n,[{key:"convertBytes",value:function(e){return new CD(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new sD(this.firestore,null,t)}}]),n}(NO);function LO(e){e=rD(e,sD);var t=rD(e.firestore,gD),n=kD(t),r=new OO(t);return function(e,t){var n=new vx;return e.asyncQueue.enqueueAndForget(pr(fr().mark((function r(){return fr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=pr(fr().mark((function e(t,n,r){var i,a;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=fx(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.fi.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new px(dx.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=aP(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,WR(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new uO(t,r,e._key,n,new oO(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function MO(e){e=rD(e,cD);var t=rD(e.firestore,gD),n=kD(t),r=new OO(t);return function(e,t){var n=new vx;return e.asyncQueue.enqueueAndForget(pr(fr().mark((function r(){return fr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=pr(fr().mark((function e(t,n,r){var i,a,o,u,s;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,TN(t,n,!0);case 3:i=e.sent,a=new EP(n,i._i),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=aP(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,WR(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new cO(t,r,e,n)}))}function FO(e,t,n){e=rD(e,sD);var r=rD(e.firestore,gD),i=AO(e.converter,t,n);return qO(r,[jD(FD(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,VE.none())])}function jO(e,t,n){e=rD(e,sD);for(var r=rD(e.firestore,gD),i=FD(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return qO(r,[("string"==typeof(t=ui(t))||t instanceof TD?GD(i,"updateDoc",e._key,t,n,o):KD(i,"updateDoc",e._key,t)).toMutation(e._key,VE.exists(!0))])}function UO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ui(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||yD(n[s])||(u=n[s],s++);var c,l,h,f={includeMetadataChanges:u.includeMetadataChanges};if(yD(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof sD)l=rD(e.firestore,gD),h=cE(e._key.path),c={next:function(t){n[s]&&n[s](BO(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=rD(e,cD);l=rD(p.firestore,gD),h=p._query;var v=new OO(l);c={next:function(e){n[s]&&n[s](new cO(l,v,p,e))},error:n[s+1],complete:n[s+2]},fO(e._query)}return function(e,t,n,r){var i=new AR(r),a=new gP(t,i,n);return e.asyncQueue.enqueueAndForget(pr(fr().mark((function t(){return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=hP,t.next=3,HR(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Aa(),e.asyncQueue.enqueueAndForget(pr(fr().mark((function t(){return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=dP,t.next=3,HR(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(kD(l),h,f,c)}function VO(e,t){return function(e,t){var n=new AR(t);return e.asyncQueue.enqueueAndForget(pr(fr().mark((function t(){return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){fx(e).bu.add(t),t.next()},t.next=3,HR(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Aa(),e.asyncQueue.enqueueAndForget(pr(fr().mark((function t(){return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){fx(e).bu.delete(t)},t.next=3,HR(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(kD(e=rD(e,gD)),yD(t)?t:{next:t})}function qO(e,t){return function(e,t){var n=new vx;return e.asyncQueue.enqueueAndForget(pr(fr().mark((function r(){return fr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=LP,r.next=3,GR(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(kD(e),t)}function BO(e,t,n){var r=n.docs.get(t._key),i=new OO(e);return new uO(e,i,t._key,r,new oO(n.hasPendingWrites,n.fromCache),t.converter)}var zO=function(e){O(n,e);var t=V(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e,r))._firestore=e,i}return R(n,[{key:"get",value:function(e){var t=this,r=DO(e,this._firestore),i=new OO(this._firestore);return Ch(L(n.prototype),"get",this).call(this,e).then((function(e){return new uO(t._firestore,i,r._key,e._document,new oO(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){A(this,e),this._firestore=t,this._transaction=n,this._dataReader=FD(t)}return R(e,[{key:"get",value:function(e){var t=this,n=DO(e,this._firestore),r=new PO(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return lx();var i=e[0];if(i.isFoundDocument())return new rO(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new rO(t._firestore,r,n._key,null,n.converter);throw lx()}))}},{key:"set",value:function(e,t,n){var r=DO(e,this._firestore),i=AO(r.converter,t,n),a=jD(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=DO(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ui(t))||t instanceof TD?GD(this._dataReader,"Transaction.update",i._key,t,n,o):KD(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=DO(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function WO(e,t,n){e=rD(e,gD);var r=Object.assign(Object.assign({},CO),n);return function(e){if(e.maxAttempts<1)throw new px(dx.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new vx;return e.asyncQueue.enqueueAndForget(pr(fr().mark((function i(){var a;return fr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return qR(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new DR(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(kD(e),(function(n){return t(new zO(e,n))}),r)}function KO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new BD("arrayUnion",t)}function GO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new zD("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){rx=e}(ta),Qi(new si("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new gD(i,new kx(e.getProvider("auth-internal")),new xx(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),ua(tx,"3.4.9",e),ua(tx,"3.4.9","esm2017")}();function HO(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new px("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function QO(){if("undefined"===typeof Uint8Array)throw new px("unimplemented","Uint8Arrays are not available in this environment.")}function YO(){if("undefined"==typeof atob)throw new px("unimplemented","Blobs are unavailable in Firestore in this environment.")}var XO=function(){function e(t){A(this,e),this._delegate=t}return R(e,[{key:"toBase64",value:function(){return YO(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return QO(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return YO(),new e(CD.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return QO(),new e(CD.fromUint8Array(t))}}]),e}();function JO(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=vr(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var $O=function(){function e(){A(this,e)}return R(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){SD(e=rD(e,gD));var n=kD(e),r=e._freezeSettings(),i=new CR;return wD(n,i,new SR(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){SD(e=rD(e,gD));var t=kD(e),n=e._freezeSettings(),r=new CR;return wD(t,r,new TR(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new px(dx.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new vx;return e._queue.enqueueAndForgetEvenWhileRestricted(pr(fr().mark((function n(){return fr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=pr(fr().mark((function e(t){var n;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(OT.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,OT.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(hN(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),ZO=function(){function e(t,n,r){var i=this;A(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Yx||(this._appCompat=t)}return R(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||sx("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};uD(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return bD(this._delegate)}},{key:"disableNetwork",value:function(){return xD(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&ZR("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new vx;return e.asyncQueue.enqueueAndForget(pr(fr().mark((function n(){return fr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=GP,n.next=3,GR(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(kD(e=rD(e,gD)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return VO(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new px("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new dL(this,hD(this._delegate,e))}catch(t){throw aL(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new iL(this,fD(this._delegate,e))}catch(t){throw aL(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new lL(this,function(e,t){if(e=rD(e,oD),$R("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new px(dx.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new cD(e,null,function(e){return new uE(Mx.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw aL(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return WO(this._delegate,(function(n){return e(new tL(t,n))}))}},{key:"batch",value:function(){var e=this;return kD(this._delegate),new nL(new RO(this._delegate,(function(t){return qO(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return ID(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return ED(this._delegate,e).then((function(e){return e?new lL(t,e):null}))}}]),e}(),eL=function(e){O(n,e);var t=V(n);function n(e){var r;return A(this,n),(r=t.call(this)).firestore=e,r}return R(n,[{key:"convertBytes",value:function(e){return new XO(new CD(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return iL.forKey(t,this.firestore,null)}}]),n}(NO);var tL=function(){function e(t,n){A(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new eL(t)}return R(e,[{key:"get",value:function(e){var t=this,n=pL(e);return this._delegate.get(n).then((function(e){return new sL(t._firestore,new uO(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=pL(e);return n?(HO("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=pL(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=pL(e);return this._delegate.delete(t),this}}]),e}(),nL=function(){function e(t){A(this,e),this._delegate=t}return R(e,[{key:"set",value:function(e,t,n){var r=pL(e);return n?(HO("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=pL(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=pL(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),rL=function(){function e(t,n,r){A(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return R(e,[{key:"fromFirestore",value:function(e,t){var n=new sO(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new cL(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new eL(t),n),i.set(n,a)),a}}]),e}();rL.INSTANCES=new WeakMap;var iL=function(){function e(t,n){A(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new eL(t)}return R(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new dL(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new dL(this.firestore,hD(this._delegate,e))}catch(t){throw aL(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ui(e))instanceof sD&&dD(this._delegate,e)}},{key:"set",value:function(e,t){t=HO("DocumentReference.set",t);try{return t?FO(this._delegate,e,t):FO(this._delegate,e)}catch(n){throw aL(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?jO(this._delegate,e):jO.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw aL(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return qO(rD(e.firestore,gD),[new tS(e._key,VE.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=oL(n),a=uL(n,(function(t){return new sL(e.firestore,new uO(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return UO(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?LO(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=rD(e,sD);var t=rD(e.firestore,gD);return YR(kD(t),e._key,{source:"server"}).then((function(n){return BO(t,e,n)}))}(this._delegate):function(e){e=rD(e,sD);var t=rD(e.firestore,gD);return YR(kD(t),e._key).then((function(n){return BO(t,e,n)}))}(this._delegate),t.then((function(e){return new sL(n.firestore,new uO(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(rL.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new px("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new sD(n._delegate,r,new Zx(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new sD(n._delegate,r,t))}}]),e}();function aL(e,t,n){return e.message=e.message.replace(t,n),e}function oL(e){var t,n=vr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!JO(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function uL(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=JO(e[0])?e[0]:JO(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var sL=function(){function e(t,n){A(this,e),this._firestore=t,this._delegate=n}return R(e,[{key:"ref",get:function(){return new iL(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return hO(this._delegate,e._delegate)}}]),e}(),cL=function(e){O(n,e);var t=V(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||lx()}(void 0!==t),t}}]),n}(sL),lL=function(){function e(t,n){A(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new eL(t)}return R(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,pO(this._delegate,function(e,t,n){var r=t,i=aO("where",e);return new vO(i,r,n)}(t,n,r)))}catch(i){throw aL(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,pO(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=aO("orderBy",e);return new yO(n,t)}(t,n)))}catch(r){throw aL(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,pO(this._delegate,function(e){return iD("limit",e),new mO("limit",e,"F")}(t)))}catch(n){throw aL(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,pO(this._delegate,function(e){return iD("limitToLast",e),new mO("limitToLast",e,"L")}(t)))}catch(n){throw aL(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,pO(this._delegate,kO.apply(void 0,arguments)))}catch(t){throw aL(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,pO(this._delegate,_O.apply(void 0,arguments)))}catch(t){throw aL(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,pO(this._delegate,bO.apply(void 0,arguments)))}catch(t){throw aL(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,pO(this._delegate,xO.apply(void 0,arguments)))}catch(t){throw aL(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return pD(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?MO(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=rD(e,cD);var t=rD(e.firestore,gD),n=kD(t),r=new OO(t);return XR(n,e._query,{source:"server"}).then((function(n){return new cO(t,r,e,n)}))}(this._delegate):function(e){e=rD(e,cD);var t=rD(e.firestore,gD),n=kD(t),r=new OO(t);return fO(e._query),XR(n,e._query).then((function(n){return new cO(t,r,e,n)}))}(this._delegate),t.then((function(e){return new fL(n.firestore,new cO(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=oL(n),a=uL(n,(function(t){return new fL(e.firestore,new cO(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return UO(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(rL.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),hL=function(){function e(t,n){A(this,e),this._firestore=t,this._delegate=n}return R(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new cL(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),fL=function(){function e(t,n){A(this,e),this._firestore=t,this._delegate=n}return R(e,[{key:"query",get:function(){return new lL(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new cL(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new hL(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new cL(n._firestore,r))}))}},{key:"isEqual",value:function(e){return hO(this._delegate,e._delegate)}}]),e}(),dL=function(e){O(n,e);var t=V(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return R(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new iL(this.firestore,e):null}},{key:"doc",value:function(e){try{return new iL(this.firestore,void 0===e?fD(this._delegate):fD(this._delegate,e))}catch(t){throw aL(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=rD(e.firestore,gD),r=fD(e),i=AO(e.converter,t);return qO(n,[jD(FD(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,VE.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new iL(t.firestore,e)}))}},{key:"isEqual",value:function(e){return dD(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(rL.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(lL);function pL(e){return rD(e,sD)}var vL=function(){function e(){A(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=yr(TD,n)}return R(e,[{key:"isEqual",value:function(e){return(e=ui(e))instanceof TD&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(jx.keyField().canonicalString())}}]),e}(),yL=function(){function e(t){A(this,e),this._delegate=t}return R(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new qD("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new UD("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=KO.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=GO.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new WD("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),mL={Firestore:ZO,GeoPoint:AD,Timestamp:Ax,Blob:XO,Transaction:tL,WriteBatch:nL,DocumentReference:iL,DocumentSnapshot:sL,Query:lL,QueryDocumentSnapshot:cL,QuerySnapshot:fL,CollectionReference:dL,FieldPath:vL,FieldValue:yL,setLogLevel:function(e){!function(e){ix.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new si("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},mL)))}(e,(function(e,t){return new ZO(e,t,new $O)})),e.registerVersion("@firebase/firestore-compat","0.1.18")}(Sh);var gL=Sh.initializeApp({apiKey:"AIzaSyCmdbkjtH47HqFKrnnCg0nmuSch9bmoXp0",authDomain:"yes-wedding-29451.firebaseapp.com",databaseURL:"https://yes-wedding-29451-default-rtdb.firebaseio.com/",projectId:"yes-wedding-29451",storageBucket:"yes-wedding-29451.appspot.com",messagingSenderId:"1010300792442",appId:"1:1010300792442:web:d6858688466e8b838955c3"}),kL=function(e){return(0,v.jsxs)(T,{onClose:e.onClose,children:[(0,v.jsx)("button",{children:"\ud050\uc54c"}),(0,v.jsx)("button",{children:"\ub9c1\ud06c"}),(0,v.jsx)("button",{children:"\uce74\uce74\uc624"})]})},_L=function(e){var n=w((0,t.useState)(!1),2),r=n[0],i=n[1];return(0,v.jsxs)("section",{id:"footer",children:[(0,v.jsx)("button",{onClick:function(){i(!0)},children:"\uacf5\uc720"}),r&&(0,v.jsx)(kL,{onClose:function(){i(!1)}})]})};var wL=function(){return console.log("App"),(0,v.jsxs)("div",{className:"App",children:[(0,v.jsx)(y,{}),(0,v.jsx)(hr,{}),(0,v.jsx)(fh,{}),(0,v.jsx)(rh,{firebase:gL}),(0,v.jsx)(kh,{}),(0,v.jsx)(_L,{})]})};r.createRoot(document.getElementById("root")).render((0,v.jsx)(t.StrictMode,{children:(0,v.jsx)(wL,{})}))}()}();
//# sourceMappingURL=main.97958fdd.js.map