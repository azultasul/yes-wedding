/*! For license information please see main.6209969c.js.LICENSE.txt */
!function(){var e={998:function(e,t,n){"use strict";var r=n(458),i={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,a,o,s,u,c,l=!1;t||(t={}),n=t.debug||!1;try{if(o=r(),s=document.createRange(),u=document.getSelection(),(c=document.createElement("span")).textContent=e,c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),"undefined"===typeof r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var a=i[t.format]||i.default;window.clipboardData.setData(a,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(c),s.selectNodeContents(c),u.addRange(s),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");l=!0}catch(h){n&&console.error("unable to copy using execCommand: ",h),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),l=!0}catch(h){n&&console.error("unable to copy using clipboardData: ",h),n&&console.error("falling back to prompt"),a=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(a,e)}}finally{u&&("function"==typeof u.removeRange?u.removeRange(s):u.removeAllRanges()),c&&document.body.removeChild(c),o()}return l}},568:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.CopyToClipboard=void 0;var i=s(n(791)),a=s(n(998)),o=["text","onCopy","options","children"];function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(u,e);var t,n,r,s=p(u);function u(){var e;h(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(y(e=s.call.apply(s,[this].concat(n))),"onClick",(function(t){var n=e.props,r=n.text,o=n.onCopy,s=n.children,u=n.options,c=i.default.Children.only(s),l=(0,a.default)(r,u);o&&o(r,l),c&&c.props&&"function"===typeof c.props.onClick&&c.props.onClick(t)})),e}return t=u,(n=[{key:"render",value:function(){var e=this.props,t=(e.text,e.onCopy,e.options,e.children),n=l(e,o),r=i.default.Children.only(t);return i.default.cloneElement(r,c(c({},n),{},{onClick:this.onClick}))}}])&&f(t.prototype,n),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(i.default.PureComponent);t.CopyToClipboard=k,g(k,"defaultProps",{onCopy:void 0,options:void 0})},29:function(e,t,n){"use strict";var r=n(568).CopyToClipboard;r.CopyToClipboard=r,e.exports=r},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function B(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case b:return"Portal";case E:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function Z(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,xe=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),be(e.stateNode,e.type,t))}}function Se(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==xe||null!==Ie)&&(Ae(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,s,u){Me=!1,Fe=null,Le.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(qe(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,Xe=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,bt,xt,It,Et,St=!1,Tt=[],Ct=null,At=null,Nt=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){St=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==At&&jt(At)&&(At=null),null!==Nt&&jt(Nt)&&(Nt=null),Pt.forEach(Ut),Rt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),null!==Nt&&Bt(Nt,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var zt=_.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,zt.transition=a}}function Gt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,zt.transition=a}}function Ht(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=F({},cn,{view:0,detail:0}),fn=an(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},hn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),_n=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return In}var Sn=F({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Pn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Kn(e,t,n,r){Se(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){jr(e,0)}function Yn(e){if(H(_i(e)))return e}function Jn(e,t){if("change"===e)return t}var Xn=!1;if(l){var Zn;if(l){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Xn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Kn(t,Hn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Gr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Ir={};function Er(e){if(xr[e])return xr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Ar=Er("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),u(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Sr,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Jt(t)){case 1:var i=Kt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var s=Nr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":c="focus",u=yn;break;case"focusout":c="blur",u=yn;break;case"beforeblur":case"afterblur":u=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=An;break;case Sr:case Tr:case Cr:u=mn;break;case Ar:u=Nn;break;case"scroll":u=fn;break;case"wheel":u=Rn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Re(p,f))&&l.push(Kr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(h=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:_i(u),d=null==c?s:_i(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,gi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Hr(d))p++;for(d=0,v=f;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)f=Hr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Hr(l),f=Hr(f)}l=null}else l=null;null!==u&&Qr(o,s,u,l,!1),null!==c&&null!==h&&Qr(o,h,c,l,!0)}if("select"===(u=(s=r?_i(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Jn;else if(Wn(s))if(Xn)y=or;else{y=ir;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=ar);switch(y&&(y=y(e,r))?Kn(o,y,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?_i(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,_r(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Zt="value"in(Xt=i)?Xt.value:Xt.textContent,qn=!0)),0<(m=Gr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),$t=Zt=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}jr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Re(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Re(n,a))&&o.unshift(Kr(n,u,s)):i||null!=(u=Re(n,a))&&o.push(Kr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function Zr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,yi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var bi=[],xi=-1;function Ii(e){return{current:e}}function Ei(e){0>xi||(e.current=bi[xi],bi[xi]=null,xi--)}function Si(e,t){xi++,bi[xi]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ai=Ii(!1),Ni=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ei(Ai),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Ci.current,Si(Ci,e),Si(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(Ci),Si(Ci,e)):Ei(Ai),Si(Ai,n)}var ji=null,Ui=!1,Vi=!1;function Bi(e){null===ji?ji=[e]:ji.push(e)}function qi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=kt;try{var n=ji;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),He($e,qi),i}finally{kt=t,Vi=!1}}return null}var zi=_.ReactCurrentBatchConfig;function Wi(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ki=Ii(null),Gi=null,Hi=null,Qi=null;function Yi(){Qi=Hi=Gi=null}function Ji(e){var t=Ki.current;Ei(Ki),e._currentValue=t}function Xi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Zi(e,t){Gi=e,Qi=Hi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function $i(e){var t=e._currentValue;if(Qi!==e)if(e={context:e,memoizedValue:t,next:null},null===Hi){if(null===Gi)throw Error(a(308));Hi=e,Gi.dependencies={lanes:0,firstContext:e}}else Hi=Hi.next=e;return t}var ea=null,ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function aa(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tc(e)?(null===(e=n.interleaved)?(t.next=t,null===ea?ea=[n]:ea.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function sa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ua(e,t,n,r){var i=e.updateQueue;ta=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,l=c=u=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:ta=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=h):l=l.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Du|=o,e.lanes=o,e.memoizedState=h}}function ca(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var la=(new r.Component).refs;function ha(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fa={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Xu(),i=Zu(e),a=ia(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=$u(e,i,r))&&oa(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Xu(),i=Zu(e),a=ia(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=$u(e,i,r))&&oa(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xu(),r=Zu(e),i=ia(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),aa(e,i),null!==(t=$u(e,r,n))&&oa(t,e,r)}};function da(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function pa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=$i(a):(i=Ri(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=fa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function va(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fa.enqueueReplaceState(t,t.state,null)}function ya(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=la,na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=$i(a):(a=Ri(t)?Ni:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ha(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&fa.enqueueReplaceState(i,i.state,null),ua(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var ma=[],ga=0,ka=null,_a=0,wa=[],ba=0,xa=null,Ia=1,Ea="";function Sa(e,t){ma[ga++]=_a,ma[ga++]=ka,ka=e,_a=t}function Ta(e,t,n){wa[ba++]=Ia,wa[ba++]=Ea,wa[ba++]=xa,xa=e;var r=Ia;e=Ea;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ia=1<<32-ot(t)+i|n<<i|r,Ea=a+e}else Ia=1<<a|n<<i|r,Ea=e}function Ca(e){null!==e.return&&(Sa(e,1),Ta(e,1,0))}function Aa(e){for(;e===ka;)ka=ma[--ga],ma[ga]=null,_a=ma[--ga],ma[ga]=null;for(;e===xa;)xa=wa[--ba],wa[ba]=null,Ea=wa[--ba],wa[ba]=null,Ia=wa[--ba],wa[ba]=null}var Na=null,Pa=null,Ra=!1,Da=null;function Oa(e,t){var n=Nc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function La(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Na=e,Pa=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Na=e,Pa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==xa?{id:Ia,overflow:Ea}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Na=e,Pa=null,!0);default:return!1}}function Ma(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Fa(e){if(Ra){var t=Pa;if(t){var n=t;if(!La(e,t)){if(Ma(e))throw Error(a(418));t=ci(n.nextSibling);var r=Na;t&&La(e,t)?Oa(r,n):(e.flags=-4097&e.flags|2,Ra=!1,Na=e)}}else{if(Ma(e))throw Error(a(418));e.flags=-4097&e.flags|2,Ra=!1,Na=e}}}function ja(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Na=e}function Ua(e){if(e!==Na)return!1;if(!Ra)return ja(e),Ra=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=Pa)){if(Ma(e)){for(e=Pa;e;)e=ci(e.nextSibling);throw Error(a(418))}for(;t;)Oa(e,t),t=ci(t.nextSibling)}if(ja(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Pa=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Pa=null}}else Pa=Na?ci(e.stateNode.nextSibling):null;return!0}function Va(){Pa=Na=null,Ra=!1}function Ba(e){null===Da?Da=[e]:Da.push(e)}function qa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===la&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function za(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wa(e){return(0,e._init)(e._payload)}function Ka(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Wa(a)===t.type)?((r=i(t,n.props)).ref=qa(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=qa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=qa(e,null,t),n.return=e,n;case b:return(t=Fc(t,e.mode,n)).return=e,t;case R:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Oc(t,e.mode,n,null)).return=e,t;za(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case b:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);za(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);za(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,h=a,v=a=0,y=null;null!==h&&v<s.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,s[v],u);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,h=y}if(v===s.length)return n(i,h),Ra&&Sa(i,v),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return Ra&&Sa(i,v),c}for(h=r(i,h);v<s.length;v++)null!==(y=p(h,i,v,s[v],u))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),Ra&&Sa(i,v),c}function y(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,v=s,y=s=0,m=null,g=u.next();null!==v&&!g.done;y++,g=u.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,y),null===h?l=k:h.sibling=k,h=k,v=m}if(g.done)return n(i,v),Ra&&Sa(i,y),l;if(null===v){for(;!g.done;y++,g=u.next())null!==(g=f(i,g.value,c))&&(s=o(g,s,y),null===h?l=g:h.sibling=g,h=g);return Ra&&Sa(i,y),l}for(v=r(i,v);!g.done;y++,g=u.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),s=o(g,s,y),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),Ra&&Sa(i,y),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Wa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=qa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Oc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Dc(o.type,o.key,o.props,null,r.mode,u)).ref=qa(r,a,o),u.return=r,r=u)}return s(r);case b:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,u)).return=r,r=a}return s(r);case R:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return y(r,a,o,u);za(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Ga=Ka(!0),Ha=Ka(!1),Qa={},Ya=Ii(Qa),Ja=Ii(Qa),Xa=Ii(Qa);function Za(e){if(e===Qa)throw Error(a(174));return e}function $a(e,t){switch(Si(Xa,t),Si(Ja,e),Si(Ya,Qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Ya),Si(Ya,t)}function eo(){Ei(Ya),Ei(Ja),Ei(Xa)}function to(e){Za(Xa.current);var t=Za(Ya.current),n=ue(t,e.type);t!==n&&(Si(Ja,e),Si(Ya,n))}function no(e){Ja.current===e&&(Ei(Ya),Ei(Ja))}var ro=Ii(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var so=_.ReactCurrentDispatcher,uo=_.ReactCurrentBatchConfig,co=0,lo=null,ho=null,fo=null,po=!1,vo=!1,yo=0,mo=0;function go(){throw Error(a(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function _o(e,t,n,r,i,o){if(co=o,lo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=null===e||null===e.memoizedState?rs:is,e=n(r,i),vo){o=0;do{if(vo=!1,yo=0,25<=o)throw Error(a(301));o+=1,fo=ho=null,t.updateQueue=null,so.current=as,e=n(r,i)}while(vo)}if(so.current=ns,t=null!==ho&&null!==ho.next,co=0,fo=ho=lo=null,po=!1,t)throw Error(a(300));return e}function wo(){var e=0!==yo;return yo=0,e}function bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===fo?lo.memoizedState=fo=e:fo=fo.next=e,fo}function xo(){if(null===ho){var e=lo.alternate;e=null!==e?e.memoizedState:null}else e=ho.next;var t=null===fo?lo.memoizedState:fo.next;if(null!==t)fo=t,ho=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ho=e).memoizedState,baseState:ho.baseState,baseQueue:ho.baseQueue,queue:ho.queue,next:null},null===fo?lo.memoizedState=fo=e:fo=fo.next=e}return fo}function Io(e,t){return"function"===typeof t?t(e):t}function Eo(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ho,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var h=l.lane;if((co&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,lo.lanes|=h,Du|=h}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(ws=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,lo.lanes|=o,Du|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(ws=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function To(){}function Co(e,t){var n=lo,r=xo(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,ws=!0),r=r.queue,Uo(Po.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==fo&&1&fo.memoizedState.tag){if(n.flags|=2048,Oo(9,No.bind(null,n,r,i,t),void 0,null),null===Su)throw Error(a(349));0!==(30&co)||Ao(n,t,i)}return i}function Ao(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function No(e,t,n,r){t.value=n,t.getSnapshot=r,Ro(t)&&$u(e,1,-1)}function Po(e,t,n){return n((function(){Ro(t)&&$u(e,1,-1)}))}function Ro(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Do(e){var t=bo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=Xo.bind(null,lo,e),[t.memoizedState,e]}function Oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Lo(){return xo().memoizedState}function Mo(e,t,n,r){var i=bo();lo.flags|=e,i.memoizedState=Oo(1|t,n,void 0,void 0===r?null:r)}function Fo(e,t,n,r){var i=xo();r=void 0===r?null:r;var a=void 0;if(null!==ho){var o=ho.memoizedState;if(a=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=Oo(t,n,a,r))}lo.flags|=e,i.memoizedState=Oo(1|t,n,a,r)}function jo(e,t){return Mo(8390656,8,e,t)}function Uo(e,t){return Fo(2048,8,e,t)}function Vo(e,t){return Fo(4,2,e,t)}function Bo(e,t){return Fo(4,4,e,t)}function qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4,4,qo.bind(null,t,e),n)}function Wo(){}function Ko(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Go(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),lo.lanes|=n,Du|=n,e.baseState=!0),t)}function Qo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=uo.transition;uo.transition={};try{e(!1),t()}finally{kt=n,uo.transition=r}}function Yo(){return xo().memoizedState}function Jo(e,t,n){var r=Zu(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zo(e)?$o(t,n):(es(e,t,n),null!==(e=$u(e,r,n=Xu()))&&ts(e,t,r))}function Xo(e,t,n){var r=Zu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zo(e))$o(t,i);else{es(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o))return}catch(u){}null!==(e=$u(e,r,n=Xu()))&&ts(e,t,r)}}function Zo(e){var t=e.alternate;return e===lo||null!==t&&t===lo}function $o(e,t){vo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function es(e,t,n){tc(e)?(null===(e=t.interleaved)?(n.next=n,null===ea?ea=[t]:ea.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function ts(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ns={readContext:$i,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},rs={readContext:$i,useCallback:function(e,t){return bo().memoizedState=[e,void 0===t?null:t],e},useContext:$i,useEffect:jo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4194308,4,qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mo(4,2,e,t)},useMemo:function(e,t){var n=bo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Jo.bind(null,lo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bo().memoizedState=e},useState:Do,useDebugValue:Wo,useDeferredValue:function(e){return bo().memoizedState=e},useTransition:function(){var e=Do(!1),t=e[0];return e=Qo.bind(null,e[1]),bo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lo,i=bo();if(Ra){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Su)throw Error(a(349));0!==(30&co)||Ao(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,jo(Po.bind(null,r,o,e),[e]),r.flags|=2048,Oo(9,No.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=bo(),t=Su.identifierPrefix;if(Ra){var n=Ea;t=":"+t+"R"+(n=(Ia&~(1<<32-ot(Ia)-1)).toString(32)+n),0<(n=yo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=mo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},is={readContext:$i,useCallback:Ko,useContext:$i,useEffect:Uo,useImperativeHandle:zo,useInsertionEffect:Vo,useLayoutEffect:Bo,useMemo:Go,useReducer:Eo,useRef:Lo,useState:function(){return Eo(Io)},useDebugValue:Wo,useDeferredValue:function(e){return Ho(xo(),ho.memoizedState,e)},useTransition:function(){return[Eo(Io)[0],xo().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:Yo,unstable_isNewReconciler:!1},as={readContext:$i,useCallback:Ko,useContext:$i,useEffect:Uo,useImperativeHandle:zo,useInsertionEffect:Vo,useLayoutEffect:Bo,useMemo:Go,useReducer:So,useRef:Lo,useState:function(){return So(Io)},useDebugValue:Wo,useDeferredValue:function(e){var t=xo();return null===ho?t.memoizedState=e:Ho(t,ho.memoizedState,e)},useTransition:function(){return[So(Io)[0],xo().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:Yo,unstable_isNewReconciler:!1};function os(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ss(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var us,cs,ls,hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bu||(Bu=!0,qu=r),ss(0,t)},n}function ds(e,t,n){(n=ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ss(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ss(0,t),"function"!==typeof r&&(null===zu?zu=new Set([this]):zu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ps(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ia(-1,1)).tag=2,aa(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function ms(e,t){if(!Ra)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ks(e,t,n){var r=t.pendingProps;switch(Aa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gs(t),null;case 1:case 17:return Ri(t.type)&&Di(),gs(t),null;case 3:return r=t.stateNode,eo(),Ei(Ai),Ei(Ci),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Da&&(ac(Da),Da=null))),gs(t),null;case 5:no(t);var i=Za(Xa.current);if(n=t.type,null!==e&&null!=t.stateNode)cs(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return gs(t),null}if(e=Za(Ya.current),Ua(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":G(r),$(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,us(e,t),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":G(e),$(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return gs(t),null;case 6:if(e&&null!=t.stateNode)ls(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Za(Xa.current),Za(Ya.current),Ua(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=Na))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return gs(t),null;case 13:if(Ei(ro),r=t.memoizedState,Ra&&null!==Pa&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Pa;r;)r=ci(r.nextSibling);return Va(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Ua(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[fi]=t}else Va(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return gs(t),null}return null!==Da&&(ac(Da),Da=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Ua(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Pu&&(Pu=3):pc())),null!==t.updateQueue&&(t.flags|=4),gs(t),null);case 4:return eo(),null===e&&qr(t.stateNode.containerInfo),gs(t),null;case 10:return Ji(t.type._context),gs(t),null;case 19:if(Ei(ro),null===(o=t.memoizedState))return gs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)ms(o,!1);else{if(0!==Pu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=io(e))){for(t.flags|=128,ms(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Uu&&(t.flags|=128,r=!0,ms(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ms(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!Ra)return gs(t),null}else 2*Xe()-o.renderingStartTime>Uu&&1073741824!==n&&(t.flags|=128,r=!0,ms(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=ro.current,Si(ro,r?1&n|2:1&n),t):(gs(t),null);case 22:case 23:return lc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Au)&&(gs(t),6&t.subtreeFlags&&(t.flags|=8192)):gs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}us=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},cs=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Za(Ya.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var _s=_.ReactCurrentOwner,ws=!1;function bs(e,t,n,r){t.child=null===e?Ha(t,null,n,r):Ga(t,e.child,n,r)}function xs(e,t,n,r,i){n=n.render;var a=t.ref;return Zi(t,i),r=_o(e,t,n,r,a,i),n=wo(),null===e||ws?(Ra&&n&&Ca(t),t.flags|=1,bs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Is(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Es(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(ws=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!==(131072&e.flags)&&(ws=!0)}}return Cs(e,t,n,r,i)}function Ss(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Nu,Au),Au|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Nu,Au),Au|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Nu,Au),Au|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Nu,Au),Au|=r;return bs(e,t,i,n),t.child}function Ts(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,n,r,i){var a=Ri(n)?Ni:Ci.current;return a=Pi(t,a),Zi(t,i),n=_o(e,t,n,r,a,i),r=wo(),null===e||ws?(Ra&&r&&Ca(t),t.flags|=1,bs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function As(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Zi(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pa(t,n,r),ya(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=$i(c):c=Pi(t,c=Ri(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&va(t,o,r,c),ta=!1;var f=t.memoizedState;o.state=f,ua(t,r,o,i),u=t.memoizedState,s!==r||f!==u||Ai.current||ta?("function"===typeof l&&(ha(t,n,l,r),u=t.memoizedState),(s=ta||da(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ra(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Wi(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=$i(u):u=Pi(t,u=Ri(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&va(t,o,r,u),ta=!1,f=t.memoizedState,o.state=f,ua(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Ai.current||ta?("function"===typeof d&&(ha(t,n,d,r),p=t.memoizedState),(c=ta||da(t,n,c,r,f,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,i)}function Ns(e,t,n,r,i,a){Ts(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ws(e,t,a);r=t.stateNode,_s.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ga(t,e.child,null,a),t.child=Ga(t,null,s,a)):bs(e,t,s,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),$a(e,t.containerInfo)}function Rs(e,t,n,r,i){return Va(),Ba(i),t.flags|=256,bs(e,t,n,r),t.child}var Ds={dehydrated:null,treeContext:null,retryLane:0};function Os(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ls(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Ms(e,t,n){var r,i=t.pendingProps,o=ro.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(ro,1&o),null===e)return Fa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=o):s=Lc(o,i,0,null),e=Oc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Os(n),t.memoizedState=Ds,e):Fs(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(u)return 256&t.flags?(t.flags&=-257,Vs(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,o=t.mode,i=Lc({mode:"visible",children:i.children},o,0,null),(s=Oc(s,o,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!==(1&t.mode)&&Ga(t,e.child,null,n),t.child.memoizedState=Os(n),t.memoizedState=Ds,s);if(0===(1&t.mode))t=Vs(e,t,n,null);else if("$!"===r.data)t=Vs(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),ws||i){if(null!==(i=Su)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(i=0!==(s&(i.suspendedLanes|n))?0:s)&&i!==o.retryLane&&(o.retryLane=i,$u(e,i,-1))}pc(),t=Vs(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Pa=ci(r.nextSibling),Na=t,Ra=!0,Da=null,null!==n&&(wa[ba++]=Ia,wa[ba++]=Ea,wa[ba++]=xa,Ia=n.id,Ea=n.overflow,xa=t),(t=Fs(t,t.pendingProps.children)).flags|=4096);return t}return s?(i=Us(e,t,i.children,i.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Os(n):Ls(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Ds,i):(n=js(e,t,i.children,n),t.memoizedState=null,n)}return s?(i=Us(e,t,i.children,i.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Os(n):Ls(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Ds,i):(n=js(e,t,i.children,n),t.memoizedState=null,n)}function Fs(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function js(e,t,n,r){var i=e.child;return e=i.sibling,n=Rc(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Us(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,s={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=Rc(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Rc(o,r):(r=Oc(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Vs(e,t,n,r){return null!==r&&Ba(r),Ga(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Xi(e.return,t,n)}function qs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bs(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qs(t,!0,n,null,a);break;case"together":qs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Du|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){switch(Aa(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ei(Ai),Ei(Ci),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ei(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Va()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(ro),null;case 4:return eo(),null;case 10:return Ji(t.type._context),null;case 22:case 23:return lc(),null;default:return null}}var Gs=!1,Hs=!1,Qs="function"===typeof WeakSet?WeakSet:Set,Ys=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function Xs(e,t,n){try{n()}catch(r){xc(e,t,r)}}var Zs=!1;function $s(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Xs(t,n,a)}i=i.next}while(i!==r)}}function eu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function tu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function nu(e){var t=e.alternate;null!==t&&(e.alternate=null,nu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ru(e){return 5===e.tag||3===e.tag||4===e.tag}function iu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ru(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function au(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(au(e,t,n),e=e.sibling;null!==e;)au(e,t,n),e=e.sibling}function ou(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ou(e,t,n),e=e.sibling;null!==e;)ou(e,t,n),e=e.sibling}var su=null,uu=!1;function cu(e,t,n){for(n=n.child;null!==n;)lu(e,t,n),n=n.sibling}function lu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Hs||Js(n,t);case 6:var r=su,i=uu;su=null,cu(e,t,n),uu=i,null!==(su=r)&&(uu?(e=su,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):su.removeChild(n.stateNode));break;case 18:null!==su&&(uu?(e=su,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),qt(e)):ui(su,n.stateNode));break;case 4:r=su,i=uu,su=n.stateNode.containerInfo,uu=!0,cu(e,t,n),su=r,uu=i;break;case 0:case 11:case 14:case 15:if(!Hs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&Xs(n,t,o),i=i.next}while(i!==r)}cu(e,t,n);break;case 1:if(!Hs&&(Js(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){xc(n,t,s)}cu(e,t,n);break;case 21:cu(e,t,n);break;case 22:1&n.mode?(Hs=(r=Hs)||null!==n.memoizedState,cu(e,t,n),Hs=r):cu(e,t,n);break;default:cu(e,t,n)}}function hu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qs),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function fu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:su=u.stateNode,uu=!1;break e;case 3:case 4:su=u.stateNode.containerInfo,uu=!0;break e}u=u.return}if(null===su)throw Error(a(160));lu(o,s,i),su=null,uu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){xc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)du(t,e),t=t.sibling}function du(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fu(t,e),pu(e),4&r){try{$s(3,e,e.return),eu(3,e)}catch(v){xc(e,e.return,v)}try{$s(5,e,e.return)}catch(v){xc(e,e.return,v)}}break;case 1:fu(t,e),pu(e),512&r&&null!==n&&Js(n,n.return);break;case 5:if(fu(t,e),pu(e),512&r&&null!==n&&Js(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(v){xc(e,e.return,v)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&X(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var h=c[s],f=c[s+1];"style"===h?ye(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(u){case"input":Z(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(v){xc(e,e.return,v)}}break;case 6:if(fu(t,e),pu(e),4&r){if(null===e.stateNode)throw Error(a(162));l=e.stateNode,h=e.memoizedProps;try{l.nodeValue=h}catch(v){xc(e,e.return,v)}}break;case 3:if(fu(t,e),pu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(v){xc(e,e.return,v)}break;case 4:default:fu(t,e),pu(e);break;case 13:fu(t,e),pu(e),8192&(l=e.child).flags&&null!==l.memoizedState&&(null===l.alternate||null===l.alternate.memoizedState)&&(ju=Xe()),4&r&&hu(e);break;case 22:if(l=null!==n&&null!==n.memoizedState,1&e.mode?(Hs=(h=Hs)||l,fu(t,e),Hs=h):fu(t,e),pu(e),8192&r){h=null!==e.memoizedState;e:for(f=null,d=e;;){if(5===d.tag){if(null===f){f=d;try{i=d.stateNode,h?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(v){xc(e,e.return,v)}}}else if(6===d.tag){if(null===f)try{d.stateNode.nodeValue=h?"":d.memoizedProps}catch(v){xc(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}if(h&&!l&&0!==(1&e.mode))for(Ys=e,e=e.child;null!==e;){for(l=Ys=e;null!==Ys;){switch(f=(h=Ys).child,h.tag){case 0:case 11:case 14:case 15:$s(4,h,h.return);break;case 1:if(Js(h,h.return),"function"===typeof(o=h.stateNode).componentWillUnmount){d=h,p=h.return;try{i=d,o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(v){xc(d,p,v)}}break;case 5:Js(h,h.return);break;case 22:if(null!==h.memoizedState){gu(l);continue}}null!==f?(f.return=h,Ys=f):gu(l)}e=e.sibling}}break;case 19:fu(t,e),pu(e),4&r&&hu(e);case 21:}}function pu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ru(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),ou(e,iu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;au(e,iu(e),o);break;default:throw Error(a(161))}}catch(s){xc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vu(e,t,n){Ys=e,yu(e,t,n)}function yu(e,t,n){for(var r=0!==(1&e.mode);null!==Ys;){var i=Ys,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Gs;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Hs;s=Gs;var c=Hs;if(Gs=o,(Hs=u)&&!c)for(Ys=i;null!==Ys;)u=(o=Ys).child,22===o.tag&&null!==o.memoizedState?ku(i):null!==u?(u.return=o,Ys=u):ku(i);for(;null!==a;)Ys=a,yu(a,t,n),a=a.sibling;Ys=i,Gs=s,Hs=c}mu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ys=a):mu(e)}}function mu(e){for(;null!==Ys;){var t=Ys;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Hs||eu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Hs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Wi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ca(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ca(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&qt(f)}}}break;default:throw Error(a(163))}Hs||512&t.flags&&tu(t)}catch(d){xc(t,t.return,d)}}if(t===e){Ys=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ys=n;break}Ys=t.return}}function gu(e){for(;null!==Ys;){var t=Ys;if(t===e){Ys=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ys=n;break}Ys=t.return}}function ku(e){for(;null!==Ys;){var t=Ys;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{eu(4,t)}catch(u){xc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){xc(t,i,u)}}var a=t.return;try{tu(t)}catch(u){xc(t,a,u)}break;case 5:var o=t.return;try{tu(t)}catch(u){xc(t,o,u)}}}catch(u){xc(t,t.return,u)}if(t===e){Ys=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ys=s;break}Ys=t.return}}var _u,wu=Math.ceil,bu=_.ReactCurrentDispatcher,xu=_.ReactCurrentOwner,Iu=_.ReactCurrentBatchConfig,Eu=0,Su=null,Tu=null,Cu=0,Au=0,Nu=Ii(0),Pu=0,Ru=null,Du=0,Ou=0,Lu=0,Mu=null,Fu=null,ju=0,Uu=1/0,Vu=null,Bu=!1,qu=null,zu=null,Wu=!1,Ku=null,Gu=0,Hu=0,Qu=null,Yu=-1,Ju=0;function Xu(){return 0!==(6&Eu)?Xe():-1!==Yu?Yu:Yu=Xe()}function Zu(e){return 0===(1&e.mode)?1:0!==(2&Eu)&&0!==Cu?Cu&-Cu:null!==zi.transition?(0===Ju&&(Ju=vt()),Ju):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function $u(e,t,n){if(50<Hu)throw Hu=0,Qu=null,Error(a(185));var r=ec(e,t);return null===r?null:(mt(r,t,n),0!==(2&Eu)&&r===Su||(r===Su&&(0===(2&Eu)&&(Ou|=t),4===Pu&&oc(r,Cu)),nc(r,n),1===t&&0===Eu&&0===(1&e.mode)&&(Uu=Xe()+500,Ui&&qi())),r)}function ec(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tc(e){return(null!==Su||null!==ea)&&0!==(1&e.mode)&&0===(2&Eu)}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Su?Cu:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(sc.bind(null,e)):Bi(sc.bind(null,e)),oi((function(){0===Eu&&qi()})),n=null;else{switch(_t(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Yu=-1,Ju=0,0!==(6&Eu))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ft(e,e===Su?Cu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Eu;Eu|=2;var o=dc();for(Su===e&&Cu===t||(Vu=null,Uu=Xe()+500,hc(e,t));;)try{mc();break}catch(u){fc(e,u)}Yi(),bu.current=o,Eu=i,null!==Tu?t=0:(Su=null,Cu=0,t=Pu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ic(e,i))),1===t)throw n=Ru,hc(e,0),oc(e,r),nc(e,Xe()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ic(e,o))),1===t))throw n=Ru,hc(e,0),oc(e,r),nc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,Fu,Vu);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=ju+500-Xe())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Xu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,Fu,Vu),t);break}_c(e,Fu,Vu);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wu(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,Fu,Vu),r);break}_c(e,Fu,Vu);break;default:throw Error(a(329))}}}return nc(e,Xe()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Mu;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Fu,Fu=n,null!==t&&ac(t)),e}function ac(e){null===Fu?Fu=e:Fu.push.apply(Fu,e)}function oc(e,t){for(t&=~Lu,t&=~Ou,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Eu))throw Error(a(327));wc();var t=ft(e,0);if(0===(1&t))return nc(e,Xe()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Ru,hc(e,0),oc(e,t),nc(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Fu,Vu),nc(e,Xe()),null}function uc(e,t){var n=Eu;Eu|=1;try{return e(t)}finally{0===(Eu=n)&&(Uu=Xe()+500,Ui&&qi())}}function cc(e){null!==Ku&&0===Ku.tag&&0===(6&Eu)&&wc();var t=Eu;Eu|=1;var n=Iu.transition,r=kt;try{if(Iu.transition=null,kt=1,e)return e()}finally{kt=r,Iu.transition=n,0===(6&(Eu=t))&&qi()}}function lc(){Au=Nu.current,Ei(Nu)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Tu)for(n=Tu.return;null!==n;){var r=n;switch(Aa(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:eo(),Ei(Ai),Ei(Ci),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Ei(ro);break;case 10:Ji(r.type._context);break;case 22:case 23:lc()}n=n.return}if(Su=e,Tu=e=Rc(e.current,null),Cu=Au=t,Pu=0,Ru=null,Lu=Ou=Du=0,Fu=Mu=null,null!==ea){for(t=0;t<ea.length;t++)if(null!==(r=(n=ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ea=null}return e}function fc(e,t){for(;;){var n=Tu;try{if(Yi(),so.current=ns,po){for(var r=lo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(co=0,fo=ho=lo=null,vo=!1,yo=0,xu.current=null,null===n||null===n.return){Pu=1,Ru=t,Tu=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Cu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=vs(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&ps(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){ps(o,l,t),pc();break e}c=Error(a(426))}else if(Ra&&1&u.mode){var m=vs(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),ys(m,s,u,0,t),Ba(c);break e}}o=c,4!==Pu&&(Pu=2),null===Mu?Mu=[o]:Mu.push(o),c=os(c,u),u=s;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t,sa(u,fs(0,c,t));break e;case 1:o=c;var g=u.type,k=u.stateNode;if(0===(128&u.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===zu||!zu.has(k)))){u.flags|=65536,t&=-t,u.lanes|=t,sa(u,ds(u,o,t));break e}}u=u.return}while(null!==u)}kc(n)}catch(_){t=_,Tu===n&&null!==n&&(Tu=n=n.return);continue}break}}function dc(){var e=bu.current;return bu.current=ns,null===e?ns:e}function pc(){0!==Pu&&3!==Pu&&2!==Pu||(Pu=4),null===Su||0===(268435455&Du)&&0===(268435455&Ou)||oc(Su,Cu)}function vc(e,t){var n=Eu;Eu|=2;var r=dc();for(Su===e&&Cu===t||(Vu=null,hc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(Yi(),Eu=n,bu.current=r,null!==Tu)throw Error(a(261));return Su=null,Cu=0,Pu}function yc(){for(;null!==Tu;)gc(Tu)}function mc(){for(;null!==Tu&&!Ye();)gc(Tu)}function gc(e){var t=_u(e.alternate,e,Au);e.memoizedProps=e.pendingProps,null===t?kc(e):Tu=t,xu.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=ks(n,t,Au)))return void(Tu=n)}else{if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Tu=n);if(null===e)return Pu=6,void(Tu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tu=t);Tu=t=e}while(null!==t);0===Pu&&(Pu=5)}function _c(e,t,n){var r=kt,i=Iu.transition;try{Iu.transition=null,kt=1,function(e,t,n,r){do{wc()}while(null!==Ku);if(0!==(6&Eu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Su&&(Tu=Su=null,Cu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wu||(Wu=!0,Cc(tt,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Iu.transition,Iu.transition=null;var s=kt;kt=1;var u=Eu;Eu|=4,xu.current=null,function(e,t){if(ei=Wt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var s=0,u=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++h===r&&(c=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Ys=t;null!==Ys;)if(e=(t=Ys).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ys=e;else for(;null!==Ys;){t=Ys;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:Wi(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var _=t.stateNode.containerInfo;if(1===_.nodeType)_.textContent="";else if(9===_.nodeType){var w=_.body;null!=w&&(w.textContent="")}break;default:throw Error(a(163))}}catch(b){xc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Ys=e;break}Ys=t.return}v=Zs,Zs=!1}(e,n),du(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,vu(n,e,i),Je(),Eu=u,kt=s,Iu.transition=o}else e.current=n;if(Wu&&(Wu=!1,Ku=e,Gu=i),0===(o=e.pendingLanes)&&(zu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(Bu)throw Bu=!1,e=qu,qu=null,e;0!==(1&Gu)&&0!==e.tag&&wc(),0!==(1&(o=e.pendingLanes))?e===Qu?Hu++:(Hu=0,Qu=e):Hu=0,qi()}(e,t,n,r)}finally{Iu.transition=i,kt=r}return null}function wc(){if(null!==Ku){var e=_t(Gu),t=Iu.transition,n=kt;try{if(Iu.transition=null,kt=16>e?16:e,null===Ku)var r=!1;else{if(e=Ku,Ku=null,Gu=0,0!==(6&Eu))throw Error(a(331));var i=Eu;for(Eu|=4,Ys=e.current;null!==Ys;){var o=Ys,s=o.child;if(0!==(16&Ys.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Ys=l;null!==Ys;){var h=Ys;switch(h.tag){case 0:case 11:case 15:$s(8,h,o)}var f=h.child;if(null!==f)f.return=h,Ys=f;else for(;null!==Ys;){var d=(h=Ys).sibling,p=h.return;if(nu(h),h===l){Ys=null;break}if(null!==d){d.return=p,Ys=d;break}Ys=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Ys=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Ys=s;else e:for(;null!==Ys;){if(0!==(2048&(o=Ys).flags))switch(o.tag){case 0:case 11:case 15:$s(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Ys=g;break e}Ys=o.return}}var k=e.current;for(Ys=k;null!==Ys;){var _=(s=Ys).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,Ys=_;else e:for(s=k;null!==Ys;){if(0!==(2048&(u=Ys).flags))try{switch(u.tag){case 0:case 11:case 15:eu(9,u)}}catch(b){xc(u,u.return,b)}if(u===s){Ys=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Ys=w;break e}Ys=u.return}}if(Eu=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(b){}r=!0}return r}finally{kt=n,Iu.transition=t}}return!1}function bc(e,t,n){aa(e,t=fs(0,t=os(n,t),1)),t=Xu(),null!==(e=ec(e,1))&&(mt(e,1,t),nc(e,t))}function xc(e,t,n){if(3===e.tag)bc(e,e,n);else for(;null!==t;){if(3===t.tag){bc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===zu||!zu.has(r))){aa(t,e=ds(t,e=os(n,e),1)),e=Xu(),null!==(t=ec(t,1))&&(mt(t,1,e),nc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Xu(),e.pingedLanes|=e.suspendedLanes&n,Su===e&&(Cu&n)===n&&(4===Pu||3===Pu&&(130023424&Cu)===Cu&&500>Xe()-ju?hc(e,0):Lu|=n),nc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=Xu();null!==(e=ec(e,t))&&(mt(e,t,n),nc(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ec(e,n)}function Cc(e,t){return He(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(e,t,n,r){return new Ac(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Nc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Pc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Oc(n.children,i,o,t);case I:s=8,i|=8;break;case E:return(e=Nc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case A:return(e=Nc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Nc(19,n,t,i)).elementType=N,e.lanes=o,e;case D:return Lc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case T:s=9;break e;case C:s=11;break e;case P:s=14;break e;case R:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Nc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Oc(e,t,n,r){return(e=Nc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Nc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={},e}function Mc(e,t,n){return(e=Nc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Nc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,a,o,s,u){return e=new jc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Nc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},na(a),e}function Vc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bc(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,s,u){return(e=Uc(n,r,!0,e,0,a,0,s,u)).context=Bc(null),n=e.current,(a=ia(r=Xu(),i=Zu(n))).callback=void 0!==t&&null!==t?t:null,aa(n,a),e.current.lanes=i,mt(e,i,r),nc(e,r),e}function zc(e,t,n,r){var i=t.current,a=Xu(),o=Zu(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ia(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),aa(i,t),null!==(e=$u(i,o,a))&&oa(e,i,o),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}_u=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)ws=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ws=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),Va();break;case 5:to(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:$a(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(Ki,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ms(e,t,n):(Si(ro,1&ro.current),null!==(e=Ws(e,t,n))?e.sibling:null);Si(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Ws(e,t,n)}(e,t,n);ws=0!==(131072&e.flags)}else ws=!1,Ra&&0!==(1048576&t.flags)&&Ta(t,_a,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Pi(t,Ci.current);Zi(t,n),i=_o(null,t,r,e,i,n);var o=wo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,na(t),i.updater=fa,t.stateNode=i,i._reactInternals=t,ya(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,Ra&&o&&Ca(t),bs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=Wi(r,e),i){case 0:t=Cs(null,t,r,e,n);break e;case 1:t=As(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=Is(null,t,r,Wi(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 1:return r=t.type,i=t.pendingProps,As(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 3:e:{if(Ps(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ra(e,t),ua(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Rs(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Rs(e,t,r,n,i=Error(a(424)));break e}for(Pa=ci(t.stateNode.containerInfo.firstChild),Na=t,Ra=!0,Da=null,n=Ha(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Va(),r===i){t=Ws(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Fa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ts(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&Fa(t),null;case 13:return Ms(e,t,n);case 4:return $a(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ga(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xs(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Si(Ki,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ai.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ia(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Xi(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Xi(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}bs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Zi(t,n),r=r(i=$i(i)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return i=Wi(r=t.type,t.pendingProps),Is(e,t,r,i=Wi(r.type,i),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Zi(t,n),pa(t,r,i),ya(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return zs(e,t,n);case 22:return Ss(e,t,n)}throw Error(a(156,t.tag))};var Hc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function $c(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Wc(o);s.call(e)}}zc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),cc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wc(u);s.call(e)}}var u=Uc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pi]=u.current,qr(8===e.nodeType?e.parentNode:e),cc((function(){zc(t,u,n,r)})),u}(n,t,e,i,r);return Wc(o)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));zc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc((function(){zc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),nc(t,Xe()),0===(6&Eu)&&(Uu=Xe()+500,qi()))}break;case 13:var r=Xu();cc((function(){return $u(e,1,r)})),Gc(e,1)}},bt=function(e){13===e.tag&&($u(e,134217728,Xu()),Gc(e,134217728))},xt=function(e){if(13===e.tag){var t=Xu(),n=Zu(e);$u(e,n,t),Gc(e,n)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},be=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),Z(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=uc,Ae=cc;var el={usingClientEntryPoint:!1,Events:[ki,_i,wi,Se,Te,uc]},tl={findFiberByHostInstance:gi,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{it=rl.inject(nl),at=rl}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return Vc(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Hc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Hc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(cc((function(){$c(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return $c(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var _=k.prototype=new g;_.constructor=k,v(_,m.prototype),_.isPureReactComponent=!0;var w=Array.isArray,b=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+C(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(s=e[c],c);u+=A(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=A(s=s.value,t,i,l=a+C(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)b.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.1.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,_(e),!v)if(null!==r(c))v=!0,D(b);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function b(e,n){v=!1,y&&(y=!1,g(S),S=-1),p=!0;var a=d;try{for(_(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!A());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&i(c),_(n)}else i(c);f=r(c)}if(null!==f)var u=!0;else{var h=r(l);null!==h&&O(w,h.startTime-n),u=!1}return u}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,E=null,S=-1,T=5,C=-1;function A(){return!(t.unstable_now()-C<T)}function N(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(I=!1,E=null)}}else I=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=N,x=function(){R.postMessage(null)}}else x=function(){m(N,0)};function D(e){E=e,I||(I=!0,x())}function O(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(S),S=-1):y=!0,O(w,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,D(b))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},458:function(e){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},990:function(e,t,n){var r={"./dummy-1.jpg":917,"./dummy-2.jpg":558,"./dummy-3.jpg":729,"./kakaoShare.png":682,"./kakaopay.png":322,"./kv.jpeg":108,"./link.png":616,"./paper.jpeg":981,"./pencil.png":804,"./share.png":317};function i(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=a,e.exports=i,i.id=990},917:function(e,t,n){"use strict";e.exports=n.p+"static/media/dummy-1.a95c4474fa66a95160da.jpg"},558:function(e,t,n){"use strict";e.exports=n.p+"static/media/dummy-2.9d511b629936fbf17808.jpg"},729:function(e,t,n){"use strict";e.exports=n.p+"static/media/dummy-3.287078f8a9775f0aa2c3.jpg"},682:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIQAAACECAYAAABRRIOnAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAANwElEQVR42u2deXRU1R3HP/Myk4QQCDuEfZN9iUJFWVVEENCDKKDUqoALIkipVq14WuuxPW54kCIckEUKVioePBUUpbVoQSAsVeQoUNkRSMIWyM4kM/3jZnAyZDJLZuZ33+R9zplDMvPy3u9evnOX3/3d37W5zxDP2IG2QCegK9AaaOj1MoB6gK38+stAQfm/ucBZIBs4BhwFjgA/ln8el9ilDYggDYAbgRuA7kBnoCOQGOHnOIEDwF5gN7AV2FX+vumxmbiFSAYGAyOAYSgR2Kp1x/ApArYBn5W/9kpXTriYTRC1gNuBCcAooLa0QX44DnwIfADsANzSBgWLWQRxAzAFuBdIlTYmRA4B7wLLgFPSxgRCZ0EkAfcDTwK9pI2JAGXAOuBNYLO0Mf7QURB1genADKCZtDFRYgfwGrAWzboTnQSRihLC06gpYU1gD/B7VMuhhTB0EIQBPAS8DKRLGyPEdmBW+b+iGMLPH4Cawy+l5ooB1KB5a3k9NJU0REoQdYH5wH+AayUrQCNswGTgB2ASQj4ViS7jVmA50FKiwCbinyiB/BTLh8ayhUgC5gAbscQQDMNQg857YvnQWLUQ7VBTrIxYFi6OWATMBEqi/aBYtBC3owaOGTF4VrzyGPAVMWhZoy2Ip4H1qJVIi+rRD7W62i+aD4mWIBKAhcDrUXxGTaQJsAkYG60HROM/Kxn4CJgaLaNrOLWANcC0aNw80oKojeoi7ohypdR0DOBt4Jlo3DhS1AY+B4bGqFIs4FXgD5G8YaQEkQJ8jHJFW8SWF1GD94gQCUEkoiKDbhGqEAu1lB6RMVskBDEPFc5mIYcNtTZ0Z3VvVF1BPIdymljIkwC8TzX9FNVxXY9FBZJKRTpbVM4poA+QFc4fh9tCdEYFjVpi0I/mqDFdWPtRwhFEbdRCVZp0yS38Mgg1JQ2ZcATxJtBNusQWAZmJWlgMiVDHEGNQbmkLc5AF9AZygv2DUFqIRsA70iW0CIlmqEXGoAlFEHNRorAwF2MJYXU02C5jBLBBumQWYXMKtRk6N9CFwbQQSShvpIV5aU6Qi2DBCGI6cI10iSyqzRNAl0AXBeoyGgMHUfsoLMxPwFiVQC3EM1hiiCdGA/2ruqCqFiIdlduglnQpqoPLBSeOOziwL5HDBx1knbaTdTqBnGw7hQU2iottlJYqD7zD4SYpyU3tVBeNm5TRLL2MZumltO/opHPXy7Rq7cQwf4ToJqoIVahKEHNR3i7Tceqkna831yJzazJ7vkmmqDAySy4pKS56XVtCv/7FDBhURPMWpdJFDZchqG2UV+FPEPWAE5goW0vuBYPPPqnNhnWpHDroiMkzO3R0cvsd+YwYVUC9+i7pKgiFdfiJnfAniOeBP0lbHQyHDjpYuSyNTf9KoaxMxga73c1NQ4v41eSLdOhoimR0bqAHamNxBSoThB2Vl7G5tNVVcfiQg3cW1GPzl3oNcQbdVMQj03Jp30F7YSyikrC7ygQxBo0XsPLzDZYsTGPtB3VwadpKGwbcPT6PKY9fJDVVUyMhD/Wlz69geyUXPixtqT8ytyUz8a50PlytrxhAzWzWrK7DxLHpZG5LljbHH3VQ6R0r4NtCpKMGkwnS1nrjdNpYNL8eq1fVkTYlLO69P4/HpuficGiRRsqbrfhsnfAVxJPAW9JWepOfZ/C7pxrxzW5tv2lBcV3fYv78xllS62jVtLlRucCPe97w7TLGS1voTU52AlMnNTW9GAD+uyuZqZOakpOtVeNrA8ZVeMOrhWiOSl+jReBsTnYCMx5tysmf4ik/O7RoWcpfFmfTpKnQHPlqMlFJz4CKLcRINBHDxYsGs6Y1iTsxAJz8yc6saU24eFEbH/gv8MoL6m3VbdKWgRqhvzS7EceOxsbbKMGxow5emt1Il5mSAQz3/gXUrEILQaxYmqbzVC1iZG5LZsVSbXYyjPD84BFEBhrss9j/QyLLF4ubETOWL05j/w+RPt8lLAZ6fjB835DC5YI5rzTQpRmtaWVuR/lShUcQUU1kFQwb1qWy73stvi0xZd/3iWxYp8Wicn/4WRC9JS1xuWDVipobmLVqRV0dWokMUIKohdq8K8aWr1I4cSz+ppjBcuKYnS1fpUib0ROUILohvHax/h+6Hp1Vo+ogA5QgRFuHwkKDndvjf5oZiJ3bkyksFHVWtQKSDNTihhiZW5NxOrVwkIridNrI3Cr6xbAB7cQFock8XAs0qIt2BqqpEOPAfvFK0AYN6qKFgfCO7pMnau7swhcN6qKxgXCm+kv6rPqJo0FdNDIQPhKxoEC8ErRBg7poYKDv+dkWsSfRQO3DEMORqF3gqRgaxFvWFm+jGjXWJpRMnLp1xQVhFxeEiTfMRpw2beV3e4kLoku3y9ImaEOnLuKCKDUA0a9oz15RP3nQNHTrIV4XBQZQIGlB337F1sASSK7lpm+/YmkzLhvAOdGKSHYzcHCRdEWIM2BQEUlJ4l+M8wZwXtqK0WPyq38Tk3OHHnVw1gDOSltx/Q3FZkm0ERU6dbmsQ3cBcMZA7fYWxWaDKVMvSpshxoNTLkmb4OGkARyVtgJg8M2FZPQRH2XHnL79ihlyS6G0GR6OaiMIgOdeOFejZhwOh5unnhUfwnlwA4cN4IC0JR5ati5l+q9zpc2IGTOfvkCrNtp4ak8AJQYqE5k2Cwp3T8hj2AhR10hMGD6ygDH3aDGz8LAHlOu6CPiftDXePP+H8/TsHb/jiR69SvjtbG26Cg/fwc9rGd9KW+ONI9HN6/PO0K17/K1ztO/g5LW3zpCcrN1Y6Vv4WRBfS1vjS2qqizcX5NArI35ait7XljB/SbYOy9yVsRU0FgQoUcxdmMPQ27SZloXNrcMLmbswR1cxHEGdunMlx1QCak1Dy+QMbjf8/b06LJxXXyx9cbg4HG6mzshl/MQ8bPruR1oJPAA/txBlwEZpq/xhs6lcj++szKKd/imDr9C2vZPFK7KZ8EutxQDwmecH7yx0D2OCYxhLS228v7IOK5amUVykZy2npLh46JFLjJ+Yh92u3eDRFxfQlPI1LW3TEgbi3NkE5s2pzxcbxbfRXyEx0c3oMfk8OOUSDRuZpm+rkJbQO+L6FJWkutWVho3KaN/xshaCSEtzMXpMPuMn5plJCB7WeP/iG4L/ASYRBMDOTLmjEex2FeE06s4CBg4uMusajBsfQZgi+XllFBfbGDGk5ZXzsqKNzQatWjvJuK6EGwcW0ef6ElJStJxChsJVPYJvC3EaNeIcJW1pIL7dnRyyGDL6lNC9RwnZWXZyshMoLLSRn2dcyU+RmKgOYEtMhGbppeUv1TV16uKMBwH4stz3jcp2bS3BBILYtSP45BpJSW6mzcxl7Hjtp3+xJA9Y7ftmZYJYj2op0qUtroqdmcEJomfvEma/eI6WrbVZZtaFv+Fzmg5UvlGnFFggbW1VXDifwKEfq86F7UhUrcLbS7ItMVyNGz/nufvbuTWfStSjC4G6i85dL7P8vSwmPnApHg5ejQafUsmJfOBfELnAUmmr/bHLT3eRkKCCdRevyKJte/O4uAV43d8HVZ3s2xx1ELxe5yACY0e2uOpkmg4dnbzw0jmu6Rx/MRQR5kvgZn8fVtWgnkLDscSJY/YKYjAMeGDyJZaszLLEEBwvVPVhoB72NUCbTQOgzq7y0LqNk4XLsnn0iVyzegpjzQYCxL4EEkQO8LJ0KbypV9+F3e5m3H15vLs6i+494yeiKso4gd8EuqiqMYSHJGAvcI10iSyqxTxgZqCLghEEqAPaPpEukUXYnEYluc8NdGGws/RPUZ4tC3MygyDEAMG3EACNUc4M0cy3FiHzETA22ItD8eOdAR6VLp1FSGQDj4fyB6E6dj/CBHGXFoBar5iEEkXQhOPpnwXsky6tRUDeQvkdQiKUMYQ3XVDBmTX35DS92QIMBUJ23Ya7Frgf1RxZ7kH9OA2MJwwxQPUSl64FnpcuvUUFCoG7UKIIi+pGC7wCLJOuBQtA7b67D9WVh00kwkceRzmuLORwo5xPH1f3RpEQxGVgHLBJuFJqMs8ACyNxo0gFmBUCd6JpWoE450XgjUjdLJIRh/nACODfMa6QmsxzwB8jecNIh6Dmo/Z0rI9VjdRQXMB04NVI3zgaMcnFqKnPoihXSk2lCJgAvB2Nm0crSL0UmAo8i1KzRWTIQXkgP4zWA8J1XYfCSGAVUD/qT4pvdgL3AMej+ZBYbGP5FOiLZqkPTcZiYBBRFgPE7sytw6gsJXOx1j9C4QJqXeIxICbRxLHoMny5DeXubhHzJ5uLL1ALiDE9vkJi5+NGVMDnAqwBZ2VcACYDwxA4y0RqK+wl4AlgCPCNkA264Qb+CnRFJfIQ6Vql90ZvQQ04p1CNJds4YDvQH3iQEEPeIo20IEB1G8uATqj4Cu3SxEeR74AxKDFslzYGZAaVgaiLcsvOAJpJGxMldqHczmvRbByloyA8JAH3A08CvaSNiQBlqDWeOcBmaWP8obMgvLkRlXp5PJAqbUyIHEENEpdSnnFeZ8wiCA+1UKup44DRgHwa28o5gVpvWIMaG5jGGWc2QXiTDAxGxWAMR03XpJIOFgE7gM9Rrvo90pUTLmYWhC8NUF3LANS+ka5AeyAxws8pRZ1kuBc1ONwG7CZGruVoE0+CqAw70A7oXP5qAzT0eiVQ8dCYUlRCTydqt/QZ1JLzMdRY4AjwI2HueTAD/weCk4djpIG29QAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0xMC0yMFQxNDoyMDoxNCswOTowMO7MkygAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMTAtMjBUMTQ6MjA6MTQrMDk6MDCfkSuUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},322:function(e,t,n){"use strict";e.exports=n.p+"static/media/kakaopay.6779b605870ee0eb8ab0.png"},108:function(e,t,n){"use strict";e.exports=n.p+"static/media/kv.2c4421139bb1aca7d9b4.jpeg"},616:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA3QAAAN0BcFOiBwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAJ2SURBVFiFtdc7a1RBGMbx38Q0iogX1IhLUniLKIJiI9iIjQjBC4ig30ALwcIy+BFEkCB2Qiy8IBG0UqxFiCIoiYmmSYgpEm+NFmYszsmymezuOZtsBqbYnffd//Oe884zsyHGqN0jhNCHsziMPfiKd3geY3y0KDjG2LaJLXiA2GQOoaua00Z4L6YK4AtzBtvbJiCHT5eEL8wnMUZhpT0QQujFa3QlS79wGx9wANewMYk5s1qVj6Enie3B9yTu3mrBKw1ybiaxw8uF72oVnuddSOJ/d7T+1pFtt0+Yq/luHCdijJNN8g4ln0fasQO6cVq+rZrE9eBn8gQGOlspO4SwD8dwBDvwBW/wLMb4r0leBS+xIVl6WrbKtbiFefX39FdcbJBbkfVGmnO/lBHJuv1zA3A6r5eET2FzoQCtO9w0Ogvg0+itMpYB/ys7UAZkO6F2bQ7rysIbCmgCH5PZ6oKFr8FVjOZ9cFm2K8bLwOsKKIBXcCmHjeIKOvK8gIOYKAtfIqAEfB1mk7X3uIPH+NMKfJGAInge04lvJRuyEF4VgM3qXyaWeLvsWG3kB6k3NIXXChgsA68RcRKTDcDzeIhNZUwuyHz8ucWj8GAJIazHeRzHTtkF5CMGY4wTjfLqjbtJBT/QXWBQW3PhTeNK2ry3iYD+goTUZGbxCkeWK+B3IqCvBXhtt+9ejoAO2UFTO/Y3eOcV2eVzd7L0TdYv4+Xf+uKR9sAMtiWVdzepvHCrFb2Cc3V+eAY30Id+WWO2HV7rA0N1ACtyuFYFdOVVl4FPtQteFVAjouhJDMpvMu2aS/6ahRDO4RSOYi9GMIyhGOOLsp1ddvwH0t0pWQM+GpkAAAAASUVORK5CYII="},981:function(e,t,n){"use strict";e.exports=n.p+"static/media/paper.620b111197d9d4a280f3.jpeg"},804:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAXAAAAFwBhyfMcAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAACXSURBVDiNzdI9CsJQEEXhzyI7CP5sxYXYuA4t3JO9XbS21ARBXILgAoRYJA9CiOElNh6YZuDcO8UwjBkyPLEZ6EpwQdmYbayc1gFrvBsBrxh5iiv2HSFZrBwaQ8iq3i+GyO2QpE+eo+iQy3qfjmkucRt79p/LCfIvcqF6316WY5sDu19kOLTkPObswAQP3HHCEWfVr0fxAbSiWClHz+v4AAAAAElFTkSuQmCC"},317:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA3QAAAN0BcFOiBwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHzSURBVFiFxde9axRBHMbxz3lB8bhgqUHEIogSbKJICkELazvxpQixsbIQLGzEwiqF+BdIRFE7O4OFRUQLhYiFXIo0ChbaiShR5NSsxe6S8bjLzZpZMzDN7jP7++7sM8/syLJMHR3jmEMHX/ECs2j/paup+DRWkPXp73CoNgBMojugeAjRrgvg5ZDiZZ/NsswWCVuj0WjhSKT8ONIC4ACakdqDdQC8r6pNDdDF50jtItKZEOfwQZwBVzCeZBVgAk+LB6/iDm6uU7yL6Q3nANq4gZ/Fg9/gaHD/FJYKqAy/5Et0ct0kxBSu4C6u4QSaPZqzwXR/waVeTaDdIQ+nVt/7gXAUtwZM2wLGiuleCK7fw64NfcIAYH6IcT5Zi9gOjiUxb1H8fKR7f+AyRpKtngLgcSTAt0Hf+l97GUSHxbUW9kdqo1oJ0K0wZrUOgNcVxuxOCVB64KQ4D5T9CaaSmbCAuD2k6HPMYDm49khPsvUJolGRQdTEVf1/px5gW6CbwVtr+f8QE33SclEewZWieA9O4zrOYOeANxvBBfm+nuE37mNf8SLlHlDPZhSAbMVFfAxm5P9txwHIdnlKxhp5LilAATFWAaATJmGqNlZBu5f0/4TLcjPGtKXkAFmWfcerSPmzclBqH2zu0ayA2LzDaQARdTz/A9RXxJFcGTgUAAAAAElFTkSuQmCC"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/yes-wedding/",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Br},SDK_VERSION:function(){return ra},_DEFAULT_ENTRY_NAME:function(){return Wi},_addComponent:function(){return Qi},_addOrOverwriteComponent:function(){return Yi},_apps:function(){return Gi},_clearComponents:function(){return $i},_components:function(){return Hi},_getProvider:function(){return Xi},_registerComponent:function(){return Ji},_removeServiceInstance:function(){return Zi},deleteApp:function(){return sa},getApp:function(){return aa},getApps:function(){return oa},initializeApp:function(){return ia},onLog:function(){return la},registerVersion:function(){return ca},setLogLevel:function(){return ha}});var t=n(791),r=n(250),i="Kv_kv__5JmeM",a="Kv_kv__img__zfEeN",o="Kv_kv__img-wrap__wZ+Jl",s="Kv_kv__cont__-V1z-",u="Kv_kv__tit__8iPl2",c="Kv_kv__tit-and__ryNhW",l="Kv_kv__tit-sub__3cRdu",h="Kv_cont__Zf5-T",f="Kv_cont__thin__V0rtX",d="Kv_cont-wrap__78-7p",p="Kv_cont--place__HxWFA",v=n(184),y=function(e){var r=(0,t.useRef)(""),y=(0,t.useRef)(""),m=function(){var e=window.pageYOffset,t=y.current.offsetTop,n=(t-e)/t;n>0&&(r.current.style.transform="translate3d(0, ".concat(65*(1-n),"%, 0) scale(").concat(1+.3*(1-n),")"))};return(0,t.useEffect)((function(){return window.addEventListener("scroll",m),function(){window.removeEventListener("scroll",m)}}),[]),(0,v.jsxs)("section",{id:"kv",children:[(0,v.jsxs)("div",{className:i,children:[(0,v.jsx)("div",{className:o,children:(0,v.jsx)("img",{ref:r,src:n(108),alt:"kv",className:a})}),(0,v.jsxs)("div",{ref:y,className:s,children:[(0,v.jsxs)("div",{className:u,children:["\uc724\uc5ec\uc6c5 ",(0,v.jsx)("span",{className:c,children:"&"})," \uc720\uc740\uc194"]}),(0,v.jsx)("div",{className:l,children:"2022.00.00 Sat 12:00"})]})]}),(0,v.jsx)("div",{"data-scroll-target":"opacity",className:"section-flower",children:"\ud83d\udc90"}),(0,v.jsxs)("div",{className:d,children:[(0,v.jsxs)("div",{"data-scroll-target":"show-up",className:h,children:["\uc11c\ub85c\uac00 \ub9c8\uc8fc\ubcf4\uba70 \ub2e4\uc838\uc628 \uc0ac\ub791\uc744",(0,v.jsx)("br",{}),"\uc774\uc81c \ud568\uaed8 \ud55c \uacf3\uc744 \ubc14\ub77c\ubcf4\uba70",(0,v.jsx)("br",{}),"\uac78\uc5b4\uac08 \uc218 \uc788\ub294 \ud070 \uc0ac\ub791\uc73c\ub85c \ud0a4\uc6b0\uace0\uc790 \ud569\ub2c8\ub2e4.",(0,v.jsx)("br",{}),"\uc800\ud76c \ub450 \uc0ac\ub78c\uc774 \uc0ac\ub791\uc758 \uc774\ub984\uc73c\ub85c",(0,v.jsx)("br",{}),"\uc9c0\ucf1c\ub098\uac08 \uc218 \uc788\uac8c \uc55e\ub0a0\uc744",(0,v.jsx)("br",{}),"\ucd95\ubcf5\ud574 \uc8fc\uc2dc\uba74 \uac10\uc0ac\ud558\uaca0\uc2b5\ub2c8\ub2e4.",(0,v.jsx)("br",{})]}),(0,v.jsxs)("div",{"data-scroll-target":"show-up",className:h,children:[(0,v.jsxs)("div",{children:["\uc724\uc5ec\uc6c5 \uff65 \uc720\uc740\uc194",(0,v.jsx)("span",{className:f,children:"\uc758 \uc7a5\ub0a8"})," \uc5ec\uc6c5"]}),(0,v.jsxs)("div",{children:["\uc724\uc5ec\uc6c5 \uff65 \uc720\uc740\uc194",(0,v.jsx)("span",{className:f,children:"\uc758 \uc7a5\ub140"})," \uc740\uc194"]})]}),(0,v.jsxs)("div",{"data-scroll-target":"show-up",className:"".concat(h," ").concat(p),children:[(0,v.jsx)("div",{children:"2022.12.12 \ud1a0\uc694\uc77c \uc624\ud6c4 12\uc2dc 00\ubd84"}),(0,v.jsx)("div",{children:"\uc0c1\ub85d\uc544\ud2b8\ud640 \uadf8\ub79c\ub4dc\ubcfc\ub8f8\ud640"})]})]})]})};function m(e){if(Array.isArray(e))return e}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t){if(e){if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function _(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e,t){return m(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||k(e,t)||_()}var b=n(164),x={backdrop:"Modal_backdrop__1HSqd",modal:"Modal_modal__lLcOT",modal__btn:"Modal_modal__btn__jN-O2"},I=function(e){return(0,v.jsx)("div",{className:x.backdrop,onClick:e.onClose})},E=function(e){return(0,v.jsxs)("div",{className:x.modal,children:[(0,v.jsx)("button",{onClick:e.onClose,className:x.modal__btn,children:"\xd7"}),(0,v.jsx)("div",{className:x.content,children:e.children})]})},S=document.getElementById("overlays"),T=function(e){return(0,v.jsxs)(t.Fragment,{children:[b.createPortal((0,v.jsx)(I,{onClose:e.onClose}),S),b.createPortal((0,v.jsx)(E,{onClose:e.onClose,children:e.children}),S)]})};function C(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function A(e){return function(e){if(Array.isArray(e))return g(e)}(e)||C(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t,n){return t&&P(e.prototype,t),n&&P(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function D(e,t){return D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},D(e,t)}function O(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e,t){if(t&&("object"===F(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function V(e){var t=M();return function(){var n,r=L(e);if(t){var i=L(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return U(this,n)}}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var K=["children","className"],G=["className","tag","hasTrack","children"],H=["children","className"];function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Y="(prefers-reduced-motion: reduce)",J={CREATED:1,MOUNTED:2,IDLE:3,MOVING:4,SCROLLING:5,DRAGGING:6,DESTROYED:7};function X(e){e.length=0}function Z(e,t,n){return Array.prototype.slice.call(e,t,n)}function $(e){return e.bind.apply(e,[null].concat(Z(arguments,1)))}var ee=setTimeout,te=function(){};function ne(e){return requestAnimationFrame(e)}function re(e,t){return typeof t===e}function ie(e){return!ce(e)&&re("object",e)}var ae=Array.isArray,oe=$(re,"function"),se=$(re,"string"),ue=$(re,"undefined");function ce(e){return null===e}function le(e){return e instanceof HTMLElement}function he(e){return ae(e)?e:[e]}function fe(e,t){he(e).forEach(t)}function de(e,t){return e.indexOf(t)>-1}function pe(e,t){return e.push.apply(e,he(t)),e}function ve(e,t,n){e&&fe(t,(function(t){t&&e.classList[n?"add":"remove"](t)}))}function ye(e,t){ve(e,se(t)?t.split(" "):t,!0)}function me(e,t){fe(t,e.appendChild.bind(e))}function ge(e,t){fe(e,(function(e){var n=(t||e).parentNode;n&&n.insertBefore(e,t)}))}function ke(e,t){return le(e)&&(e.msMatchesSelector||e.matches).call(e,t)}function _e(e,t){var n=e?Z(e.children):[];return t?n.filter((function(e){return ke(e,t)})):n}function we(e,t){return t?_e(e,t)[0]:e.firstElementChild}var be=Object.keys;function xe(e,t,n){if(e){var r=be(e);r=n?r.reverse():r;for(var i=0;i<r.length;i++){var a=r[i];if("__proto__"!==a&&!1===t(e[a],a))break}}return e}function Ie(e){return Z(arguments,1).forEach((function(t){xe(t,(function(n,r){e[r]=t[r]}))})),e}function Ee(e){return Z(arguments,1).forEach((function(t){xe(t,(function(t,n){ae(t)?e[n]=t.slice():ie(t)?e[n]=Ee({},ie(e[n])?e[n]:{},t):e[n]=t}))})),e}function Se(e,t){he(t||be(e)).forEach((function(t){delete e[t]}))}function Te(e,t){fe(e,(function(e){fe(t,(function(t){e&&e.removeAttribute(t)}))}))}function Ce(e,t,n){ie(t)?xe(t,(function(t,n){Ce(e,n,t)})):fe(e,(function(e){ce(n)||""===n?Te(e,t):e.setAttribute(t,String(n))}))}function Ae(e,t,n){var r=document.createElement(e);return t&&(se(t)?ye(r,t):Ce(r,t)),n&&me(n,r),r}function Ne(e,t,n){if(ue(n))return getComputedStyle(e)[t];ce(n)||(e.style[t]=""+n)}function Pe(e,t){Ne(e,"display",t)}function Re(e){e.setActive&&e.setActive()||e.focus({preventScroll:!0})}function De(e,t){return e.getAttribute(t)}function Oe(e,t){return e&&e.classList.contains(t)}function Le(e){return e.getBoundingClientRect()}function Me(e){fe(e,(function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}))}function Fe(e){return we((new DOMParser).parseFromString(e,"text/html").body)}function je(e,t){e.preventDefault(),t&&(e.stopPropagation(),e.stopImmediatePropagation())}function Ue(e,t){return e&&e.querySelector(t)}function Ve(e,t){return t?Z(e.querySelectorAll(t)):[]}function Be(e,t){ve(e,t,!1)}function qe(e){return e.timeStamp}function ze(e){return se(e)?e:e?e+"px":""}var We="splide",Ke="data-splide";function Ge(e,t){if(!e)throw new Error("[splide] "+(t||""))}var He=Math.min,Qe=Math.max,Ye=Math.floor,Je=Math.ceil,Xe=Math.abs;function Ze(e,t,n){return Xe(e-t)<n}function $e(e,t,n,r){var i=He(t,n),a=Qe(t,n);return r?i<e&&e<a:i<=e&&e<=a}function et(e,t,n){var r=He(t,n),i=Qe(t,n);return He(Qe(r,e),i)}function tt(e){return+(e>0)-+(e<0)}function nt(e,t){return fe(t,(function(t){e=e.replace("%s",""+t)})),e}function rt(e){return e<10?"0"+e:""+e}var it={};function at(){var e=[];function t(e,t,n){fe(e,(function(e){e&&fe(t,(function(t){t.split(" ").forEach((function(t){var r=t.split(".");n(e,r[0],r[1])}))}))}))}return{bind:function(n,r,i,a){t(n,r,(function(t,n,r){var o="addEventListener"in t,s=o?t.removeEventListener.bind(t,n,i,a):t.removeListener.bind(t,i);o?t.addEventListener(n,i,a):t.addListener(i),e.push([t,n,r,i,s])}))},unbind:function(n,r,i){t(n,r,(function(t,n,r){e=e.filter((function(e){return!!(e[0]!==t||e[1]!==n||e[2]!==r||i&&e[3]!==i)||(e[4](),!1)}))}))},dispatch:function(e,t,n){var r;return"function"===typeof CustomEvent?r=new CustomEvent(t,{bubbles:true,detail:n}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,true,!1,n),e.dispatchEvent(r),r},destroy:function(){e.forEach((function(e){e[4]()})),X(e)}}}var ot="mounted",st="ready",ut="move",ct="moved",lt="shifted",ht="click",ft="active",dt="inactive",pt="visible",vt="hidden",yt="slide:keydown",mt="refresh",gt="updated",kt="resize",_t="resized",wt="drag",bt="dragging",xt="dragged",It="scroll",Et="scrolled",St="destroy",Tt="arrows:mounted",Ct="arrows:updated",At="pagination:mounted",Nt="pagination:updated",Pt="navigation:mounted",Rt="autoplay:play",Dt="autoplay:playing",Ot="autoplay:pause",Lt="lazyload:loaded";function Mt(e){var t=e?e.event.bus:document.createDocumentFragment(),n=at();return e&&e.event.on(St,n.destroy),Ie(n,{bus:t,on:function(e,r){n.bind(t,he(e).join(" "),(function(e){r.apply(r,ae(e.detail)?e.detail:[])}))},off:$(n.unbind,t),emit:function(e){n.dispatch(t,e,Z(arguments,1))}})}function Ft(e,t,n,r){var i,a,o=Date.now,s=0,u=!0,c=0;function l(){if(!u){if(s=e?He((o()-i)/e,1):1,n&&n(s),s>=1&&(t(),i=o(),r&&++c>=r))return h();ne(l)}}function h(){u=!0}function f(){a&&cancelAnimationFrame(a),s=0,a=0,u=!0}return{start:function(t){!t&&f(),i=o()-(t?s*e:0),u=!1,ne(l)},rewind:function(){i=o(),s=0,n&&n(s)},pause:h,cancel:f,set:function(t){e=t},isPaused:function(){return u}}}var jt="ArrowLeft",Ut="ArrowRight",Vt="ArrowUp",Bt="ArrowDown",qt="ttb",zt={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[Vt,Ut],ArrowRight:[Bt,jt]};var Wt="role",Kt="tabindex",Gt="aria-controls",Ht="aria-current",Qt="aria-selected",Yt="aria-label",Jt="aria-labelledby",Xt="aria-hidden",Zt="aria-orientation",$t="aria-roledescription",en="aria-live",tn="aria-relevant",nn=[Wt,Kt,"disabled",Gt,Ht,Yt,Jt,Xt,Zt,$t],rn=We,an="splide__track",on="splide__list",sn="splide__slide",un=sn+"--clone",cn="splide__arrows",ln="splide__arrow",hn=ln+"--prev",fn=ln+"--next",dn="splide__pagination",pn=dn+"__page",vn="splide__progress__bar",yn="splide__toggle",mn="is-active",gn="is-prev",kn="is-next",_n="is-visible",wn="is-loading",bn="is-focus-in",xn=[mn,_n,gn,kn,wn,bn],In={slide:sn,clone:un,arrows:cn,arrow:ln,prev:hn,next:fn,pagination:dn,page:pn,spinner:"splide__spinner"};var En="touchstart mousedown",Sn="touchmove mousemove",Tn="touchend touchcancel mouseup";var Cn="slide",An="loop",Nn="fade";function Pn(e,t,n,r){var i,a=Mt(e),o=a.on,s=a.emit,u=a.bind,c=e.Components,l=e.root,h=e.options,f=h.isNavigation,d=h.updateOnMove,p=h.i18n,v=h.pagination,y=h.slideFocus,m=c.Direction.resolve,g=De(r,"style"),k=De(r,Yt),_=n>-1,w=we(r,".splide__slide__container"),b=Ve(r,h.focusableNodes||"");function x(){var i=e.splides.map((function(e){var n=e.splide.Components.Slides.getAt(t);return n?n.slide.id:""})).join(" ");Ce(r,Yt,nt(p.slideX,(_?n:t)+1)),Ce(r,Gt,i),Ce(r,Wt,y?"button":""),y&&Te(r,$t)}function I(){i||E()}function E(){if(!i){var n=e.index;!function(){var e=S();e!==Oe(r,mn)&&(ve(r,mn,e),Ce(r,Ht,f&&e||""),s(e?ft:dt,T))}(),function(){var t=function(){if(e.is(Nn))return S();var t=Le(c.Elements.track),n=Le(r),i=m("left"),a=m("right");return Ye(t[i])<=Je(n[i])&&Ye(n[a])<=Je(t[a])}(),n=!t&&(!S()||_);e.state.is([4,5])||Ce(r,Xt,n||"");Ce(b,Kt,n?-1:""),y&&Ce(r,Kt,n?-1:0);t!==Oe(r,_n)&&(ve(r,_n,t),s(t?pt:vt,T));if(!t&&document.activeElement===r){var i=c.Slides.getAt(e.index);i&&Re(i.slide)}}(),ve(r,gn,t===n-1),ve(r,kn,t===n+1)}}function S(){var r=e.index;return r===t||h.cloneStatus&&r===n}var T={index:t,slideIndex:n,slide:r,container:w,isClone:_,mount:function(){_||(r.id=l.id+"-slide"+rt(t+1),Ce(r,Wt,v?"tabpanel":"group"),Ce(r,$t,p.slide),Ce(r,Yt,k||nt(p.slideLabel,[t+1,e.length]))),u(r,"click",$(s,ht,T)),u(r,"keydown",$(s,yt,T)),o([ct,lt,Et],E),o(Pt,x),d&&o(ut,I)},destroy:function(){i=!0,a.destroy(),Be(r,xn),Te(r,nn),Ce(r,"style",g),Ce(r,Yt,k||"")},update:E,style:function(e,t,n){Ne(n&&w||r,e,t)},isWithin:function(n,r){var i=Xe(n-t);return _||!h.rewind&&!e.is(An)||(i=He(i,e.length-i)),i<=r}};return T}var Rn={passive:!1,capture:!0};var Dn={Spacebar:" ",Right:Ut,Left:jt,Up:Vt,Down:Bt};function On(e){return e=se(e)?e:e.key,Dn[e]||e}var Ln="keydown";var Mn="data-splide-lazy",Fn="data-splide-lazy-srcset";var jn=[" ","Enter"];var Un=Object.freeze({__proto__:null,Media:function(e,t,n){var r=e.state,i=n.breakpoints||{},a=n.reducedMotion||{},o=at(),s=[];function u(e){e&&o.destroy()}function c(e,t){var n=matchMedia(t);o.bind(n,"change",l),s.push([e,n])}function l(){var t=r.is(7),i=n.direction,a=s.reduce((function(e,t){return Ee(e,t[1].matches?t[0]:{})}),{});Se(n),h(a),n.destroy?e.destroy("completely"===n.destroy):t?(u(!0),e.mount()):i!==n.direction&&e.refresh()}function h(t,i){Ee(n,t),i&&Ee(Object.getPrototypeOf(n),t),r.is(1)||e.emit(gt,n)}return{setup:function(){var e="min"===n.mediaQuery;be(i).sort((function(t,n){return e?+t-+n:+n-+t})).forEach((function(t){c(i[t],"("+(e?"min":"max")+"-width:"+t+"px)")})),c(a,Y),l()},destroy:u,reduce:function(e){matchMedia(Y).matches&&(e?Ee(n,a):Se(n,be(a)))},set:h}},Direction:function(e,t,n){return{resolve:function(e,t,r){var i="rtl"!==(r=r||n.direction)||t?r===qt?0:-1:1;return zt[e]&&zt[e][i]||e.replace(/width|left|right/i,(function(e,t){var n=zt[e.toLowerCase()][i]||e;return t>0?n.charAt(0).toUpperCase()+n.slice(1):n}))},orient:function(e){return e*("rtl"===n.direction?1:-1)}}},Elements:function(e,t,n){var r,i,a,o=Mt(e),s=o.on,u=o.bind,c=e.root,l=n.i18n,h={},f=[],d=[],p=[];function v(){r=g("."+an),i=we(r,"."+on),Ge(r&&i,"A track/list element is missing."),pe(f,_e(i,".splide__slide:not(."+un+")")),xe({arrows:cn,pagination:dn,prev:hn,next:fn,bar:vn,toggle:yn},(function(e,t){h[t]=g("."+e)})),Ie(h,{root:c,track:r,list:i,slides:f}),function(){var e=c.id||(a=We,""+a+rt(it[a]=(it[a]||0)+1)),t=n.role;var a;c.id=e,r.id=r.id||e+"-track",i.id=i.id||e+"-list",!De(c,Wt)&&"SECTION"!==c.tagName&&t&&Ce(c,Wt,t);Ce(c,$t,l.carousel),Ce(i,Wt,"presentation")}(),m()}function y(e){var t=nn.concat("style");X(f),Be(c,d),Be(r,p),Te([r,i],t),Te(c,e?t:["style",$t])}function m(){Be(c,d),Be(r,p),d=k(rn),p=k(an),ye(c,d),ye(r,p),Ce(c,Yt,n.label),Ce(c,Jt,n.labelledby)}function g(e){var t=Ue(c,e);return t&&function(e,t){if(oe(e.closest))return e.closest(t);for(var n=e;n&&1===n.nodeType&&!ke(n,t);)n=n.parentElement;return n}(t,".splide")===c?t:void 0}function k(e){return[e+"--"+n.type,e+"--"+n.direction,n.drag&&e+"--draggable",n.isNavigation&&e+"--nav",e===rn&&mn]}return Ie(h,{setup:v,mount:function(){s(mt,y),s(mt,v),s(gt,m),u(document,"touchstart mousedown keydown",(function(e){a="keydown"===e.type}),{capture:!0}),u(c,"focusin",(function(){ve(c,bn,!!a)}))},destroy:y})},Slides:function(e,t,n){var r=Mt(e),i=r.on,a=r.emit,o=r.bind,s=t.Elements,u=s.slides,c=s.list,l=[];function h(){u.forEach((function(e,t){d(e,t,-1)}))}function f(){v((function(e){e.destroy()})),X(l)}function d(t,n,r){var i=Pn(e,n,r,t);i.mount(),l.push(i)}function p(e){return e?y((function(e){return!e.isClone})):l}function v(e,t){p(t).forEach(e)}function y(e){return l.filter(oe(e)?e:function(t){return se(e)?ke(t.slide,e):de(he(e),t.index)})}return{mount:function(){h(),i(mt,f),i(mt,h),i([ot,mt],(function(){l.sort((function(e,t){return e.index-t.index}))}))},destroy:f,update:function(){v((function(e){e.update()}))},register:d,get:p,getIn:function(e){var r=t.Controller,i=r.toIndex(e),a=r.hasFocus()?1:n.perPage;return y((function(e){return $e(e.index,i,i+a-1)}))},getAt:function(e){return y(e)[0]},add:function(e,t){fe(e,(function(e){if(se(e)&&(e=Fe(e)),le(e)){var r=u[t];r?ge(e,r):me(c,e),ye(e,n.classes.slide),function(e,t){var n=Ve(e,"img"),r=n.length;r?n.forEach((function(e){o(e,"load error",(function(){--r||t()}))})):t()}(e,$(a,kt))}})),a(mt)},remove:function(e){Me(y(e).map((function(e){return e.slide}))),a(mt)},forEach:v,filter:y,style:function(e,t,n){v((function(r){r.style(e,t,n)}))},getLength:function(e){return e?u.length:l.length},isEnough:function(){return l.length>n.perPage}}},Layout:function(e,t,n){var r,i,a=Mt(e),o=a.on,s=a.bind,u=a.emit,c=t.Slides,l=t.Direction.resolve,h=t.Elements,f=h.root,d=h.track,p=h.list,v=c.getAt,y=c.style;function m(){i=null,r=n.direction===qt,Ne(f,"maxWidth",ze(n.width)),Ne(d,l("paddingLeft"),k(!1)),Ne(d,l("paddingRight"),k(!0)),g()}function g(){var e=Le(f);i&&i.width===e.width&&i.height===e.height||(Ne(d,"height",function(){var e="";r&&(Ge(e=_(),"height or heightRatio is missing."),e="calc("+e+" - "+k(!1)+" - "+k(!0)+")");return e}()),y(l("marginRight"),ze(n.gap)),y("width",n.autoWidth?null:ze(n.fixedWidth)||(r?"":w())),y("height",ze(n.fixedHeight)||(r?n.autoHeight?null:w():_()),!0),i=e,u(_t))}function k(e){var t=n.padding,r=l(e?"right":"left");return t&&ze(t[r]||(ie(t)?0:t))||"0px"}function _(){return ze(n.height||Le(p).width*n.heightRatio)}function w(){var e=ze(n.gap);return"calc((100%"+(e&&" + "+e)+")/"+(n.perPage||1)+(e&&" - "+e)+")"}function b(e,t){var n=v(e);if(n){var r=Le(n.slide)[l("right")],i=Le(p)[l("left")];return Xe(r-i)+(t?0:x())}return 0}function x(){var e=v(0);return e&&parseFloat(Ne(e.slide,l("marginRight")))||0}return{mount:function(){m(),s(window,"resize load",function(e,t){var n;return function(){n||(n=Ft(t||0,(function(){e(),n=null}),null,1)).start()}}($(u,kt))),o([gt,mt],m),o(kt,g)},listSize:function(){return Le(p)[l("width")]},slideSize:function(e,t){var n=v(e||0);return n?Le(n.slide)[l("width")]+(t?0:x()):0},sliderSize:function(){return b(e.length-1,!0)-b(-1,!0)},totalSize:b,getPadding:function(e){return parseFloat(Ne(d,l("padding"+(e?"Right":"Left"))))||0}}},Clones:function(e,t,n){var r,i=Mt(e),a=i.on,o=i.emit,s=t.Elements,u=t.Slides,c=t.Direction.resolve,l=[];function h(){(r=p())&&(!function(t){var r=u.get().slice(),i=r.length;if(i){for(;r.length<t;)pe(r,r);pe(r.slice(-t),r.slice(0,t)).forEach((function(a,o){var c=o<t,h=function(t,r){var i=t.cloneNode(!0);return ye(i,n.classes.clone),i.id=e.root.id+"-clone"+rt(r+1),i}(a.slide,o);c?ge(h,r[0].slide):me(s.list,h),pe(l,h),u.register(h,o-t+(c?0:i),a.index)}))}}(r),o(kt))}function f(){Me(l),X(l)}function d(){r<p()&&o(mt)}function p(){var r=n.clones;if(e.is(An)){if(!r){var i=n[c("fixedWidth")]&&t.Layout.slideSize(0);r=i&&Je(Le(s.track)[c("width")]/i)||n[c("autoWidth")]&&e.length||2*n.perPage}}else r=0;return r}return{mount:function(){h(),a(mt,f),a(mt,h),a([gt,kt],d)},destroy:f}},Move:function(e,t,n){var r,i=Mt(e),a=i.on,o=i.emit,s=e.state.set,u=t.Layout,c=u.slideSize,l=u.getPadding,h=u.totalSize,f=u.listSize,d=u.sliderSize,p=t.Direction,v=p.resolve,y=p.orient,m=t.Elements,g=m.list,k=m.track;function _(){t.Controller.isBusy()||(t.Scroll.cancel(),w(e.index),t.Slides.update())}function w(e){b(E(e,!0))}function b(t,n){if(!e.is(Nn)){var r=n?t:function(t){if(e.is(An)){var n=y(t-S()),r=C(!1,t)&&n<0,i=C(!0,t)&&n>0;(r||i)&&(t=x(t,i))}return t}(t);Ne(g,"transform","translate"+v("X")+"("+r+"px)"),t!==r&&o(lt)}}function x(e,t){var n=e-T(t),r=d();return e-=y(r*(Je(Xe(n)/r)||1))*(t?1:-1)}function I(){b(S()),r.cancel()}function E(t,r){var i=y(h(t-1)-function(e){var t=n.focus;return"center"===t?(f()-c(e,!0))/2:+t*c(e)||0}(t));return r?function(t){n.trimSpace&&e.is(Cn)&&(t=et(t,0,y(d()-f())));return t}(i):i}function S(){var e=v("left");return Le(g)[e]-Le(k)[e]+y(l(!1))}function T(e){return E(e?t.Controller.getEnd():0,!!n.trimSpace)}function C(e,t){t=ue(t)?S():t;var n=!0!==e&&y(t)<y(T(!1)),r=!1!==e&&y(t)>y(T(!0));return n||r}return{mount:function(){r=t.Transition,a([ot,_t,gt,mt],_)},move:function(e,t,n,i){var a=S();e!==t&&function(e){var t=y(x(S(),e));return e?t>=0:t<=g["scroll"+v("Width")]-Le(k)[v("width")]}(e>t)&&(I(),b(x(a,e>t),!0)),s(4),o(ut,t,n,e),r.start(t,(function(){s(3),o(ct,t,n,e),i&&i()}))},jump:w,translate:b,shift:x,cancel:I,toIndex:function(e){for(var n=t.Slides.get(),r=0,i=1/0,a=0;a<n.length;a++){var o=n[a].index,s=Xe(E(o,!0)-e);if(!(s<=i))break;i=s,r=o}return r},toPosition:E,getPosition:S,getLimit:T,exceededLimit:C,reposition:_}},Controller:function(e,t,n){var r,i,a,o=Mt(e).on,s=t.Move,u=s.getPosition,c=s.getLimit,l=s.toPosition,h=t.Slides,f=h.isEnough,d=h.getLength,p=e.is(An),v=e.is(Cn),y=$(w,!1),m=$(w,!0),g=n.start||0,k=g;function _(){r=d(!0),i=n.perMove,a=n.perPage;var e=et(g,0,r-1);e!==g&&(g=e,s.reposition())}function w(e,t){var n=i||(C()?1:a),r=b(g+n*(e?-1:1),g,!(i||C()));return-1===r&&v&&!Ze(u(),c(!e),1)?e?0:I():t?r:x(r)}function b(t,i,o){if(f()){var s=I(),c=function(t){if(v&&"move"===n.trimSpace&&t!==g)for(var r=u();r===l(t,!0)&&$e(t,0,e.length-1,!n.rewind);)t<g?--t:++t;return t}(t);c!==t&&(i=t,t=c,o=!1),t<0||t>s?t=$e(0,t,i,!0)||$e(s,i,t,!0)?E(S(t)):p?o?t<0?-(r%a||a):r:t:n.rewind?t<0?s:0:-1:o&&t!==i&&(t=E(S(i)+(t<i?-1:1)))}else t=-1;return t}function x(e){return p?(e+r)%r||0:e}function I(){return Qe(r-(C()||p&&i?1:a),0)}function E(e){return et(C()?e:a*e,0,I())}function S(e){return C()?e:Ye((e>=I()?r-1:e)/a)}function T(e){e!==g&&(k=g,g=e)}function C(){return!ue(n.focus)||n.isNavigation}function A(){return e.state.is([4,5])&&!!n.waitForTransition}return{mount:function(){_(),o([gt,mt],_)},go:function(e,t,n){if(!A()){var r=function(e){var t=g;if(se(e)){var n=e.match(/([+\-<>])(\d+)?/)||[],r=n[1],i=n[2];"+"===r||"-"===r?t=b(g+ +(""+r+(+i||1)),g):">"===r?t=i?E(+i):y(!0):"<"===r&&(t=m(!0))}else t=p?e:et(e,0,I());return t}(e),i=x(r);i>-1&&(t||i!==g)&&(T(i),s.move(r,i,k,n))}},scroll:function(e,n,r,i){t.Scroll.scroll(e,n,r,(function(){T(x(s.toIndex(s.getPosition()))),i&&i()}))},getNext:y,getPrev:m,getAdjacent:w,getEnd:I,setIndex:T,getIndex:function(e){return e?k:g},toIndex:E,toPage:S,toDest:function(e){var t=s.toIndex(e);return v?et(t,0,I()):t},hasFocus:C,isBusy:A}},Arrows:function(e,t,n){var r,i,a=Mt(e),o=a.on,s=a.bind,u=a.emit,c=n.classes,l=n.i18n,h=t.Elements,f=t.Controller,d=h.arrows,p=h.track,v=d,y=h.prev,m=h.next,g={};function k(){!function(){var e=n.arrows;!e||y&&m||(v=d||Ae("div",c.arrows),y=x(!0),m=x(!1),r=!0,me(v,[y,m]),!d&&ge(v,p));y&&m&&(Ie(g,{prev:y,next:m}),Pe(v,e?"":"none"),ye(v,i=cn+"--"+n.direction),e&&(o([ct,mt,Et],I),s(m,"click",$(b,">")),s(y,"click",$(b,"<")),I(),Ce([y,m],Gt,p.id),u(Tt,y,m)))}(),o(gt,_)}function _(){w(),k()}function w(){a.destroy(),Be(v,i),r?(Me(d?[y,m]:v),y=m=null):Te([y,m],nn)}function b(e){f.go(e,!0)}function x(e){return Fe('<button class="'+c.arrow+" "+(e?c.prev:c.next)+'" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40" focusable="false"><path d="'+(n.arrowPath||"m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z")+'" />')}function I(){var t=e.index,n=f.getPrev(),r=f.getNext(),i=n>-1&&t<n?l.last:l.prev,a=r>-1&&t>r?l.first:l.next;y.disabled=n<0,m.disabled=r<0,Ce(y,Yt,i),Ce(m,Yt,a),u(Ct,y,m,n,r)}return{arrows:g,mount:k,destroy:w}},Autoplay:function(e,t,n){var r,i,a=Mt(e),o=a.on,s=a.bind,u=a.emit,c=Ft(n.interval,e.go.bind(e,">"),(function(e){var t=h.bar;t&&Ne(t,"width",100*e+"%"),u(Dt,e)})),l=c.isPaused,h=t.Elements,f=t.Elements,d=f.root,p=f.toggle,v=n.autoplay,y="pause"===v;function m(){l()&&t.Slides.isEnough()&&(c.start(!n.resetProgress),i=r=y=!1,_(),u(Rt))}function g(e){void 0===e&&(e=!0),y=!!e,_(),l()||(c.pause(),u(Ot))}function k(){y||(r||i?g(!1):m())}function _(){p&&(ve(p,mn,!y),Ce(p,Yt,n.i18n[y?"play":"pause"]))}function w(e){var r=t.Slides.getAt(e);c.set(r&&+De(r.slide,"data-splide-interval")||n.interval)}return{mount:function(){v&&(!function(){n.pauseOnHover&&s(d,"mouseenter mouseleave",(function(e){r="mouseenter"===e.type,k()}));n.pauseOnFocus&&s(d,"focusin focusout",(function(e){i="focusin"===e.type,k()}));p&&s(p,"click",(function(){y?m():g(!0)}));o([ut,It,mt],c.rewind),o(ut,w)}(),p&&Ce(p,Gt,h.track.id),y||m(),_())},destroy:c.cancel,play:m,pause:g,isPaused:l}},Cover:function(e,t,n){var r=Mt(e).on;function i(e){t.Slides.forEach((function(t){var n=we(t.container||t.slide,"img");n&&n.src&&a(e,n,t)}))}function a(e,t,n){n.style("background",e?'center/cover no-repeat url("'+t.src+'")':"",!0),Pe(t,e?"none":"")}return{mount:function(){n.cover&&(r(Lt,$(a,!0)),r([ot,gt,mt],$(i,!0)))},destroy:$(i,!1)}},Scroll:function(e,t,n){var r,i,a=Mt(e),o=a.on,s=a.emit,u=e.state.set,c=t.Move,l=c.getPosition,h=c.getLimit,f=c.exceededLimit,d=c.translate,p=1;function v(e,n,a,o,h){var f=l();if(g(),a){var d=t.Layout.sliderSize(),v=tt(e)*d*Ye(Xe(e)/d)||0;e=c.toPosition(t.Controller.toDest(e%d))+v}var k=Ze(f,e,1);p=1,n=k?0:n||Qe(Xe(e-f)/1.5,800),i=o,r=Ft(n,y,$(m,f,e,h),1),u(5),s(It),r.start()}function y(){u(3),i&&i(),s(Et)}function m(t,r,i,a){var o=l(),s=t+(r-t)*function(e){var t=n.easingFunc;return t?t(e):1-Math.pow(1-e,4)}(a),u=(s-o)*p;d(o+u),e.is(Cn)&&!i&&f()&&(p*=.6,Xe(u)<10&&v(h(f(!0)),600,!1,void 0,!0))}function g(){r&&r.cancel()}function k(){r&&!r.isPaused()&&(g(),y())}return{mount:function(){o(ut,g),o([gt,mt],k)},destroy:g,scroll:v,cancel:k}},Drag:function(e,t,n){var r,i,a,o,s,u,c,l,h=Mt(e),f=h.on,d=h.emit,p=h.bind,v=h.unbind,y=e.state,m=t.Move,g=t.Scroll,k=t.Controller,_=t.Elements.track,w=t.Media.reduce,b=t.Direction,x=b.resolve,I=b.orient,E=m.getPosition,S=m.exceededLimit,T=!1;function C(){var e=n.drag;U(!e),o="free"===e}function A(e){if(u=!1,!c){var t=j(e);!function(e){var t=n.noDrag;return!ke(e,".splide__pagination__page, ."+ln)&&(!t||!ke(e,t))}(e.target)||!t&&e.button||(k.isBusy()?je(e,!0):(l=t?_:window,s=y.is([4,5]),a=null,p(l,Sn,N,Rn),p(l,Tn,P,Rn),m.cancel(),g.cancel(),D(e)))}}function N(t){if(y.is(6)||(y.set(6),d(wt)),t.cancelable)if(s){m.translate(r+O(t)/(T&&e.is(Cn)?5:1));var i=L(t)>200,a=T!==(T=S());(i||a)&&D(t),u=!0,d(bt),je(t)}else(function(e){return Xe(O(e))>Xe(O(e,!0))})(t)&&(s=function(e){var t=n.dragMinThreshold,r=ie(t),i=r&&t.mouse||0,a=(r?t.touch:+t)||10;return Xe(O(e))>(j(e)?a:i)}(t),je(t))}function P(r){y.is(6)&&(y.set(3),d(xt)),s&&(!function(r){var i=function(t){if(e.is(An)||!T){var n=L(t);if(n&&n<200)return O(t)/n}return 0}(r),a=function(e){return E()+tt(e)*He(Xe(e)*(n.flickPower||600),o?1/0:t.Layout.listSize()*(n.flickMaxPages||1))}(i),s=n.rewind&&n.rewindByDrag;w(!1),o?k.scroll(a,0,n.snap):e.is(Nn)?k.go(I(tt(i))<0?s?"<":"-":s?">":"+"):e.is(Cn)&&T&&s?k.go(S(!0)?">":"<"):k.go(k.toDest(a),!0);w(!0)}(r),je(r)),v(l,Sn,N),v(l,Tn,P),s=!1}function R(e){!c&&u&&je(e,!0)}function D(e){a=i,i=e,r=E()}function O(e,t){return F(e,t)-F(M(e),t)}function L(e){return qe(e)-qe(M(e))}function M(e){return i===e&&a||i}function F(e,t){return(j(e)?e.changedTouches[0]:e)["page"+x(t?"Y":"X")]}function j(e){return"undefined"!==typeof TouchEvent&&e instanceof TouchEvent}function U(e){c=e}return{mount:function(){p(_,Sn,te,Rn),p(_,Tn,te,Rn),p(_,En,A,Rn),p(_,"click",R,{capture:!0}),p(_,"dragstart",je),f([ot,gt],C)},disable:U,isDragging:function(){return s}}},Keyboard:function(e,t,n){var r,i,a=Mt(e),o=a.on,s=a.bind,u=a.unbind,c=e.root,l=t.Direction.resolve;function h(){var e=n.keyboard;e&&(r="global"===e?window:c,s(r,Ln,p))}function f(){u(r,Ln)}function d(){var e=i;i=!0,ee((function(){i=e}))}function p(t){if(!i){var n=On(t);n===l(jt)?e.go("<"):n===l(Ut)&&e.go(">")}}return{mount:function(){h(),o(gt,f),o(gt,h),o(ut,d)},destroy:f,disable:function(e){i=e}}},LazyLoad:function(e,t,n){var r=Mt(e),i=r.on,a=r.off,o=r.bind,s=r.emit,u="sequential"===n.lazyLoad,c=[ot,mt,ct,Et],l=[];function h(){X(l),t.Slides.forEach((function(e){Ve(e.slide,"[data-splide-lazy], [data-splide-lazy-srcset]").forEach((function(t){var r=De(t,Mn),i=De(t,Fn);if(r!==t.src||i!==t.srcset){var a=n.classes.spinner,o=t.parentElement,s=we(o,"."+a)||Ae("span",a,o);l.push([t,e,s]),t.src||Pe(t,"none")}}))})),u&&v()}function f(){(l=l.filter((function(t){var r=n.perPage*((n.preloadPages||1)+1)-1;return!t[1].isWithin(e.index,r)||d(t)}))).length||a(c)}function d(e){var t=e[0];ye(e[1].slide,wn),o(t,"load error",$(p,e)),Ce(t,"src",De(t,Mn)),Ce(t,"srcset",De(t,Fn)),Te(t,Mn),Te(t,Fn)}function p(e,t){var n=e[0],r=e[1];Be(r.slide,wn),"error"!==t.type&&(Me(e[2]),Pe(n,""),s(Lt,n,r),s(kt)),u&&v()}function v(){l.length&&d(l.shift())}return{mount:function(){n.lazyLoad&&(h(),i(mt,h),u||i(c,f))},destroy:$(X,l)}},Pagination:function(e,t,n){var r,i,a=Mt(e),o=a.on,s=a.emit,u=a.bind,c=t.Slides,l=t.Elements,h=t.Controller,f=h.hasFocus,d=h.getIndex,p=h.go,v=t.Direction.resolve,y=[];function m(){r&&(Me(l.pagination?Z(r.children):r),Be(r,i),X(y),r=null),a.destroy()}function g(e){p(">"+e,!0)}function k(e,t){var n=y.length,r=On(t),i=_(),a=-1;r===v(Ut,!1,i)?a=++e%n:r===v(jt,!1,i)?a=(--e+n)%n:"Home"===r?a=0:"End"===r&&(a=n-1);var o=y[a];o&&(Re(o.button),p(">"+a),je(t,!0))}function _(){return n.paginationDirection||n.direction}function w(e){return y[h.toPage(e)]}function b(){var e=w(d(!0)),t=w(d());if(e){var n=e.button;Be(n,mn),Te(n,Qt),Ce(n,Kt,-1)}if(t){var i=t.button;ye(i,mn),Ce(i,Qt,!0),Ce(i,Kt,"")}s(Nt,{list:r,items:y},e,t)}return{items:y,mount:function t(){m(),o([gt,mt],t),n.pagination&&c.isEnough()&&(o([ut,It,Et],b),function(){var t=e.length,a=n.classes,o=n.i18n,s=n.perPage,h=f()?t:Je(t/s);ye(r=l.pagination||Ae("ul",a.pagination,l.track.parentElement),i=dn+"--"+_()),Ce(r,Wt,"tablist"),Ce(r,Yt,o.select),Ce(r,Zt,_()===qt?"vertical":"");for(var d=0;d<h;d++){var p=Ae("li",null,r),v=Ae("button",{class:a.page,type:"button"},p),m=c.getIn(d).map((function(e){return e.slide.id})),w=!f()&&s>1?o.pageX:o.slideX;u(v,"click",$(g,d)),n.paginationKeyboard&&u(v,"keydown",$(k,d)),Ce(p,Wt,"presentation"),Ce(v,Wt,"tab"),Ce(v,Gt,m.join(" ")),Ce(v,Yt,nt(w,d+1)),Ce(v,Kt,-1),y.push({li:p,button:v,page:d})}}(),b(),s(At,{list:r,items:y},w(e.index)))},destroy:m,getAt:w,update:b}},Sync:function(e,t,n){var r=n.isNavigation,i=n.slideFocus,a=[];function o(){e.splides.forEach((function(t){t.isParent||(u(e,t.splide),u(t.splide,e))})),r&&function(){var t=Mt(e),n=t.on;n(ht,l),n(yt,h),n([ot,gt],c),a.push(t),t.emit(Pt,e.splides)}()}function s(){a.forEach((function(e){e.destroy()})),X(a)}function u(e,t){var n=Mt(e);n.on(ut,(function(e,n,r){t.go(t.is(An)?r:e)})),a.push(n)}function c(){Ce(t.Elements.list,Zt,n.direction===qt?"vertical":"")}function l(t){e.go(t.index)}function h(e,t){de(jn,On(t))&&(l(e),je(t))}return{setup:function(){e.options={slideFocus:ue(i)?r:i}},mount:o,destroy:s,remount:function(){s(),o()}}},Wheel:function(e,t,n){var r=Mt(e).bind,i=0;function a(r){if(r.cancelable){var a=r.deltaY,o=a<0,s=qe(r),u=n.wheelMinThreshold||0,c=n.wheelSleep||0;Xe(a)>u&&s-i>c&&(e.go(o?"<":">"),i=s),function(r){return!n.releaseWheel||e.state.is(4)||-1!==t.Controller.getAdjacent(r)}(o)&&je(r)}}return{mount:function(){n.wheel&&r(t.Elements.track,"wheel",a,Rn)}}},Live:function(e,t,n){var r=Mt(e).on,i=t.Elements.track,a=n.live&&!n.isNavigation,o=Ae("span","splide__sr");function s(e){a&&Ce(i,en,e?"off":"polite")}return{mount:function(){a&&(s(!t.Autoplay.isPaused()),Ce(i,tn,"additions"),o.textContent="\u2026",r(Rt,$(s,!0)),r(Ot,$(s,!1)),r([ct,Et],$(me,i,o)))},disable:s,destroy:function(){Te(i,[en,tn]),Me(o)}}}}),Vn={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:In,i18n:{prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function Bn(e,t,n){var r=Mt(e).on;return{mount:function(){r([ot,mt],(function(){ee((function(){t.Slides.style("transition","opacity "+n.speed+"ms "+n.easing)}))}))},start:function(e,n){var r=t.Elements.track;Ne(r,"height",ze(Le(r).height)),ee((function(){n(),Ne(r,"height","")}))},cancel:te}}function qn(e,t,n){var r,i=Mt(e).bind,a=t.Move,o=t.Controller,s=t.Scroll,u=t.Elements.list,c=$(Ne,u,"transition");function l(){c(""),s.cancel()}return{mount:function(){i(u,"transitionend",(function(e){e.target===u&&r&&(l(),r())}))},start:function(t,i){var u=a.toPosition(t,!0),l=a.getPosition(),h=function(t){var r=n.rewindSpeed;if(e.is(Cn)&&r){var i=o.getIndex(!0),a=o.getEnd();if(0===i&&t>=a||i>=a&&0===t)return r}return n.speed}(t);Xe(u-l)>=1&&h>=1?n.useScroll?s.scroll(u,h,!1,i):(c("transform "+h+"ms "+n.easing),a.translate(u,!0),r=i):(a.jump(t),i())},cancel:l}}var zn=function(){function e(t,n){this.event=Mt(),this.Components={},this.state=function(e){var t=e;return{set:function(e){t=e},is:function(e){return de(he(e),t)}}}(1),this.splides=[],this._o={},this._E={};var r=se(t)?Ue(document,t):t;Ge(r,r+" is invalid."),this.root=r,n=Ee({label:De(r,Yt)||"",labelledby:De(r,Jt)||""},Vn,e.defaults,n||{});try{Ee(n,JSON.parse(De(r,Ke)))}catch(i){Ge(!1,"Invalid JSON")}this._o=Object.create(Ee({},n))}var t,n,r,i=e.prototype;return i.mount=function(e,t){var n=this,r=this.state,i=this.Components;return Ge(r.is([1,7]),"Already mounted!"),r.set(1),this._C=i,this._T=t||this._T||(this.is(Nn)?Bn:qn),this._E=e||this._E,xe(Ie({},Un,this._E,{Transition:this._T}),(function(e,t){var r=e(n,i,n._o);i[t]=r,r.setup&&r.setup()})),xe(i,(function(e){e.mount&&e.mount()})),this.emit(ot),ye(this.root,"is-initialized"),r.set(3),this.emit(st),this},i.sync=function(e){return this.splides.push({splide:e}),e.splides.push({splide:this,isParent:!0}),this.state.is(3)&&(this._C.Sync.remount(),e.Components.Sync.remount()),this},i.go=function(e){return this._C.Controller.go(e),this},i.on=function(e,t){return this.event.on(e,t),this},i.off=function(e){return this.event.off(e),this},i.emit=function(e){var t;return(t=this.event).emit.apply(t,[e].concat(Z(arguments,1))),this},i.add=function(e,t){return this._C.Slides.add(e,t),this},i.remove=function(e){return this._C.Slides.remove(e),this},i.is=function(e){return this._o.type===e},i.refresh=function(){return this.emit(mt),this},i.destroy=function(e){void 0===e&&(e=!0);var t=this.event,n=this.state;return n.is(1)?Mt(this).on(st,this.destroy.bind(this,e)):(xe(this._C,(function(t){t.destroy&&t.destroy(e)}),!0),t.emit(St),t.destroy(),e&&X(this.splides),n.set(7)),this},t=e,(n=[{key:"options",get:function(){return this._o},set:function(e){this._C.Media.set(e,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}])&&Q(t.prototype,n),r&&Q(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Wn=zn;Wn.defaults={},Wn.STATES=J;var Kn=[[ot,"onMounted"],[st,"onReady"],[ut,"onMove"],[ct,"onMoved"],[ht,"onClick"],[ft,"onActive"],[dt,"onInactive"],[pt,"onVisible"],[vt,"onHidden"],[mt,"onRefresh"],[gt,"onUpdated"],[kt,"onResize"],[_t,"onResized"],[wt,"onDrag"],[bt,"onDragging"],[xt,"onDragged"],[It,"onScroll"],[Et,"onScrolled"],[St,"onDestroy"],[Tt,"onArrowsMounted"],[Ct,"onArrowsUpdated"],[At,"onPaginationMounted"],[Nt,"onPaginationUpdated"],[Pt,"onNavigationMounted"],[Rt,"onAutoplayPlay"],[Dt,"onAutoplayPlaying"],[Ot,"onAutoplayPause"],[Lt,"onLazyLoadLoaded"]];function Gn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function Hn(e){return null!==e&&"object"===typeof e}function Qn(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&!e.some((function(e,n){return!Qn(e,t[n])}));if(Hn(e)&&Hn(t)){var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&!n.some((function(n){return!Object.prototype.hasOwnProperty.call(t,n)||!Qn(e[n],t[n])}))}return e===t}function Yn(e,t){var n=e;return function(e,t){if(e)for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if("__proto__"!==i&&!1===t(e[i],i))break}}(t,(function(e,t){Array.isArray(e)?n[t]=e.slice():Hn(e)?n[t]=Yn(Hn(n[t])?n[t]:{},e):n[t]=e})),n}var Jn=function(e){var n=e.children,r=e.className,i=W(e,K);return t.createElement("div",z({className:Gn("splide__track",r)},i),t.createElement("ul",{className:"splide__list"},n))},Xn=function(e){O(r,e);var n=V(r);function r(){var e;return N(this,r),(e=n.apply(this,arguments)).splideRef=t.createRef(),e.slides=[],e}return R(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.options,n=e.extensions,r=e.transition,i=this.splideRef.current;i&&(this.splide=new Wn(i,t),this.bind(this.splide),this.splide.mount(n,r),this.options=Yn({},t||{}),this.slides=this.getSlides())}},{key:"componentWillUnmount",value:function(){this.splide&&(this.splide.destroy(),this.splide=void 0),this.options=void 0,this.slides.length=0}},{key:"componentDidUpdate",value:function(){if(this.splide){var e=this.props.options;e&&!Qn(this.options,e)&&(this.splide.options=e,this.options=Yn({},e));var t,n,r=this.getSlides();t=this.slides,n=r,(t.length!==n.length||t.some((function(e,t){return e!==n[t]})))&&(this.splide.refresh(),this.slides=r)}}},{key:"sync",value:function(e){var t;null==(t=this.splide)||t.sync(e)}},{key:"go",value:function(e){var t;null==(t=this.splide)||t.go(e)}},{key:"getSlides",value:function(){var e;if(this.splide){var t=null==(e=this.splide.Components.Elements)?void 0:e.list.children;return t&&Array.prototype.slice.call(t)||[]}return[]}},{key:"bind",value:function(e){var t=this;Kn.forEach((function(n){var r=w(n,2),i=r[0],a=r[1],o=t.props[a];"function"===typeof o&&e.on(i,(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];o.apply(void 0,[e].concat(n))}))}))}},{key:"omit",value:function(e,t){return t.forEach((function(t){Object.prototype.hasOwnProperty.call(e,t)&&delete e[t]})),e}},{key:"render",value:function(){var e=this.props,n=e.className,r=e.tag,i=void 0===r?"div":r,a=e.hasTrack,o=void 0===a||a,s=e.children,u=W(e,G);return t.createElement(i,z({className:Gn("splide",n),ref:this.splideRef},this.omit(u,["options"].concat(A(Kn.map((function(e){return e[1]})))))),o?t.createElement(Jn,null,s):s)}}]),r}(t.Component),Zn=function(e){var n=e.children,r=e.className,i=W(e,H);return t.createElement("li",z({className:Gn("splide__slide",r)},i),n)},$n=function(e){var n=(0,t.useRef)();return(0,v.jsx)(Xn,{ref:n,hasTrack:e.hasTrack,"data-splide":e.dataSplide,onMoved:function(){e.moved(n)},children:e.children})},er={slider:"ImageSlider_slider__LSHgM",slider__slide:"ImageSlider_slider__slide__tpini",slider__arrow:"ImageSlider_slider__arrow__d-kOy","slider__arrow--prev":"ImageSlider_slider__arrow--prev__lyv7o","slider__arrow--next":"ImageSlider_slider__arrow--next__G8MHU",slider__num:"ImageSlider_slider__num__V77qq"},tr=function(e){var r=w((0,t.useState)(e.currentImage),2),i=r[0],a=r[1],o=e.info.map((function(e){return(0,v.jsx)(Zn,{className:er.slider__slide,children:(0,v.jsx)("img",{src:n(990)("./".concat(e.imgPath)),alt:"slide ".concat(e.id)})},e.id)})),s=function(t){switch(t){case"prev":a(i-1<1?e.info.length:i-1);break;case"next":a(i+1>e.info.length?1:i+1);break;default:a(i)}};return(0,v.jsx)(T,{onClose:e.onClose,children:(0,v.jsx)("div",{className:er.slider,children:(0,v.jsxs)($n,{hasTrack:!1,dataSplide:'{"type":"loop", "pagination": false, "start": '.concat(e.currentImage-1,"}"),moved:function(e){a(e.current.splide.index+1)},children:[(0,v.jsx)(Jn,{children:o}),(0,v.jsx)("div",{className:"splide__pagination"}),(0,v.jsxs)("div",{className:"splide__arrows",children:[(0,v.jsx)("button",{onClick:function(){s("prev")},className:"splide__arrow splide__arrow--prev ".concat(er.slider__arrow," ").concat(er["slider__arrow--prev"]),children:(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 40 40",width:"40",height:"40",focusable:"false",children:(0,v.jsx)("path",{d:"m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z"})})}),(0,v.jsxs)("div",{className:er.slider__num,children:[(0,v.jsx)("span",{className:er["slider__num-cur"],children:i})," / ",(0,v.jsx)("span",{children:e.info.length})]}),(0,v.jsx)("button",{onClick:function(){s("next")},className:"splide__arrow splide__arrow--next ".concat(er.slider__arrow," ").concat(er["slider__arrow--next"]),children:(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 40 40",width:"40",height:"40",focusable:"false",children:(0,v.jsx)("path",{d:"m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z"})})})]})]})})})},nr="Gallery_image__lQ6OQ",rr="Gallery_image-wrap__xFSlZ",ir="Gallery_image-inr__cBLWU",ar="Gallery_image-row__kch1u",or="Gallery_image__btn__AulPr",sr="Gallery_image__btn--down__XUSfP",ur="Gallery_image__btn--top__UnfNY",cr="Gallery_image__btn-wrap__i8ba5",lr=[{id:1,imgPath:"dummy-1.jpg"},{id:2,imgPath:"dummy-2.jpg"},{id:3,imgPath:"dummy-3.jpg"},{id:4,imgPath:"dummy-1.jpg"},{id:5,imgPath:"dummy-2.jpg"},{id:6,imgPath:"dummy-3.jpg"},{id:7,imgPath:"dummy-1.jpg"},{id:8,imgPath:"dummy-2.jpg"},{id:9,imgPath:"dummy-3.jpg"},{id:10,imgPath:"dummy-1.jpg"}],hr=function(e){var r=w((0,t.useState)(!1),2),i=r[0],a=r[1],o=w((0,t.useState)(!1),2),s=o[0],u=o[1],c=w((0,t.useState)(null),2),l=c[0],h=c[1],f=lr.filter((function(e){return e.id%2===1})).map((function(e){return(0,v.jsx)("button",{onClick:function(){p(e.id)},className:nr,children:(0,v.jsx)("img",{src:n(990)("./".concat(e.imgPath)),alt:"slide ".concat(e.id)})},e.id)})),d=lr.filter((function(e){return e.id%2===0})).map((function(e){return(0,v.jsx)("button",{onClick:function(){p(e.id)},className:nr,children:(0,v.jsx)("img",{src:n(990)("./".concat(e.imgPath)),alt:"slide ".concat(e.id)})},e.id)})),p=function(e){h(e),u(!0)};return(0,v.jsxs)("section",{id:"gallery",children:[(0,v.jsx)("div",{"data-scroll-target":"opacity",className:"section-flower",children:"\ud83c\udf3b"}),(0,v.jsxs)("div",{"data-scroll-target":"show-up",children:[(0,v.jsx)("div",{id:"image-wrap",className:rr,children:(0,v.jsxs)("div",{className:ir,children:[(0,v.jsx)("div",{className:ar,children:f}),(0,v.jsx)("div",{className:ar,children:d})]})}),(0,v.jsxs)("button",{onClick:function(){var e=document.querySelector("section#gallery #image-wrap"),t=document.querySelectorAll("section#gallery #image-wrap div div"),n=t[0].clientHeight>t[1].clientHeight?t[0].clientHeight:t[1].clientHeight;i?(a(!1),e.style.height="550px"):(a(!0),e.style.height="".concat(n,"px"))},className:cr,children:[(0,v.jsxs)("svg",{className:"".concat(i?ur:sr," ").concat(or),width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,v.jsx)("path",{d:"M13.7893 0.393823C14.295 -0.131274 15.115 -0.131274 15.6207 0.393823C16.1264 0.91892 16.1264 1.77027 15.6207 2.29537L10.1264 8L15.6207 13.7046C16.1264 14.2297 16.1264 15.0811 15.6207 15.6062C15.115 16.1313 14.295 16.1313 13.7893 15.6062L7.3793 8.95077C6.87357 8.42567 6.87357 7.57432 7.3793 7.04923L13.7893 0.393823Z",fill:"#7c7f7f"}),(0,v.jsx)("path",{d:"M6.78928 0.393823C7.29501 -0.131274 8.11497 -0.131274 8.6207 0.393823C9.12643 0.91892 9.12643 1.77027 8.6207 2.29537L3.12643 8L8.6207 13.7046C9.12643 14.2297 9.12643 15.0811 8.6207 15.6062C8.11497 16.1313 7.29501 16.1313 6.78928 15.6062L0.3793 8.95077C-0.126432 8.42567 -0.126434 7.57432 0.3793 7.04923L6.78928 0.393823Z",fill:"#7c7f7f"})]}),(0,v.jsx)("div",{children:i?"\uc811\uae30":"\ub354 \ubcf4\uae30"})]})]}),s&&(0,v.jsx)(tr,{onClose:function(){u(!1)},info:lr,currentImage:l})]})},fr={date__day:"Calendar_date__day__wMqpW",date__time:"Calendar_date__time__RO7rt",calendar:"Calendar_calendar__8Ud7E",calendar__head:"Calendar_calendar__head__it2NI",calendar__item:"Calendar_calendar__item__utYf2","calendar__item-wrap":"Calendar_calendar__item-wrap__HI+Vb",count:"Calendar_count__Iwsv0",count__heart:"Calendar_count__heart__GqxJi"},dr=function(e){var t="";return function(){var e=new Date,n=new Date(2022,11,12).getTime()-e.getTime(),r=Math.ceil(n/864e5);r>0?t="".concat(r,"\uc77c \ub0a8\uc558\uc2b5\ub2c8\ub2e4."):r<0?t="".concat(-r,"\uc77c \uc9c0\ub0ac\uc2b5\ub2c8\ub2e4."):0===r&&(t="\uc624\ub298\uc785\ub2c8\ub2e4.\ud83d\ude0d")}(),(0,v.jsxs)("section",{children:[(0,v.jsxs)("div",{"data-scroll-target":"show-up",children:[(0,v.jsxs)("div",{className:"".concat(fr.date),children:[(0,v.jsx)("div",{className:"".concat(fr.date__day),children:"12\uc6d4 12\uc77c"}),(0,v.jsx)("div",{className:"".concat(fr.date__time),children:"\ud1a0\uc694\uc77c \uc624\ud6c4 12\uc2dc 00\ubd84"})]}),(0,v.jsxs)("div",{className:"".concat(fr.calendar),children:[(0,v.jsx)("div",{className:"".concat(fr.calendar__head),children:"SUN"}),(0,v.jsx)("div",{className:"".concat(fr.calendar__head),children:"MON"}),(0,v.jsx)("div",{className:"".concat(fr.calendar__head),children:"TUE"}),(0,v.jsx)("div",{className:"".concat(fr.calendar__head),children:"WED"}),(0,v.jsx)("div",{className:"".concat(fr.calendar__head),children:"THU"}),(0,v.jsx)("div",{className:"".concat(fr.calendar__head),children:"FRI"}),(0,v.jsx)("div",{className:"".concat(fr.calendar__head),children:"SAT"}),(0,v.jsx)("div",{}),(0,v.jsx)("div",{}),(0,v.jsx)("div",{}),(0,v.jsx)("div",{}),(0,v.jsx)("div",{children:"1"}),(0,v.jsx)("div",{children:"2"}),(0,v.jsx)("div",{children:"3"}),(0,v.jsx)("div",{children:"4"}),(0,v.jsx)("div",{children:"5"}),(0,v.jsx)("div",{children:"6"}),(0,v.jsx)("div",{children:"7"}),(0,v.jsx)("div",{children:"8"}),(0,v.jsx)("div",{children:"9"}),(0,v.jsx)("div",{children:"10"}),(0,v.jsx)("div",{children:"11"}),(0,v.jsx)("div",{className:"".concat(fr["calendar__item-wrap"]),children:(0,v.jsx)("span",{className:"".concat(fr.calendar__item),children:"12"})}),(0,v.jsx)("div",{children:"13"}),(0,v.jsx)("div",{children:"14"}),(0,v.jsx)("div",{children:"15"}),(0,v.jsx)("div",{children:"16"}),(0,v.jsx)("div",{children:"17"}),(0,v.jsx)("div",{children:"18"}),(0,v.jsx)("div",{children:"19"}),(0,v.jsx)("div",{children:"20"}),(0,v.jsx)("div",{children:"21"}),(0,v.jsx)("div",{children:"22"}),(0,v.jsx)("div",{children:"23"}),(0,v.jsx)("div",{children:"24"}),(0,v.jsx)("div",{children:"25"}),(0,v.jsx)("div",{children:"26"}),(0,v.jsx)("div",{children:"27"}),(0,v.jsx)("div",{children:"28"}),(0,v.jsx)("div",{children:"29"}),(0,v.jsx)("div",{children:"30"}),(0,v.jsx)("div",{children:"31"})]})]}),(0,v.jsxs)("div",{"data-scroll-target":"show-up",className:"".concat(fr.count),children:["\uc5ec\uc6c5 ",(0,v.jsx)("span",{className:"".concat(fr.count__heart),children:"\u2665\ufe0e"})," \uc740\uc194\uc758 \uacb0\ud63c\uc2dd\uc774 ",t]})]})};function pr(){pr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(S){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return E()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=u;var l={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(I([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=h.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,s){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==F(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return f.prototype=d,s(m,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(k.prototype),s(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),s(m,o,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;b(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function vr(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(za){return void n(za)}s.done?t(u):Promise.resolve(u).then(r,i)}function yr(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){vr(a,r,i,o,s,"next",e)}function s(e){vr(a,r,i,o,s,"throw",e)}o(void 0)}))}}function mr(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=k(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function gr(e,t,n){return gr=M()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&D(i,n.prototype),i},gr.apply(null,arguments)}function kr(e){var t="function"===typeof Map?new Map:void 0;return kr=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return gr(e,arguments,L(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),D(n,e)},kr(e)}var _r=!1,wr=!1,br="${JSCORE_VERSION}",xr=function(e,t){if(!e)throw Ir(t)},Ir=function(e){return new Error("Firebase Database ("+br+") INTERNAL ASSERT FAILED: "+e)},Er=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Sr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Er(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Tr=function(e){var t=Er(e);return Sr.encodeByteArray(t,!0)},Cr=function(e){return Tr(e).replace(/\./g,"")},Ar=function(e){try{return Sr.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Nr(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Nr(e[n],t[n]));return e}var Pr=function(){function e(){var t=this;N(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return R(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Rr(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Cr(JSON.stringify({alg:"none",type:"JWT"})),Cr(JSON.stringify(a)),""].join(".")}function Dr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Or(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dr())}function Lr(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Mr(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Fr(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function jr(){var e=Dr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ur(){return!0===_r||!0===wr}function Vr(){return"object"===typeof indexedDB}var Br=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return N(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(j(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(j(a),qr.prototype.create),a}return R(n)}(kr(Error)),qr=function(){function e(t,n,r){N(this,e),this.service=t,this.serviceName=n,this.errors=r}return R(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?zr(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Br(n,a,t);return o}}]),e}();function zr(e,t){return e.replace(Wr,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Wr=/\{\$([^}]+)}/g;function Kr(e){return JSON.parse(e)}function Gr(e){return JSON.stringify(e)}var Hr=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Kr(Ar(a[0])||""),n=Kr(Ar(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Qr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Yr(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Jr(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Xr(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Zr(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if($r(s)&&$r(u)){if(!Zr(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function $r(e){return null!==e&&"object"===typeof e}function ei(e){for(var t=[],n=function(){var e=w(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ti(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=w(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ni(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var ri=function(){function e(){N(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return R(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^l&(h^f),u=1518500249):(s=l^h^f,u=1859775393):p<60?(s=l&h|f&(l|h),u=2400959708):(s=l^h^f,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function ii(e,t){var n=new ai(e,t);return n.subscribe.bind(n)}var ai=function(){function e(t,n){var r=this;N(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return R(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=mr(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=oi),void 0===r.error&&(r.error=oi),void 0===r.complete&&(r.complete=oi);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function oi(){}function si(e,t){return"".concat(e," failed: ").concat(t," argument ")}var ui=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function ci(e){return e&&e._delegate?e._delegate:e}var li=function(){function e(t,n,r){N(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return R(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),hi="[DEFAULT]",fi=function(){function e(t,n){N(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return R(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Pr;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:hi})}catch(u){}var t,n=mr(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=w(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hi;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=yr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(A(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),A(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hi;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hi;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=mr(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=w(i.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);r===l&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=mr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(yR){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===hi?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(yR){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hi;return this.component?this.component.multipleInstances?e:hi:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var di,pi,vi=function(){function e(t){N(this,e),this.name=t,this.providers=new Map}return R(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new fi(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),yi=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(pi||(pi={}));var mi={debug:pi.DEBUG,verbose:pi.VERBOSE,info:pi.INFO,warn:pi.WARN,error:pi.ERROR,silent:pi.SILENT},gi=pi.INFO,ki=(B(di={},pi.DEBUG,"log"),B(di,pi.VERBOSE,"log"),B(di,pi.INFO,"info"),B(di,pi.WARN,"warn"),B(di,pi.ERROR,"error"),di),_i=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ki[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},wi=function(){function e(t){N(this,e),this.name=t,this._logLevel=gi,this._logHandler=_i,this._userLogHandler=null,yi.push(this)}return R(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in pi))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?mi[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pi.DEBUG].concat(t)),this._logHandler.apply(this,[this,pi.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pi.VERBOSE].concat(t)),this._logHandler.apply(this,[this,pi.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pi.INFO].concat(t)),this._logHandler.apply(this,[this,pi.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pi.WARN].concat(t)),this._logHandler.apply(this,[this,pi.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pi.ERROR].concat(t)),this._logHandler.apply(this,[this,pi.ERROR].concat(t))}}]),e}();var bi,xi;var Ii=new WeakMap,Ei=new WeakMap,Si=new WeakMap,Ti=new WeakMap,Ci=new WeakMap;var Ai={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ei.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Si.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ri(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ni(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(xi||(xi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Di(this),n),Ri(Ii.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ri(e.apply(Di(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Di(this),t].concat(r));return Si.set(a,t.sort?t.sort():[t]),Ri(a)}}function Pi(e){return"function"===typeof e?Ni(e):(e instanceof IDBTransaction&&function(e){if(!Ei.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ei.set(e,t)}}(e),t=e,(bi||(bi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Ai):e);var t}function Ri(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Ri(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Ii.set(t,e)})).catch((function(){})),Ci.set(t,e),t}(e);if(Ti.has(e))return Ti.get(e);var t=Pi(e);return t!==e&&(Ti.set(e,t),Ci.set(t,e)),t}var Di=function(e){return Ci.get(e)};var Oi,Li,Mi=["get","getKey","getAll","getAllKeys","count"],Fi=["put","add","delete","clear"],ji=new Map;function Ui(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(ji.get(t))return ji.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Fi.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Mi.includes(n))){var a=function(){var e=yr(pr().mark((function e(t){var a,o,s,u,c,l,h=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return ji.set(t,a),a}}}Ai=function(e){return z(z({},e),{},{get:function(t,n,r){return Ui(t,n)||e.get(t,n,r)},has:function(t,n){return!!Ui(t,n)||e.has(t,n)}})}(Ai);var Vi=function(){function e(t){N(this,e),this.container=t}return R(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Bi="@firebase/app",qi="0.7.25",zi=new wi("@firebase/app"),Wi="[DEFAULT]",Ki=(B(Oi={},Bi,"fire-core"),B(Oi,"@firebase/app-compat","fire-core-compat"),B(Oi,"@firebase/analytics","fire-analytics"),B(Oi,"@firebase/analytics-compat","fire-analytics-compat"),B(Oi,"@firebase/app-check","fire-app-check"),B(Oi,"@firebase/app-check-compat","fire-app-check-compat"),B(Oi,"@firebase/auth","fire-auth"),B(Oi,"@firebase/auth-compat","fire-auth-compat"),B(Oi,"@firebase/database","fire-rtdb"),B(Oi,"@firebase/database-compat","fire-rtdb-compat"),B(Oi,"@firebase/functions","fire-fn"),B(Oi,"@firebase/functions-compat","fire-fn-compat"),B(Oi,"@firebase/installations","fire-iid"),B(Oi,"@firebase/installations-compat","fire-iid-compat"),B(Oi,"@firebase/messaging","fire-fcm"),B(Oi,"@firebase/messaging-compat","fire-fcm-compat"),B(Oi,"@firebase/performance","fire-perf"),B(Oi,"@firebase/performance-compat","fire-perf-compat"),B(Oi,"@firebase/remote-config","fire-rc"),B(Oi,"@firebase/remote-config-compat","fire-rc-compat"),B(Oi,"@firebase/storage","fire-gcs"),B(Oi,"@firebase/storage-compat","fire-gcs-compat"),B(Oi,"@firebase/firestore","fire-fst"),B(Oi,"@firebase/firestore-compat","fire-fst-compat"),B(Oi,"fire-js","fire-js"),B(Oi,"firebase","fire-js-all"),Oi),Gi=new Map,Hi=new Map;function Qi(e,t){try{e.container.addComponent(t)}catch(n){zi.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Yi(e,t){e.container.addOrOverwriteComponent(t)}function Ji(e){var t=e.name;if(Hi.has(t))return zi.debug("There were multiple attempts to register component ".concat(t,".")),!1;Hi.set(t,e);var n,r=mr(Gi.values());try{for(r.s();!(n=r.n()).done;){Qi(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Xi(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Zi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wi;Xi(e,t).clearInstance(n)}function $i(){Hi.clear()}var ea=(B(Li={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),B(Li,"bad-app-name","Illegal App name: '{$appName}"),B(Li,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),B(Li,"app-deleted","Firebase App named '{$appName}' already deleted"),B(Li,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),B(Li,"invalid-log-argument","First argument to `onLog` must be null or a function."),B(Li,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),B(Li,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),B(Li,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),B(Li,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Li),ta=new qr("app","Firebase",ea),na=function(){function e(t,n,r){var i=this;N(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new li("app",(function(){return i}),"PUBLIC"))}return R(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw ta.create("app-deleted",{appName:this._name})}}]),e}(),ra="9.8.2";function ia(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Wi,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw ta.create("bad-app-name",{appName:String(i)});var a=Gi.get(i);if(a){if(Zr(e,a.options)&&Zr(r,a.config))return a;throw ta.create("duplicate-app",{appName:i})}var o,s=new vi(i),u=mr(Hi.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(h){u.e(h)}finally{u.f()}var l=new na(e,r,s);return Gi.set(i,l),l}function aa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wi,t=Gi.get(e);if(!t)throw ta.create("no-app",{appName:e});return t}function oa(){return Array.from(Gi.values())}function sa(e){return ua.apply(this,arguments)}function ua(){return(ua=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Gi.has(n)){e.next=6;break}return Gi.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ca(e,t,n){var r,i=null!==(r=Ki[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void zi.warn(s.join(" "))}Ji(new li("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function la(e,t){if(null!==e&&"function"!==typeof e)throw ta.create("invalid-log-argument");!function(e,t){var n,r=mr(yi);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=mi[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:pi[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ha(e){var t;t=e,yi.forEach((function(e){e.setLogLevel(t)}))}var fa="firebase-heartbeat-store",da=null;function pa(){return da||(da=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Ri(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Ri(s.result),e.oldVersion,e.newVersion,Ri(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(fa)}}).catch((function(e){throw ta.create("storage-open",{originalErrorMessage:e.message})}))),da}function va(e){return ya.apply(this,arguments)}function ya(){return ya=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pa();case 3:return n=e.sent,e.abrupt("return",n.transaction(fa).objectStore(fa).get(ka(t)));case 7:throw e.prev=7,e.t0=e.catch(0),ta.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),ya.apply(this,arguments)}function ma(e,t){return ga.apply(this,arguments)}function ga(){return ga=yr(pr().mark((function e(t,n){var r,i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pa();case 3:return r=e.sent,i=r.transaction(fa,"readwrite"),a=i.objectStore(fa),e.next=8,a.put(n,ka(t));case 8:return e.abrupt("return",i.done);case 11:throw e.prev=11,e.t0=e.catch(0),ta.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),ga.apply(this,arguments)}function ka(e){return"".concat(e.name,"!").concat(e.options.appId)}var _a=function(){function e(t){var n=this;N(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Ia(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return R(e,[{key:"triggerHeartbeat",value:function(){var e=yr(pr().mark((function e(){var t,n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=wa(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=yr(pr().mark((function e(){var t,n,r,i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=wa(),n=ba(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Cr(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function wa(){return(new Date).toISOString().substring(0,10)}function ba(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=mr(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Ea(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Ea(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var xa,Ia=function(){function e(t){N(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return R(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Vr()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(za){t(za)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=yr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,va(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=yr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ma(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=yr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ma(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(A(r.heartbeats),A(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ea(e){return Cr(JSON.stringify({version:2,heartbeats:e})).length}xa="",Ji(new li("platform-logger",(function(e){return new Vi(e)}),"PRIVATE")),Ji(new li("heartbeat",(function(e){return new _a(e)}),"PRIVATE")),ca(Bi,qi,xa),ca(Bi,qi,"esm2017"),ca("fire-js","");var Sa="@firebase/database",Ta="0.13.0",Ca="";var Aa=function(){function e(t){N(this,e),this.domStorage_=t,this.prefix_="firebase:"}return R(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Gr(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Kr(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),Na=function(){function e(){N(this,e),this.cache_={},this.isInMemoryStorage=!0}return R(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Qr(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),Pa=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Aa(t)}}catch(n){}return new Na},Ra=Pa("localStorage"),Da=Pa("sessionStorage"),Oa=new wi("@firebase/database"),La=function(){var e=1;return function(){return e++}}(),Ma=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,xr(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new ri;n.update(t);var r=n.digest();return Sr.encodeByteArray(r)},Fa=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?Gr(r):r,t+=" "}return t},ja=null,Ua=!0,Va=function(e,t){xr(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Oa.logLevel=pi.VERBOSE,ja=Oa.log.bind(Oa),t&&Da.set("logging_enabled",!0)):"function"===typeof e?ja=e:(ja=null,Da.remove("logging_enabled"))},Ba=function(){if(!0===Ua&&(Ua=!1,null===ja&&!0===Da.get("logging_enabled")&&Va(!0)),ja){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Fa.apply(null,t);ja(r)}},qa=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Ba.apply(void 0,[e].concat(n))}},za=function(){var e="FIREBASE INTERNAL ERROR: "+Fa.apply(void 0,arguments);Oa.error(e)},Wa=function(){var e="FIREBASE FATAL ERROR: ".concat(Fa.apply(void 0,arguments));throw Oa.error(e),new Error(e)},Ka=function(){var e="FIREBASE WARNING: "+Fa.apply(void 0,arguments);Oa.warn(e)},Ga=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Ha="[MIN_NAME]",Qa="[MAX_NAME]",Ya=function(e,t){if(e===t)return 0;if(e===Ha||t===Qa)return-1;if(t===Ha||e===Qa)return 1;var n=ao(e),r=ao(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Ja=function(e,t){return e===t?0:e<t?-1:1},Xa=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Gr(t))},Za=function e(t){if("object"!==typeof t||null===t)return Gr(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=Gr(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},$a=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function eo(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var to=function(e){xr(!Ga(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var no=new RegExp("^-?(0*)\\d{1,10}$"),ro=-2147483648,io=2147483647,ao=function(e){if(no.test(e)){var t=Number(e);if(t>=ro&&t<=io)return t}return null},oo=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Ka("Exception was thrown by user callback.",e),t}),Math.floor(0))}},so=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},uo=function(){function e(t,n){var r=this;N(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return R(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Ka('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),co=function(){function e(t,n,r){var i=this;N(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return R(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Ba("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ka(e)}}]),e}(),lo=function(){function e(t){N(this,e),this.accessToken=t}return R(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();lo.OWNER="owner";var ho="5",fo=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,po="websocket",vo="long_polling",yo=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];N(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ra.get("host:"+t)||this._host}return R(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ra.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function mo(e,t,n){var r;if(xr("string"===typeof t,"typeof type must == string"),xr("object"===typeof n,"typeof params must == object"),t===po)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==vo)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return eo(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var go=function(){function e(){N(this,e),this.counters_={}}return R(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Qr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Nr(void 0,this.counters_)}}]),e}(),ko={},_o={};function wo(e){var t=e.toString();return ko[t]||(ko[t]=new go),ko[t]}var bo=function(){function e(t){N(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return R(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&oo((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),xo="start",Io="close",Eo=function(){function e(t,n,r,i,a,o,s){var u=this;N(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=qa(t),this.stats_=wo(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),mo(n,vo,e)}}return R(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new bo(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Ur()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new So((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===xo)n.id=a,n.password=o;else{if(i!==Io)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=ho,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&fo.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=Gr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Tr(t),r=$a(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Ur()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=Gr(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Ur()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),So=function(){function e(t,n,r,i){if(N(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Ur())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=La(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){Ba("frame writing exception"),s.stack&&Ba(s.stack),Ba(s)}}}return R(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Ur()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Ba("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ba("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),To=null;"undefined"!==typeof MozWebSocket?To=MozWebSocket:"undefined"!==typeof WebSocket&&(To=WebSocket);var Co=function(){function e(t,n,r,i,a,o,s){N(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=qa(this.connId),this.stats_=wo(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return R(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ra.set("previous_websocket_failure",!0);try{if(Ur()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat(ho,"/").concat(Ca,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/yes-wedding",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_KAKAO_APPKEY:"3dc1d032c1b57d7534b09b562373275d",REACT_APP_FIREBASE_APIKEY:"AIzaSyCmdbkjtH47HqFKrnnCg0nmuSch9bmoXp0",REACT_APP_FIREBASE_AUTHDOMAIN:"yes-wedding-29451.firebaseapp.com",REACT_APP_FIREBASE_DATABASEURL:"https://yes-wedding-29451-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_PROJECTID:"yes-wedding-29451",REACT_APP_FIREBASE_STORAGEBUCKET:"yes-wedding-29451.appspot.com",REACT_APP_FIREBASE_MESSAGINGSENDERID:"1010300792442",REACT_APP_FIREBASE_APPID:"1:1010300792442:web:d6858688466e8b838955c3"},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o})}this.mySock=new To(this.connURL,[],undefined)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Ra.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Kr(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(xr(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=Gr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=$a(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=ho,!Ur()&&"undefined"!==typeof location&&location.hostname&&fo.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),mo(e,po,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==To&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Ra.isInMemoryStorage||!0===Ra.get("previous_websocket_failure")}}]),e}();Co.responsesRequiredToBeHealthy=2,Co.healthyTimeout=3e4;var Ao=function(){function e(t){N(this,e),this.initTransports_(t)}return R(e,[{key:"initTransports_",value:function(t){var n=Co&&Co.isAvailable(),r=n&&!Co.previouslyFailed();if(t.webSocketOnly&&(n||Ka("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Co];else{var i,a=this.transports_=[],o=mr(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[Eo,Co]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();Ao.globalTransportInitialized_=!1;var No=function(){function e(t,n,r,i,a,o,s,u,c,l){N(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=qa("c:"+this.id+":"),this.transportManager_=new Ao(n),this.log_("Connection created"),this.start_()}return R(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=so((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Xa("t",e),n=Xa("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Xa("t",e),n=Xa("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Xa("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?za("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):za("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ho!==n&&Ka("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),so((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):so((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ra.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),Po=function(){function e(){N(this,e)}return R(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Ro=function(){function e(t){N(this,e),this.allowedEvents_=t,this.listeners_={},xr(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return R(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=A(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){xr(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Do=function(e){O(n,e);var t=V(n);function n(){var e;return N(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Or()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return R(n,[{key:"getInitialEvent",value:function(e){return xr("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Ro),Oo=function(){function e(t,n){if(N(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return R(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Lo(){return new Oo("")}function Mo(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Fo(e){return e.pieces_.length-e.pieceNum_}function jo(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Oo(e.pieces_,t)}function Uo(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Vo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Bo(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Oo(t,0)}function qo(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Oo)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Oo(n,0)}function zo(e){return e.pieceNum_>=e.pieces_.length}function Wo(e,t){var n=Mo(e),r=Mo(t);if(null===n)return t;if(n===r)return Wo(jo(e),jo(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ko(e,t){if(Fo(e)!==Fo(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Go(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Fo(e)>Fo(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Ho=R((function e(t,n){N(this,e),this.errorPrefix_=n,this.parts_=Vo(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=ui(this.parts_[r]);Qo(this)}));function Qo(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Yo(e))}function Yo(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Jo=function(e){O(n,e);var t=V(n);function n(){var e,r,i;return N(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return R(n,[{key:"getInitialEvent",value:function(e){return xr("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Ro),Xo=1e3,Zo=function(e){O(n,e);var t=V(n);function n(e,r,i,a,o,s,u,c){var l;if(N(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=qa("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Xo,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Ur())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Jo.getInstance().on("visible",l.onVisible_,j(l)),-1===e.host.indexOf("fblocal")&&Do.getInstance().on("online",l.onOnline_,j(l)),l}return R(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Gr(i)),xr(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new Pr,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),xr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),xr(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Hr(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Hr(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),xr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+Gr(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):za("Unrecognized action received from server: "+Gr(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;xr(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xo,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Xo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Xo),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=yr(pr().mark((function e(){var t,r,i,a,o,s,u,c,l,h,f,d,p,v,y=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,i())},l=function(e){xr(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:c,sendRequest:l},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:f=e.sent,d=w(f,2),p=d[0],v=d[1],s?Ba("getToken() completed but was canceled"):(Ba("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,u=new No(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Ka(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&Ka(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Ba("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Ba("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Jr(this.interruptReasons_)&&(this.reconnectDelay_=Xo,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Za(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Oo(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Ba("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Ba("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=mr(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=mr(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Ur()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Ca.replace(/\./g,"-")]=1,Or()?e["framework.cordova"]=1:Fr()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Do.getInstance().currentlyOnline();return Jr(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Qr(e,"w")){var n=Yr(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Ka("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(Po);Zo.nextPersistentConnectionId_=0,Zo.nextConnectionId_=0;var $o,es=function(){function e(t,n){N(this,e),this.name=t,this.node=n}return R(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),ts=function(){function e(){N(this,e)}return R(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new es(Ha,e),r=new es(Ha,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return es.MIN}}]),e}(),ns=function(e){O(n,e);var t=V(n);function n(){return N(this,n),t.apply(this,arguments)}return R(n,[{key:"compare",value:function(e,t){return Ya(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Ir("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return es.MIN}},{key:"maxPost",value:function(){return new es(Qa,$o)}},{key:"makePost",value:function(e,t){return xr("string"===typeof e,"KeyIndex indexValue must always be a string."),new es(e,$o)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return $o},set:function(e){$o=e}}]),n}(ts),rs=new ns,is=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;N(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return R(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),as=function(){function e(t,n,r,i,a){N(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:us.EMPTY_NODE,this.right=null!=a?a:us.EMPTY_NODE}return R(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return us.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return us.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();as.RED=!0,as.BLACK=!1;var os,ss=function(){function e(){N(this,e)}return R(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new as(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),us=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;N(this,e),this.comparator_=t,this.root_=n}return R(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,as.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,as.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new is(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new is(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new is(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new is(this.root_,null,this.comparator_,!0,e)}}]),e}();function cs(e,t){return Ya(e.name,t.name)}function ls(e,t){return Ya(e,t)}us.EMPTY_NODE=new ss;var hs,fs,ds,ps=function(e){return"number"===typeof e?"number:"+to(e):"string:"+e},vs=function(e){if(e.isLeafNode()){var t=e.val();xr("string"===typeof t||"number"===typeof t||"object"===typeof t&&Qr(t,".sv"),"Priority must be a string or number.")}else xr(e===os||e.isEmpty(),"priority of unexpected type.");xr(e===os||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ys=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;N(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,xr(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),vs(this.priorityNode_)}return R(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return zo(t)?this:".priority"===Mo(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Mo(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(xr(".priority"!==r||1===Fo(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(jo(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+ps(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?to(this.value_):this.value_,this.lazyHash_=Ma(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(xr(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return xr(i>=0,"Unknown leaf type: "+n),xr(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return hs},set:function(e){hs=e}}]),e}();ys.VALUE_TYPE_ORDER=["object","boolean","number","string"];var ms,gs,ks=function(e){O(n,e);var t=V(n);function n(){return N(this,n),t.apply(this,arguments)}return R(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Ya(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return es.MIN}},{key:"maxPost",value:function(){return new es(Qa,new ys("[PRIORITY-POST]",ds))}},{key:"makePost",value:function(e,t){var n=fs(e);return new es(t,new ys("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(ts),_s=new ks,ws=Math.log(2),bs=function(){function e(t){N(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/ws,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return R(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),xs=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new as(o,a.node,as.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new as(o,a.node,as.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],h=n?n(l):l;u(new as(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,as.BLACK):(s(h,as.BLACK),s(h,as.RED))}return a}(new bs(e.length));return new us(r||t,a)},Is={},Es=function(){function e(t,n){N(this,e),this.indexes_=t,this.indexSet_=n}return R(e,[{key:"get",value:function(e){var t=Yr(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof us?t:null}},{key:"hasIndex",value:function(e){return Qr(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){xr(t!==rs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(es.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?xs(i,t.getCompare()):Is;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Xr(this.indexes_,(function(e,i){var a=Yr(r.indexSet_,i);if(xr(a,"Missing index implementation for "+i),e===Is){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(es.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),xs(o,a.getCompare())}return Is}var c=n.get(t.name),l=e;return c&&(l=l.remove(new es(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Xr(this.indexes_,(function(e){if(e===Is)return e;var r=n.get(t.name);return r?e.remove(new es(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return xr(Is&&_s,"ChildrenNode.ts has not been loaded"),ms=ms||new e({".priority":Is},{".priority":_s})}}]),e}(),Ss=function(){function e(t,n,r){N(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&vs(this.priorityNode_),this.children_.isEmpty()&&xr(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return R(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||gs}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?gs:t}},{key:"getChild",value:function(e){var t=Mo(e);return null===t?this:this.getImmediateChild(t).getChild(jo(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(xr(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new es(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?gs:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Mo(e);if(null===n)return t;xr(".priority"!==Mo(e)||1===Fo(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(jo(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(_s,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+ps(this.getPriority().val())+":"),this.forEachChild(_s,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Ma(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new es(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new es(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new es(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,es.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,es.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ts?-1:0}},{key:"withIndex",value:function(t){if(t===rs||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===rs||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(_s),r=t.getIterator(_s),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===rs?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return gs||(gs=new e(new us(ls),null,Es.Default))}}]),e}();Ss.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Ts=new(function(e){O(n,e);var t=V(n);function n(){return N(this,n),t.call(this,new us(ls),Ss.EMPTY_NODE,Es.Default)}return R(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return Ss.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(Ss));Object.defineProperties(es,{MIN:{value:new es(Ha,Ss.EMPTY_NODE)},MAX:{value:new es(Qa,Ts)}}),ns.__EMPTY_NODE=Ss.EMPTY_NODE,ys.__childrenNodeConstructor=Ss,os=Ts,function(e){ds=e}(Ts);function Cs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Ss.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),xr(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new ys(n,Cs(t))}if(e instanceof Array){var r=Ss.EMPTY_NODE;return eo(e,(function(t,n){if(Qr(e,t)&&"."!==t.substring(0,1)){var i=Cs(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(Cs(t))}var i=[],a=!1,o=e;if(eo(o,(function(e,t){if("."!==e.substring(0,1)){var n=Cs(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new es(e,n)))}})),0===i.length)return Ss.EMPTY_NODE;var s=xs(i,cs,(function(e){return e.name}),ls);if(a){var u=xs(i,_s.getCompare());return new Ss(s,Cs(t),new Es({".priority":u},{".priority":_s}))}return new Ss(s,Cs(t),Es.Default)}!function(e){fs=e}(Cs);var As=function(e){O(n,e);var t=V(n);function n(e){var r;return N(this,n),(r=t.call(this)).indexPath_=e,xr(!zo(e)&&".priority"!==Mo(e),"Can't create PathIndex with empty path or .priority key"),r}return R(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Ya(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Cs(e),r=Ss.EMPTY_NODE.updateChild(this.indexPath_,n);return new es(t,r)}},{key:"maxPost",value:function(){var e=Ss.EMPTY_NODE.updateChild(this.indexPath_,Ts);return new es(Qa,e)}},{key:"toString",value:function(){return Vo(this.indexPath_,0).join("/")}}]),n}(ts),Ns=function(e){O(n,e);var t=V(n);function n(){return N(this,n),t.apply(this,arguments)}return R(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Ya(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return es.MIN}},{key:"maxPost",value:function(){return es.MAX}},{key:"makePost",value:function(e,t){var n=Cs(e);return new es(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(ts),Ps=new Ns,Rs="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ds=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=Rs.charAt(n%64),n=Math.floor(n/64);xr(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=Rs.charAt(t[r]);return xr(20===o.length,"nextPushId: Length should be 20."),o}}();function Os(e){return{type:"value",snapshotNode:e}}function Ls(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ms(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Fs(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var js=function(){function e(t){N(this,e),this.index_=t}return R(e,[{key:"updateChild",value:function(e,t,n,r,i,a){xr(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Ms(t,o)):xr(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(Ls(t,n)):a.trackChildChange(Fs(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(_s,(function(e,r){t.hasChild(e)||n.trackChildChange(Ms(e,r))})),t.isLeafNode()||t.forEachChild(_s,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Fs(t,r,i))}else n.trackChildChange(Ls(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?Ss.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),Us=function(){function e(t){N(this,e),this.indexedFilter_=new js(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return R(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new es(t,n))||(n=Ss.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=Ss.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(Ss.EMPTY_NODE);var i=this;return t.forEachChild(_s,(function(e,t){i.matches(new es(e,t))||(r=r.updateImmediateChild(e,Ss.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),Vs=function(){function e(t){N(this,e),this.rangedFilter_=new Us(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return R(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new es(t,n))||(n=Ss.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=Ss.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=Ss.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var s,u,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(Ss.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else l=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var f=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(s,p)<=0&&(d=!0),d&&f<this.limit_&&c(p,u)<=0?f++:r=r.updateImmediateChild(p.name,Ss.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;xr(s.numChildren()===this.limit_,"");var u=new es(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Fs(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Ms(t,h));var p=s.updateImmediateChild(t,Ss.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Ls(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,u)>=0?(null!=i&&(i.trackChildChange(Ms(c.name,c.node)),i.trackChildChange(Ls(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,Ss.EMPTY_NODE)):e}}]),e}(),Bs=function(){function e(){N(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_s}return R(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return xr(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return xr(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ha}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return xr(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return xr(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Qa}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return xr(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===_s}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function qs(e){var t,n={};return e.isDefault()||(e.index_===_s?t="$priority":e.index_===Ps?t="$value":e.index_===rs?t="$key":(xr(e.index_ instanceof As,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Gr(t),e.startSet_&&(n.startAt=Gr(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+Gr(e.indexStartName_))),e.endSet_&&(n.endAt=Gr(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+Gr(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function zs(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==_s&&(t.i=e.index_.toString()),t}var Ws=function(e){O(n,e);var t=V(n);function n(e,r,i,a){var o;return N(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=qa("p:rest:"),o.listens_={},o}return R(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=qs(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Yr(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=qs(e._queryParams),r=e._path.toString(),i=new Pr;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=w(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+ei(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=Kr(c.responseText)}catch(n){Ka("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&Ka("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(xr(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(Po),Ks=function(){function e(){N(this,e),this.rootNode_=Ss.EMPTY_NODE}return R(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Gs(){return{value:null,children:new Map}}function Hs(e,t,n){if(zo(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Mo(t);e.children.has(r)||e.children.set(r,Gs()),Hs(e.children.get(r),t=jo(t),n)}}function Qs(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Qs(r,new Oo(t.toString()+"/"+e),n)}))}var Ys,Js=function(){function e(t){N(this,e),this.collection_=t,this.last_=null}return R(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&eo(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Xs=function(){function e(t,n){N(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Js(t);var r=1e4+2e4*Math.random();so(this.reportStats_.bind(this),Math.floor(r))}return R(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;eo(t,(function(t,i){i>0&&Qr(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),so(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Zs(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ys||(Ys={}));var $s,eu=function(){function e(t,n,r){N(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Ys.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return R(e,[{key:"operationForChild",value:function(t){if(zo(this.path)){if(null!=this.affectedTree.value)return xr(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Oo(t));return new e(Lo(),n,this.revert)}return xr(Mo(this.path)===t,"operationForChild called for unrelated child."),new e(jo(this.path),this.affectedTree,this.revert)}}]),e}(),tu=function(){function e(t,n,r){N(this,e),this.source=t,this.path=n,this.snap=r,this.type=Ys.OVERWRITE}return R(e,[{key:"operationForChild",value:function(t){return zo(this.path)?new e(this.source,Lo(),this.snap.getImmediateChild(t)):new e(this.source,jo(this.path),this.snap)}}]),e}(),nu=function(){function e(t,n,r){N(this,e),this.source=t,this.path=n,this.children=r,this.type=Ys.MERGE}return R(e,[{key:"operationForChild",value:function(t){if(zo(this.path)){var n=this.children.subtree(new Oo(t));return n.isEmpty()?null:n.value?new tu(this.source,Lo(),n.value):new e(this.source,Lo(),n)}return xr(Mo(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,jo(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),ru=function(){function e(t,n,r){N(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return R(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(zo(e))return this.isFullyInitialized()&&!this.filtered_;var t=Mo(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),iu=R((function e(t){N(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function au(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Ir("Should only compare child_ events.");var r=new es(t.childName,t.snapshotNode),i=new es(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function ou(e,t){return{eventCache:e,serverCache:t}}function su(e,t,n,r){return ou(new ru(t,n,r),e.serverCache)}function uu(e,t,n,r){return ou(e.eventCache,new ru(t,n,r))}function cu(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function lu(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var hu=function(){return $s||($s=new us(Ja)),$s},fu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hu();N(this,e),this.value=t,this.children=n}return R(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Lo(),value:this.value};if(zo(e))return null;var n=Mo(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(jo(e),t);return null!=i?{path:qo(new Oo(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(zo(t))return this;var n=Mo(t),r=this.children.get(n);return null!==r?r.subtree(jo(t)):new e(null)}},{key:"set",value:function(t,n){if(zo(t))return new e(n,this.children);var r=Mo(t),i=(this.children.get(r)||new e(null)).set(jo(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(zo(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Mo(t),r=this.children.get(n);if(r){var i,a=r.remove(jo(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(zo(e))return this.value;var t=Mo(e),n=this.children.get(t);return n?n.get(jo(e)):null}},{key:"setTree",value:function(t,n){if(zo(t))return n;var r,i=Mo(t),a=(this.children.get(i)||new e(null)).setTree(jo(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Lo(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(qo(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Lo(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(zo(e))return null;var i=Mo(e),a=this.children.get(i);return a?a.findOnPath_(jo(e),qo(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Lo(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(zo(t))return this;this.value&&r(n,this.value);var i=Mo(t),a=this.children.get(i);return a?a.foreachOnPath_(jo(t),qo(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Lo(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(qo(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return eo(t,(function(e,t){n=n.set(new Oo(e),t)})),n}}]),e}(),du=function(){function e(t){N(this,e),this.writeTree_=t}return R(e,null,[{key:"empty",value:function(){return new e(new fu(null))}}]),e}();function pu(e,t,n){if(zo(t))return new du(new fu(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Wo(i,t);return a=a.updateChild(o,n),new du(e.writeTree_.set(i,a))}var s=new fu(n),u=e.writeTree_.setTree(t,s);return new du(u)}function vu(e,t,n){var r=e;return eo(n,(function(e,n){r=pu(r,qo(t,e),n)})),r}function yu(e,t){if(zo(t))return du.empty();var n=e.writeTree_.setTree(t,new fu(null));return new du(n)}function mu(e,t){return null!=gu(e,t)}function gu(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Wo(n.path,t)):null}function ku(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(_s,(function(e,n){t.push(new es(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new es(e,n.value))})),t}function _u(e,t){if(zo(t))return e;var n=gu(e,t);return new du(null!=n?new fu(n):e.writeTree_.subtree(t))}function wu(e){return e.writeTree_.isEmpty()}function bu(e,t){return xu(Lo(),e.writeTree_,t)}function xu(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(xr(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=xu(qo(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(qo(e,".priority"),r)),n}function Iu(e,t){return ju(t,e)}function Eu(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function Su(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));xr(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&Tu(s,r.path)?i=!1:Go(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=Au(e.allWrites,Cu,Lo()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=yu(e.visibleWrites,r.path):eo(r.children,(function(t){e.visibleWrites=yu(e.visibleWrites,qo(r.path,t))}));return!0}return!1}function Tu(e,t){if(e.snap)return Go(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Go(qo(e.path,n),t))return!0;return!1}function Cu(e){return e.visible}function Au(e,t,n){for(var r=du.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)Go(n,o)?r=pu(r,s=Wo(n,o),a.snap):Go(o,n)&&(s=Wo(o,n),r=pu(r,Lo(),a.snap.getChild(s)));else{if(!a.children)throw Ir("WriteRecord should have .snap or .children");if(Go(n,o))r=vu(r,s=Wo(n,o),a.children);else if(Go(o,n))if(zo(s=Wo(o,n)))r=vu(r,Lo(),a.children);else{var u=Yr(a.children,Mo(s));if(u){var c=u.getChild(jo(s));r=pu(r,Lo(),c)}}}}}return r}function Nu(e,t,n,r,i){if(r||i){var a=_u(e.visibleWrites,t);if(!i&&wu(a))return n;if(i||null!=n||mu(a,Lo())){return bu(Au(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Go(e.path,t)||Go(t,e.path))}),t),n||Ss.EMPTY_NODE)}return null}var o=gu(e.visibleWrites,t);if(null!=o)return o;var s=_u(e.visibleWrites,t);return wu(s)?n:null!=n||mu(s,Lo())?bu(s,n||Ss.EMPTY_NODE):null}function Pu(e,t,n,r){return Nu(e.writeTree,e.treePath,t,n,r)}function Ru(e,t){return function(e,t,n){var r=Ss.EMPTY_NODE,i=gu(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(_s,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=_u(e.visibleWrites,t);return n.forEachChild(_s,(function(e,t){var n=bu(_u(a,new Oo(e)),t);r=r.updateImmediateChild(e,n)})),ku(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return ku(_u(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Du(e,t,n,r){return function(e,t,n,r,i){xr(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=qo(t,n);if(mu(e.visibleWrites,a))return null;var o=_u(e.visibleWrites,a);return wu(o)?i.getChild(n):bu(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Ou(e,t){return function(e,t){return gu(e.visibleWrites,t)}(e.writeTree,qo(e.treePath,t))}function Lu(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=_u(e.visibleWrites,t),c=gu(u,Lo());if(null!=c)s=c;else{if(null==n)return[];s=bu(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function Mu(e,t,n){return function(e,t,n,r){var i=qo(t,n),a=gu(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?bu(_u(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Fu(e,t){return ju(qo(e.treePath,t),e.writeTree)}function ju(e,t){return{treePath:e,writeTree:t}}var Uu=function(){function e(){N(this,e),this.changeMap=new Map}return R(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;xr("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),xr(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Fs(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Ms(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Ls(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Ir("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Fs(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),Vu=new(function(){function e(){N(this,e)}return R(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Bu=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;N(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return R(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new ru(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Mu(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:lu(this.viewCache_),i=Lu(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function qu(e,t,n,r,i){var a,o,s=new Uu;if(n.type===Ys.OVERWRITE){var u=n;u.source.fromUser?a=Ku(e,t,u.path,u.snap,r,i,s):(xr(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!zo(u.path),a=Wu(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===Ys.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=qo(n,r);Gu(t,Mo(c))&&(s=Ku(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=qo(n,r);Gu(t,Mo(c))||(s=Ku(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(xr(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=Qu(e,t,c.path,c.children,r,i,o,s))}else if(n.type===Ys.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=Ou(r,n))return t;var s,u=new Bu(r,t,i),c=t.eventCache.getNode();if(zo(n)||".priority"===Mo(n)){var l;if(t.serverCache.isFullyInitialized())l=Pu(r,lu(t));else{var h=t.serverCache.getNode();xr(h instanceof Ss,"serverChildren would be complete if leaf node"),l=Ru(r,h)}s=e.filter.updateFullNode(c,l,a)}else{var f=Mo(n),d=Mu(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(c,f,d,jo(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,Ss.EMPTY_NODE,jo(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Pu(r,lu(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=Ou(r,Lo()),su(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=Ou(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(zo(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Wu(e,t,n,u.getNode().getChild(n),i,a,s,o);if(zo(n)){var c=new fu(null);return u.getNode().forEachChild(rs,(function(e,t){c=c.set(new Oo(e),t)})),Qu(e,t,n,c,i,a,s,o)}return t}var l=new fu(null);return r.foreach((function(e,t){var r=qo(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),Qu(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==Ys.LISTEN_COMPLETE)throw Ir("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=uu(t,a.getNode(),a.isFullyInitialized()||zo(n),a.isFiltered());return zu(e,o,n,r,Vu,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=cu(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Os(cu(t)))}}(t,a,h),{viewCache:a,changes:h}}function zu(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=Ou(r,n))return t;if(zo(n))if(xr(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=lu(t),l=Ru(r,c instanceof Ss?c:Ss.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=Pu(r,lu(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=Mo(n);if(".priority"===f){xr(1===Fo(n),"Can't have a priority with additional path components");var d=u.getNode(),p=Du(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,y=jo(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var m=Du(r,n,u.getNode(),s);v=null!=m?u.getNode().getImmediateChild(f).updateChild(y,m):u.getNode().getImmediateChild(f)}else v=Mu(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,y,i,a):u.getNode()}}return su(t,o,u.isFullyInitialized()||zo(n),e.filter.filtersNodes())}function Wu(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(zo(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=Mo(n);if(!c.isCompleteForPath(n)&&Fo(n)>1)return t;var d=jo(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,Vu,null)}var v=uu(t,u,c.isFullyInitialized()||zo(n),l.filtersNodes());return zu(e,v,n,i,new Bu(i,v,a),s)}function Ku(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new Bu(i,t,a);if(zo(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=su(t,u,!0,e.filter.filtersNodes());else{var h=Mo(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=su(t,u,c.isFullyInitialized(),c.isFiltered());else{var f,d=jo(n),p=c.getNode().getImmediateChild(h);if(zo(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===Uo(d)&&v.getChild(Bo(d)).isEmpty()?v:v.updateChild(d,r):Ss.EMPTY_NODE}if(p.equals(f))s=t;else s=su(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function Gu(e,t){return e.eventCache.isCompleteForChild(t)}function Hu(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Qu(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=zo(n)?r:new fu(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=Hu(0,t.serverCache.getNode().getImmediateChild(n),r);c=Wu(e,c,new Oo(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=Hu(0,t.serverCache.getNode().getImmediateChild(n),r);c=Wu(e,c,new Oo(n),h,i,a,o,s)}})),c}var Yu,Ju=function(){function e(t,n){N(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new js(i.getIndex()),o=(r=i).loadsAllData()?new js(r.getIndex()):r.hasLimit()?new Vs(r):new Us(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,c=a.updateFullNode(Ss.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(Ss.EMPTY_NODE,u.getNode(),null),h=new ru(c,s.isFullyInitialized(),a.filtersNodes()),f=new ru(l,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=ou(f,h),this.eventGenerator_=new iu(this.query_)}return R(e,[{key:"query",get:function(){return this.query_}}]),e}();function Xu(e,t){var n=lu(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!zo(t)&&!n.getImmediateChild(Mo(t)).isEmpty())?n.getChild(t):null}function Zu(e,t,n,r){t.type===Ys.MERGE&&null!==t.source.queryId&&(xr(lu(e.viewCache_),"We should always have a full cache before handling merges"),xr(cu(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=qu(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,xr(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),xr(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),xr(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,$u(e,s.changes,s.viewCache.eventCache.getNode(),null)}function $u(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),au(e,i,"child_removed",t,r,n),au(e,i,"child_added",t,r,n),au(e,i,"child_moved",a,r,n),au(e,i,"child_changed",t,r,n),au(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var ec,tc=R((function e(){N(this,e),this.views=new Map}));function nc(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return xr(null!=a,"SyncTree gave us an op for an invalid query."),Zu(a,t,n,r)}var o,s=[],u=mr(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(Zu(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function rc(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=Pu(n,i?r:null),u=!1;s?u=!0:r instanceof Ss?(s=Ru(n,r),u=!1):(s=Ss.EMPTY_NODE,u=!1);var c=ou(new ru(s,u,!1),new ru(r,i,!1));return new Ju(t,c)}return o}function ic(e,t){var n,r=null,i=mr(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Xu(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}var ac=R((function e(t){N(this,e),this.listenProvider_=t,this.syncPointTree_=new fu(null),this.pendingWriteTree_={visibleWrites:du.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function oc(e,t,n,r,i){return function(e,t,n,r,i){xr(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=pu(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?hc(e,new tu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function sc(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Eu(e.pendingWriteTree_,t),i=Su(e.pendingWriteTree_,t);if(i){var a=new fu(null);return null!=r.snap?a=a.set(Lo(),!0):eo(r.children,(function(e){a=a.set(new Oo(e),!0)})),hc(e,new eu(r.path,a,n))}return[]}function uc(e,t,n){return hc(e,new tu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function cc(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=ic(n,Wo(e,t));if(r)return r}));return Nu(r,t,i,n,!0)}function lc(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=Wo(e,n);r=r||ic(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||ic(i,Lo()):(i=new tc,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new ru(r,!0,!1):null;return function(e){return cu(e.viewCache_)}(rc(i,t,Iu(e.pendingWriteTree_,t._path),a?o.getNode():Ss.EMPTY_NODE,a))}function hc(e,t){return fc(t,e.syncPointTree_,null,Iu(e.pendingWriteTree_,Lo()))}function fc(e,t,n,r){if(zo(e.path))return dc(e,t,n,r);var i=t.get(Lo());null==n&&null!=i&&(n=ic(i,Lo()));var a=[],o=Mo(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=Fu(r,o);a=a.concat(fc(s,u,c,l))}return i&&(a=a.concat(nc(i,e,r,n))),a}function dc(e,t,n,r){var i=t.get(Lo());null==n&&null!=i&&(n=ic(i,Lo()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=Fu(r,t),u=e.operationForChild(t);u&&(a=a.concat(dc(u,i,o,s)))})),i&&(a=a.concat(nc(i,e,r,n))),a}function pc(e,t){return e.tagToQueryMap.get(t)}function vc(e){var t=e.indexOf("$");return xr(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Oo(e.substr(0,t))}}function yc(e,t,n){var r=e.syncPointTree_.get(t);return xr(r,"Missing sync point for query tag that we're tracking"),nc(r,n,Iu(e.pendingWriteTree_,t),null)}var mc=function(){function e(t){N(this,e),this.node_=t}return R(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),gc=function(){function e(t,n){N(this,e),this.syncTree_=t,this.path_=n}return R(e,[{key:"getImmediateChild",value:function(t){var n=qo(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return cc(this.syncTree_,this.path_)}}]),e}(),kc=function(e,t,n){return e&&"object"===typeof e?(xr(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?_c(e[".sv"],t,n):"object"===typeof e[".sv"]?wc(e[".sv"],t):void xr(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},_c=function(e,t,n){if("timestamp"===e)return n.timestamp;xr(!1,"Unexpected server value: "+e)},wc=function(e,t,n){e.hasOwnProperty("increment")||xr(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&xr(!1,"Unexpected increment value: "+r);var i=t.node();if(xr(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},bc=function(e,t,n,r){return Ic(t,new gc(n,e),r)},xc=function(e,t,n){return Ic(e,new mc(t),n)};function Ic(e,t,n){var r,i=e.getPriority().val(),a=kc(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=kc(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new ys(s,Cs(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new ys(a))),u.forEachChild(_s,(function(e,i){var a=Ic(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var Ec=R((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};N(this,e),this.name=t,this.parent=n,this.node=r}));function Sc(e,t){for(var n=t instanceof Oo?t:new Oo(t),r=e,i=Mo(n);null!==i;){var a=Yr(r.node.children,i)||{children:{},childCount:0};r=new Ec(i,r,a),i=Mo(n=jo(n))}return r}function Tc(e){return e.node.value}function Cc(e,t){e.node.value=t,Dc(e)}function Ac(e){return e.node.childCount>0}function Nc(e,t){eo(e.node.children,(function(n,r){t(new Ec(n,e,r))}))}function Pc(e,t,n,r){n&&!r&&t(e),Nc(e,(function(e){Pc(e,t,!0,r)})),n&&r&&t(e)}function Rc(e){return new Oo(null===e.parent?e.name:Rc(e.parent)+"/"+e.name)}function Dc(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Tc(e)&&!Ac(e)}(n),i=Qr(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Dc(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Dc(e))}(e.parent,e.name,e)}var Oc=/[\[\].#$\/\u0000-\u001F\u007F]/,Lc=/[\[\].#$\u0000-\u001F\u007F]/,Mc=10485760,Fc=function(e){return"string"===typeof e&&0!==e.length&&!Oc.test(e)},jc=function(e){return"string"===typeof e&&0!==e.length&&!Lc.test(e)},Uc=function(e,t,n,r){r&&void 0===t||Vc(si(e,"value"),t,n)},Vc=function e(t,n,r){var i=r instanceof Oo?new Ho(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Yo(i));if("function"===typeof n)throw new Error(t+"contains a function "+Yo(i)+" with contents = "+n.toString());if(Ga(n))throw new Error(t+"contains "+n.toString()+" "+Yo(i));if("string"===typeof n&&n.length>Mc/3&&ui(n)>Mc)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+Yo(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(eo(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!Fc(n)))throw new Error(t+" contains an invalid key ("+n+") "+Yo(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=ui(t),Qo(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=ui(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Yo(i)+" in addition to actual children.")}},Bc=function(e,t,n,r){if((!r||void 0!==n)&&!jc(n))throw new Error(si(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qc=function(e,t){if(".info"===Mo(t))throw new Error(e+" failed = Can't modify data under /.info/")},zc=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Fc(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),jc(e)}(n))throw new Error(si(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Wc=R((function e(){N(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Kc(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Ko(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Gc(e,t,n){Kc(e,n),Qc(e,(function(e){return Ko(e,t)}))}function Hc(e,t,n){Kc(e,n),Qc(e,(function(e){return Go(e,t)||Go(t,e)}))}function Qc(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Yc(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Yc(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();ja&&Ba("event: "+n.toString()),oo(r)}}}var Jc="repo_interrupt",Xc=function(){function e(t,n,r,i){N(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Wc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Gs(),this.transactionQueueTree_=new Ec,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return R(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function Zc(e,t,n){if(e.stats_=wo(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Ws(e.repoInfo_,(function(t,n,r,i){tl(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return nl(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Gr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Zo(e.repoInfo_,t,(function(t,n,r,i){tl(e,t,n,r,i)}),(function(t){nl(e,t)}),(function(t){!function(e,t){eo(t,(function(t,n){rl(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return _o[n]||(_o[n]=t()),_o[n]}(e.repoInfo_,(function(){return new Xs(e.stats_,e.server_)})),e.infoData_=new Ks,e.infoSyncTree_=new ac({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=uc(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),rl(e,"connected",!1),e.serverSyncTree_=new ac({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);Hc(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function $c(e){var t=e.infoData_.getNode(new Oo(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function el(e){return(t=(t={timestamp:$c(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function tl(e,t,n,r,i){e.dataUpdateCount++;var a=new Oo(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=Xr(n,(function(e){return Cs(e)}));o=function(e,t,n,r){var i=pc(e,r);if(i){var a=vc(i),o=a.path,s=a.queryId,u=Wo(o,t),c=fu.fromObject(n);return yc(e,o,new nu(Zs(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=Cs(n);o=function(e,t,n,r){var i=pc(e,r);if(null!=i){var a=vc(i),o=a.path,s=a.queryId,u=Wo(o,t);return yc(e,o,new tu(Zs(s),u,n))}return[]}(e.serverSyncTree_,a,u,i)}else if(r){var c=Xr(n,(function(e){return Cs(e)}));o=function(e,t,n){var r=fu.fromObject(n);return hc(e,new nu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=Cs(n);o=uc(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=fl(e,a)),Hc(e.eventQueue_,h,o)}function nl(e,t){rl(e,"connected",t),!1===t&&function(e){sl(e,"onDisconnectEvents");var t=el(e),n=Gs();Qs(e.onDisconnect_,Lo(),(function(r,i){var a=bc(r,i,e.serverSyncTree_,t);Hs(n,r,a)}));var r=[];Qs(n,Lo(),(function(t,n){r=r.concat(uc(e.serverSyncTree_,t,n));var i=ml(e,t);fl(e,i)})),e.onDisconnect_=Gs(),Hc(e.eventQueue_,Lo(),r)}(e)}function rl(e,t,n){var r=new Oo("/.info/"+t),i=Cs(n);e.infoData_.updateSnapshot(r,i);var a=uc(e.infoSyncTree_,r,i);Hc(e.eventQueue_,r,a)}function il(e){return e.nextWriteId_++}function al(e,t,n,r,i){sl(e,"set",{path:t.toString(),value:n,priority:r});var a=el(e),o=Cs(n,r),s=cc(e.serverSyncTree_,t),u=xc(o,s,a),c=il(e),l=oc(e.serverSyncTree_,t,u,c,!0);Kc(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||Ka("set at "+t+" failed: "+n);var o=sc(e.serverSyncTree_,c,!a);Hc(e.eventQueue_,t,o),ul(e,i,n,r)}));var h=ml(e,t);fl(e,h),Hc(e.eventQueue_,h,[])}function ol(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Jc)}function sl(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Ba.apply(void 0,[t].concat(r))}function ul(e,t,n,r){t&&oo((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function cl(e,t,n){return cc(e.serverSyncTree_,t,n)||Ss.EMPTY_NODE}function ll(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||yl(e,t),Tc(t)){var n=pl(e,t);xr(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&hl(e,Rc(t),n)}else Ac(t)&&Nc(t,(function(t){ll(e,t)}))}function hl(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=cl(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];xr(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=Wo(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){sl(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(sc(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);yl(e,Sc(e.transactionQueueTree_,t)),ll(e,e.transactionQueueTree_),Hc(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)oo(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{Ka("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}fl(e,t)}}),o)}function fl(e,t){var n=dl(e,t),r=Rc(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u=t[a],c=Wo(n,u.path),l=!1,h=void 0;if(xr(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(sc(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(sc(e.serverSyncTree_,u.currentWriteId,!0));else{var f=cl(e,u.path,o);u.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){Vc("transaction failed: Data returned ",d,u.path);var p=Cs(d);"object"===typeof d&&null!=d&&Qr(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,y=el(e),m=xc(p,f,y);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=m,u.currentWriteId=il(e),o.splice(o.indexOf(v),1),i=(i=i.concat(oc(e.serverSyncTree_,u.path,m,u.currentWriteId,u.applyLocally))).concat(sc(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(sc(e.serverSyncTree_,u.currentWriteId,!0))}Hc(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},u=0;u<t.length;u++)s(u);yl(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)oo(r[c]);ll(e,e.transactionQueueTree_)}(e,pl(e,n),r),r}function dl(e,t){var n,r=e.transactionQueueTree_;for(n=Mo(t);null!==n&&void 0===Tc(r);)r=Sc(r,n),n=Mo(t=jo(t));return r}function pl(e,t){var n=[];return vl(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function vl(e,t,n){var r=Tc(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Nc(t,(function(t){vl(e,t,n)}))}function yl(e,t){var n=Tc(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Cc(t,n.length>0?n:void 0)}Nc(t,(function(t){yl(e,t)}))}function ml(e,t){var n=Rc(dl(e,t)),r=Sc(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){gl(e,t)})),gl(e,r),Pc(r,(function(t){gl(e,t)})),n}function gl(e,t){var n=Tc(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(xr(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(xr(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(sc(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Cc(t,void 0):n.length=a+1,Hc(e.eventQueue_,Rc(t),i);for(var s=0;s<r.length;s++)oo(r[s])}}var kl=function(e,t){var n=_l(e),r=n.namespace;"firebase.com"===n.domain&&Wa(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Wa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ka("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new yo(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Oo(n.pathString)}},_l=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=mr(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Ka("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},wl=function(){function e(t,n,r,i){N(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return R(e,[{key:"key",get:function(){return zo(this._path)?null:Uo(this._path)}},{key:"ref",get:function(){return new bl(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=zs(this._queryParams),t=Za(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return zs(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=ci(t))instanceof e))return!1;var n=this._repo===t._repo,r=Ko(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var bl=function(e){O(n,e);var t=V(n);function n(e,r){return N(this,n),t.call(this,e,r,new Bs,!1)}return R(n,[{key:"parent",get:function(){var e=Bo(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(wl),xl=function(){function e(t,n,r){N(this,e),this._node=t,this.ref=n,this._index=r}return R(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new Oo(t),r=El(this.ref,t);return new e(this._node.getChild(n),r,_s)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,El(n.ref,r),_s))}))}},{key:"hasChild",value:function(e){var t=new Oo(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function Il(e,t){return(e=ci(e))._checkNotDeleted("ref"),void 0!==t?El(e._root,t):e._root}function El(e,t){var n,r,i,a;return null===Mo((e=ci(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Bc(n,r,i,a)):Bc("child","path",t,!1),new bl(e._repo,qo(e._path,t))}function Sl(e,t){e=ci(e),qc("set",e._path),Uc("set",t,e._path,!1);var n=new Pr;return al(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function Tl(e){return function(e,t){var n=lc(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=Cs(n).withIndex(t._queryParams.getIndex()),i=uc(e.serverSyncTree_,t._path,r);return Gc(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return sl(e,"get for query "+Gr(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=ci(e))._repo,e).then((function(t){return new xl(t,new bl(e._repo,e._path),e._queryParams.getIndex())}))}!function(e){xr(!Yu,"__referenceConstructor has already been defined"),Yu=e}(bl),function(e){xr(!ec,"__referenceConstructor has already been defined"),ec=e}(bl);var Cl={},Al=!1;function Nl(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Wa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ba("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=kl(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/yes-wedding",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_KAKAO_APPKEY:"3dc1d032c1b57d7534b09b562373275d",REACT_APP_FIREBASE_APIKEY:"AIzaSyCmdbkjtH47HqFKrnnCg0nmuSch9bmoXp0",REACT_APP_FIREBASE_AUTHDOMAIN:"yes-wedding-29451.firebaseapp.com",REACT_APP_FIREBASE_DATABASEURL:"https://yes-wedding-29451-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_PROJECTID:"yes-wedding-29451",REACT_APP_FIREBASE_STORAGEBUCKET:"yes-wedding-29451.appspot.com",REACT_APP_FIREBASE_MESSAGINGSENDERID:"1010300792442",REACT_APP_FIREBASE_APPID:"1:1010300792442:web:d6858688466e8b838955c3"}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=kl(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new lo(lo.OWNER):new co(e.name,e.options,t);zc("Invalid Firebase Database URL",s),zo(s.path)||Wa("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=Cl[t.name];i||(i={},Cl[t.name]=i);var a=i[e.toURLString()];a&&Wa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new Xc(e,Al,n,r),i[e.toURLString()]=a,a}(u,e,l,new uo(e.name,n));return new Pl(h,e)}var Pl=function(){function e(t,n){N(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return R(e,[{key:"_repo",get:function(){return this._instanceStarted||(Zc(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new bl(this._repo,Lo())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=Cl[t];n&&n[e.key]===e||Wa("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),ol(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Wa("Cannot call "+e+" on a deleted database.")}}]),e}();function Rl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aa(),t=arguments.length>1?arguments[1]:void 0;return Xi(e,"database").getImmediate({identifier:t})}Zo.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Zo.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){Ca=e}(ra),Ji(new li("database",(function(e,t){var n=t.instanceIdentifier;return Nl(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),ca(Sa,Ta,e),ca(Sa,Ta,"esm2017")}();var Dl,Ol="GuestCard_card__o6u+X",Ll="GuestCard_card__cont__P2tmn",Ml="GuestCard_card__cont--message__Wpd34",Fl="GuestCard_card__cont--time__IjNy6",jl="GuestCard_card-wrap__3zNky",Ul="GuestCard_card-inr__RisP+",Vl=function(e){var t=e.guestList.map((function(e){return(0,v.jsxs)(Zn,{className:Ol,children:[(0,v.jsx)("img",{src:n(981),alt:"paper card"}),(0,v.jsxs)("div",{className:Ll,children:[(0,v.jsx)("div",{children:e.name}),(0,v.jsx)("div",{className:Ml,children:e.message}),(0,v.jsx)("div",{className:Fl,children:e.time})]})]},e.id)}));return(0,v.jsx)("div",{className:jl,children:(0,v.jsx)("div",{className:Ul,children:(0,v.jsx)($n,{dataSplide:'{ "type":"loop", "perPage":2, "perMove":2, "padding":"20px", "gap":"2%", "width":"100%", "pagination": false, "arrows": false }',children:t})})})},Bl="SetGuest_cont__info__76M0Z",ql="SetGuest_cont__name__uNVb7",zl="SetGuest_cont__password__0ayzZ",Wl="SetGuest_cont__message__nQtvv",Kl="SetGuest_cont__btn__m0JK1",Gl=function(e){var n=(0,t.useRef)(""),r=(0,t.useRef)(""),i=(0,t.useRef)(""),a=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate(),r=e.getHours(),i=e.getMinutes();return"".concat(t,"\uc6d4 ").concat(n,"\uc77c ").concat(r,":").concat(i<10?"0".concat(i):i)};return a(),(0,v.jsxs)("form",{onSubmit:function(t){t.preventDefault();var o={name:n.current.value,password:r.current.value,message:i.current.value,time:a()};""!==o.name?""!==o.password?""!==o.message?(e.onSetGuest(o),n.current.value="",r.current.value="",i.current.value=""):alert("\uba54\uc2dc\uc9c0\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694\ud83d\ude22"):alert("\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694\ud83d\ude4f"):alert("\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694\ud83d\ude25")},children:[(0,v.jsxs)("div",{className:Bl,children:[(0,v.jsx)("label",{htmlFor:"name"}),(0,v.jsx)("input",{type:"text",id:"name",placeholder:"\uc774\ub984",ref:n,className:ql}),(0,v.jsx)("label",{htmlFor:"password"}),(0,v.jsx)("input",{type:"text",id:"password",placeholder:"\ube44\ubc00\ubc88\ud638",ref:r,className:zl})]}),(0,v.jsx)("label",{htmlFor:"message"}),(0,v.jsx)("textarea",{type:"text",id:"message",placeholder:"\uba54\uc2dc\uc9c0",ref:i,className:Wl}),(0,v.jsx)("button",{className:Kl,children:"\ubc29\uba85\ub85d \uc791\uc131"})]})},Hl="GuestForm_cont-wrap__ZtOSV",Ql=function(e){return(0,v.jsx)(T,{onClose:e.onHideForm,children:(0,v.jsx)("div",{className:Hl,children:(0,v.jsx)(Gl,{onSetGuest:e.onSetGuest})})})},Yl="EnterPassword_form__athi8",Jl="EnterPassword_form__password__CMVEA",Xl="EnterPassword_form__btn__ihM8y",Zl="EnterPassword_set-guest__wf6NK",$l=function(e){var n=w((0,t.useState)(!1),2),r=n[0],i=n[1],a=(0,t.useRef)(""),o=e.currentGuest,s=Rl(),u=function(){!function(e){qc("remove",e._path),Sl(e,null)}(Il(s,"guest/"+o.id)),e.onFetchGuestHandler(),alert("\uc0ad\uc81c \uc131\uacf5\ud83e\udd1f"),e.onSetPassModal()},c=(0,v.jsxs)("form",{onSubmit:function(t){t.preventDefault(),o.password===a.current.value?"update"===e.type?i(!0):"delete"===e.type&&u():(alert("\ube44\ubc00\ubc88\ud638\uac00 \ud2c0\ub9bd\ub2c8\ub2e4\ud83e\udd72"),a.current.value="")},className:Yl,children:[(0,v.jsx)("label",{htmlFor:"password"}),(0,v.jsx)("input",{type:"text",id:"password",placeholder:"\ube44\ubc00\ubc88\ud638",ref:a,className:Jl}),(0,v.jsx)("button",{className:Xl,children:"\ud655\uc778"})]});return(0,v.jsx)(T,{onClose:e.onSetPassModal,children:r?(0,v.jsx)("div",{className:Zl,children:(0,v.jsx)(Gl,{onSetGuest:function(t){Sl(Il(s,"guest/"+o.id),t),e.onFetchGuestHandler(),e.onSetPassModal()}})}):c})},eh="GuestList_list__name__h+3IB",th="GuestList_list__message__LlFSO",nh="GuestList_list__time__XbIy4",rh="GuestList_list-wrap__dwOP1",ih="GuestList_btn__5Xj0u",ah="GuestList_btn-wrap__DEUC+",oh=function(e){var r=w((0,t.useState)({openState:!1,type:null}),2),i=r[0],a=r[1],o=w((0,t.useState)({}),2),s=o[0],u=o[1],c=e.guestList.map((function(e){return(0,v.jsxs)("div",{className:rh,children:[(0,v.jsx)("div",{className:eh,children:e.name}),(0,v.jsx)("div",{className:th,children:e.message}),(0,v.jsx)("div",{className:nh,children:e.time}),(0,v.jsxs)("div",{className:ah,children:[(0,v.jsx)("button",{onClick:function(){l(!0,"update"),u(e)},className:ih,children:(0,v.jsx)("img",{src:n(804),alt:"paper card"})}),(0,v.jsx)("button",{onClick:function(){l(!0,"delete"),u(e)},className:ih,children:(0,v.jsx)("svg",{width:"20",height:"22",viewBox:"0 0 20 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.29289 2.29289C7.48043 2.10536 7.73478 2 8 2H12C12.2652 2 12.5196 2.10536 12.7071 2.29289C12.8946 2.48043 13 2.73478 13 3V4L7 4V3C7 2.73478 7.10536 2.48043 7.29289 2.29289ZM15 3V4L19 4C19.5523 4 20 4.44772 20 5C20 5.55229 19.5523 6 19 6H18V19C18 19.7956 17.6839 20.5587 17.1213 21.1213C16.5587 21.6839 15.7957 22 15 22H5C4.20435 22 3.44129 21.6839 2.87868 21.1213C2.31607 20.5587 2 19.7956 2 19L2 6H1C0.447715 6 0 5.55228 0 5C0 4.44772 0.447715 4 1 4H5V3C5 2.20435 5.31607 1.44129 5.87868 0.87868C6.44129 0.31607 7.20435 0 8 0H12C12.7956 0 13.5587 0.316071 14.1213 0.87868C14.6839 1.44129 15 2.20435 15 3ZM9 10C9 9.44771 8.55228 9 8 9C7.44771 9 7 9.44771 7 10V16C7 16.5523 7.44771 17 8 17C8.55228 17 9 16.5523 9 16V10ZM12 9C11.4477 9 11 9.44771 11 10V16C11 16.5523 11.4477 17 12 17C12.5523 17 13 16.5523 13 16V10C13 9.44771 12.5523 9 12 9Z",fill:"#222"})})})]})]},e.id)})),l=function(e,t){a({openState:e,type:t})};return(0,v.jsx)(T,{onClose:e.onHideList,children:i.openState?(0,v.jsx)($l,{onSetPassModal:function(){l(!1,null)},onFetchGuestHandler:e.onFetchGuestHandler,type:i.type,currentGuest:s}):c})},sh={btn:"Guest_btn__Pk7jO"},uh=function(e){var n=w((0,t.useState)([]),2),r=n[0],i=n[1],a=w((0,t.useState)(null),2),o=a[0],s=a[1],u=w((0,t.useState)(!1),2),c=u[0],l=u[1],h=w((0,t.useState)(!1),2),f=h[0],d=h[1],p=Rl(),y=(0,t.useCallback)((function(){s(null),Tl(El(Il(p),"guest/")).then((function(e){if(e.exists()){var t=e.val(),n=[];for(var r in t)n.push({id:r,name:t[r].name,password:t[r].password,message:t[r].message,time:t[r].time});i(n)}else s("No data available")})).catch((function(e){s(e.message)}))}),[p]);(0,t.useEffect)((function(){y()}),[y]);return(0,v.jsxs)("section",{id:"guest",children:[(0,v.jsx)("div",{"data-scroll-target":"opacity",className:"section-flower",children:"\ud83c\udf37"}),(0,v.jsx)("h2",{"data-scroll-target":"show-up",children:"\ubc29\uba85\ub85d"}),(0,v.jsx)("div",{"data-scroll-target":"show-up",className:sh.cards,children:o?(0,v.jsx)("p",{children:o}):(0,v.jsx)(Vl,{guestList:r})}),(0,v.jsxs)("div",{className:sh.btn,children:[(0,v.jsx)("button",{onClick:function(){l(!0)},children:"\uc804\uccb4\ubcf4\uae30"}),(0,v.jsx)("button",{onClick:function(){d(!0)},children:"\ubc29\uba85\ub85d \uc791\uc131"})]}),c&&(0,v.jsx)(oh,{onHideList:function(){l(!1)},guestList:r,onFetchGuestHandler:y}),f&&(0,v.jsx)(Ql,{onHideForm:function(){d(!1)},onSetGuest:function(e){Sl(function(e,t){e=ci(e),qc("push",e._path),Uc("push",t,e._path,!0);var n,r=$c(e._repo),i=Ds(r),a=El(e,i),o=El(e,i);return n=null!=t?Sl(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}(Il(p,"guest")),e),y(),d(!1)}})]})},ch="Map_place__g-ONj",lh="Map_cont__zixBW",hh="Map_btn__6Vi9c",fh="Map_btn-wrap__o6n-Q",dh="Map_info__zQGoT",ph="Map_info__tit__LeJoy",vh="Map_info__cont__B4VPU",yh=window.kakao,mh=function(e){return(0,t.useEffect)((function(){var e=document.getElementById("map-cont"),t=new yh.maps.LatLng(33.450701,126.570667),n={center:t,level:3},r=new yh.maps.Marker({position:t}),i=new yh.maps.Map(e,n);r.setMap(i)}),[]),(0,v.jsxs)("section",{id:"map",children:[(0,v.jsx)("div",{"data-scroll-target":"opacity",className:"section-flower",children:"\ud83c\udf3a"}),(0,v.jsx)("h2",{"data-scroll-target":"show-up",children:"\uc624\uc2dc\ub294 \uae38"}),(0,v.jsxs)("h3",{"data-scroll-target":"show-up",className:ch,children:["\uc0c1\ub85d\uc544\ud2b8\ud640 L\uce35 \uadf8\ub79c\ub4dc\ubcfc\ub8f8\ud640",(0,v.jsx)("br",{}),"\uc11c\uc6b8 \uac15\ub0a8\uad6c \uc5b8\uc8fc\ub85c 508"]}),(0,v.jsxs)("div",{"data-scroll-target":"show-up",children:[(0,v.jsx)("div",{id:"map-cont",className:lh}),(0,v.jsxs)("div",{className:fh,children:[(0,v.jsxs)("a",{href:"//map.kakao.com/link/map/18577297",className:hh,children:[(0,v.jsx)("svg",{width:"19",height:"18",viewBox:"0 0 19 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.45026 0C4.27749 0 0 3.4 0 7.7C0 10.4 1.79058 12.8 4.37696 14.2L3.48168 17.6C3.48168 17.7 3.48168 17.8 3.58115 17.9C3.58115 17.9 3.68063 18 3.7801 18C3.87958 18 3.87958 18 3.97906 18L7.85864 15.3C8.4555 15.4 8.95288 15.4 9.54974 15.4C14.7225 15.4 19 11.9 19 7.7C18.9005 3.4 14.7225 0 9.45026 0Z",fill:"#fae100"})}),(0,v.jsx)("span",{children:"\uce74\uce74\uc624 \uc9c0\ub3c4"})]}),(0,v.jsxs)("a",{href:"http://naver.me/5Z0vUHi3",className:hh,children:[(0,v.jsx)("svg",{width:"18",height:"17",viewBox:"0 0 18 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{d:"M11.9 0V8.6L6.2 0H0V17H6.1V8.4L11.8 17H18V0H11.9Z",fill:"#5ECC69"})}),(0,v.jsx)("span",{children:"\ub124\uc774\ubc84 \uc9c0\ub3c4"})]})]})]}),(0,v.jsxs)("div",{"data-scroll-target":"show-up",className:dh,children:[(0,v.jsx)("div",{className:ph,children:"\uc790\uac00\uc6a9"}),(0,v.jsxs)("p",{className:vh,children:["\u2022 \ub124\ube44\uac8c\uc774\uc158 \uc774\uc6a9\uc2dc : \u201c\uc11c\uc6b8\uc0c1\ub85d\ud68c\uad00\u201d \ub610\ub294 \u201c\uc11c\uc6b8\uc2dc \uac15\ub0a8\uad6c \uc5b8\uc8fc\ub85c 508\u201d \uc785\ub825",(0,v.jsx)("br",{}),"\u2022 \uacbd\ubd80\uace0\uc18d\ub3c4\ub85c : \uc591\uc7acIC \uc9c4\uc785\ud558\uc2dc\uc5b4 \uc591\uc7ac\ub300\ub85c\uc5d0\uc11c \ub9e4\ubd09\ud130\ub110, \uac15\ub0a8 \uc138\ube0c\ub780\uc2a4 \ubcd1\uc6d0 \ubc29\uba74\uc73c\ub85c \uc9c4\uc785\ud558\uc5ec \uc9c1\uc9c4",(0,v.jsx)("br",{}),"\u2714\ufe0f\uc8fc\ucc28\uc7a5 : \uc0c1\ub85d\uc544\ud2b8\ud640 \uc9c0\uc0c1/\uc9c0\ud558 \uc8fc\ucc28\uc7a5 \uc774\uc6a9(1\uc2dc\uac04 30\ubd84 \ubb34\ub8cc)",(0,v.jsx)("br",{})]}),(0,v.jsx)("div",{className:ph,children:"\uc9c0\ud558\ucca0"}),(0,v.jsxs)("p",{className:vh,children:["2\ud638\uc120/\ubd84\ub2f9\uc120 \u201c\uc120\ub989\uc5ed\u201d 5\ubc88\ucd9c\uad6c \ub3c4\ubcf45\ubd84",(0,v.jsx)("br",{}),"\u2714\ufe0f\uc154\ud2c0\ubc84\uc2a4 \uc218\uc2dc\uc6b4\ud589 : \uc120\ub989\uc5ed 5\ubc88\ucd9c\uad6c",(0,v.jsx)("br",{})]}),(0,v.jsx)("div",{className:ph,children:"\ubc84\uc2a4"}),(0,v.jsxs)("p",{className:vh,children:["(KT\uac15\ub0a8\uc9c0\uc0ac \ud558\ucc28) \uac04\uc120 141, \uc9c0\uc120 3422",(0,v.jsx)("br",{}),"(\uc11c\uc6b8\uc0c1\ub85d\ud68c\uad00, \ud55c\uad6d\uae30\uc220\uc13c\ud130 \ud558\ucc28)",(0,v.jsx)("br",{}),"\uac04\uc120 146, 360, 740",(0,v.jsx)("br",{})]})]})]})},gh=n(29),kh="Account_account__WEioe",_h="Account_account__num__tqT91",wh="Account_account__btn__Tb-dX",bh="Account_account__btn-wrap__PaeWG",xh="Account_account__inr__lNYnk",Ih=function(e){var t=e.account,r=(0,v.jsx)("a",{href:t.kakao,className:wh,children:(0,v.jsx)("img",{src:n(322),alt:"kakaopay"})}),i=(0,v.jsxs)("div",{className:kh,children:[(0,v.jsxs)("div",{className:_h,children:[(0,v.jsx)("div",{children:t["account-num"]}),(0,v.jsxs)("div",{className:xh,children:[(0,v.jsxs)("div",{children:[t["account-bank"],"\uc740\ud589\xa0/\xa0"]}),(0,v.jsx)("div",{children:t["account-name"]})]})]}),(0,v.jsxs)("div",{className:bh,children:[(0,v.jsx)(gh.CopyToClipboard,{className:wh,text:"".concat(t["account-bank"]," ").concat(t["account-num"]," ").concat(t["account-name"]),children:(0,v.jsx)("button",{onClick:function(){alert("\ubcf5\uc0ac \uc644\ub8cc!!")},children:"\ubcf5\uc0ac\ud558\uae30"})}),t.kakao&&r]})]});return(0,v.jsx)(T,{onClose:e.onClose,children:i})},Eh="ContactItem_contact__name__JpUD-",Sh="ContactItem_contact__btn__8TV8M",Th="ContactItem_contact__btn-wrap__9Qb++",Ch=function(e){var n=e.contactItem,r=w((0,t.useState)(!1),2),i=r[0],a=r[1];return(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"".concat(Eh),children:n.name}),(0,v.jsxs)("div",{className:"".concat(Th),children:[(0,v.jsx)("a",{href:"tel:".concat(n.telephone),className:"".concat(Sh),children:(0,v.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{d:"M17.206 13.372L14.2221 11.2742C13.128 10.4751 12.3323 10.9745 11.835 11.474C11.4372 11.7737 10.9398 12.5728 10.3431 12.1732C9.05004 11.3741 7.45864 9.77581 6.46401 8.5771C5.96669 8.07764 5.17099 7.27849 5.6683 6.77903C6.26508 6.07978 7.45864 5.28063 6.86186 4.18181C6.7624 3.78224 5.17099 1.48471 4.57421 0.685563C3.18173 -1.01262 0.894082 0.785456 0.297304 2.38374C-0.995715 6.37946 2.1871 10.2753 4.8726 13.0723C7.85649 15.9692 13.2275 20.2646 17.0071 16.5685C17.6039 15.8693 18.7974 14.4708 17.206 13.372Z",fill:"#7c7f7f"})})}),(0,v.jsx)("a",{href:"sms:".concat(n.telephone),className:"".concat(Sh),children:(0,v.jsx)("svg",{width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.4974 0.3L10.5527 7.5C10.2512 7.8 9.8492 7.8 9.54769 7.5L0.602989 0.3C0.803994 0.1 1.206 0 1.50751 0H18.5929C18.8944 0 19.2964 0.1 19.4974 0.3ZM20 12.8L14.3719 6.40005L20 1.80005V12.5V12.8ZM0 1.80005V12.5V12.8L5.62813 6.40005L0 1.80005ZM10.0502 9.30005C10.6532 9.30005 11.1558 9.10005 11.5578 8.70005L13.1658 7.30005L18.9949 13.9C18.8944 14 18.7939 14 18.5929 14H1.50753H1.00502L6.83415 7.40005L8.54269 8.70005C8.9447 9.10005 9.54772 9.30005 10.0502 9.30005Z",fill:"#7c7f7f"})})}),(0,v.jsx)("button",{onClick:function(){a(!0)},className:"".concat(Sh),children:(0,v.jsx)("svg",{width:"20",height:"17",viewBox:"0 0 20 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{d:"M1.03248 8.06051C-0.34416 6.68772 -0.34416 4.4618 1.03248 3.08901L3.09873 1.0296C4.47537 -0.343199 6.70864 -0.343199 8.08528 1.0296L10 2.93827L11.9147 1.0296C13.2914 -0.343199 15.5246 -0.343199 16.9013 1.0296L18.9675 3.08901C20.3442 4.4618 20.3442 6.68772 18.9675 8.06051L14.5862 12.4279L14.5595 12.4548L10 17L5.44048 12.4548L5.41379 12.4279L1.03248 8.06051Z",fill:"#7c7f7f"})})}),i&&(0,v.jsx)(Ih,{onClose:function(){a(!1)},account:n})]})]})},Ah="Contact_contact__self__t0QIu",Nh="Contact_contact__parent__QW2f2",Ph="Contact_contact__parent-wrap__m91YM",Rh="Contact_parent__xWnKO",Dh="Contact_parent__cat__RV2EI",Oh=function(e){var t={groom:{self:{name:"\uc2e0\ub791 \uc724\uc5ec\uc6c5",telephone:"010-1234-5678","account-num":"1234567890123","account-bank":"\ub18d\ud611","account-name":"\uc720\ub2e4\uc194",kakao:"http://kko.to/T7HuzTh80"},father:{name:"\uc544\ubc84\uc9c0 \uc724\uc5ec\uc6c5",telephone:"010-1234-5678","account-num":"1234567890123","account-bank":"\ub18d\ud611","account-name":"\uc720\ub2e4\uc194"},mother:{name:"\uc5b4\uba38\ub2c8 \uc724\uc5ec\uc6c5",telephone:"010-1234-5678","account-num":"1234567890123","account-bank":"\ub18d\ud611","account-name":"\uc720\ub2e4\uc194"}},bride:{self:{name:"\uc2e0\ubd80 \uc720\uc740\uc194",telephone:"010-1234-5678","account-num":"1234567890123","account-bank":"\ub18d\ud611","account-name":"\uc720\ub2e4\uc194",kakao:"http://kko.to/T7HuzTh80"},father:{name:"\uc544\ubc84\uc9c0 \uc720\uc740\uc194",telephone:"010-1234-5678","account-num":"1234567890123","account-bank":"\ub18d\ud611","account-name":"\uc720\ub2e4\uc194"},mother:{name:"\uc5b4\uba38\ub2c8 \uc720\uc740\uc194",telephone:"010-1234-5678","account-num":"1234567890123","account-bank":"\ub18d\ud611","account-name":"\uc720\ub2e4\uc194"}}};return(0,v.jsxs)("section",{id:"contact",children:[(0,v.jsx)("div",{"data-scroll-target":"opacity",className:"section-flower",children:"\ud83c\udf39"}),(0,v.jsx)("h2",{"data-scroll-target":"show-up",children:"\ub9c8\uc74c \uc804\ud558\uae30"}),(0,v.jsxs)("div",{"data-scroll-target":"show-up",className:"".concat(Ah),children:[(0,v.jsx)(Ch,{contactItem:t.groom.self}),(0,v.jsx)(Ch,{contactItem:t.bride.self})]}),(0,v.jsx)("h2",{"data-scroll-target":"show-up",className:"".concat(Nh),children:"\ud63c\uc8fc\uc5d0\uac8c \uc804\ud558\uae30"}),(0,v.jsxs)("div",{"data-scroll-target":"show-up",className:"".concat(Ph),children:[(0,v.jsxs)("div",{className:"".concat(Rh),children:[(0,v.jsx)("span",{className:"".concat(Dh),children:"\uc2e0\ub791\uce21 \ud63c\uc8fc"}),(0,v.jsx)(Ch,{contactItem:t.groom.father}),(0,v.jsx)(Ch,{contactItem:t.groom.mother})]}),(0,v.jsxs)("div",{className:"".concat(Rh),children:[(0,v.jsx)("span",{className:"".concat(Dh),children:"\uc2e0\ubd80\uce21 \ud63c\uc8fc"}),(0,v.jsx)(Ch,{contactItem:t.bride.father}),(0,v.jsx)(Ch,{contactItem:t.bride.mother})]})]})]})},Lh=function(){function e(t,n){var r=this;N(this,e),this._delegate=t,this.firebase=n,Qi(t,new li("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return R(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),sa(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wi;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wi;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Qi(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Yi(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Mh=(B(Dl={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),B(Dl,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Dl),Fh=new qr("app-compat","Firebase",Mh);var jh=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=ia(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Qr(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ca,setLogLevel:ha,onLog:la,apps:null,SDK_VERSION:ra,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Ji(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Fh.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Nr(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Qr(n,e=e||Wi))throw Fh.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Lh);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Nr(n,e)},createSubscribe:ii,ErrorFactory:qr,deepExtend:Nr}),n}(),Uh=new wi("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Uh.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Vh=self.firebase.SDK_VERSION;Vh&&Vh.indexOf("LITE")>=0&&Uh.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Bh=jh;!function(e){ca("@firebase/app-compat","0.1.26",e)}();function qh(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}function zh(){return zh="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=qh(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},zh.apply(this,arguments)}Bh.registerVersion("firebase","9.8.2","app-compat");function Wh(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Kh;Object.create;var Gh="facebook.com",Hh="github.com",Qh="google.com",Yh="password",Jh="twitter.com",Xh="EMAIL_SIGNIN",Zh="PASSWORD_RESET",$h="RECOVER_EMAIL",ef="REVERT_SECOND_FACTOR_ADDITION",tf="VERIFY_AND_CHANGE_EMAIL",nf="VERIFY_EMAIL";function rf(){return B({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var af=function(){var e;return B(e={},"admin-restricted-operation","This operation is restricted to administrators only."),B(e,"argument-error",""),B(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),B(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),B(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),B(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),B(e,"cordova-not-ready","Cordova framework is not ready."),B(e,"cors-unsupported","This browser is not supported."),B(e,"credential-already-in-use","This credential is already associated with a different user account."),B(e,"custom-token-mismatch","The custom token corresponds to a different audience."),B(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),B(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),B(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),B(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),B(e,"email-already-in-use","The email address is already in use by another account."),B(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),B(e,"expired-action-code","The action code has expired."),B(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),B(e,"internal-error","An internal AuthError has occurred."),B(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),B(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),B(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),B(e,"invalid-auth-event","An internal AuthError has occurred."),B(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),B(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),B(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),B(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),B(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),B(e,"invalid-email","The email address is badly formatted."),B(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),B(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),B(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),B(e,"invalid-credential","The supplied auth credential is malformed or has expired."),B(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),B(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),B(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),B(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),B(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),B(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),B(e,"wrong-password","The password is invalid or the user does not have a password."),B(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),B(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),B(e,"invalid-provider-id","The specified provider ID is invalid."),B(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),B(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),B(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),B(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),B(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),B(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),B(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),B(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),B(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),B(e,"missing-continue-uri","A continue URL must be provided in the request."),B(e,"missing-iframe-start","An internal AuthError has occurred."),B(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),B(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),B(e,"missing-multi-factor-info","No second factor identifier is provided."),B(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),B(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),B(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),B(e,"app-deleted","This instance of FirebaseApp has been deleted."),B(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),B(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),B(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),B(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),B(e,"no-auth-event","An internal AuthError has occurred."),B(e,"no-such-provider","User was not linked to an account with the given provider."),B(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),B(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),B(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),B(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),B(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),B(e,"provider-already-linked","User can only be linked to one identity for the given provider."),B(e,"quota-exceeded","The project's quota for this operation has been exceeded."),B(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),B(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),B(e,"rejected-credential","The request contains malformed or mismatching credentials."),B(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),B(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),B(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),B(e,"timeout","The operation has timed out."),B(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),B(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),B(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),B(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),B(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),B(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),B(e,"unverified-email","The operation requires a verified email."),B(e,"user-cancelled","The user did not grant your application the permissions it requested."),B(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),B(e,"user-disabled","The user account has been disabled by an administrator."),B(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),B(e,"user-signed-out",""),B(e,"weak-password","The password must be 6 characters long or more."),B(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),B(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},of=rf,sf=new qr("auth","Firebase",rf()),uf=new wi("@firebase/auth");function cf(e){if(uf.logLevel<=pi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];uf.error.apply(uf,["Auth (".concat(ra,"): ").concat(e)].concat(n))}}function lf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw pf.apply(void 0,[e].concat(n))}function hf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return pf.apply(void 0,[e].concat(n))}function ff(e,t,n){var r=Object.assign(Object.assign({},of()),B({},t,n));return new qr("auth","Firebase",r).create(t,{appName:e.name})}function df(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&lf(e,"argument-error"),ff(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function pf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=A(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(A(o)))}return sf.create.apply(sf,[e].concat(n))}function vf(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw pf.apply(void 0,[t].concat(r))}}function yf(e){var t="INTERNAL ASSERTION FAILED: "+e;throw cf(t),new Error(t)}function mf(e,t){e||yf(t)}var gf=new Map;function kf(e){mf(e instanceof Function,"Expected a class definition");var t=gf.get(e);return t?(mf(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,gf.set(e,t),t)}function _f(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function wf(){return"http:"===bf()||"https:"===bf()}function bf(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var xf=function(){function e(t,n){N(this,e),this.shortDelay=t,this.longDelay=n,mf(n>t,"Short delay should be less than long delay!"),this.isMobile=Or()||Fr()}return R(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(wf()||Mr()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function If(e,t){mf(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Ef=function(){function e(){N(this,e)}return R(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void yf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void yf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void yf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Sf=(B(Kh={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),B(Kh,"MISSING_CUSTOM_TOKEN","internal-error"),B(Kh,"INVALID_IDENTIFIER","invalid-email"),B(Kh,"MISSING_CONTINUE_URI","internal-error"),B(Kh,"INVALID_PASSWORD","wrong-password"),B(Kh,"MISSING_PASSWORD","internal-error"),B(Kh,"EMAIL_EXISTS","email-already-in-use"),B(Kh,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),B(Kh,"INVALID_IDP_RESPONSE","invalid-credential"),B(Kh,"INVALID_PENDING_TOKEN","invalid-credential"),B(Kh,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),B(Kh,"MISSING_REQ_TYPE","internal-error"),B(Kh,"EMAIL_NOT_FOUND","user-not-found"),B(Kh,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),B(Kh,"EXPIRED_OOB_CODE","expired-action-code"),B(Kh,"INVALID_OOB_CODE","invalid-action-code"),B(Kh,"MISSING_OOB_CODE","internal-error"),B(Kh,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),B(Kh,"INVALID_ID_TOKEN","invalid-user-token"),B(Kh,"TOKEN_EXPIRED","user-token-expired"),B(Kh,"USER_NOT_FOUND","user-token-expired"),B(Kh,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),B(Kh,"INVALID_CODE","invalid-verification-code"),B(Kh,"INVALID_SESSION_INFO","invalid-verification-id"),B(Kh,"INVALID_TEMPORARY_PROOF","invalid-credential"),B(Kh,"MISSING_SESSION_INFO","missing-verification-id"),B(Kh,"SESSION_EXPIRED","code-expired"),B(Kh,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),B(Kh,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),B(Kh,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),B(Kh,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),B(Kh,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),B(Kh,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),B(Kh,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),B(Kh,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),B(Kh,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),B(Kh,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),B(Kh,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Kh),Tf=new xf(3e4,6e4);function Cf(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Af(e,t,n,r){return Nf.apply(this,arguments)}function Nf(){return Nf=yr(pr().mark((function e(t,n,r,i){var a,o=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Pf(t,a,yr(pr().mark((function e(){var a,o,s,u;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=ei(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Ef.fetch()(Lf(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Nf.apply(this,arguments)}function Pf(e,t,n){return Rf.apply(this,arguments)}function Rf(){return(Rf=yr(pr().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,d;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Sf),n),e.prev=2,a=new Mf(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw Ff(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),l=w(c,2),h=l[0],f=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Ff(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Ff(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Ff(t,"user-disabled",s);case 29:if(d=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!f){e.next=34;break}throw ff(t,d,f);case 34:lf(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Br)){e.next=41;break}throw e.t0;case 41:lf(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function Df(e,t,n,r){return Of.apply(this,arguments)}function Of(){return Of=yr(pr().mark((function e(t,n,r,i){var a,o,s=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Af(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&lf(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Of.apply(this,arguments)}function Lf(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?If(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Mf=function(){function e(t){var n=this;N(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(hf(n.auth,"network-request-failed"))}),Tf.get())}))}return R(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Ff(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=hf(e,t,r);return i.customData._tokenResponse=n,i}function jf(e,t){return Uf.apply(this,arguments)}function Uf(){return(Uf=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Af(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vf(e,t){return Bf.apply(this,arguments)}function Bf(){return(Bf=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Af(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qf(e,t){return zf.apply(this,arguments)}function zf(){return(zf=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Af(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wf(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Kf(){return Kf=yr(pr().mark((function e(t){var n,r,i,a,o,s,u=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=ci(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,vf((a=Hf(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Wf(Gf(a.auth_time)),issuedAtTime:Wf(Gf(a.iat)),expirationTime:Wf(Gf(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Kf.apply(this,arguments)}function Gf(e){return 1e3*Number(e)}function Hf(e){var t=w(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return cf("JWT malformed, contained fewer than 3 sections"),null;try{var a=Ar(r);return a?JSON.parse(a):(cf("Failed to decode base64 JWT payload"),null)}catch(o){return cf("Caught error parsing JWT payload as JSON",o),null}}function Qf(e,t){return Yf.apply(this,arguments)}function Yf(){return Yf=yr(pr().mark((function e(t,n){var r=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Br&&Jf(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Yf.apply(this,arguments)}function Jf(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Xf=function(){function e(t){N(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return R(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(yr(pr().mark((function t(){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Zf=function(){function e(t,n){N(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return R(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Wf(this.lastLoginAt),this.creationTime=Wf(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function $f(e){return ed.apply(this,arguments)}function ed(){return ed=yr(pr().mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Qf(t,qf(r,{idToken:i}));case 6:vf(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?rd(o.providerUserInfo):[],u=nd(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Zf(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),ed.apply(this,arguments)}function td(){return(td=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ci(t),e.next=3,$f(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nd(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(A(n),A(t))}function rd(e){return e.map((function(e){var t=e.providerId,n=Wh(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function id(e,t){return ad.apply(this,arguments)}function ad(){return(ad=yr(pr().mark((function e(t,n){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pf(t,{},yr(pr().mark((function e(){var r,i,a,o,s,u;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ei({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=Lf(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Ef.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var od=function(){function e(){N(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return R(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){vf(e.idToken,"internal-error"),vf("undefined"!==typeof e.idToken,"internal-error"),vf("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Hf(e);return vf(t,"internal-error"),vf("undefined"!==typeof t.exp,"internal-error"),vf("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=yr(pr().mark((function e(t){var n,r=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],vf(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=yr(pr().mark((function e(t,n){var r,i,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,id(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return yf("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(vf("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(vf("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(vf("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function sd(e,t){vf("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var ud=function(){function e(t){N(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Wh(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?A(a.providerData):[],this.metadata=new Zf(a.createdAt||void 0,a.lastLoginAt||void 0)}return R(e,[{key:"getIdToken",value:function(){var e=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qf(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(vf(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Kf.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return td.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(vf(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){vf(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=yr(pr().mark((function e(t){var n,r,i=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,$f(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=yr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Qf(this,jf(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,y=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,_=n.emailVerified,w=n.isAnonymous,b=n.providerData,x=n.stsTokenManager;vf(k&&x,t,"internal-error");var I=od.fromJSON(this.name,x);vf("string"===typeof k,t,"internal-error"),sd(h,t.name),sd(f,t.name),vf("boolean"===typeof _,t,"internal-error"),vf("boolean"===typeof w,t,"internal-error"),sd(d,t.name),sd(p,t.name),sd(v,t.name),sd(y,t.name),sd(m,t.name),sd(g,t.name);var E=new e({uid:k,auth:t,email:f,emailVerified:_,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return b&&Array.isArray(b)&&(E.providerData=b.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=yr(pr().mark((function t(n,r){var i,a,o,s=arguments;return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new od).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,$f(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),cd=function(){function e(){N(this,e),this.type="NONE",this.storage={}}return R(e,[{key:"_isAvailable",value:function(){var e=yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();cd.type="NONE";var ld=cd;function hd(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var fd=function(){function e(t,n,r){N(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=hd(this.userKey,a.apiKey,o),this.fullPersistenceKey=hd("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return R(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=yr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?ud._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=yr(pr().mark((function t(n,r){var i,a,o,s,u,c,l,h,f,d,p,v=arguments;return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(kf(ld),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||kf(ld),s=hd(i,n.config.apiKey,n.name),u=null,c=mr(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return d=ud._fromJSON(n,f),h!==o&&(u=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function dd(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(md(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(pd(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(kd(t))return"Blackberry";if(_d(t))return"Webos";if(vd(t))return"Safari";if((t.includes("chrome/")||yd(t))&&!t.includes("edge/"))return"Chrome";if(gd(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function pd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr();return/firefox\//i.test(e)}function vd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function yd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr();return/crios\//i.test(e)}function md(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr();return/iemobile/i.test(e)}function gd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr();return/android/i.test(e)}function kd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr();return/blackberry/i.test(e)}function _d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr();return/webos/i.test(e)}function wd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr();return/iphone|ipad|ipod/i.test(e)}function bd(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr();return wd(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function xd(){return jr()&&10===document.documentMode}function Id(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr();return wd(e)||gd(e)||_d(e)||kd(e)||/windows phone/i.test(e)||md(e)}function Ed(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=dd(Dr());break;case"Worker":t="".concat(dd(Dr()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ra,"/").concat(r)}var Sd=function(){function e(t){N(this,e),this.auth=t,this.queue=[]}return R(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=yr(pr().mark((function e(t){var n,r,i,a,o,s,u;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=mr(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=mr(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Td=function(){function e(t,n,r){N(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ad(this),this.idTokenSubscription=new Ad(this),this.beforeStateQueue=new Sd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sf,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return R(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=kf(t)),this._initializationPromise=this.queue(yr(pr().mark((function r(){var i,a;return pr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,fd.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=yr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=yr(pr().mark((function e(t){var n,r,i,a,o,s,u;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return vf(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$f(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ci(t):null)&&vf(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=yr(pr().mark((function e(t){var n,r=this,i=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&vf(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(yr(pr().mark((function n(){return pr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(kf(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new qr("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=yr(pr().mark((function e(t,n){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return vf(n=t&&kf(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,fd.create(this,[kf(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=yr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=yr(pr().mark((function e(t){var n=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return vf(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return vf(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ed(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=yr(pr().mark((function e(){var t,n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=B({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Cd(e){return ci(e)}var Ad=function(){function e(t){var n=this;N(this,e),this.auth=t,this.observer=null,this.addObserver=ii((function(e){return n.observer=e}))}return R(e,[{key:"next",get:function(){return vf(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Nd(e,t,n){var r=Cd(e);vf(r._canInitEmulator,r,"emulator-config-failed"),vf(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Pd(t),o=function(e){var t=Pd(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Rd(r.substr(a.length+1))}}var o=w(r.split(":"),2);return{host:o[0],port:Rd(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Pd(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Rd(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Dd=function(){function e(t,n){N(this,e),this.providerId=t,this.signInMethod=n}return R(e,[{key:"toJSON",value:function(){return yf("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return yf("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return yf("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return yf("not implemented")}}]),e}();function Od(e,t){return Ld.apply(this,arguments)}function Ld(){return(Ld=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Af(t,"POST","/v1/accounts:resetPassword",Cf(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Md(e,t){return Fd.apply(this,arguments)}function Fd(){return(Fd=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Af(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jd(e,t){return Ud.apply(this,arguments)}function Ud(){return(Ud=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Af(t,"POST","/v1/accounts:update",Cf(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vd(e,t){return Bd.apply(this,arguments)}function Bd(){return(Bd=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Df(t,"POST","/v1/accounts:signInWithPassword",Cf(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qd(e,t){return zd.apply(this,arguments)}function zd(){return(zd=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Af(t,"POST","/v1/accounts:sendOobCode",Cf(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wd(e,t){return Kd.apply(this,arguments)}function Kd(){return(Kd=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qd(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gd(e,t){return Hd.apply(this,arguments)}function Hd(){return(Hd=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qd(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qd(e,t){return Yd.apply(this,arguments)}function Yd(){return(Yd=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qd(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jd(e,t){return Xd.apply(this,arguments)}function Xd(){return(Xd=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qd(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zd(e,t){return $d.apply(this,arguments)}function $d(){return($d=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Df(t,"POST","/v1/accounts:signInWithEmailLink",Cf(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ep(e,t){return tp.apply(this,arguments)}function tp(){return(tp=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Df(t,"POST","/v1/accounts:signInWithEmailLink",Cf(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var np=function(e){O(n,e);var t=V(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return N(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return R(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Vd(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Zd(t,{email:this._email,oobCode:this._password}));case 5:lf(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Md(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ep(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:lf(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Dd);function rp(e,t){return ip.apply(this,arguments)}function ip(){return(ip=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Df(t,"POST","/v1/accounts:signInWithIdp",Cf(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ap=function(e){O(n,e);var t=V(n);function n(){var e;return N(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return R(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return rp(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,rp(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,rp(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ei(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):lf("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Wh(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Dd);function op(e,t){return sp.apply(this,arguments)}function sp(){return(sp=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Af(t,"POST","/v1/accounts:sendVerificationCode",Cf(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function up(){return(up=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Df(t,"POST","/v1/accounts:signInWithPhoneNumber",Cf(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cp(){return(cp=yr(pr().mark((function e(t,n){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Df(t,"POST","/v1/accounts:signInWithPhoneNumber",Cf(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Ff(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lp=B({},"USER_NOT_FOUND","user-not-found");function hp(){return(hp=yr(pr().mark((function e(t,n){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Df(t,"POST","/v1/accounts:signInWithPhoneNumber",Cf(t,r),lp));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fp=function(e){O(n,e);var t=V(n);function n(e){var r;return N(this,n),(r=t.call(this,"phone","phone")).params=e,r}return R(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return up.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return cp.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return hp.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Dd);var dp=function(){function e(t){var n,r,i,a,o,s;N(this,e);var u=ti(ni(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);vf(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return R(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ti(ni(e)).link,n=t?ti(ni(t)).deep_link_id:null,r=ti(ni(e)).deep_link_id;return(r?ti(ni(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(yR){return null}}}]),e}();var pp=function(){function e(){N(this,e),this.providerId=e.PROVIDER_ID}return R(e,null,[{key:"credential",value:function(e,t){return np._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=dp.parseLink(t);return vf(n,"argument-error"),np._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();pp.PROVIDER_ID="password",pp.EMAIL_PASSWORD_SIGN_IN_METHOD="password",pp.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var vp=function(){function e(t){N(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return R(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),yp=function(e){O(n,e);var t=V(n);function n(){var e;return N(this,n),(e=t.apply(this,arguments)).scopes=[],e}return R(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return A(this.scopes)}}]),n}(vp),mp=function(e){O(n,e);var t=V(n);function n(){return N(this,n),t.apply(this,arguments)}return R(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return vf(e.idToken||e.accessToken,"argument-error"),ap._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return vf("providerId"in t&&"signInMethod"in t,"argument-error"),ap._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(yp),gp=function(e){O(n,e);var t=V(n);function n(){return N(this,n),t.call(this,"facebook.com")}return R(n,null,[{key:"credential",value:function(e){return ap._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(yR){return null}}}]),n}(yp);gp.FACEBOOK_SIGN_IN_METHOD="facebook.com",gp.PROVIDER_ID="facebook.com";var kp=function(e){O(n,e);var t=V(n);function n(){var e;return N(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return R(n,null,[{key:"credential",value:function(e,t){return ap._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(yR){return null}}}]),n}(yp);kp.GOOGLE_SIGN_IN_METHOD="google.com",kp.PROVIDER_ID="google.com";var _p=function(e){O(n,e);var t=V(n);function n(){return N(this,n),t.call(this,"github.com")}return R(n,null,[{key:"credential",value:function(e){return ap._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(yR){return null}}}]),n}(yp);_p.GITHUB_SIGN_IN_METHOD="github.com",_p.PROVIDER_ID="github.com";var wp=function(e){O(n,e);var t=V(n);function n(e,r){var i;return N(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return R(n,[{key:"_getIdTokenResponse",value:function(e){return rp(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,rp(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,rp(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Dd),bp=function(e){O(n,e);var t=V(n);function n(e){return N(this,n),vf(e.startsWith("saml."),"argument-error"),t.call(this,e)}return R(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=wp.fromJSON(e);return vf(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return wp._create(r,n)}catch(i){return null}}}]),n}(vp),xp=function(e){O(n,e);var t=V(n);function n(){return N(this,n),t.call(this,"twitter.com")}return R(n,null,[{key:"credential",value:function(e,t){return ap._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(yR){return null}}}]),n}(yp);function Ip(e,t){return Ep.apply(this,arguments)}function Ep(){return(Ep=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Df(t,"POST","/v1/accounts:signUp",Cf(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}xp.TWITTER_SIGN_IN_METHOD="twitter.com",xp.PROVIDER_ID="twitter.com";var Sp=function(){function e(t){N(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return R(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=yr(pr().mark((function t(n,r,i){var a,o,s,u,c=arguments;return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,ud._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=Tp(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=yr(pr().mark((function t(n,r,i){var a;return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Tp(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Tp(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Cp(){return Cp=yr(pr().mark((function e(t){var n,r,i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cd(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Sp({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Ip(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Sp._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Cp.apply(this,arguments)}var Ap=function(e){O(n,e);var t=V(n);function n(e,r,i,a){var o,s;return N(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(j(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return R(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Br);function Np(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ap._fromErrorAndOperation(e,n,t,r);throw n}))}function Pp(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Rp(e,t){return Dp.apply(this,arguments)}function Dp(){return Dp=yr(pr().mark((function e(t,n){var r,i,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ci(t),e.next=3,Mp(!0,r,n);case 3:return e.t0=Vf,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Pp(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Dp.apply(this,arguments)}function Op(e,t){return Lp.apply(this,arguments)}function Lp(){return Lp=yr(pr().mark((function e(t,n){var r,i,a=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Qf,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Sp._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Lp.apply(this,arguments)}function Mp(e,t,n){return Fp.apply(this,arguments)}function Fp(){return(Fp=yr(pr().mark((function e(t,n,r){var i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$f(n);case 2:i=Pp(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",vf(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jp(e,t){return Up.apply(this,arguments)}function Up(){return Up=yr(pr().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Qf(t,Np(i,a,n,t),r);case 6:return vf((o=e.sent).idToken,i,"internal-error"),vf(s=Hf(o.idToken),i,"internal-error"),u=s.sub,vf(t.uid===u,i,"user-mismatch"),e.abrupt("return",Sp._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&lf(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Up.apply(this,arguments)}function Vp(e,t){return Bp.apply(this,arguments)}function Bp(){return Bp=yr(pr().mark((function e(t,n){var r,i,a,o,s=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Np(t,i,n);case 4:return a=e.sent,e.next=7,Sp._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Bp.apply(this,arguments)}function qp(e,t){return zp.apply(this,arguments)}function zp(){return(zp=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vp(Cd(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wp(e,t){return Kp.apply(this,arguments)}function Kp(){return(Kp=yr(pr().mark((function e(t,n){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ci(t),e.next=3,Mp(!1,r,n.providerId);case 3:return e.abrupt("return",Op(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gp(e,t){return Hp.apply(this,arguments)}function Hp(){return(Hp=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jp(ci(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qp(e,t){return Yp.apply(this,arguments)}function Yp(){return(Yp=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Df(t,"POST","/v1/accounts:signInWithCustomToken",Cf(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jp(){return(Jp=yr(pr().mark((function e(t,n){var r,i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cd(t),e.next=3,Qp(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Sp._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xp=function(){function e(t,n){N(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return R(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Zp._fromServerResponse(e,t):lf(e,"internal-error")}}]),e}(),Zp=function(e){O(n,e);var t=V(n);function n(e){var r;return N(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return R(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Xp);function $p(e,t,n){var r;vf((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),vf("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(vf(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(vf(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function ev(){return(ev=yr(pr().mark((function e(t,n,r){var i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ci(t),a={requestType:"PASSWORD_RESET",email:n},r&&$p(i,a,r),e.next=5,Gd(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tv(){return(tv=yr(pr().mark((function e(t,n,r){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Od(ci(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nv(){return(nv=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jd(ci(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rv(e,t){return iv.apply(this,arguments)}function iv(){return(iv=yr(pr().mark((function e(t,n){var r,i,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ci(t),e.next=3,Od(r,{oobCode:n});case 3:i=e.sent,vf(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return vf(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:vf(i.mfaInfo,r,"internal-error");case 13:vf(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Xp._fromServerResponse(Cd(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function av(){return(av=yr(pr().mark((function e(t,n){var r,i;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rv(ci(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ov(e,t,n){return sv.apply(this,arguments)}function sv(){return(sv=yr(pr().mark((function e(t,n,r){var i,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Cd(t),e.next=3,Ip(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Sp._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uv(){return(uv=yr(pr().mark((function e(t,n,r){var i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ci(t),a={requestType:"EMAIL_SIGNIN",email:n},vf(r.handleCodeInApp,i,"argument-error"),r&&$p(i,a,r),e.next=6,Qd(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cv(){return(cv=yr(pr().mark((function e(t,n,r){var i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ci(t),vf((a=pp.credentialWithLink(n,r||_f()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",qp(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lv(e,t){return hv.apply(this,arguments)}function hv(){return(hv=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Af(t,"POST","/v1/accounts:createAuthUri",Cf(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fv(){return(fv=yr(pr().mark((function e(t,n){var r,i,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wf()?_f():"http://localhost",i={identifier:n,continueUri:r},e.next=4,lv(ci(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dv(){return(dv=yr(pr().mark((function e(t,n){var r,i,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ci(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&$p(r.auth,a,n),e.next=8,Wd(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pv(){return(pv=yr(pr().mark((function e(t,n,r){var i,a,o,s;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ci(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&$p(i.auth,o,r),e.next=8,Jd(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vv(e,t){return yv.apply(this,arguments)}function yv(){return(yv=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Af(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mv(){return(mv=yr(pr().mark((function e(t,n){var r,i,a,o,s,u,c;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ci(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Qf(a,vv(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gv(e,t,n){return kv.apply(this,arguments)}function kv(){return(kv=yr(pr().mark((function e(t,n,r){var i,a,o,s;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Qf(t,Md(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _v=R((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};N(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),wv=function(e){O(n,e);var t=V(n);function n(e,r,i,a){var o;return N(this,n),(o=t.call(this,e,r,i)).username=a,o}return R(n)}(_v),bv=function(e){O(n,e);var t=V(n);function n(e,r){return N(this,n),t.call(this,e,"facebook.com",r)}return R(n)}(_v),xv=function(e){O(n,e);var t=V(n);function n(e,r){return N(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return R(n)}(wv),Iv=function(e){O(n,e);var t=V(n);function n(e,r){return N(this,n),t.call(this,e,"google.com",r)}return R(n)}(_v),Ev=function(e){O(n,e);var t=V(n);function n(e,r,i){return N(this,n),t.call(this,e,"twitter.com",r,i)}return R(n)}(wv);function Sv(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Hf(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new _v(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new bv(a,i);case"github.com":return new xv(a,i);case"google.com":return new Iv(a,i);case"twitter.com":return new Ev(a,i,e.screenName||null);case"custom":case"anonymous":return new _v(a,null);default:return new _v(a,r,i)}}(n)}var Tv=function(){function e(t,n){N(this,e),this.type=t,this.credential=n}return R(e,[{key:"toJSON",value:function(){return{multiFactorSession:B({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Cv=function(){function e(t,n,r){N(this,e),this.session=t,this.hints=n,this.signInResolver=r}return R(e,[{key:"resolveSignIn",value:function(){var e=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Cd(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Xp._fromServerResponse(r,e)}));vf(i.mfaPendingCredential,r,"internal-error");var o=Tv._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=yr(pr().mark((function e(t){var a,s,u;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Sp._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return vf(n.user,r,"internal-error"),e.abrupt("return",Sp._forOperation(n.user,n.operationType,s));case 17:lf(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Av(e,t){return Af(e,"POST","/v2/accounts/mfaEnrollment:start",Cf(e,t))}var Nv=function(){function e(t){var n=this;N(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Xp._fromServerResponse(t.auth,e)})))}))}return R(e,[{key:"getSession",value:function(){var e=yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Tv,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=yr(pr().mark((function e(t,n){var r,i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Qf(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=yr(pr().mark((function e(t){var n,r,i;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Qf(this.user,Af(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Cf(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Pv=new WeakMap;var Rv="__sak",Dv=function(){function e(t,n){N(this,e),this.storageRetriever=t,this.type=n}return R(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Rv,"1"),this.storage.removeItem(Rv),Promise.resolve(!0)):Promise.resolve(!1)}catch(yR){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Ov=function(e){O(n,e);var t=V(n);function n(){var e;return N(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Dr();return vd(e)||wd(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Id(),e._shouldAllowMigration=!0,e}return R(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);xd()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=yr(pr().mark((function e(t,r){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zh(L(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=yr(pr().mark((function e(t){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zh(L(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zh(L(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Dv);Ov.type="LOCAL";var Lv=Ov,Mv=function(e){O(n,e);var t=V(n);function n(){return N(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return R(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Dv);Mv.type="SESSION";var Fv=Mv;function jv(e){return Promise.all(e.map(function(){var e=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Uv=function(){function e(t){N(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return R(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=yr(pr().mark((function e(t){var n,r,i,a,o,s,u,c;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,jv(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Vv(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Uv.receivers=[];var Bv=function(){function e(t){N(this,e),this.target=t,this.handlers=new Set}return R(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=yr(pr().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Vv("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function qv(){return window}function zv(){return"undefined"!==typeof qv().WorkerGlobalScope&&"function"===typeof qv().importScripts}function Wv(){return Kv.apply(this,arguments)}function Kv(){return(Kv=yr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Gv(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Hv="firebaseLocalStorageDb",Qv="firebaseLocalStorage",Yv="fbase_key",Jv=function(){function e(t){N(this,e),this.request=t}return R(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Xv(e,t){return e.transaction([Qv],t?"readwrite":"readonly").objectStore(Qv)}function Zv(){var e=indexedDB.deleteDatabase(Hv);return new Jv(e).toPromise()}function $v(){var e=indexedDB.open(Hv,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Qv,{keyPath:Yv})}catch(r){n(r)}})),e.addEventListener("success",yr(pr().mark((function n(){var r;return pr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Qv)){n.next=12;break}return r.close(),n.next=5,Zv();case 5:return n.t0=t,n.next=8,$v();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function ey(e,t,n){return ty.apply(this,arguments)}function ty(){return ty=yr(pr().mark((function e(t,n,r){var i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Xv(t,!0).put((B(i={},Yv,n),B(i,"value",r),i)),e.abrupt("return",new Jv(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),ty.apply(this,arguments)}function ny(e,t){return ry.apply(this,arguments)}function ry(){return ry=yr(pr().mark((function e(t,n){var r,i;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xv(t,!1).get(n),e.next=3,new Jv(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),ry.apply(this,arguments)}function iy(e,t){var n=Xv(e,!0).delete(t);return new Jv(n).toPromise()}var ay=function(){function e(){N(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return R(e,[{key:"_openDb",value:function(){var e=yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,$v();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=yr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zv()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=yr(pr().mark((function e(){var t=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Uv._getInstance(zv()?self:null),this.receiver._subscribe("keyChanged",function(){var e=yr(pr().mark((function e(n,r){var i;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=yr(pr().mark((function e(){var t,n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wv();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Bv(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Gv()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=yr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,$v();case 5:return t=e.sent,e.next=8,ey(t,Rv,"1");case 8:return e.next=10,iy(t,Rv);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=yr(pr().mark((function e(t,n){var r=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return ey(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return ny(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=yr(pr().mark((function e(t){var n=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return iy(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=yr(pr().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Xv(e,!1).getAll();return new Jv(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=mr(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(yr(pr().mark((function t(){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();ay.type="LOCAL";var oy=ay;function sy(e,t){return Af(e,"POST","/v2/accounts/mfaSignIn:start",Cf(e,t))}function uy(e){return cy.apply(this,arguments)}function cy(){return(cy=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Af(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ly(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=hf("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function hy(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var fy=1e12,dy=function(){function e(t){N(this,e),this.auth=t,this.counter=fy,this._widgets=new Map}return R(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new py(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||fy;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||fy;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=yr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||fy,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),py=function(){function e(t,n,r){var i=this;N(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;vf(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return R(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var vy=hy("rcb"),yy=new xf(3e4,6e4),my="https://www.google.com/recaptcha/api.js?",gy=function(){function e(){N(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!qv().grecaptcha}return R(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return vf(ky(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(qv().grecaptcha):new Promise((function(r,i){var a=qv().setTimeout((function(){i(hf(e,"network-request-failed"))}),yy.get());qv()[vy]=function(){qv().clearTimeout(a),delete qv()[vy];var o=qv().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(hf(e,"internal-error"))},ly("".concat(my,"?").concat(ei({onload:vy,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(hf(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!qv().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function ky(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var _y=function(){function e(){N(this,e)}return R(e,[{key:"load",value:function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new dy(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),wy="recaptcha",by={theme:"light",type:"image"},xy=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},by),r=arguments.length>2?arguments[2]:void 0;N(this,e),this.parameters=n,this.type=wy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cd(r),this.isInvisible="invisible"===this.parameters.size,vf("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;vf(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _y:new gy,this.validateStartingState()}return R(e,[{key:"verify",value:function(){var e=yr(pr().mark((function e(){var t,n,r,i=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){vf(!this.parameters.sitekey,this.auth,"argument-error"),vf(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),vf("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=qv()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){vf(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=yr(pr().mark((function e(){var t,n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=yr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vf(wf()&&!zv(),this.auth,"internal-error"),e.next=3,Iy();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,uy(this.auth);case 8:vf(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return vf(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Iy(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Ey=function(){function e(t,n){N(this,e),this.verificationId=t,this.onConfirmation=n}return R(e,[{key:"confirm",value:function(e){var t=fp._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Sy(){return(Sy=yr(pr().mark((function e(t,n,r){var i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Cd(t),e.next=3,Ny(i,n,ci(r));case 3:return a=e.sent,e.abrupt("return",new Ey(a,(function(e){return qp(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ty(e,t,n){return Cy.apply(this,arguments)}function Cy(){return(Cy=yr(pr().mark((function e(t,n,r){var i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ci(t),e.next=3,Mp(!1,i,"phone");case 3:return e.next=5,Ny(i.auth,n,ci(r));case 5:return a=e.sent,e.abrupt("return",new Ey(a,(function(e){return Wp(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ay(){return(Ay=yr(pr().mark((function e(t,n,r){var i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ci(t),e.next=3,Ny(i.auth,n,ci(r));case 3:return a=e.sent,e.abrupt("return",new Ey(a,(function(e){return Gp(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ny(e,t,n){return Py.apply(this,arguments)}function Py(){return Py=yr(pr().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,vf("string"===typeof a,t,"argument-error"),vf(r.type===wy,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return vf("enroll"===s.type,t,"internal-error"),e.next=13,Av(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return vf("signin"===s.type,t,"internal-error"),vf(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,sy(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,op(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Py.apply(this,arguments)}function Ry(){return(Ry=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Op(ci(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Dy=function(){function e(t){N(this,e),this.providerId=e.PROVIDER_ID,this.auth=Cd(t)}return R(e,[{key:"verifyPhoneNumber",value:function(e,t){return Ny(this.auth,e,ci(t))}}],[{key:"credential",value:function(e,t){return fp._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?fp._fromTokenResponse(n,r):null}}]),e}();function Oy(e,t){return t?kf(t):(vf(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Dy.PROVIDER_ID="phone",Dy.PHONE_SIGN_IN_METHOD="phone";var Ly=function(e){O(n,e);var t=V(n);function n(e){var r;return N(this,n),(r=t.call(this,"custom","custom")).params=e,r}return R(n,[{key:"_getIdTokenResponse",value:function(e){return rp(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return rp(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return rp(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Dd);function My(e){return Vp(e.auth,new Ly(e),e.bypassAuthState)}function Fy(e){var t=e.auth,n=e.user;return vf(n,t,"internal-error"),jp(n,new Ly(e),e.bypassAuthState)}function jy(e){return Uy.apply(this,arguments)}function Uy(){return(Uy=yr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,vf(r=t.user,n,"internal-error"),e.abrupt("return",Op(r,new Ly(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Vy=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];N(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return R(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=yr(pr().mark((function t(n,r){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=yr(pr().mark((function e(t){var n,r,i,a,o,s,u;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return My;case"linkViaPopup":case"linkViaRedirect":return jy;case"reauthViaPopup":case"reauthViaRedirect":return Fy;default:lf(this.auth,"internal-error")}}},{key:"resolve",value:function(e){mf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){mf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),By=new xf(2e3,1e4);function qy(e,t,n){return zy.apply(this,arguments)}function zy(){return(zy=yr(pr().mark((function e(t,n,r){var i,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Cd(t),df(t,n,vp),a=Oy(i,r),o=new Hy(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wy(){return(Wy=yr(pr().mark((function e(t,n,r){var i,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return df((i=ci(t)).auth,n,vp),a=Oy(i.auth,r),o=new Hy(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ky(e,t,n){return Gy.apply(this,arguments)}function Gy(){return(Gy=yr(pr().mark((function e(t,n,r){var i,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return df((i=ci(t)).auth,n,vp),a=Oy(i.auth,r),o=new Hy(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hy=function(e){O(n,e);var t=V(n);function n(e,r,i,a,o){var s;return N(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=j(s),s}return R(n,[{key:"executeNotNull",value:function(){var e=yr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return vf(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=yr(pr().mark((function e(){var t,n=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mf(1===this.filter.length,"Popup operations only handle one event"),t=Vv(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(hf(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(hf(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(hf(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,By.get())}()}}]),n}(Vy);Hy.currentPopupAction=null;var Qy=new Map,Yy=function(e){O(n,e);var t=V(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return N(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return R(n,[{key:"execute",value:function(){var e=yr(pr().mark((function e(){var t,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Qy.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Jy(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,zh(L(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Qy.set(this.auth._key(),t);case 21:return this.bypassAuthState||Qy.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=yr(pr().mark((function e(t){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",zh(L(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",zh(L(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Vy);function Jy(e,t){return Xy.apply(this,arguments)}function Xy(){return(Xy=yr(pr().mark((function e(t,n){var r,i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nm(n),i=tm(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zy(e,t){return $y.apply(this,arguments)}function $y(){return($y=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tm(t)._set(nm(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function em(e,t){Qy.set(e._key(),t)}function tm(e){return kf(e._redirectPersistence)}function nm(e){return hd("pendingRedirect",e.config.apiKey,e.name)}function rm(e,t,n){return function(e,t,n){return im.apply(this,arguments)}(e,t,n)}function im(){return(im=yr(pr().mark((function e(t,n,r){var i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Cd(t),df(t,n,vp),a=Oy(i,r),e.next=5,Zy(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function am(e,t,n){return function(e,t,n){return om.apply(this,arguments)}(e,t,n)}function om(){return(om=yr(pr().mark((function e(t,n,r){var i,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return df((i=ci(t)).auth,n,vp),a=Oy(i.auth,r),e.next=5,Zy(a,i.auth);case 5:return e.next=7,dm(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sm(e,t,n){return function(e,t,n){return um.apply(this,arguments)}(e,t,n)}function um(){return(um=yr(pr().mark((function e(t,n,r){var i,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return df((i=ci(t)).auth,n,vp),a=Oy(i.auth,r),e.next=5,Mp(!1,i,n.providerId);case 5:return e.next=7,Zy(a,i.auth);case 7:return e.next=9,dm(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cm(e,t){return lm.apply(this,arguments)}function lm(){return(lm=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cd(t)._initializationPromise;case 2:return e.abrupt("return",hm(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hm(e,t){return fm.apply(this,arguments)}function fm(){return fm=yr(pr().mark((function e(t,n){var r,i,a,o,s,u=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=Cd(t),a=Oy(i,n),o=new Yy(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),fm.apply(this,arguments)}function dm(e){return pm.apply(this,arguments)}function pm(){return(pm=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Vv("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vm=function(){function e(t){N(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return R(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mm(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!mm(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(hf(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ym(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(ym(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function ym(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function mm(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function gm(e){return km.apply(this,arguments)}function km(){return km=yr(pr().mark((function e(t){var n,r=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Af(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),km.apply(this,arguments)}var _m=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wm=/^https?/;function bm(){return(bm=yr(pr().mark((function e(t){var n,r,i,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,gm(t);case 4:n=e.sent,r=n.authorizedDomains,i=mr(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!xm(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:lf(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function xm(e){var t=_f(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!wm.test(r))return!1;if(_m.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Im=new xf(3e4,6e4);function Em(){var e=qv().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=A(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Sm=null;function Tm(e){return Sm=Sm||function(e){return new Promise((function(t,n){var r,i,a;function o(){Em(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Em(),n(hf(e,"network-request-failed"))},timeout:Im.get()})}if(null===(i=null===(r=qv().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=qv().gapi)||void 0===a?void 0:a.load)){var s=hy("iframefcb");return qv()[s]=function(){gapi.load?o():n(hf(e,"network-request-failed"))},ly("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Sm=null,e}))}(e),Sm}var Cm=new xf(5e3,15e3),Am={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pm(e){var t=e.config;vf(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?If(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:ra},i=Nm.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(ei(r).slice(1))}function Rm(e){return Dm.apply(this,arguments)}function Dm(){return Dm=yr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tm(t);case 2:return n=e.sent,vf(r=qv().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Pm(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Am,dontclear:!0},(function(e){return new Promise(function(){var n=yr(pr().mark((function n(r,i){var a,o,s;return pr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){qv().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=hf(t,"network-request-failed"),o=qv().setTimeout((function(){i(a)}),Cm.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Dm.apply(this,arguments)}var Om={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Lm="_blank",Mm="http://localhost",Fm=function(){function e(t){N(this,e),this.window=t,this.associatedEvent=null}return R(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function jm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},Om),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Dr().toLowerCase();n&&(s=yd(c)?Lm:n),pd(c)&&(t=t||Mm,u.scrollbars="yes");var l=Object.entries(u).reduce((function(e,t){var n=w(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(bd(c)&&"_self"!==s)return Um(t||"",s),new Fm(null);var h=window.open(t||"",s,l);vf(h,e,"popup-blocked");try{h.focus()}catch(f){}return new Fm(h)}function Um(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Vm="__/auth/handler",Bm="emulator/auth/handler";function qm(e,t,n,r,i,a){vf(e.config.authDomain,e,"auth-domain-config-required"),vf(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ra,eventId:i};if(t instanceof vp){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Jr(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(a||{});s<u.length;s++){var c=w(u[s],2),l=c[0],h=c[1];o[l]=h}}if(t instanceof yp){var f=t.getScopes().filter((function(e){return""!==e}));f.length>0&&(o.scopes=f.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Vm);return If(t,Bm)}(e),"?").concat(ei(d).slice(1))}var zm="webStorageSupport",Wm=function(){function e(){N(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fv,this._completeRedirectFn=hm,this._overrideRedirectResult=em}return R(e,[{key:"_openPopup",value:function(){var e=yr(pr().mark((function e(t,n,r,i){var a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mf(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=qm(t,n,r,_f(),i),e.abrupt("return",jm(t,o,Vv()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=yr(pr().mark((function e(t,n,r,i){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=qm(t,n,r,_f(),i),qv().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(mf(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=yr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rm(t);case 2:return n=e.sent,r=new vm(t),n.register("authEvent",(function(e){return vf(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(zm,{type:zm},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),lf(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return bm.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Id()||vd()||wd()}}]),e}(),Km=Wm,Gm=function(e){O(n,e);var t=V(n);function n(e){var r;return N(this,n),(r=t.call(this,"phone")).credential=e,r}return R(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Af(e,"POST","/v2/accounts/mfaEnrollment:finalize",Cf(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Af(e,"POST","/v2/accounts/mfaSignIn:finalize",Cf(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){N(this,e),this.factorId=t}return R(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return yf("unexpected MultiFactorSessionType")}}}]),e}()),Hm=function(){function e(){N(this,e)}return R(e,null,[{key:"assertion",value:function(e){return Gm._fromCredential(e)}}]),e}();Hm.FACTOR_ID="phone";var Qm,Ym="@firebase/auth",Jm="0.20.2",Xm=function(){function e(t){N(this,e),this.auth=t,this.internalListeners=new Map}return R(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){vf(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Zm(){return window}Qm="Browser",Ji(new li("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){vf(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),vf(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:Qm,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ed(Qm)},i=new Td(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(kf);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Ji(new li("auth-internal",(function(e){return function(e){return new Xm(e)}(Cd(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ca(Ym,Jm,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Qm)),ca(Ym,Jm,"esm2017");function $m(e,t,n){return eg.apply(this,arguments)}function eg(){return eg=yr(pr().mark((function e(t,n,r){var i,a,o,s,u;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Zm(),o=a.BuildInfo,mf(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,og(n.sessionId);case 4:return s=e.sent,u={},wd()?u.ibi=o.packageName:gd()?u.apn=o.packageName:lf(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",qm(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),eg.apply(this,arguments)}function tg(){return(tg=yr(pr().mark((function e(t){var n,r,i;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Zm(),r=n.BuildInfo,i={},wd()?i.iosBundleId=r.packageName:gd()?i.androidPackageName=r.packageName:lf(t,"operation-not-supported-in-this-environment"),e.next=5,gm(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ng(e){var t=Zm().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function rg(e,t,n){return ig.apply(this,arguments)}function ig(){return ig=yr(pr().mark((function e(t,n,r){var i,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Zm(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(hf(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),gd()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),ig.apply(this,arguments)}function ag(e){var t,n,r,i,a,o,s,u,c,l,h=Zm();vf("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),vf("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),vf("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),vf("function"===typeof(null===(u=null===(s=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),vf("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function og(e){return sg.apply(this,arguments)}function sg(){return(sg=yr(pr().mark((function e(t){var n,r,i;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ug(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ug(e){if(mf(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var cg=function(e){O(n,e);var t=V(n);function n(){var e;return N(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return R(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),zh(L(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(vm);function lg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:vg(),postBody:null,tenantId:e.tenantId,error:hf(e,"no-auth-event")}}function hg(e,t){return yg()._set(mg(e),t)}function fg(e){return dg.apply(this,arguments)}function dg(){return(dg=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yg()._get(mg(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,yg()._remove(mg(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pg(e,t){var n,r,i=function(e){var t=gg(e),n=t.link?decodeURIComponent(t.link):void 0,r=gg(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return gg(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=gg(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?hf(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function vg(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function yg(){return kf(Lv)}function mg(e){return hd("authEvent",e.config.apiKey,e.name)}function gg(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=m(t=n)||C(t)||k(t)||_();r[0];return ti(r.slice(1).join("?"))}var kg=function(){function e(){N(this,e),this._redirectPersistence=Fv,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=hm,this._overrideRedirectResult=em}return R(e,[{key:"_initialize",value:function(){var e=yr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new cg(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){lf(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=yr(pr().mark((function e(t,n,r,i){var a,o,s,u;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ag(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Qy.clear(),e.next=10,this._originValidation(t);case 10:return o=lg(t,r,i),e.next=13,hg(t,o);case 13:return e.next=15,$m(t,o,n);case 15:return s=e.sent,e.next=18,ng(s);case 18:return u=e.sent,e.abrupt("return",rg(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return tg.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Zm(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(yr(pr().mark((function n(){return pr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fg(e);case 2:t.onEvent(wg());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=yr(pr().mark((function n(r){var i,a;return pr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,fg(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=pg(i,r.url)),t.onEvent(a||wg());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");Zm().handleOpenURL=function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),_g=kg;function wg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:hf("no-auth-event")}}function bg(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function xg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr();return!("file:"!==bg()&&"ionic:"!==bg()&&"capacitor:"!==bg()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ig(){return jr()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Eg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr();return/Edge\/\d+/.test(e)}function Sg(){try{var e=self.localStorage,t=Vv();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr();return Ig()||Eg(e)}()||Vr()}catch(n){return Tg()&&Vr()}return!1}function Tg(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Cg(){return("http:"===bg()||"https:"===bg()||Mr()||xg())&&!(Fr()||Lr())&&Sg()&&!Tg()}function Ag(){return xg()&&"undefined"!==typeof document}function Ng(){return Pg.apply(this,arguments)}function Pg(){return(Pg=yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ag()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rg={LOCAL:"local",NONE:"none",SESSION:"session"},Dg=vf,Og="persistence";function Lg(e,t){Dg(Object.values(Rg).includes(t),e,"invalid-persistence-type"),Fr()?Dg(t!==Rg.SESSION,e,"unsupported-persistence-type"):Lr()?Dg(t===Rg.NONE,e,"unsupported-persistence-type"):Tg()?Dg(t===Rg.NONE||t===Rg.LOCAL&&Vr(),e,"unsupported-persistence-type"):Dg(t===Rg.NONE||Sg(),e,"unsupported-persistence-type")}function Mg(e){return Fg.apply(this,arguments)}function Fg(){return(Fg=yr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=jg(),r=hd(Og,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jg(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Ug=vf,Vg=function(){function e(){N(this,e),this.browserResolver=kf(Km),this.cordovaResolver=kf(_g),this.underlyingResolver=null,this._redirectPersistence=Fv,this._completeRedirectFn=hm,this._overrideRedirectResult=em}return R(e,[{key:"_initialize",value:function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=yr(pr().mark((function e(t,n,r,i){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=yr(pr().mark((function e(t,n,r,i){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Ag()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Ug(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=yr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ng();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Bg(e){return e.unwrap()}function qg(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Hg(e,function(e,t){var n,r=ci(e),i=t;return vf(t.customData.operationType,r,"argument-error"),vf(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Cv._fromError(r,i)}(e,t));else if(r){var i=zg(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function zg(e){var t=(e instanceof Br?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Br)&&"temporaryProof"in t&&"phoneNumber"in t)return Dy.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Yh)return null;switch(r){case Qh:n=kp;break;case Gh:n=gp;break;case Hh:n=_p;break;case Jh:n=xp;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?wp._create(r,s):ap._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new mp(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof Br?n.credentialFromError(e):n.credentialFromResult(e)}function Wg(e,t){return t.catch((function(t){throw t instanceof Br&&qg(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,zg(t)),additionalUserInfo:Sv(e),user:Qg.getOrCreate(r)}}))}function Kg(e,t){return Gg.apply(this,arguments)}function Gg(){return(Gg=yr(pr().mark((function e(t,n){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Wg(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hg=function(){function e(t,n){N(this,e),this.resolver=n,this.auth=t.wrapped()}return R(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Wg(Bg(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Qg=function(){function e(t){N(this,e),this._delegate=t,this.multiFactor=function(e){var t=ci(e);return Pv.has(t)||Pv.set(t,Nv._fromUser(t)),Pv.get(t)}(t)}return R(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wg(this.auth,Wp(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kg(this.auth,Ty(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wg(this.auth,Ky(this._delegate,t,Vg)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mg(Cd(this.auth));case 2:return e.abrupt("return",sm(this._delegate,t,Vg));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wg(this.auth,Gp(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Kg(this.auth,function(e,t,n){return Ay.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Wg(this.auth,function(e,t,n){return Wy.apply(this,arguments)}(this._delegate,e,Vg))}},{key:"reauthenticateWithRedirect",value:function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mg(Cd(this.auth));case 2:return e.abrupt("return",am(this._delegate,t,Vg));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return dv.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rp(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return gv(ci(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return gv(ci(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Ry.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return mv.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return pv.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Qg.USER_MAP=new WeakMap;var Yg=vf,Jg=function(){function e(t,n){if(N(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Yg(r,"invalid-api-key",{appName:t.name}),Yg(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Vg:void 0;this._delegate=n.initialize({options:{persistence:Zg(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(af),this.linkUnderlyingAuth()}return R(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Qg.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Nd(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return nv.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return rv(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return tv.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wg(this._delegate,ov(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return fv.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=dp.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=yr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yg(Cg(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,cm(this._delegate,Vg);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Wg(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Cd(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Xg(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Xg(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return uv.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return ev.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=yr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Lg(this._delegate,t),e.t0=t,e.next=e.t0===Rg.SESSION?4:e.t0===Rg.LOCAL?6:e.t0===Rg.NONE?11:13;break;case 4:return n=Fv,e.abrupt("break",14);case 6:return e.next=8,kf(oy)._isAvailable();case 8:return r=e.sent,n=r?oy:Lv,e.abrupt("break",14);case 11:return n=ld,e.abrupt("break",14);case 13:return e.abrupt("return",lf("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Wg(this._delegate,function(e){return Cp.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Wg(this._delegate,qp(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Wg(this._delegate,function(e,t){return Jp.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Wg(this._delegate,function(e,t,n){return qp(ci(e),pp.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Wg(this._delegate,function(e,t,n){return cv.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Kg(this._delegate,function(e,t,n){return Sy.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yg(Cg(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Wg(this._delegate,qy(this._delegate,t,Vg)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yg(Cg(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Mg(this._delegate);case 3:return e.abrupt("return",rm(this._delegate,t,Vg));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return av.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Xg(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Qg.getOrCreate(e))},error:t,complete:n}}function Zg(e,t){var n=function(e,t){var n=jg();if(!n)return[];var r=hd(Og,e,t);switch(n.getItem(r)){case Rg.NONE:return[ld];case Rg.LOCAL:return[oy,Fv];case Rg.SESSION:return[Fv];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(oy)||n.push(oy),"undefined"!==typeof window)for(var r=0,i=[Lv,Fv];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(ld)||n.push(ld),n}Jg.Persistence=Rg;var $g=function(){function e(){N(this,e),this.providerId="phone",this._delegate=new Dy(Bg(Bh.auth()))}return R(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Dy.credential(e,t)}}]),e}();$g.PHONE_SIGN_IN_METHOD=Dy.PHONE_SIGN_IN_METHOD,$g.PROVIDER_ID=Dy.PROVIDER_ID;var ek,tk=vf,nk=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bh.app();N(this,e),tk(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new xy(t,n,i.auth()),this.type=this._delegate.type}return R(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(ek=Bh).INTERNAL.registerComponent(new li("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Jg(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Xh,PASSWORD_RESET:Zh,RECOVER_EMAIL:$h,REVERT_SECOND_FACTOR_ADDITION:ef,VERIFY_AND_CHANGE_EMAIL:tf,VERIFY_EMAIL:nf}},EmailAuthProvider:pp,FacebookAuthProvider:gp,GithubAuthProvider:_p,GoogleAuthProvider:kp,OAuthProvider:mp,SAMLAuthProvider:bp,PhoneAuthProvider:$g,PhoneMultiFactorGenerator:Hm,RecaptchaVerifier:nk,TwitterAuthProvider:xp,Auth:Jg,AuthCredential:Dd,Error:Br}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ek.registerVersion("@firebase/auth-compat","0.2.15");var rk,ik="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ak={},ok=ok||{},sk=ik||self;function uk(){}function ck(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function lk(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var hk="closure_uid_"+(1e9*Math.random()>>>0),fk=0;function dk(e,t,n){return e.call.apply(e.bind,arguments)}function pk(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function vk(e,t,n){return(vk=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dk:pk).apply(null,arguments)}function yk(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function mk(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function gk(){this.s=this.s,this.o=this.o}var kk={};gk.prototype.s=!1,gk.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,hk)&&e[hk]||(e[hk]=++fk)}(this);delete kk[e]}},gk.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var _k=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},wk=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function bk(e){return Array.prototype.concat.apply([],arguments)}function xk(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ik(e){return/^[\s\xa0]*$/.test(e)}var Ek,Sk=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Tk(e,t){return-1!=e.indexOf(t)}function Ck(e,t){return e<t?-1:e>t?1:0}e:{var Ak=sk.navigator;if(Ak){var Nk=Ak.userAgent;if(Nk){Ek=Nk;break e}}Ek=""}function Pk(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Rk(e){var t={};for(var n in e)t[n]=e[n];return t}var Dk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ok(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Dk.length;a++)n=Dk[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Lk(e){return Lk[" "](e),e}Lk[" "]=uk;var Mk,Fk=Tk(Ek,"Opera"),jk=Tk(Ek,"Trident")||Tk(Ek,"MSIE"),Uk=Tk(Ek,"Edge"),Vk=Uk||jk,Bk=Tk(Ek,"Gecko")&&!(Tk(Ek.toLowerCase(),"webkit")&&!Tk(Ek,"Edge"))&&!(Tk(Ek,"Trident")||Tk(Ek,"MSIE"))&&!Tk(Ek,"Edge"),qk=Tk(Ek.toLowerCase(),"webkit")&&!Tk(Ek,"Edge");function zk(){var e=sk.document;return e?e.documentMode:void 0}e:{var Wk="",Kk=function(){var e=Ek;return Bk?/rv:([^\);]+)(\)|;)/.exec(e):Uk?/Edge\/([\d\.]+)/.exec(e):jk?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):qk?/WebKit\/(\S+)/.exec(e):Fk?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Kk&&(Wk=Kk?Kk[1]:""),jk){var Gk=zk();if(null!=Gk&&Gk>parseFloat(Wk)){Mk=String(Gk);break e}}Mk=Wk}var Hk,Qk={};function Yk(){return function(e){var t=Qk;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Sk(String(Mk)).split("."),n=Sk("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Ck(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Ck(0==a[2].length,0==o[2].length)||Ck(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(sk.document&&jk){var Jk=zk();Hk=Jk||(parseInt(Mk,10)||void 0)}else Hk=void 0;var Xk=Hk,Zk=function(){if(!sk.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{sk.addEventListener("test",uk,t),sk.removeEventListener("test",uk,t)}catch(n){}return e}();function $k(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function e_(e,t){if($k.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Bk){e:{try{Lk(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:t_[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&e_.Z.h.call(this)}}$k.prototype.h=function(){this.defaultPrevented=!0},mk(e_,$k);var t_={2:"touch",3:"pen",4:"mouse"};e_.prototype.h=function(){e_.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var n_="closure_listenable_"+(1e6*Math.random()|0),r_=0;function i_(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++r_,this.ca=this.fa=!1}function a_(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function o_(e){this.src=e,this.g={},this.h=0}function s_(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=_k(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(a_(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function u_(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}o_.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=u_(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new i_(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var c_="closure_lm_"+(1e6*Math.random()|0),l_={};function h_(e,t,n,r,i){if(r&&r.once)return d_(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)h_(e,t[a],n,r,i);return null}return n=__(n),e&&e[n_]?e.N(t,n,lk(r)?!!r.capture:!!r,i):f_(e,t,n,!1,r,i)}function f_(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=lk(i)?!!i.capture:!!i,s=g_(e);if(s||(e[c_]=s=new o_(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=m_;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Zk||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(y_(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function d_(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)d_(e,t[a],n,r,i);return null}return n=__(n),e&&e[n_]?e.O(t,n,lk(r)?!!r.capture:!!r,i):f_(e,t,n,!0,r,i)}function p_(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)p_(e,t[a],n,r,i);else r=lk(r)?!!r.capture:!!r,n=__(n),e&&e[n_]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=u_(a=e.g[t],n,r,i))&&(a_(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=g_(e))&&(t=e.g[t.toString()],e=-1,t&&(e=u_(t,n,r,i)),(n=-1<e?t[e]:null)&&v_(n))}function v_(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[n_])s_(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(y_(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=g_(t))?(s_(n,e),0==n.h&&(n.src=null,t[c_]=null)):a_(e)}}}function y_(e){return e in l_?l_[e]:l_[e]="on"+e}function m_(e,t){if(e.ca)e=!0;else{t=new e_(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&v_(e),e=n.call(r,t)}return e}function g_(e){return(e=e[c_])instanceof o_?e:null}var k_="__closure_events_fn_"+(1e9*Math.random()>>>0);function __(e){return"function"===typeof e?e:(e[k_]||(e[k_]=function(t){return e.handleEvent(t)}),e[k_])}function w_(){gk.call(this),this.i=new o_(this),this.P=this,this.I=null}function b_(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new $k(t,e);else if(t instanceof $k)t.target=t.target||e;else{var i=t;Ok(t=new $k(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=x_(o,r,!0,t)&&i}if(i=x_(o=t.g=e,r,!0,t)&&i,i=x_(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=x_(o=t.g=n[a],r,!1,t)&&i}function x_(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&s_(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}mk(w_,gk),w_.prototype[n_]=!0,w_.prototype.removeEventListener=function(e,t,n,r){p_(this,e,t,n,r)},w_.prototype.M=function(){if(w_.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)a_(n[r]);delete t.g[e],t.h--}}this.I=null},w_.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},w_.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var I_=sk.JSON.stringify;function E_(){var e=D_,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S_,T_=function(){function e(){N(this,e),this.h=this.g=null}return R(e,[{key:"add",value:function(e,t){var n=C_.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),C_=new(function(){function e(t,n){N(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return R(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new A_}),(function(e){return e.reset()})),A_=function(){function e(){N(this,e),this.next=this.g=this.h=null}return R(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function N_(e){sk.setTimeout((function(){throw e}),0)}function P_(e,t){S_||function(){var e=sk.Promise.resolve(void 0);S_=function(){e.then(O_)}}(),R_||(S_(),R_=!0),D_.add(e,t)}var R_=!1,D_=new T_;function O_(){for(var e;e=E_();){try{e.h.call(e.g)}catch(n){N_(n)}var t=C_;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}R_=!1}function L_(e,t){w_.call(this),this.h=e||1,this.g=t||sk,this.j=vk(this.kb,this),this.l=Date.now()}function M_(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function F_(e,t,n){if("function"===typeof e)n&&(e=vk(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=vk(e.handleEvent,e)}return 2147483647<Number(t)?-1:sk.setTimeout(e,t||0)}function j_(e){e.g=F_((function(){e.g=null,e.i&&(e.i=!1,j_(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}mk(L_,w_),(rk=L_.prototype).da=!1,rk.S=null,rk.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),b_(this,"tick"),this.da&&(M_(this),this.start()))}},rk.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rk.M=function(){L_.Z.M.call(this),M_(this),delete this.g};var U_=function(e){O(n,e);var t=V(n);function n(e,r){var i;return N(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return R(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:j_(this)}},{key:"M",value:function(){zh(L(n.prototype),"M",this).call(this),this.g&&(sk.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(gk);function V_(e){gk.call(this),this.h=e,this.g={}}mk(V_,gk);var B_=[];function q_(e,t,n,r){Array.isArray(n)||(n&&(B_[0]=n.toString()),n=B_);for(var i=0;i<n.length;i++){var a=h_(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function z_(e){Pk(e.g,(function(e,t){this.g.hasOwnProperty(t)&&v_(e)}),e),e.g={}}function W_(){this.g=!0}function K_(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return I_(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}V_.prototype.M=function(){V_.Z.M.call(this),z_(this)},V_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},W_.prototype.Aa=function(){this.g=!1},W_.prototype.info=function(){};var G_={},H_=null;function Q_(){return H_=H_||new w_}function Y_(e){$k.call(this,G_.Ma,e)}function J_(e){var t=Q_();b_(t,new Y_(t,e))}function X_(e,t){$k.call(this,G_.STAT_EVENT,e),this.stat=t}function Z_(e){var t=Q_();b_(t,new X_(t,e))}function $_(e,t){$k.call(this,G_.Na,e),this.size=t}function ew(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return sk.setTimeout((function(){e()}),t)}G_.Ma="serverreachability",mk(Y_,$k),G_.STAT_EVENT="statevent",mk(X_,$k),G_.Na="timingevent",mk($_,$k);var tw={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},nw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function rw(){}function iw(e){return e.h||(e.h=e.i())}function aw(){}rw.prototype.h=null;var ow,sw={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function uw(){$k.call(this,"d")}function cw(){$k.call(this,"c")}function lw(){}function hw(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new V_(this),this.P=dw,e=Vk?125:void 0,this.W=new L_(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new fw}function fw(){this.i=null,this.g="",this.h=!1}mk(uw,$k),mk(cw,$k),mk(lw,rw),lw.prototype.g=function(){return new XMLHttpRequest},lw.prototype.i=function(){return{}},ow=new lw;var dw=45e3,pw={},vw={};function yw(e,t,n){e.K=1,e.v=Uw(Dw(t)),e.s=n,e.U=!0,mw(e,null)}function mw(e,t){e.F=Date.now(),ww(e),e.A=Dw(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Zw(n.h,"t",r),e.C=0,n=e.l.H,e.h=new fw,e.g=ex(e.l,n?t:null,!e.s),0<e.O&&(e.L=new U_(vk(e.Ia,e,e.g),e.O)),q_(e.V,e.g,"readystatechange",e.gb),t=e.H?Rk(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),J_(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function gw(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function kw(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=_w(e,n))==vw){4==t&&(e.o=4,Z_(14),i=!1),K_(e.j,e.m,null,"[Incomplete Response]");break}if(r==pw){e.o=4,Z_(15),K_(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}K_(e.j,e.m,r,null),Sw(e,r)}gw(e)&&r!=vw&&r!=pw&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Z_(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Gb(t),t.L=!0,Z_(11))):(K_(e.j,e.m,n,"[Invalid Chunked Response]"),Ew(e),Iw(e))}function _w(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?vw:(n=Number(t.substring(n,r)),isNaN(n)?pw:(r+=1)+n>t.length?vw:(t=t.substr(r,n),e.C=r+n,t))}function ww(e){e.Y=Date.now()+e.P,bw(e,e.P)}function bw(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ew(vk(e.eb,e),t)}function xw(e){e.B&&(sk.clearTimeout(e.B),e.B=null)}function Iw(e){0==e.l.G||e.I||Yb(e.l,e)}function Ew(e){xw(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,M_(e.W),z_(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Sw(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||ob(n.i,e)))if(n.I=e.N,!e.J&&ob(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Qb(n),Fb(n)}Kb(n),Z_(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ew(vk(n.ab,n),6e3));if(1>=ab(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Xb(n,11)}else if((e.J||n.g==e)&&Qb(n),!Ik(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Tk(l,"spdy")||Tk(l,"quic")||Tk(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(sb(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,jw(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=$b(r,r.H?r.la:null,r.W),d.J){ub(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(xw(p),ww(p)),r.g=d}else Wb(r);0<n.l.length&&Vb(n)}else"stop"!=a[0]&&"close"!=a[0]||Xb(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Xb(n,7):Mb(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}J_(4)}catch(a){}}function Tw(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ck(e)||"string"===typeof e)wk(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(ck(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(ck(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Cw(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Cw)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Aw(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Nw(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Nw(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Nw(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(rk=hw.prototype).setTimeout=function(e){this.P=e},rk.gb=function(e){e=e.target;var t=this.L;t&&3==Pb(e)?t.l():this.Ia(e)},rk.Ia=function(e){try{if(e==this.g)e:{var t=Pb(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Vk||this.g&&(this.h.h||this.g.ga()||Rb(this.g)))){this.I||4!=t||7==n||J_(8==n||0>=r?3:2),xw(this);var i=this.g.ba();this.N=i;t:if(gw(this)){var a=Rb(this.g);e="";var o=a.length,s=4==Pb(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ew(this),Iw(this);var u="";break t}this.h.i=new sk.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ik(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,Z_(12),Ew(this),Iw(this);break e}K_(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Sw(this,i)}this.U?(kw(this,t,u),Vk&&this.i&&3==t&&(q_(this.V,this.W,"tick",this.fb),this.W.start())):(K_(this.j,this.m,u,null),Sw(this,u)),4==t&&Ew(this),this.i&&!this.I&&(4==t?Yb(this.l,this):(this.i=!1,ww(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Z_(12)):(this.o=0,Z_(13)),Ew(this),Iw(this)}}}catch(t){}},rk.fb=function(){if(this.g){var e=Pb(this.g),t=this.g.ga();this.C<t.length&&(xw(this),kw(this,e,t),this.i&&4!=e&&ww(this))}},rk.cancel=function(){this.I=!0,Ew(this)},rk.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(J_(3),Z_(17)),Ew(this),this.o=2,Iw(this)):bw(this,this.Y-e)},(rk=Cw.prototype).R=function(){Aw(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},rk.T=function(){return Aw(this),this.g.concat()},rk.get=function(e,t){return Nw(this.h,e)?this.h[e]:t},rk.set=function(e,t){Nw(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},rk.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Pw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rw(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Rw){this.g=void 0!==t?t:e.g,Ow(this,e.j),this.s=e.s,Lw(this,e.i),Mw(this,e.m),this.l=e.l,t=e.h;var n=new Qw;n.i=t.i,t.g&&(n.g=new Cw(t.g),n.h=t.h),Fw(this,n),this.o=e.o}else e&&(n=String(e).match(Pw))?(this.g=!!t,Ow(this,n[1]||"",!0),this.s=Vw(n[2]||""),Lw(this,n[3]||"",!0),Mw(this,n[4]),this.l=Vw(n[5]||"",!0),Fw(this,n[6]||"",!0),this.o=Vw(n[7]||"")):(this.g=!!t,this.h=new Qw(null,this.g))}function Dw(e){return new Rw(e)}function Ow(e,t,n){e.j=n?Vw(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Lw(e,t,n){e.i=n?Vw(t,!0):t}function Mw(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Fw(e,t,n){t instanceof Qw?(e.h=t,function(e,t){t&&!e.j&&(Yw(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Jw(this,t),Zw(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Bw(t,Gw)),e.h=new Qw(t,e.g))}function jw(e,t,n){e.h.set(t,n)}function Uw(e){return jw(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Vw(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Bw(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,qw),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function qw(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Rw.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Bw(t,zw,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Bw(t,zw,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Bw(n,"/"==n.charAt(0)?Kw:Ww,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Bw(n,Hw)),e.join("")};var zw=/[#\/\?@]/g,Ww=/[#\?:]/g,Kw=/[#\?]/g,Gw=/[#\?@]/g,Hw=/#/g;function Qw(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Yw(e){e.g||(e.g=new Cw,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Jw(e,t){Yw(e),t=$w(e,t),Nw(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Nw((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Aw(e)))}function Xw(e,t){return Yw(e),t=$w(e,t),Nw(e.g.h,t)}function Zw(e,t,n){Jw(e,t),0<n.length&&(e.i=null,e.g.set($w(e,t),xk(n)),e.h+=n.length)}function $w(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(rk=Qw.prototype).add=function(e,t){Yw(this),this.i=null,e=$w(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},rk.forEach=function(e,t){Yw(this),this.g.forEach((function(n,r){wk(n,(function(n){e.call(t,n,r,this)}),this)}),this)},rk.T=function(){Yw(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},rk.R=function(e){Yw(this);var t=[];if("string"===typeof e)Xw(this,e)&&(t=bk(t,this.g.get($w(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=bk(t,e[n])}return t},rk.set=function(e,t){return Yw(this),this.i=null,Xw(this,e=$w(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},rk.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},rk.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var eb=R((function e(t,n){N(this,e),this.h=t,this.g=n}));function tb(e){this.l=e||rb,sk.PerformanceNavigationTiming?e=0<(e=sk.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(sk.g&&sk.g.Ea&&sk.g.Ea()&&sk.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var nb,rb=10;function ib(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ab(e){return e.h?1:e.g?e.g.size:0}function ob(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function sb(e,t){e.g?e.g.add(t):e.h=t}function ub(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function cb(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=mr(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return xk(e.i)}function lb(){}function hb(){this.g=new lb}function fb(e,t,n){var r=n||"";try{Tw(e,(function(e,n){var i=e;lk(e)&&(i=I_(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function db(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function pb(e){this.l=e.$b||null,this.j=e.ib||!1}function vb(e,t){w_.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=yb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tb.prototype.cancel=function(){if(this.i=cb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=mr(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},lb.prototype.stringify=function(e){return sk.JSON.stringify(e,void 0)},lb.prototype.parse=function(e){return sk.JSON.parse(e,void 0)},mk(pb,rw),pb.prototype.g=function(){return new vb(this.l,this.j)},pb.prototype.i=(nb={},function(){return nb}),mk(vb,w_);var yb=0;function mb(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function gb(e){e.readyState=4,e.l=null,e.j=null,e.A=null,kb(e)}function kb(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(rk=vb.prototype).open=function(e,t){if(this.readyState!=yb)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,kb(this)},rk.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||sk).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},rk.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,gb(this)),this.readyState=yb},rk.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,kb(this)),this.g&&(this.readyState=3,kb(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof sk.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;mb(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},rk.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?gb(this):kb(this),3==this.readyState&&mb(this)}},rk.Ua=function(e){this.g&&(this.response=this.responseText=e,gb(this))},rk.Ta=function(e){this.g&&(this.response=e,gb(this))},rk.ha=function(){this.g&&gb(this)},rk.setRequestHeader=function(e,t){this.v.append(e,t)},rk.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},rk.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(vb.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var _b=sk.JSON.parse;function wb(e){w_.call(this),this.headers=new Cw,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=bb,this.K=this.L=!1}mk(wb,w_);var bb="",xb=/^https?$/i,Ib=["POST","PUT"];function Eb(e){return"content-type"==e.toLowerCase()}function Sb(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Tb(e),Ab(e)}function Tb(e){e.D||(e.D=!0,b_(e,"complete"),b_(e,"error"))}function Cb(e){if(e.h&&"undefined"!=typeof ok&&(!e.C[1]||4!=Pb(e)||2!=e.ba()))if(e.v&&4==Pb(e))F_(e.Fa,0,e);else if(b_(e,"readystatechange"),4==Pb(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Pw)[1]||null;if(!a&&sk.self&&sk.self.location){var o=sk.self.location.protocol;a=o.substr(0,o.length-1)}i=!xb.test(a?a.toLowerCase():"")}t=i}if(t)b_(e,"complete"),b_(e,"success");else{e.m=6;try{var s=2<Pb(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",Tb(e)}}finally{Ab(e)}}}function Ab(e,t){if(e.g){Nb(e);var n=e.g,r=e.C[0]?uk:null;e.g=null,e.C=null,t||b_(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Nb(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(sk.clearTimeout(e.A),e.A=null)}function Pb(e){return e.g?e.g.readyState:0}function Rb(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case bb:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Db(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Pk(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):jw(e,t,n))}function Ob(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Lb(e){this.za=0,this.l=[],this.h=new W_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ob("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ob("baseRetryDelayMs",5e3,e),this.$a=Ob("retryDelaySeedMs",1e4,e),this.Ya=Ob("forwardChannelMaxRetries",2,e),this.ra=Ob("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new tb(e&&e.concurrentRequestLimit),this.Ca=new hb,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Mb(e){if(jb(e),3==e.G){var t=e.V++,n=Dw(e.F);jw(n,"SID",e.J),jw(n,"RID",t),jw(n,"TYPE","terminate"),qb(e,n),(t=new hw(e,e.h,t,void 0)).K=2,t.v=Uw(Dw(n)),n=!1,sk.navigator&&sk.navigator.sendBeacon&&(n=sk.navigator.sendBeacon(t.v.toString(),"")),!n&&sk.Image&&((new Image).src=t.v,n=!0),n||(t.g=ex(t.l,null),t.g.ea(t.v)),t.F=Date.now(),ww(t)}Zb(e)}function Fb(e){e.g&&(Gb(e),e.g.cancel(),e.g=null)}function jb(e){Fb(e),e.u&&(sk.clearTimeout(e.u),e.u=null),Qb(e),e.i.cancel(),e.m&&("number"===typeof e.m&&sk.clearTimeout(e.m),e.m=null)}function Ub(e,t){e.l.push(new eb(e.Za++,t)),3==e.G&&Vb(e)}function Vb(e){ib(e.i)||e.m||(e.m=!0,P_(e.Ha,e),e.C=0)}function Bb(e,t){var n;n=t?t.m:e.V++;var r=Dw(e.F);jw(r,"SID",e.J),jw(r,"RID",n),jw(r,"AID",e.U),qb(e,r),e.o&&e.s&&Db(r,e.o,e.s),n=new hw(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=zb(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),sb(e.i,n),yw(n,r,t)}function qb(e,t){e.j&&Tw({},(function(e,n){jw(t,n,e)}))}function zb(e,t,n){n=Math.min(e.l.length,n);var r=e.j?vk(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{fb(l,o,"req"+c+"_")}catch(Cx){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Wb(e){e.g||e.u||(e.Y=1,P_(e.Ga,e),e.A=0)}function Kb(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=ew(vk(e.Ga,e),Jb(e,e.A)),e.A++,!0)}function Gb(e){null!=e.B&&(sk.clearTimeout(e.B),e.B=null)}function Hb(e){e.g=new hw(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Dw(e.oa);jw(t,"RID","rpc"),jw(t,"SID",e.J),jw(t,"CI",e.N?"0":"1"),jw(t,"AID",e.U),qb(e,t),jw(t,"TYPE","xmlhttp"),e.o&&e.s&&Db(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Uw(Dw(t)),n.s=null,n.U=!0,mw(n,e)}function Qb(e){null!=e.v&&(sk.clearTimeout(e.v),e.v=null)}function Yb(e,t){var n=null;if(e.g==t){Qb(e),Gb(e),e.g=null;var r=2}else{if(!ob(e.i,t))return;n=t.D,ub(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;b_(r=Q_(),new $_(r,n,t,i)),Vb(e)}else Wb(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(ab(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=ew(vk(e.Ha,e,t),Jb(e,e.C)),e.C++,!0))}(e,t)||2==r&&Kb(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Xb(e,5);break;case 4:Xb(e,10);break;case 3:Xb(e,6);break;default:Xb(e,2)}}function Jb(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Xb(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=vk(e.jb,e);n||(n=new Rw("//www.google.com/images/cleardot.gif"),sk.location&&"http"==sk.location.protocol||Ow(n,"https"),Uw(n)),function(e,t){var n=new W_;if(sk.Image){var r=new Image;r.onload=yk(db,n,r,"TestLoadImage: loaded",!0,t),r.onerror=yk(db,n,r,"TestLoadImage: error",!1,t),r.onabort=yk(db,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=yk(db,n,r,"TestLoadImage: timeout",!1,t),sk.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Z_(2);e.G=0,e.j&&e.j.va(t),Zb(e),jb(e)}function Zb(e){e.G=0,e.I=-1,e.j&&(0==cb(e.i).length&&0==e.l.length||(e.i.i.length=0,xk(e.l),e.l.length=0),e.j.ua())}function $b(e,t,n){var r=function(e){return e instanceof Rw?Dw(e):new Rw(e,void 0)}(n);if(""!=r.i)t&&Lw(r,t+"."+r.i),Mw(r,r.m);else{var i=sk.location;r=function(e,t,n,r){var i=new Rw(null,void 0);return e&&Ow(i,e),t&&Lw(i,t),n&&Mw(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Pk(e.aa,(function(e,t){jw(r,t,e)})),t=e.D,n=e.sa,t&&n&&jw(r,t,n),jw(r,"VER",e.ma),qb(e,r),r}function ex(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new wb(new pb({ib:!0})):new wb(e.qa)).L=e.H,t}function tx(){}function nx(){if(jk&&!(10<=Number(Xk)))throw Error("Environmental error: no available transport.")}function rx(e,t){w_.call(this),this.g=new Lb(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Ik(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ik(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ox(this)}function ix(e){uw.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ax(){cw.call(this),this.status=1}function ox(e){this.g=e}(rk=wb.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ow.g(),this.C=this.u?iw(this.u):iw(ow),this.g.onreadystatechange=vk(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Sb(this,a)}e=n||"";var i=new Cw(this.headers);r&&Tw(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Eb,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=sk.FormData&&e instanceof sk.FormData,!(0<=_k(Ib,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Nb(this),0<this.B&&((this.K=function(e){return jk&&Yk()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vk(this.pa,this)):this.A=F_(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Sb(this,a)}},rk.pa=function(){"undefined"!=typeof ok&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,b_(this,"timeout"),this.abort(8))},rk.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,b_(this,"complete"),b_(this,"abort"),Ab(this))},rk.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ab(this,!0)),wb.Z.M.call(this)},rk.Fa=function(){this.s||(this.F||this.v||this.l?Cb(this):this.cb())},rk.cb=function(){Cb(this)},rk.ba=function(){try{return 2<Pb(this)?this.g.status:-1}catch(nb){return-1}},rk.ga=function(){try{return this.g?this.g.responseText:""}catch(nb){return""}},rk.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),_b(t)}},rk.Da=function(){return this.m},rk.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(rk=Lb.prototype).ma=8,rk.G=1,rk.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},rk.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new hw(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Ok(n=Rk(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=zb(this,t,r),jw(i=Dw(this.F),"RID",e),jw(i,"CVER",22),this.D&&jw(i,"X-HTTP-Session-Id",this.D),qb(this,i),this.o&&n&&Db(i,this.o,n),sb(this.i,t),this.Ra&&jw(i,"TYPE","init"),this.ja?(jw(i,"$req",r),jw(i,"SID","null"),t.$=!0,yw(t,i,null)):yw(t,i,r),this.G=2}}else 3==this.G&&(e?Bb(this,e):0==this.l.length||ib(this.i)||Bb(this))},rk.Ga=function(){if(this.u=null,Hb(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=ew(vk(this.bb,this),e)}},rk.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Z_(10),Fb(this),Hb(this))},rk.ab=function(){null!=this.v&&(this.v=null,Fb(this),Kb(this),Z_(19))},rk.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Z_(2)):(this.h.info("Failed to ping google.com"),Z_(1))},(rk=tx.prototype).xa=function(){},rk.wa=function(){},rk.va=function(){},rk.ua=function(){},rk.Oa=function(){},nx.prototype.g=function(e,t){return new rx(e,t)},mk(rx,w_),rx.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),P_(vk(e.hb,e,t))),Z_(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=$b(e,null,e.W),Vb(e)},rx.prototype.close=function(){Mb(this.g)},rx.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Ub(this.g,t)}else this.v?((t={}).__data__=I_(e),Ub(this.g,t)):Ub(this.g,e)},rx.prototype.M=function(){this.g.j=null,delete this.j,Mb(this.g),delete this.g,rx.Z.M.call(this)},mk(ix,uw),mk(ax,cw),mk(ox,tx),ox.prototype.xa=function(){b_(this.g,"a")},ox.prototype.wa=function(e){b_(this.g,new ix(e))},ox.prototype.va=function(e){b_(this.g,new ax(e))},ox.prototype.ua=function(){b_(this.g,"b")},nx.prototype.createWebChannel=nx.prototype.g,rx.prototype.send=rx.prototype.u,rx.prototype.open=rx.prototype.m,rx.prototype.close=rx.prototype.close,tw.NO_ERROR=0,tw.TIMEOUT=8,tw.HTTP_ERROR=6,nw.COMPLETE="complete",aw.EventType=sw,sw.OPEN="a",sw.CLOSE="b",sw.ERROR="c",sw.MESSAGE="d",w_.prototype.listen=w_.prototype.N,wb.prototype.listenOnce=wb.prototype.O,wb.prototype.getLastError=wb.prototype.La,wb.prototype.getLastErrorCode=wb.prototype.Da,wb.prototype.getStatus=wb.prototype.ba,wb.prototype.getResponseJson=wb.prototype.Qa,wb.prototype.getResponseText=wb.prototype.ga,wb.prototype.send=wb.prototype.ea;var sx=ak.createWebChannelTransport=function(){return new nx},ux=ak.getStatEventTarget=function(){return Q_()},cx=ak.ErrorCode=tw,lx=ak.EventType=nw,hx=ak.Event=G_,fx=ak.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},dx=ak.FetchXmlHttpFactory=pb,px=ak.WebChannel=aw,vx=ak.XhrIo=wb,yx="@firebase/firestore",mx=function(){function e(t){N(this,e),this.uid=t}return R(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();mx.UNAUTHENTICATED=new mx(null),mx.GOOGLE_CREDENTIALS=new mx("google-credentials-uid"),mx.FIRST_PARTY=new mx("first-party-uid"),mx.MOCK_USER=new mx("mock-user");var gx="9.8.0",kx=new wi("@firebase/firestore");function _x(){return kx.logLevel}function wx(e){if(kx.logLevel<=pi.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ix);kx.debug.apply(kx,["Firestore (".concat(gx,"): ").concat(e)].concat(A(i)))}}function bx(e){if(kx.logLevel<=pi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ix);kx.error.apply(kx,["Firestore (".concat(gx,"): ").concat(e)].concat(A(i)))}}function xx(e){if(kx.logLevel<=pi.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ix);kx.warn.apply(kx,["Firestore (".concat(gx,"): ").concat(e)].concat(A(i)))}}function Ix(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ex(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(gx,") INTERNAL ASSERTION FAILED: ")+e;throw bx(t),new Error(t)}function Sx(e,t){e||Ex()}function Tx(e,t){return e}var Cx={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ax=function(e){O(n,e);var t=V(n);function n(e,r){var i;return N(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return R(n)}(Br),Nx=R((function e(){var t=this;N(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Px=R((function e(t,n){N(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Rx=function(){function e(){N(this,e)}return R(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(mx.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Dx=function(){function e(t){N(this,e),this.token=t,this.changeListener=null}return R(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Ox=function(){function e(t){N(this,e),this.t=t,this.currentUser=mx.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return R(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Nx;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Nx,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){wx("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(wx("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Nx)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(wx("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Sx("string"==typeof n.accessToken),new Px(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Sx(null===e||"string"==typeof e),new mx(e)}}]),e}(),Lx=R((function e(t,n,r){N(this,e),this.type="FirstParty",this.user=mx.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Mx=function(){function e(t,n,r){N(this,e),this.h=t,this.l=n,this.m=r}return R(e,[{key:"getToken",value:function(){return Promise.resolve(new Lx(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(mx.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Fx=R((function e(t){N(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),jx=function(){function e(t){N(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return R(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&wx("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,wx("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){wx("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):wx("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Sx("string"==typeof t.token),e.p=t.token,new Fx(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Ux=function(){function e(t,n){var r=this;N(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return R(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Vx(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Ux.A=-1;var Bx=function(){function e(){N(this,e)}return R(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Vx(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function qx(e,t){return e<t?-1:e>t?1:0}function zx(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Wx(e){return e+"\0"}var Kx=function(){function e(t,n){if(N(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Ax(Cx.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ax(Cx.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Ax(Cx.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ax(Cx.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return R(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?qx(this.nanoseconds,e.nanoseconds):qx(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Gx=function(){function e(t){N(this,e),this.timestamp=t}return R(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Kx(0,0))}},{key:"max",value:function(){return new e(new Kx(253402300799,999999999))}}]),e}();function Hx(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Qx(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Yx(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Jx=function(){function e(t,n,r){N(this,e),void 0===n?n=0:n>t.length&&Ex(),void 0===r?r=t.length-n:r>t.length-n&&Ex(),this.segments=t,this.offset=n,this.len=r}return R(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Xx=function(e){O(n,e);var t=V(n);function n(){return N(this,n),t.apply(this,arguments)}return R(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Ax(Cx.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,A(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Jx),Zx=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$x=function(e){O(n,e);var t=V(n);function n(){return N(this,n),t.apply(this,arguments)}return R(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Zx.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Ax(Cx.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Ax(Cx.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ax(Cx.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Ax(Cx.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Jx),eI=function(){function e(t){N(this,e),this.fields=t,t.sort($x.comparator)}return R(e,[{key:"covers",value:function(e){var t,n=mr(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return zx(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var tI=function(e){function t(e){N(this,t),this.binaryString=e}return R(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return qx(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();tI.EMPTY_BYTE_STRING=new tI("");var nI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rI(e){if(Sx(!!e),"string"==typeof e){var t=0,n=nI.exec(e);if(Sx(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:iI(e.seconds),nanos:iI(e.nanos)}}function iI(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function aI(e){return"string"==typeof e?tI.fromBase64String(e):tI.fromUint8Array(e)}function oI(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function sI(e){var t=e.mapValue.fields.__previous_value__;return oI(t)?sI(t):t}function uI(e){var t=rI(e.mapValue.fields.__local_write_time__.timestampValue);return new Kx(t.seconds,t.nanos)}var cI=R((function e(t,n,r,i,a,o,s,u){N(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),lI=function(){function e(t,n){N(this,e),this.projectId=t,this.database=n||"(default)"}return R(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function hI(e){return null==e}function fI(e){return 0===e&&1/e==-1/0}function dI(e){return"number"==typeof e&&Number.isInteger(e)&&!fI(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var pI=function(){function e(t){N(this,e),this.path=t}return R(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Xx.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Xx.fromString(t))}},{key:"fromName",value:function(t){return new e(Xx.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Xx.emptyPath())}},{key:"comparator",value:function(e,t){return Xx.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Xx(t.slice()))}}]),e}(),vI={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yI={nullValue:"NULL_VALUE"};function mI(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?oI(e)?4:PI(e)?9007199254740991:10:Ex()}function gI(e,t){if(e===t)return!0;var n=mI(e);if(n!==mI(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return uI(e).isEqual(uI(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=rI(e.timestampValue),r=rI(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return aI(e.bytesValue).isEqual(aI(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return iI(e.geoPointValue.latitude)===iI(t.geoPointValue.latitude)&&iI(e.geoPointValue.longitude)===iI(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return iI(e.integerValue)===iI(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=iI(e.doubleValue),r=iI(t.doubleValue);return n===r?fI(n)===fI(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return zx(e.arrayValue.values||[],t.arrayValue.values||[],gI);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Hx(n)!==Hx(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!gI(n[i],r[i])))return!1;return!0}(e,t);default:return Ex()}}function kI(e,t){return void 0!==(e.values||[]).find((function(e){return gI(e,t)}))}function _I(e,t){if(e===t)return 0;var n=mI(e),r=mI(t);if(n!==r)return qx(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return qx(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=iI(e.integerValue||e.doubleValue),r=iI(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return wI(e.timestampValue,t.timestampValue);case 4:return wI(uI(e),uI(t));case 5:return qx(e.stringValue,t.stringValue);case 6:return function(e,t){var n=aI(e),r=aI(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=qx(n[i],r[i]);if(0!==a)return a}return qx(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=qx(iI(e.latitude),iI(t.latitude));return 0!==n?n:qx(iI(e.longitude),iI(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=_I(n[i],r[i]);if(a)return a}return qx(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===vI.mapValue&&t===vI.mapValue)return 0;if(e===vI.mapValue)return 1;if(t===vI.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=qx(r[o],a[o]);if(0!==s)return s;var u=_I(n[r[o]],i[a[o]]);if(0!==u)return u}return qx(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ex()}}function wI(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return qx(e,t);var n=rI(e),r=rI(t),i=qx(n.seconds,r.seconds);return 0!==i?i:qx(n.nanos,r.nanos)}function bI(e){return xI(e)}function xI(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=rI(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?aI(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,pI.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=mr(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=xI(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=mr(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(xI(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Ex();var t,n}function II(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function EI(e){return!!e&&"integerValue"in e}function SI(e){return!!e&&"arrayValue"in e}function TI(e){return!!e&&"nullValue"in e}function CI(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function AI(e){return!!e&&"mapValue"in e}function NI(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Qx(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=NI(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=NI(e.arrayValue.values[r]);return n}return Object.assign({},e)}function PI(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function RI(e){return"nullValue"in e?yI:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?II(lI.empty(),pI.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ex()}function DI(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?II(lI.empty(),pI.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?vI:Ex()}function OI(e,t){var n=_I(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function LI(e,t){var n=_I(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var MI=function(){function e(t){N(this,e),this.value=t}return R(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!AI(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=NI(t)}},{key:"setAll",value:function(e){var t=this,n=$x.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=NI(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());AI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return gI(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];AI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Qx(t,(function(t,n){return e[t]=n}));var r,i=mr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(NI(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function FI(e){var t=[];return Qx(e.fields,(function(e,n){var r=new $x([e]);if(AI(n)){var i=FI(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=mr(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new eI(t)}var jI=function(){function e(t,n,r,i,a,o){N(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return R(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=MI.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=MI.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Gx.min(),Gx.min(),MI.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Gx.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Gx.min(),MI.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Gx.min(),MI.empty(),2)}}]),e}(),UI=R((function e(t,n,r,i){N(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function VI(e){return e.fields.find((function(e){return 2===e.kind}))}function BI(e){return e.fields.filter((function(e){return 2!==e.kind}))}UI.UNKNOWN_ID=-1;var qI=R((function e(t,n){N(this,e),this.fieldPath=t,this.kind=n})),zI=function(){function e(t,n){N(this,e),this.sequenceNumber=t,this.offset=n}return R(e,null,[{key:"empty",value:function(){return new e(0,GI.min())}}]),e}();function WI(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Gx.fromTimestamp(1e9===r?new Kx(n+1,0):new Kx(n,r));return new GI(i,pI.empty(),t)}function KI(e){return new GI(e.readTime,e.key,-1)}var GI=function(){function e(t,n,r){N(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return R(e,null,[{key:"min",value:function(){return new e(Gx.min(),pI.empty(),-1)}},{key:"max",value:function(){return new e(Gx.max(),pI.empty(),-1)}}]),e}();function HI(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=pI.comparator(e.documentKey,t.documentKey))?n:qx(e.largestBatchId,t.largestBatchId)}var QI=function(){function e(t,n){N(this,e),this.comparator=t,this.root=n||JI.EMPTY}return R(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,JI.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,JI.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new YI(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new YI(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new YI(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new YI(this.root,e,this.comparator,!0)}}]),e}(),YI=function(){function e(t,n,r,i){N(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return R(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),JI=function(){function e(t,n,r,i,a){N(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return R(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ex();if(this.right.isRed())throw Ex();var e=this.left.check();if(e!==this.right.check())throw Ex();return e+(this.isRed()?0:1)}}]),e}();JI.EMPTY=null,JI.RED=!0,JI.BLACK=!1,JI.EMPTY=new(function(){function e(){N(this,e),this.size=0}return R(e,[{key:"key",get:function(){throw Ex()}},{key:"value",get:function(){throw Ex()}},{key:"color",get:function(){throw Ex()}},{key:"left",get:function(){throw Ex()}},{key:"right",get:function(){throw Ex()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new JI(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var XI=function(){function e(t){N(this,e),this.comparator=t,this.data=new QI(this.comparator)}return R(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new ZI(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new ZI(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),ZI=function(){function e(t){N(this,e),this.iter=t}return R(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function $I(e){return e.hasNext()?e.getNext():void 0}var eE=R((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;N(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.P=null}));function tE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new eE(e,t,n,r,i,a,o)}function nE(e){var t=Tx(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+bI(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),hI(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return bI(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return bI(e)})).join(",")),t.P=n}return t.P}function rE(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!kE(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!gI(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!wE(e.startAt,t.startAt)&&wE(e.endAt,t.endAt)}function iE(e){return pI.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function aE(e,t){return e.filters.filter((function(e){return e instanceof uE&&e.field.isEqual(t)}))}function oE(e,t,n){var r,i=yI,a=!0,o=mr(aE(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=yI,c=!0;switch(s.op){case"<":case"<=":u=RI(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=yI}OI({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];OI({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function sE(e,t,n){var r,i=vI,a=!0,o=mr(aE(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=vI,c=!0;switch(s.op){case">=":case">":u=DI(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=vI}LI({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];LI({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var uE=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return N(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return R(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(_I(t,this.value)):null!==t&&mI(this.value)===mI(t)&&this.v(_I(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ex()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new cE(e,t,r):"array-contains"===t?new dE(e,r):"in"===t?new pE(e,r):"not-in"===t?new vE(e,r):"array-contains-any"===t?new yE(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new lE(e,n):new hE(e,n)}}]),n}(function(){return R((function e(){N(this,e)}))}()),cE=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return N(this,n),(a=t.call(this,e,r,i)).key=pI.fromName(i.referenceValue),a}return R(n,[{key:"matches",value:function(e){var t=pI.comparator(e.key,this.key);return this.v(t)}}]),n}(uE),lE=function(e){O(n,e);var t=V(n);function n(e,r){var i;return N(this,n),(i=t.call(this,e,"in",r)).keys=fE("in",r),i}return R(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(uE),hE=function(e){O(n,e);var t=V(n);function n(e,r){var i;return N(this,n),(i=t.call(this,e,"not-in",r)).keys=fE("not-in",r),i}return R(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(uE);function fE(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return pI.fromName(e.referenceValue)}))}var dE=function(e){O(n,e);var t=V(n);function n(e,r){return N(this,n),t.call(this,e,"array-contains",r)}return R(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return SI(t)&&kI(t.arrayValue,this.value)}}]),n}(uE),pE=function(e){O(n,e);var t=V(n);function n(e,r){return N(this,n),t.call(this,e,"in",r)}return R(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&kI(this.value.arrayValue,t)}}]),n}(uE),vE=function(e){O(n,e);var t=V(n);function n(e,r){return N(this,n),t.call(this,e,"not-in",r)}return R(n,[{key:"matches",value:function(e){if(kI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!kI(this.value.arrayValue,t)}}]),n}(uE),yE=function(e){O(n,e);var t=V(n);function n(e,r){return N(this,n),t.call(this,e,"array-contains-any",r)}return R(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!SI(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return kI(t.value.arrayValue,e)}))}}]),n}(uE),mE=R((function e(t,n){N(this,e),this.position=t,this.inclusive=n})),gE=R((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";N(this,e),this.field=t,this.dir=n}));function kE(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function _E(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?pI.comparator(pI.fromName(o.referenceValue),n.key):_I(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function wE(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!gI(e.position[n],t.position[n]))return!1;return!0}var bE=R((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;N(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.D=null,this.C=null,this.startAt,this.endAt}));function xE(e,t,n,r,i,a,o,s){return new bE(e,t,n,r,i,a,o,s)}function IE(e){return new bE(e)}function EE(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function SE(e){var t,n=mr(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function TE(e){return null!==e.collectionGroup}function CE(e){var t=Tx(e);if(null===t.D){t.D=[];var n=SE(t),r=EE(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new gE(n)),t.D.push(new gE($x.keyField(),"asc"));else{var i,a=!1,o=mr(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.D.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new gE($x.keyField(),u))}}}return t.D}function AE(e){var t=Tx(e);if(!t.C)if("F"===t.limitType)t.C=tE(t.path,t.collectionGroup,CE(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=mr(CE(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new gE(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new mE(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new mE(t.startAt.position,t.startAt.inclusive):null;t.C=tE(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.C}function NE(e,t,n){return new bE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function PE(e,t){return rE(AE(e),AE(t))&&e.limitType===t.limitType}function RE(e){return"".concat(nE(AE(e)),"|lt:").concat(e.limitType)}function DE(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(bI(t.value));var t})).join(", "),"]")),hI(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return bI(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return bI(e)})).join(",")),"Target(".concat(t,")")}(AE(e)),"; limitType=").concat(e.limitType,")")}function OE(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):pI.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=mr(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=mr(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=_E(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,CE(e),t))&&!(e.endAt&&!function(e,t,n){var r=_E(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,CE(e),t))}(e,t)}function LE(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ME(e){return function(t,n){var r,i=!1,a=mr(CE(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=FE(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function FE(e,t,n){var r=e.field.isKeyField()?pI.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?_I(r,i):Ex()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ex()}}function jE(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fI(t)?"-0":t}}function UE(e){return{integerValue:""+e}}function VE(e,t){return dI(t)?UE(t):jE(e,t)}var BE=R((function e(){N(this,e),this._=void 0}));function qE(e,t,n){return e instanceof KE?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof GE?HE(e,t):e instanceof QE?YE(e,t):function(e,t){var n=WE(e,t),r=XE(n)+XE(e.k);return EI(n)&&EI(e.k)?UE(r):jE(e.M,r)}(e,t)}function zE(e,t,n){return e instanceof GE?HE(e,t):e instanceof QE?YE(e,t):n}function WE(e,t){return e instanceof JE?EI(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var KE=function(e){O(n,e);var t=V(n);function n(){return N(this,n),t.apply(this,arguments)}return R(n)}(BE),GE=function(e){O(n,e);var t=V(n);function n(e){var r;return N(this,n),(r=t.call(this)).elements=e,r}return R(n)}(BE);function HE(e,t){var n,r=ZE(t),i=mr(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return gI(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var QE=function(e){O(n,e);var t=V(n);function n(e){var r;return N(this,n),(r=t.call(this)).elements=e,r}return R(n)}(BE);function YE(e,t){var n,r=ZE(t),i=mr(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!gI(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var JE=function(e){O(n,e);var t=V(n);function n(e,r){var i;return N(this,n),(i=t.call(this)).M=e,i.k=r,i}return R(n)}(BE);function XE(e){return iI(e.integerValue||e.doubleValue)}function ZE(e){return SI(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var $E=R((function e(t,n){N(this,e),this.field=t,this.transform=n}));var eS=R((function e(t,n){N(this,e),this.version=t,this.transformResults=n})),tS=function(){function e(t,n){N(this,e),this.updateTime=t,this.exists=n}return R(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function nS(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var rS=R((function e(){N(this,e)}));function iS(e,t,n){e instanceof cS?function(e,t,n){var r=e.value.clone(),i=fS(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof lS?function(e,t,n){if(nS(e.precondition,t)){var r=fS(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(hS(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function aS(e,t,n){e instanceof cS?function(e,t,n){if(nS(e.precondition,t)){var r=e.value.clone(),i=dS(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(uS(t),r).setHasLocalMutations()}}(e,t,n):e instanceof lS?function(e,t,n){if(nS(e.precondition,t)){var r=dS(e.fieldTransforms,n,t),i=t.data;i.setAll(hS(e)),i.setAll(r),t.convertToFoundDocument(uS(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){nS(e.precondition,t)&&t.convertToNoDocument(Gx.min())}(e,t)}function oS(e,t){var n,r=null,i=mr(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=WE(a.transform,o||null);null!=s&&(null==r&&(r=MI.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function sS(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&zx(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof GE&&t instanceof GE||e instanceof QE&&t instanceof QE?zx(e.elements,t.elements,gI):e instanceof JE&&t instanceof JE?gI(e.k,t.k):e instanceof KE&&t instanceof KE}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function uS(e){return e.isFoundDocument()?e.version:Gx.min()}var cS=function(e){O(n,e);var t=V(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return N(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return R(n)}(rS),lS=function(e){O(n,e);var t=V(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return N(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return R(n)}(rS);function hS(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function fS(e,t,n){var r=new Map;Sx(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,zE(o,s,n[i]))}return r}function dS(e,t,n){var r,i=new Map,a=mr(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,qE(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var pS,vS,yS=function(e){O(n,e);var t=V(n);function n(e,r){var i;return N(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return R(n)}(rS),mS=function(e){O(n,e);var t=V(n);function n(e,r){var i;return N(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return R(n)}(rS),gS=R((function e(t){N(this,e),this.count=t}));function kS(e){switch(e){default:return Ex();case Cx.CANCELLED:case Cx.UNKNOWN:case Cx.DEADLINE_EXCEEDED:case Cx.RESOURCE_EXHAUSTED:case Cx.INTERNAL:case Cx.UNAVAILABLE:case Cx.UNAUTHENTICATED:return!1;case Cx.INVALID_ARGUMENT:case Cx.NOT_FOUND:case Cx.ALREADY_EXISTS:case Cx.PERMISSION_DENIED:case Cx.FAILED_PRECONDITION:case Cx.ABORTED:case Cx.OUT_OF_RANGE:case Cx.UNIMPLEMENTED:case Cx.DATA_LOSS:return!0}}function _S(e){if(void 0===e)return bx("GRPC error has no .code"),Cx.UNKNOWN;switch(e){case pS.OK:return Cx.OK;case pS.CANCELLED:return Cx.CANCELLED;case pS.UNKNOWN:return Cx.UNKNOWN;case pS.DEADLINE_EXCEEDED:return Cx.DEADLINE_EXCEEDED;case pS.RESOURCE_EXHAUSTED:return Cx.RESOURCE_EXHAUSTED;case pS.INTERNAL:return Cx.INTERNAL;case pS.UNAVAILABLE:return Cx.UNAVAILABLE;case pS.UNAUTHENTICATED:return Cx.UNAUTHENTICATED;case pS.INVALID_ARGUMENT:return Cx.INVALID_ARGUMENT;case pS.NOT_FOUND:return Cx.NOT_FOUND;case pS.ALREADY_EXISTS:return Cx.ALREADY_EXISTS;case pS.PERMISSION_DENIED:return Cx.PERMISSION_DENIED;case pS.FAILED_PRECONDITION:return Cx.FAILED_PRECONDITION;case pS.ABORTED:return Cx.ABORTED;case pS.OUT_OF_RANGE:return Cx.OUT_OF_RANGE;case pS.UNIMPLEMENTED:return Cx.UNIMPLEMENTED;case pS.DATA_LOSS:return Cx.DATA_LOSS;default:return Ex()}}(vS=pS||(pS={}))[vS.OK=0]="OK",vS[vS.CANCELLED=1]="CANCELLED",vS[vS.UNKNOWN=2]="UNKNOWN",vS[vS.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vS[vS.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vS[vS.NOT_FOUND=5]="NOT_FOUND",vS[vS.ALREADY_EXISTS=6]="ALREADY_EXISTS",vS[vS.PERMISSION_DENIED=7]="PERMISSION_DENIED",vS[vS.UNAUTHENTICATED=16]="UNAUTHENTICATED",vS[vS.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vS[vS.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vS[vS.ABORTED=10]="ABORTED",vS[vS.OUT_OF_RANGE=11]="OUT_OF_RANGE",vS[vS.UNIMPLEMENTED=12]="UNIMPLEMENTED",vS[vS.INTERNAL=13]="INTERNAL",vS[vS.UNAVAILABLE=14]="UNAVAILABLE",vS[vS.DATA_LOSS=15]="DATA_LOSS";var wS=function(){function e(t,n){N(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return R(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=mr(n);try{for(i.s();!(r=i.n()).done;){var a=w(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Qx(this.inner,(function(t,n){var r,i=mr(n);try{for(i.s();!(r=i.n()).done;){var a=w(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Yx(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),bS=new QI(pI.comparator);function xS(){return bS}var IS=new QI(pI.comparator);function ES(){for(var e=IS,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function SS(){return new wS((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var TS=new QI(pI.comparator),CS=new XI(pI.comparator);function AS(){for(var e=CS,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var NS=new XI(qx);function PS(){return NS}var RS=function(){function e(t,n,r,i,a){N(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return R(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,DS.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Gx.min(),r,PS(),xS(),AS())}}]),e}(),DS=function(){function e(t,n,r,i,a){N(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return R(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(tI.EMPTY_BYTE_STRING,n,AS(),AS(),AS())}}]),e}(),OS=R((function e(t,n,r,i){N(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),LS=R((function e(t,n){N(this,e),this.targetId=t,this.$=n})),MS=R((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tI.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;N(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),FS=function(){function e(){N(this,e),this.B=0,this.L=VS(),this.U=tI.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return R(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=AS(),t=AS(),n=AS();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ex()}})),new DS(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=VS()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),jS=function(){function e(t){N(this,e),this.nt=t,this.st=new Map,this.it=xS(),this.rt=US(),this.ot=new XI(qx)}return R(e,[{key:"ut",value:function(e){var t,n=mr(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(s){n.e(s)}finally{n.f()}var i,a=mr(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(s){a.e(s)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:Ex()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(iE(i))if(0===n){var a=new pI(i.path);this.ct(t,a,jI.newNoDocument(a,Gx.min()))}else Sx(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&iE(a.target)){var o=new pI(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,jI.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=AS();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new RS(e,n,this.ot,this.it,r);return this.it=xS(),this.rt=US(),this.ot=new XI(qx),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new FS,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new XI(qx),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||wx("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new FS),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function US(){return new QI(pI.comparator)}function VS(){return new QI(pI.comparator)}var BS={asc:"ASCENDING",desc:"DESCENDING"},qS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zS=R((function e(t,n){N(this,e),this.databaseId=t,this.N=n}));function WS(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function KS(e,t){return e.N?t.toBase64():t.toUint8Array()}function GS(e,t){return WS(e,t.toTimestamp())}function HS(e){return Sx(!!e),Gx.fromTimestamp(function(e){var t=rI(e);return new Kx(t.seconds,t.nanos)}(e))}function QS(e,t){return function(e){return new Xx(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function YS(e){var t=Xx.fromString(e);return Sx(gT(t)),t}function JS(e,t){return QS(e.databaseId,t.path)}function XS(e,t){var n=YS(t);if(n.get(1)!==e.databaseId.projectId)throw new Ax(Cx.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ax(Cx.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new pI(tT(n))}function ZS(e,t){return QS(e.databaseId,t)}function $S(e){var t=YS(e);return 4===t.length?Xx.emptyPath():tT(t)}function eT(e){return new Xx(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function tT(e){return Sx(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function nT(e,t,n){return{name:JS(e,t),fields:n.value.mapValue.fields}}function rT(e,t,n){var r=XS(e,t.name),i=HS(t.updateTime),a=new MI({mapValue:{fields:t.fields}}),o=jI.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function iT(e,t){return"found"in t?function(e,t){Sx(!!t.found),t.found.name,t.found.updateTime;var n=XS(e,t.found.name),r=HS(t.found.updateTime),i=new MI({mapValue:{fields:t.found.fields}});return jI.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Sx(!!t.missing),Sx(!!t.readTime);var n=XS(e,t.missing),r=HS(t.readTime);return jI.newNoDocument(n,r)}(e,t):Ex()}function aT(e,t){var n;if(t instanceof cS)n={update:nT(e,t.key,t.value)};else if(t instanceof yS)n={delete:JS(e,t.key)};else if(t instanceof lS)n={update:nT(e,t.key,t.data),updateMask:mT(t.fieldMask)};else{if(!(t instanceof mS))return Ex();n={verify:JS(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof KE)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof GE)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof QE)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof JE)return{fieldPath:t.field.canonicalString(),increment:n.k};throw Ex()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:GS(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ex()}(e,t.precondition)),n}function oT(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?tS.updateTime(HS(e.updateTime)):void 0!==e.exists?tS.exists(e.exists):tS.none()}(t.currentDocument):tS.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Sx("REQUEST_TIME"===t.setToServerValue),n=new KE;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new GE(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new QE(i)}else"increment"in t?n=new JE(e,t.increment):Ex();var a=$x.fromServerFormat(t.fieldPath);return new $E(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=XS(e,t.update.name),a=new MI({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new eI(t.map((function(e){return $x.fromServerFormat(e)})))}(t.updateMask);return new lS(i,a,o,n,r)}return new cS(i,a,n,r)}if(t.delete){var s=XS(e,t.delete);return new yS(s,n)}if(t.verify){var u=XS(e,t.verify);return new mS(u,n)}return Ex()}function sT(e,t){return{documents:[ZS(e,t.path)]}}function uT(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=ZS(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ZS(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(CI(e.value))return{unaryFilter:{field:dT(e.field),op:"IS_NAN"}};if(TI(e.value))return{unaryFilter:{field:dT(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(CI(e.value))return{unaryFilter:{field:dT(e.field),op:"IS_NOT_NAN"}};if(TI(e.value))return{unaryFilter:{field:dT(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dT(e.field),op:fT(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:dT(e.field),direction:hT(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.N||hI(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function cT(e){var t=$S(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Sx(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=lT(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new gE(pT(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return hI(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new mE(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new mE(n,t)}(n.endAt)),xE(t,i,s,o,u,"F",c,l)}function lT(e){return e?void 0!==e.unaryFilter?[yT(e)]:void 0!==e.fieldFilter?[vT(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return lT(e)})).reduce((function(e,t){return e.concat(t)})):Ex():[]}function hT(e){return BS[e]}function fT(e){return qS[e]}function dT(e){return{fieldPath:e.canonicalString()}}function pT(e){return $x.fromServerFormat(e.fieldPath)}function vT(e){return uE.create(pT(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ex()}}(e.fieldFilter.op),e.fieldFilter.value)}function yT(e){switch(e.unaryFilter.op){case"IS_NAN":var t=pT(e.unaryFilter.field);return uE.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=pT(e.unaryFilter.field);return uE.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=pT(e.unaryFilter.field);return uE.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=pT(e.unaryFilter.field);return uE.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ex()}}function mT(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function gT(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function kT(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=wT(t)),t=_T(e.get(n),t);return wT(t)}function _T(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function wT(e){return e+"\x01\x01"}function bT(e){var t=e.length;if(Sx(t>=2),2===t)return Sx("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Xx.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Ex(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Ex()}a=o+2}return new Xx(r)}var xT=["userId","batchId"];function IT(e,t){return[e,kT(t)]}function ET(e,t,n){return[e,kT(t),n]}var ST={},TT=["prefixPath","collectionGroup","readTime","documentId"],CT=["prefixPath","collectionGroup","documentId"],AT=["collectionGroup","readTime","prefixPath","documentId"],NT=["canonicalId","targetId"],PT=["targetId","path"],RT=["path","targetId"],DT=["collectionId","parent"],OT=["indexId","uid"],LT=["uid","sequenceNumber"],MT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],FT=["indexId","uid","orderedDocumentKey"],jT=["userId","collectionPath","documentId"],UT=["userId","collectionPath","largestBatchId"],VT=["userId","collectionGroup","largestBatchId"],BT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),qT=[].concat(A(BT),["documentOverlays"]),zT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],WT=[].concat(zT,["indexConfiguration","indexState","indexEntries"]),KT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",GT=function(){function e(){N(this,e),this.onCommittedListeners=[]}return R(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),HT=function(){function e(t){var n=this;N(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return R(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Ex(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=mr(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),QT=function(){function e(t,n){var r=this;N(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new Nx,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new XT(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=nC(e.target.error);r.At.reject(new XT(t,n))}}return R(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(wx("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new $T(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new XT(n,t)}}}]),e}(),YT=function(){function e(t,n,r){N(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(Dr())&&bx("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return R(e,[{key:"Nt",value:function(){var e=yr(pr().mark((function e(t){var n=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return wx("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new XT(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Ax(Cx.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Ax(Cx.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new XT(t,n))},i.onupgradeneeded=function(e){wx("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){wx("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=yr(pr().mark((function e(t,n,r,i){var a,o,s,u,c=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(pr().mark((function e(){var n,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=QT.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),HT.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u="FirebaseError"!==e.t1.name&&o<3,wx("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",u),this.close(),u){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return wx("SimpleDb","Removing database:",e),eC(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!Vr())return!1;if(e.St())return!0;var t=Dr(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/yes-wedding",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_KAKAO_APPKEY:"3dc1d032c1b57d7534b09b562373275d",REACT_APP_FIREBASE_APIKEY:"AIzaSyCmdbkjtH47HqFKrnnCg0nmuSch9bmoXp0",REACT_APP_FIREBASE_AUTHDOMAIN:"yes-wedding-29451.firebaseapp.com",REACT_APP_FIREBASE_DATABASEURL:"https://yes-wedding-29451-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_PROJECTID:"yes-wedding-29451",REACT_APP_FIREBASE_STORAGEBUCKET:"yes-wedding-29451.appspot.com",REACT_APP_FIREBASE_MESSAGINGSENDERID:"1010300792442",REACT_APP_FIREBASE_APPID:"1:1010300792442:web:d6858688466e8b838955c3"})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),JT=function(){function e(t){N(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return R(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return eC(this.Ft.delete())}}]),e}(),XT=function(e){O(n,e);var t=V(n);function n(e,r){var i;return N(this,n),(i=t.call(this,Cx.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return R(n)}(Ax);function ZT(e){return"IndexedDbTransactionError"===e.name}var $T=function(){function e(t){N(this,e),this.store=t}return R(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(wx("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(wx("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),eC(n)}},{key:"add",value:function(e){return wx("SimpleDb","ADD",this.store.name,e,e),eC(this.store.add(e))}},{key:"get",value:function(e){var t=this;return eC(this.store.get(e)).next((function(n){return void 0===n&&(n=null),wx("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return wx("SimpleDb","DELETE",this.store.name,e),eC(this.store.delete(e))}},{key:"count",value:function(){return wx("SimpleDb","COUNT",this.store.name),eC(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new HT((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new HT((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){wx("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new HT((function(n,r){t.onerror=function(e){var t=nC(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new HT((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new JT(i),o=t(i.primaryKey,i.value,a);if(o instanceof HT){var s=o.catch((function(e){return a.done(),HT.reject(e)}));n.push(s)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return HT.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function eC(e){return new HT((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=nC(e.target.error);n(t)}}))}var tC=!1;function nC(e){var t=YT.Vt(Dr());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Ax("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return tC||(tC=!0,setTimeout((function(){throw r}),0)),r}}return e}var rC=function(e){O(n,e);var t=V(n);function n(e,r){var i;return N(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return R(n)}(GT);function iC(e,t){var n=Tx(e);return YT.xt(n.Ht,t)}var aC=function(){function e(t,n,r,i){N(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return R(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&iS(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=mr(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&aS(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var i,a=mr(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&aS(o,e,this.localWriteTime)}}catch(s){a.e(s)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Gx.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),AS())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&zx(this.mutations,e.mutations,(function(e,t){return sS(e,t)}))&&zx(this.baseMutations,e.baseMutations,(function(e,t){return sS(e,t)}))}}]),e}(),oC=function(){function e(t,n,r,i){N(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return R(e,null,[{key:"from",value:function(t,n,r){Sx(t.mutations.length===r.length);for(var i=TS,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),sC=function(){function e(t,n){N(this,e),this.largestBatchId=t,this.mutation=n}return R(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),uC=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Gx.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Gx.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:tI.EMPTY_BYTE_STRING;N(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return R(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),cC=R((function e(t){N(this,e),this.Jt=t}));function lC(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:hC(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:JS(e,t.key),fields:t.data.value.mapValue.fields,updateTime:WS(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:fC(t.version)};else{if(!t.isUnknownDocument())return Ex();r.unknownDocument={path:n.path.toArray(),version:fC(t.version)}}return r}function hC(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function fC(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function dC(e){var t=new Kx(e.seconds,e.nanoseconds);return Gx.fromTimestamp(t)}function pC(e,t){for(var n=(t.baseMutations||[]).map((function(t){return oT(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return oT(e.Jt,t)})),s=Kx.fromMillis(t.localWriteTimeMs);return new aC(t.batchId,s,n,o)}function vC(e){var t,n,r=dC(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?dC(e.lastLimboFreeSnapshotVersion):Gx.min();return void 0!==e.query.documents?(Sx(1===(n=e.query).documents.length),t=AE(IE($S(n.documents[0])))):t=function(e){return AE(cT(e))}(e.query),new uC(t,e.targetId,0,e.lastListenSequenceNumber,r,i,tI.fromBase64String(e.resumeToken))}function yC(e,t){var n,r=fC(t.snapshotVersion),i=fC(t.lastLimboFreeSnapshotVersion);n=iE(t.target)?sT(e.Jt,t.target):uT(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:nE(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function mC(e){var t=cT({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?NE(t,t.limit,"L"):t}function gC(e,t){return new sC(t.largestBatchId,oT(e.Jt,t.overlayMutation))}function kC(e,t){var n=t.path.lastSegment();return[e,kT(t.path.popLast()),n]}var _C=function(){function e(){N(this,e)}return R(e,[{key:"getBundleMetadata",value:function(e,t){return wC(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:dC(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return wC(e).put({bundleId:(n=t).id,createTime:fC(HS(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return bC(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:mC(t.bundledQuery),readTime:dC(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return bC(e).put(function(e){return{name:e.name,readTime:fC(HS(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function wC(e){return iC(e,"bundles")}function bC(e){return iC(e,"namedQueries")}var xC=function(){function e(t,n){N(this,e),this.M=t,this.userId=n}return R(e,[{key:"getOverlay",value:function(e,t){var n=this;return IC(e).get(kC(this.userId,t)).next((function(e){return e?gC(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new sC(t,a);i.push(r.Xt(e,o))})),HT.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(kT(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(IC(e).Qt("collectionPathOverlayIndex",i))})),HT.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=SS(),a=kT(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return IC(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=mr(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=gC(r.M,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=SS(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return IC(e).Wt({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=gC(a.M,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return IC(e).put(function(e,t,n){var r=w(kC(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:aT(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function IC(e){return iC(e,"documentOverlays")}var EC=function(){function e(){N(this,e)}return R(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(iI(e.integerValue));else if("doubleValue"in e){var n=iI(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),fI(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(aI(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?PI(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Ex()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=mr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),pI.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function SC(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function TC(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=SC(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}EC.fe=new EC;var CC=function(){function e(){N(this,e),this.buffer=new Uint8Array(1024),this.position=0}return R(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=mr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=mr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=TC(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=TC(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),AC=function(){function e(t){N(this,e),this.De=t}return R(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),NC=function(){function e(t){N(this,e),this.De=t}return R(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),PC=function(){function e(){N(this,e),this.De=new CC,this.Ce=new AC(this.De),this.xe=new NC(this.De)}return R(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),RC=function(){function e(t,n,r,i){N(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return R(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function DC(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=OC(e.arrayValue,t.arrayValue))?n:0!==(n=OC(e.directionalValue,t.directionalValue))?n:pI.comparator(e.documentKey,t.documentKey)}function OC(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var LC=function(){function e(t){N(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=mr(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return R(e,[{key:"$e",value:function(e){var t=VI(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=BI(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=mr(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),MC=function(){function e(){N(this,e),this.qe=new FC}return R(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),HT.resolve()}},{key:"getCollectionParents",value:function(e,t){return HT.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return HT.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return HT.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return HT.resolve(null)}},{key:"getIndexType",value:function(e,t){return HT.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return HT.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return HT.resolve(null)}},{key:"getMinOffset",value:function(e,t){return HT.resolve(GI.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return HT.resolve()}},{key:"updateIndexEntries",value:function(e,t){return HT.resolve()}}]),e}(),FC=function(){function e(){N(this,e),this.index={}}return R(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new XI(Xx.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new XI(Xx.comparator)).toArray()}}]),e}(),jC=new Uint8Array(0),UC=function(){function e(t,n){N(this,e),this.user=t,this.databaseId=n,this.Ke=new FC,this.Ge=new wS((function(e){return nE(e)}),(function(e,t){return rE(e,t)})),this.uid=t.uid||""}return R(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:kT(i)};return VC(e).put(a)}return HT.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Wx(t),""],!1,!0);return VC(e).qt(r).next((function(e){var r,i=mr(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(bT(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=qC(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=qC(e),r=zC(e),i=BC(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=BC(e),i=!0,a=new Map;return HT.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=AS(),o=[];return HT.forEach(a,(function(i,a){var s;wx("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(nE(t)));var u=function(e,t){var n=VI(t);if(void 0===n)return null;var r,i=mr(aE(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=mr(BI(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=mr(aE(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=mr(BI(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?oE(e,o.fieldPath,e.startAt):sE(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new mE(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=mr(BI(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?sE(e,o.fieldPath,e.endAt):oE(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new mE(r,i)}(a,i),f=n.We(i,a,l),d=n.We(i,a,h),p=n.ze(i,a,c),v=n.He(i.indexId,u,f,l.inclusive,d,h.inclusive,p);return HT.forEach(v,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=pI.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return HT.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"He",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),c=u/(null!=t?t.length:1),l=[],h=function(u){var h=t?s.Je(t[u/c]):jC,f=s.Ye(e,h,n[u%c],r),d=s.Xe(e,h,i[u%c],a),p=o.map((function(t){return s.Ye(e,h,t,!0)}));l.push.apply(l,A(s.createRange(f,d,p)))},f=0;f<u;++f)h(f);return l}},{key:"Ye",value:function(e,t,n,r){var i=new RC(e,pI.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new RC(e,pI.empty(),t,n);return r?i.ke():i}},{key:"je",value:function(e,t){var n=new LC(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=mr(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.$e(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return HT.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new XI($x.comparator),r=!1,i=mr(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,s=mr(e.orderBy);try{for(s.s();!(o=s.n()).done;){var u=o.value;u.field.isKeyField()||(n=n.add(u.field))}}catch(c){s.e(c)}finally{s.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"Ze",value:function(e,t){var n,r=new PC,i=mr(BI(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Ne(a.kind);EC.fe.Zt(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Se()}},{key:"Je",value:function(e){var t=new PC;return EC.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new PC;return EC.fe.Zt(II(this.databaseId,t),n.Ne(function(e){var t=BI(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"ze",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new PC);var i,a=0,o=mr(BI(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=mr(r);try{for(l.s();!(s=l.n()).done;){var h=s.value;if(this.en(t,u.fieldPath)&&SI(c))r=this.nn(r,u,c);else{var f=h.Ne(u.kind);EC.fe.Zt(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"We",value:function(e,t,n){return this.ze(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=A(e),a=[],o=mr(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=mr(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,h=new PC;h.seed(l.Se()),EC.fe.Zt(u,h.Ne(t.kind)),a.push(h)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof uE&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=qC(e),i=zC(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return HT.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new zI(t.sequenceNumber,new GI(dC(t.readTime),new pI(bT(t.documentKey)),t.largestBatchId)):zI.empty(),r=e.fields.map((function(e){var t=w(e,2),n=t[0],r=t[1];return new qI($x.fromServerFormat(n),r)}));return new UI(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:qx(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=qC(e),a=zC(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return HT.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:fC(r.readTime),documentKey:kT(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return HT.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?HT.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),HT.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?HT.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return BC(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return BC(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=BC(e),i=new XI(DC);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new RC(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new XI(DC),r=this.Ze(t,e);if(null==r)return n;var i=VI(t);if(null!=i){var a=e.data.field(i.fieldPath);if(SI(a)){var o,s=mr(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new RC(t.indexId,e.key,this.Je(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new RC(t.indexId,e.key,jC,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;wx("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=$I(a),u=$I(o);s||u;){var c=!1,l=!1;if(s&&u){var h=n(s,u);h<0?l=!0:h>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=$I(o)):l?(i(s),s=$I(a)):(s=$I(a),u=$I(o))}}(r,i,DC,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),HT.waitFor(o)}},{key:"rn",value:function(e){var t=1;return zC(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return DC(e,t)})).filter((function(e,t,n){return!t||0!==DC(e,n[t-1])}));var r=[];r.push(e);var i,a=mr(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=DC(o,e),u=DC(o,t);if(0===s)r[0]=e.ke();else if(s>0&&u<0)r.push(o),r.push(o.ke());else if(u>0)break}}catch(h){a.e(h)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,jC,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,jC,[]]));return c}},{key:"getMinOffset",value:function(e,t){var n,r=this;return HT.forEach(this.Qe(t),(function(t){return r.je(e,t).next((function(e){e?(!n||HI(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=GI.min()}))})).next((function(){return n}))}}]),e}();function VC(e){return iC(e,"collectionParents")}function BC(e){return iC(e,"indexEntries")}function qC(e){return iC(e,"indexConfiguration")}function zC(e){return iC(e,"indexState")}var WC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KC=function(){function e(t,n,r){N(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return R(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function GC(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Wt({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){Sx(1===s)})));var c,l=[],h=mr(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=ET(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return HT.waitFor(a).next((function(){return l}))}function HC(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ex();t=e.noDocument}return JSON.stringify(t).length}KC.DEFAULT_COLLECTION_PERCENTILE=10,KC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,KC.DEFAULT=new KC(41943040,KC.DEFAULT_COLLECTION_PERCENTILE,KC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),KC.DISABLED=new KC(-1,0,0);var QC=function(){function e(t,n,r,i){N(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return R(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return JC(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=XC(e),o=JC(e);return o.add({}).next((function(s){Sx("number"==typeof s);var u,c=new aC(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return aT(e.Jt,t)})),i=n.mutations.map((function(t){return aT(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),h=[],f=new XI((function(e,t){return qx(e.canonicalString(),t.canonicalString())})),d=mr(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=ET(i.userId,p.key.path,s);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,ST))}}catch(y){d.e(y)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[s]=c.keys()})),HT.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return JC(e).get(t).next((function(e){return e?(Sx(e.userId===n.userId),pC(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?HT.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return JC(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Sx(t.batchId>=r),a=pC(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return JC(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return JC(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return pC(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=IT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return XC(e).Wt({range:i},(function(r,i,o){var s=w(r,3),u=s[0],c=s[1],l=s[2],h=bT(c);if(u===n.userId&&t.path.isEqual(h))return JC(e).get(l).next((function(e){if(!e)throw Ex();Sx(e.userId===n.userId),a.push(pC(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new XI(qx),i=[];return t.forEach((function(t){var a=IT(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=XC(e).Wt({range:o},(function(e,i,a){var o=w(e,3),s=o[0],u=o[1],c=o[2],l=bT(u);s===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(s)})),HT.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=IT(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new XI(qx);return XC(e).Wt({range:o},(function(e,t,a){var o=w(e,3),u=o[0],c=o[1],l=o[2],h=bT(c);u===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(l)):a.done()})).next((function(){return n.dn(e,s)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(JC(e).get(t).next((function(e){if(null===e)throw Ex();Sx(e.userId===n.userId),r.push(pC(n.M,e))})))})),HT.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return GC(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),HT.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return HT.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return XC(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=bT(e[1]);i.push(a)}else r.done()})).next((function(){Sx(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return YC(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return ZC(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return Sx(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function YC(e,t,n){var r=IT(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return XC(e).Wt({range:a,jt:!0},(function(e,n,r){var a=w(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function JC(e){return iC(e,"mutations")}function XC(e){return iC(e,"documentMutations")}function ZC(e){return iC(e,"mutationQueues")}var $C=function(){function e(t){N(this,e),this.mn=t}return R(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),eA=function(){function e(t,n){N(this,e),this.referenceDelegate=t,this.M=n}return R(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new $C(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return Gx.fromTimestamp(new Kx(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return tA(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return Sx(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return tA(e).Wt((function(o,s){var u=vC(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return HT.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return tA(e).Wt((function(e,n){var r=vC(n);t(r)}))}},{key:"pn",value:function(e){return nA(e).get("targetGlobalKey").next((function(e){return Sx(null!==e),e}))}},{key:"In",value:function(e,t){return nA(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return tA(e).put(yC(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=nE(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return tA(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=vC(n);rE(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=rA(e);return t.forEach((function(t){var o=kT(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),HT.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=rA(e);return HT.forEach(t,(function(t){var a=kT(t.path);return HT.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=rA(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=rA(e),i=AS();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=bT(e[1]),a=new pI(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=kT(t.path),r=IDBKeyRange.bound([n],[Wx(n)],!1,!0),i=0;return rA(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=w(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return tA(e).get(t).next((function(e){return e?vC(e):null}))}}]),e}();function tA(e){return iC(e,"targets")}function nA(e){return iC(e,"targetGlobal")}function rA(e){return iC(e,"targetDocuments")}function iA(e){return aA.apply(this,arguments)}function aA(){return aA=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Cx.FAILED_PRECONDITION&&t.message===KT){e.next=2;break}throw t;case 2:wx("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),aA.apply(this,arguments)}function oA(e,t){var n=w(e,2),r=n[0],i=n[1],a=w(t,2),o=a[0],s=a[1],u=qx(r,o);return 0===u?qx(i,s):u}var sA=function(){function e(t){N(this,e),this.An=t,this.buffer=new XI(oA),this.Rn=0}return R(e,[{key:"bn",value:function(){return++this.Rn}},{key:"Pn",value:function(e){var t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();oA(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),uA=function(){function e(t,n){N(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return R(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;wx("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,yr(pr().mark((function n(){return pr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!ZT(n.t0)){n.next=12;break}wx("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,iA(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),cA=function(){function e(t,n){N(this,e),this.Dn=t,this.params=n}return R(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return HT.resolve(Ux.A);var r=new sA(t);return this.Dn.forEachTarget(e,(function(e){return r.Pn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.Pn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(wx("LruGarbageCollector","Garbage collection skipped; disabled"),HT.resolve(WC)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(wx("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),WC):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(wx("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),_x()<=pi.DEBUG&&wx("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),HT.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),lA=function(){function e(t,n){N(this,e),this.db=t,this.garbageCollector=function(e,t){return new cA(e,t)}(this,n)}return R(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return hA(e,n)}},{key:"removeReference",value:function(e,t,n){return hA(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return hA(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return ZC(e).zt((function(r){return YC(e,r,t).next((function(e){return e&&(n=!0),HT.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,s){if(s<=t){var u=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Gx.min()),rA(e).delete([0,kT(o.path)])}))}));i.push(u)}})).next((function(){return HT.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return hA(e,t)}},{key:"Mn",value:function(e,t){var n,r=rA(e),i=Ux.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=w(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==Ux.A&&t(new pI(bT(n)),i),i=u,n=s):i=Ux.A})).next((function(){i!==Ux.A&&t(new pI(bT(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function hA(e,t){return rA(e).put(function(e,t){return{targetId:0,path:kT(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var fA=function(){function e(){N(this,e),this.changes=new wS((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return R(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,jI.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?HT.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),dA=function(){function e(t){N(this,e),this.M=t}return R(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return yA(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return yA(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],hC(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=jI.newInvalidDocument(t);return yA(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(mA(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:jI.newInvalidDocument(t)};return yA(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(mA(t))},(function(e,i){r={document:n.$n(t,i),size:HC(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=xS();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=xS(),i=new QI(pI.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,HC(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return HT.resolve();var r=new XI(kA);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(mA(r.first()),mA(r.last())),a=r.getIterator(),o=a.getNext();return yA(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=pI.fromSegments([].concat(A(t.prefixPath),[t.collectionGroup,t.documentId]));o&&kA(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(mA(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),hC(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yA(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=xS(),i=mr(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(pI.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(s){i.e(s)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=xS(),o=gA(t,n),s=gA(t,GI.max());return yA(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.$n(pI.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new pA(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return vA(e).get("remoteDocumentGlobalKey").next((function(e){return Sx(!!e),e}))}},{key:"Fn",value:function(e,t){return vA(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=rT(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=pI.fromSegments(t.noDocument.path),i=dC(t.noDocument.readTime);n=jI.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ex();var a=pI.fromSegments(t.unknownDocument.path),o=dC(t.unknownDocument.version);n=jI.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Kx(e[0],e[1]);return Gx.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Gx.min()))return n}return jI.newInvalidDocument(e)}}]),e}(),pA=function(e){O(n,e);var t=V(n);function n(e,r){var i;return N(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new wS((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return R(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new XI((function(e,t){return qx(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=lC(t.Kn.M,o);i=i.add(a.path.popLast());var c=HC(u);r+=c-s.size,n.push(t.Kn.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=lC(t.Kn.M,o.convertToNoDocument(Gx.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),HT.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(fA);function vA(e){return iC(e,"remoteDocumentGlobal")}function yA(e){return iC(e,"remoteDocumentsV14")}function mA(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function gA(e,t){var n=t.documentKey.path.toArray();return[e,hC(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function kA(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=qx(n[a],r[a]))return i;return(i=qx(n.length,r.length))||((i=qx(n[n.length-2],r[r.length-2]))||qx(n[n.length-1],r[r.length-1]))}var _A=function(){function e(t){N(this,e),this.M=t}return R(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new QT("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xT,{unique:!0}),e.createObjectStore("documentMutations")}(e),wA(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=HT.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),wA(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Gx.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xT,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return HT.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:jT});t.createIndex("collectionPathOverlayIndex",UT,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",VT,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:TT});t.createIndex("documentKeyIndex",CT),t.createIndex("collectionGroupIndex",AT)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:OT}).createIndex("sequenceNumberIndex",LT,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:MT}).createIndex("documentKeyIndex",FT,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=HC(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return HT.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return HT.forEach(r,(function(r){Sx(r.userId===n.userId);var i=pC(t.M,r);return GC(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Xx(n),o=function(e){return[0,kT(e)]}(a);r.push(t.get(o).next((function(n){return n?HT.resolve():function(n){return t.put({targetId:0,path:kT(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return HT.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:DT});var n=t.store("collectionParents"),r=new FC,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:kT(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Xx(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=w(e,3),r=(n[0],n[1]),a=(n[2],bT(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=vC(r),a=yC(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new pI(Xx.fromString(i.document.name).popFirst(5)):i.noDocument?pI.fromSegments(i.noDocument.path):i.unknownDocument?pI.fromSegments(i.unknownDocument.path):Ex()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return HT.waitFor(r)}))}}]),e}();function wA(e){e.createObjectStore("targetDocuments",{keyPath:PT}).createIndex("documentTargetsIndex",RT,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",NT,{unique:!0}),e.createObjectStore("targetGlobal")}var bA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",xA=function(){function e(t,n,r,i,a,o,s,u,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(N(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=s,this.Xn=c,this.Zn=l,this.ts=h,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new Ax(Cx.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lA(this,i),this.hs=n+"main",this.M=new cC(u),this.ls=new YT(this.hs,this.ts,new _A(this.M)),this.fs=new eA(this.referenceDelegate,this.M),this.ds=function(e){return new dA(e)}(this.M),this._s=new _C,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&bx("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return R(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Ax(Cx.FAILED_PRECONDITION,bA);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new Ux(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=yr(pr().mark((function n(r){return pr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=yr(pr().mark((function t(n){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return EA(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.bs(t).next((function(){return!0}))}))})).catch((function(t){if(ZT(t))return wx("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return wx("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return IA(e).get("owner").next((function(e){return HT.resolve(t.Ps(e))}))}},{key:"Vs",value:function(e){return EA(e).delete(this.clientId)}},{key:"vs",value:function(){var e=yr(pr().mark((function e(){var t,n,r,i,a=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=iC(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return HT.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=mr(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"Ps",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?HT.resolve(!0):IA(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.Ps(n)&&t.networkEnabled)return!0;if(!t.Ps(n)){if(!n.allowTabSynchronization)throw new Ax(Cx.FAILED_PRECONDITION,bA);return!1}}return!(!t.networkEnabled||!t.inForeground)||EA(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&wx("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=yr(pr().mark((function e(){var t=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new rC(e,Ux.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return EA(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return QC.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new UC(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return xC.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;wx("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=14===(i=this.ts)?WT:13===i?zT:12===i?qT:11===i?BT:void Ex();return this.ls.runTransaction(e,o,s,(function(i){return a=new rC(i,r.es?r.es.next():Ux.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw bx("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new Ax(Cx.FAILED_PRECONDITION,KT);return n(a)})).next((function(e){return r.bs(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return IA(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.Ps(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Ax(Cx.FAILED_PRECONDITION,bA)}))}},{key:"bs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return IA(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=IA(e);return n.get("owner").next((function(e){return t.Ps(e)?(wx("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):HT.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(bx("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!Lr()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return wx("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return bx("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(mk){bx("Failed to set zombie client id.",mk)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(mk){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return YT.vt()}}]),e}();function IA(e){return iC(e,"owner")}function EA(e){return iC(e,"clientMetadata")}function SA(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var TA=function(){function e(t,n,r){N(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return R(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=mr(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=mr(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return pI.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):TE(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new pI(t)).next((function(e){var t=ES();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=ES();return this.indexManager.getCollectionParents(e,i).next((function(o){return HT.forEach(o,(function(o){var s=function(e,t){return new bE(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=mr(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=mr(a.mutations);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.key,c=r.get(u);null==c&&(c=jI.newInvalidDocument(u),r=r.insert(u,c)),aS(s,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(u))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){OE(t,n)||(r=r.remove(e))})),r}))}}]),e}(),CA=function(){function e(t,n,r,i){N(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return R(e,null,[{key:"Ys",value:function(t,n){var r,i=AS(),a=AS(),o=mr(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),AA=function(){function e(){N(this,e),this.Xs=!1}return R(e,[{key:"initialize",value:function(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}},{key:"Qs",value:function(e,t,n,r){var i=this;return this.ti(e,t).next((function(a){return a||i.ei(e,t,r,n)})).next((function(n){return n||i.ni(e,t)}))}},{key:"ti",value:function(e,t){return HT.resolve(null)}},{key:"ei",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Gx.min())?this.ni(e,t):this.Zs.Ks(e,n).next((function(a){var o=i.si(t,a);return i.ii(t,o,n,r)?i.ni(e,t):(_x()<=pi.DEBUG&&wx("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),DE(t)),i.ri(e,o,t,WI(r,-1)))}))}},{key:"si",value:function(e,t){var n=new XI(ME(e));return t.forEach((function(t,r){OE(e,r)&&(n=n.add(r))})),n}},{key:"ii",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ni",value:function(e,t){return _x()<=pi.DEBUG&&wx("QueryEngine","Using full collection scan to execute query:",DE(t)),this.Zs.Qs(e,t,GI.min())}},{key:"ri",value:function(e,t,n,r){return this.Zs.Qs(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),NA=function(){function e(t,n,r,i){N(this,e),this.persistence=t,this.oi=n,this.M=i,this.ui=new QI(qx),this.ai=new wS((function(e){return nE(e)}),rE),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}return R(e,[{key:"li",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new TA(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ui)}))}}]),e}();function PA(e,t,n,r){return new NA(e,t,n,r)}function RA(e,t){return DA.apply(this,arguments)}function DA(){return DA=yr(pr().mark((function e(t,n){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tx(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.li(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=AS(),u=mr(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,h=mr(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=mr(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=mr(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;s=s.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.fi.Ks(e,s).next((function(e){return{di:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),DA.apply(this,arguments)}function OA(e,t){var n=Tx(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=HT.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Sx(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}function LA(e){var t=Tx(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function MA(e,t){var n=Tx(e),r=t.snapshotVersion,i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(tI.EMPTY_BYTE_STRING,Gx.min()).withLastLimboFreeSnapshotVersion(Gx.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var s=xS();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(FA(e,a,t.documentUpdates).next((function(e){s=e}))),!r.isEqual(Gx.min())){var u=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return HT.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.fi.Gs(e,s)})).next((function(){return s}))})).then((function(e){return n.ui=i,e}))}function FA(e,t,n){var r=AS();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=xS();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Gx.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):wx("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function jA(e,t){var n=Tx(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function UA(e,t){var n=Tx(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,HT.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new uC(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e}))}function VA(e,t,n){return BA.apply(this,arguments)}function BA(){return BA=yr(pr().mark((function e(t,n,r){var i,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Tx(t),a=i.ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),ZT(e.t1)){e.next=12;break}throw e.t1;case 12:wx("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ui=i.ui.remove(n),i.ai.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),BA.apply(this,arguments)}function qA(e,t,n){var r=Tx(e),i=Gx.min(),a=AS();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Tx(e),i=r.ai.get(n);return void 0!==i?HT.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,AE(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.oi.Qs(e,t,n?i:Gx.min(),n?a:AS())})).next((function(e){return KA(r,LE(t),e),{documents:e,_i:a}}))}))}function zA(e,t){var n=Tx(e),r=Tx(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function WA(e,t){var n=Tx(e),r=n.ci.get(t)||Gx.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.hi.getAllFromCollectionGroup(e,t,WI(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return KA(n,t,e),e}))}function KA(e,t,n){var r=Gx.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ci.set(t,r)}function GA(e,t,n,r){return HA.apply(this,arguments)}function HA(){return HA=yr(pr().mark((function e(t,n,r,i){var a,o,s,u,c,l,h,f,d,p;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Tx(t),o=AS(),s=xS(),u=mr(r);try{for(u.s();!(c=u.n()).done;)l=c.value,h=n.wi(l.metadata.name),l.document&&(o=o.add(h)),(f=n.mi(l)).setReadTime(n.gi(l.metadata.readTime)),s=s.insert(h,f)}catch(v){u.e(v)}finally{u.f()}return d=a.hi.newChangeBuffer({trackRemovals:!0}),e.next=7,UA(a,function(e){return AE(IE(Xx.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return FA(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.fs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.fi.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),HA.apply(this,arguments)}function QA(e,t){return YA.apply(this,arguments)}function YA(){return YA=yr(pr().mark((function e(t,n){var r,i,a,o=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:AS(),e.next=3,UA(t,AE(mC(n.bundledQuery)));case 3:return i=e.sent,a=Tx(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=HS(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(tI.EMPTY_BYTE_STRING,t);return a.ui=a.ui.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),YA.apply(this,arguments)}var JA=function(){function e(t){N(this,e),this.M=t,this.yi=new Map,this.pi=new Map}return R(e,[{key:"getBundleMetadata",value:function(e,t){return HT.resolve(this.yi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:HS(n.createTime)}),HT.resolve()}},{key:"getNamedQuery",value:function(e,t){return HT.resolve(this.pi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:mC(e.bundledQuery),readTime:HS(e.readTime)}}(t)),HT.resolve()}}]),e}(),XA=function(){function e(){N(this,e),this.overlays=new QI(pI.comparator),this.Ii=new Map}return R(e,[{key:"getOverlay",value:function(e,t){return HT.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),HT.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Ii.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Ii.delete(n)),HT.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=SS(),i=t.length+1,a=new pI(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return HT.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new QI((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=SS(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=SS(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return HT.resolve(u)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new sC(t,n));var a=this.Ii.get(t);void 0===a&&(a=AS(),this.Ii.set(t,a)),this.Ii.set(t,a.add(n.key))}}}]),e}(),ZA=function(){function e(){N(this,e),this.Ti=new XI($A.Ei),this.Ai=new XI($A.Ri)}return R(e,[{key:"isEmpty",value:function(){return this.Ti.isEmpty()}},{key:"addReference",value:function(e,t){var n=new $A(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}},{key:"bi",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Pi(new $A(e,t))}},{key:"Vi",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"vi",value:function(e){var t=this,n=new pI(new Xx([])),r=new $A(n,e),i=new $A(n,e+1),a=[];return this.Ai.forEachInRange([r,i],(function(e){t.Pi(e),a.push(e.key)})),a}},{key:"Si",value:function(){var e=this;this.Ti.forEach((function(t){return e.Pi(t)}))}},{key:"Pi",value:function(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}},{key:"Di",value:function(e){var t=new pI(new Xx([])),n=new $A(t,e),r=new $A(t,e+1),i=AS();return this.Ai.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new $A(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),$A=function(){function e(t,n){N(this,e),this.key=t,this.Ci=n}return R(e,null,[{key:"Ei",value:function(e,t){return pI.comparator(e.key,t.key)||qx(e.Ci,t.Ci)}},{key:"Ri",value:function(e,t){return qx(e.Ci,t.Ci)||pI.comparator(e.key,t.key)}}]),e}(),eN=function(){function e(t,n){N(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new XI($A.Ei)}return R(e,[{key:"checkEmpty",value:function(e){return HT.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new aC(i,t,n,r);this.Bs.push(a);var o,s=mr(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Ni=this.Ni.add(new $A(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return HT.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return HT.resolve(this.ki(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Mi(n),i=r<0?0:r;return HT.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return HT.resolve(0===this.Bs.length?-1:this.xi-1)}},{key:"getAllMutationBatches",value:function(e){return HT.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new $A(t,0),i=new $A(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],(function(e){var t=n.ki(e.Ci);a.push(t)})),HT.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new XI(qx);return t.forEach((function(e){var t=new $A(e,0),i=new $A(e,Number.POSITIVE_INFINITY);n.Ni.forEachInRange([t,i],(function(e){r=r.add(e.Ci)}))})),HT.resolve(this.Oi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;pI.isDocumentKey(i)||(i=i.child(""));var a=new $A(new pI(i),0),o=new XI(qx);return this.Ni.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)}),a),HT.resolve(this.Oi(o))}},{key:"Oi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ki(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Sx(0===this.Fi(t.batchId,"removed")),this.Bs.shift();var r=this.Ni;return HT.forEach(t.mutations,(function(i){var a=new $A(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Ni=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new $A(t,0),r=this.Ni.firstAfterOrEqual(n);return HT.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,HT.resolve()}},{key:"Fi",value:function(e,t){return this.Mi(e)}},{key:"Mi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"ki",value:function(e){var t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),tN=function(){function e(t){N(this,e),this.$i=t,this.docs=new QI(pI.comparator),this.size=0}return R(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return HT.resolve(n?n.document.mutableCopy():jI.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=xS();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():jI.newInvalidDocument(e))})),HT.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=xS(),i=new pI(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||HI(KI(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return HT.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Ex()}},{key:"Bi",value:function(e,t){return HT.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new nN(this)}},{key:"getSize",value:function(e){return HT.resolve(this.size)}}]),e}(),nN=function(e){O(n,e);var t=V(n);function n(e){var r;return N(this,n),(r=t.call(this)).Kn=e,r}return R(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),HT.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(fA),rN=function(){function e(t){N(this,e),this.persistence=t,this.Li=new wS((function(e){return nE(e)}),rE),this.lastRemoteSnapshotVersion=Gx.min(),this.highestTargetId=0,this.Ui=0,this.qi=new ZA,this.targetCount=0,this.Ki=$C.gn()}return R(e,[{key:"forEachTarget",value:function(e,t){return this.Li.forEach((function(e,n){return t(n)})),HT.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return HT.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return HT.resolve(this.Ui)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ki.next(),HT.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),HT.resolve()}},{key:"Tn",value:function(e){this.Li.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ki=new $C(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,HT.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),HT.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,HT.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Li.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Li.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),HT.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return HT.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Li.get(t)||null;return HT.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.qi.bi(t,n),HT.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.qi.Vi(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),HT.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.qi.vi(t),HT.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.qi.Di(t);return HT.resolve(n)}},{key:"containsKey",value:function(e,t){return HT.resolve(this.qi.containsKey(t))}}]),e}(),iN=function(){function e(t,n){var r=this;N(this,e),this.Gi={},this.overlays={},this.es=new Ux(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new rN(this),this.indexManager=new MC,this.ds=new tN((function(e){return r.referenceDelegate.Qi(e)})),this.M=new cC(n),this._s=new JA(this.M)}return R(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new XA,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Gi[e.toKey()];return n||(n=new eN(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;wx("MemoryPersistence","Starting transaction:",e);var i=new aN(this.es.next());return this.referenceDelegate.ji(),n(i).next((function(e){return r.referenceDelegate.Wi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zi",value:function(e,t){return HT.or(Object.values(this.Gi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),aN=function(e){O(n,e);var t=V(n);function n(e){var r;return N(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return R(n)}(GT),oN=function(){function e(t){N(this,e),this.persistence=t,this.Hi=new ZA,this.Ji=null}return R(e,[{key:"Xi",get:function(){if(this.Ji)return this.Ji;throw Ex()}},{key:"addReference",value:function(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),HT.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),HT.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xi.add(t.toString()),HT.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Hi.vi(t.targetId).forEach((function(e){return n.Xi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Xi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ji",value:function(){this.Ji=new Set}},{key:"Wi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return HT.forEach(this.Xi,(function(r){var i=pI.fromPath(r);return t.Zi(e,i).next((function(e){e||n.removeEntry(i,Gx.min())}))})).next((function(){return t.Ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zi(e,t).next((function(e){e?n.Xi.delete(t.toString()):n.Xi.add(t.toString())}))}},{key:"Qi",value:function(e){return 0}},{key:"Zi",value:function(e,t){var n=this;return HT.or([function(){return HT.resolve(n.Hi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zi(e,t)}])}}],[{key:"Yi",value:function(t){return new e(t)}}]),e}();function sN(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function uN(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function cN(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var lN=function(){function e(t,n,r,i){N(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return R(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Ax(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(bx("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),hN=function(){function e(t,n,r){N(this,e),this.targetId=t,this.state=n,this.error=r}return R(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ax(i.error.code,i.error.message))),a?new e(t,i.state,r):(bx("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),fN=function(){function e(t,n){N(this,e),this.clientId=t,this.activeTargetIds=n}return R(e,null,[{key:"tr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=PS(),o=0;i&&o<r.activeTargetIds.length;++o)i=dI(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(bx("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),dN=function(){function e(t,n){N(this,e),this.clientId=t,this.onlineState=n}return R(e,null,[{key:"tr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(bx("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),pN=function(){function e(){N(this,e),this.activeTargetIds=PS()}return R(e,[{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"er",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),vN=function(){function e(t,n,r,i,a){N(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new QI(qx),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=sN(this.persistenceKey,this.ir),this.lr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new pN),this.dr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this._r=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.wr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.mr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.gr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}return R(e,[{key:"start",value:function(){var e=yr(pr().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,f=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=mr(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.ir){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(sN(this.persistenceKey,i)))&&(o=fN.tr(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.yr(),(s=this.storage.getItem(this.mr))&&(u=this.pr(s))&&this.Ir(u),c=mr(this.cr);try{for(c.s();!(l=c.n()).done;)h=l.value,this.ur(h)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.lr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Tr(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Er(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Er(e,t,n),this.Ar(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(cN(this.persistenceKey,e));if(n){var r=hN.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Rr.sr(e),this.yr()}},{key:"isLocalQueryTarget",value:function(e){return this.Rr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(cN(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.br(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ar(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Pr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return wx("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){wx("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){wx("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ur",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(wx("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void bx("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(yr(pr().mark((function e(){var r,i,a,o,s,u,c;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.dr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Sr(r,null));case 6:if(!(i=t.Dr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Sr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t._r.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Cr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Nr(a));case 16:e.next=41;break;case 18:if(!t.wr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.kr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.mr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ir(s));case 30:e.next=41;break;case 32:if(n.key!==t.lr){e.next=37;break}u=function(e){var t=Ux.A;if(null!=e)try{var n=JSON.parse(e);Sx("number"==typeof n),t=n}catch(e){bx("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==Ux.A&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.gr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Rr",get:function(){return this.ar.get(this.ir)}},{key:"yr",value:function(){this.setItem(this.hr,this.Rr.er())}},{key:"Er",value:function(e,t,n){var r=new lN(this.currentUser,e,t,n),i=uN(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}},{key:"Ar",value:function(e){var t=uN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Pr",value:function(e){var t={clientId:this.ir,onlineState:e};this.storage.setItem(this.mr,JSON.stringify(t))}},{key:"br",value:function(e,t,n){var r=cN(this.persistenceKey,e),i=new hN(e,t,n);this.setItem(r,i.er())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}},{key:"vr",value:function(e){var t=this.dr.exec(e);return t?t[1]:null}},{key:"Dr",value:function(e,t){var n=this.vr(e);return fN.tr(n,t)}},{key:"Cr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return lN.tr(new mx(i),r,t)}},{key:"kr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]);return hN.tr(r,t)}},{key:"pr",value:function(e){return dN.tr(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Nr",value:function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:wx("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}},{key:"Sr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Lr(o,s).then((function(){n.ar=r}))}},{key:"Ir",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Tr",value:function(e){var t=PS();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),yN=function(){function e(){N(this,e),this.Ur=new pN,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return R(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.nr(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.sr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new pN,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),mN=function(){function e(){N(this,e)}return R(e,[{key:"Kr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),gN=function(){function e(){var t=this;N(this,e),this.Gr=function(){return t.Qr()},this.jr=function(){return t.Wr()},this.zr=[],this.Hr()}return R(e,[{key:"Kr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}},{key:"Hr",value:function(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}},{key:"Qr",value:function(){wx("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=mr(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){wx("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=mr(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),kN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},_N=function(){function e(t){N(this,e),this.Jr=t.Jr,this.Yr=t.Yr}return R(e,[{key:"Xr",value:function(e){this.Zr=e}},{key:"eo",value:function(e){this.no=e}},{key:"onMessage",value:function(e){this.so=e}},{key:"close",value:function(){this.Yr()}},{key:"send",value:function(e){this.Jr(e)}},{key:"io",value:function(){this.Zr()}},{key:"ro",value:function(e){this.no(e)}},{key:"oo",value:function(e){this.so(e)}}]),e}(),wN=function(e){O(n,e);var t=V(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return R(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new vx;o.listenOnce(lx.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case cx.NO_ERROR:var t=o.getResponseJson();wx("Connection","XHR received:",JSON.stringify(t)),i(t);break;case cx.TIMEOUT:wx("Connection",'RPC "'+e+'" timed out'),a(new Ax(Cx.DEADLINE_EXCEEDED,"Request time out"));break;case cx.HTTP_ERROR:var n=o.getStatus();if(wx("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Cx).indexOf(t)>=0?t:Cx.UNKNOWN}(r.status);a(new Ax(s,r.message))}else a(new Ax(Cx.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Ax(Cx.UNAVAILABLE,"Connection failed."));break;default:Ex()}}finally{wx("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=sx(),a=ux(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new dx({})),this.lo(o.initMessageHeaders,t,n),Or()||Fr()||Dr().indexOf("Electron/")>=0||jr()||Dr().indexOf("MSAppHost/")>=0||Mr()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");wx("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,h=new _N({Jr:function(e){l?wx("Connection","Not sending because WebChannel is closed:",e):(c||(wx("Connection","Opening WebChannel transport."),u.open(),c=!0),wx("Connection","WebChannel sending:",e),u.send(e))},Yr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,px.EventType.OPEN,(function(){l||wx("Connection","WebChannel transport opened.")})),f(u,px.EventType.CLOSE,(function(){l||(l=!0,wx("Connection","WebChannel transport closed"),h.ro())})),f(u,px.EventType.ERROR,(function(e){l||(l=!0,xx("Connection","WebChannel transport errored:",e),h.ro(new Ax(Cx.UNAVAILABLE,"The operation could not be completed")))})),f(u,px.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Sx(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){wx("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=pS[e];if(void 0!==t)return _S(t)}(a),s=i.message;void 0===o&&(o=Cx.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,h.ro(new Ax(o,s)),u.close()}else wx("Connection","WebChannel received:",n),h.oo(n)}})),f(a,hx.STAT_EVENT,(function(e){e.stat===fx.PROXY?wx("Connection","Detected buffering proxy"):e.stat===fx.NOPROXY&&wx("Connection","Detected no buffering proxy")})),setTimeout((function(){h.io()}),0),h}}]),n}(function(){function e(t){N(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.uo=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return R(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ho(e,t);wx("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return wx("RestConnection","Received: ",e),e}),(function(t){throw xx("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i){return this.co(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+gx,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=kN[e];return"".concat(this.uo,"/v1/").concat(t,":").concat(n)}}]),e}());function bN(){return"undefined"!=typeof window?window:null}function xN(){return"undefined"!=typeof document?document:null}function IN(e){return new zS(e,!0)}var EN=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;N(this,e),this.Yn=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return R(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&wx("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),SN=function(){function e(t,n,r,i,a,o,s,u){N(this,e),this.Yn=t,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new EN(t,n)}return R(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,(function(){return e.Bo()})))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===Cx.RESOURCE_EXHAUSTED?(bx(n.toString()),bx("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===Cx.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.eo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=w(t,2),i=r[0],a=r[1];e.Do===n&&e.Qo(i,a)}),(function(n){t((function(){var t=new Ax(Cx.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)}))}))}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.xo=n.Yn.enqueueAfterDelay(n.vo,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.eo((function(e){r((function(){return n.jo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.No.Ro(yr(pr().mark((function t(){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"jo",value:function(e){return wx("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Do===e?n():(wx("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),TN=function(e){O(n,e);var t=V(n);function n(e,r,i,a,o,s){var u;return N(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).M=o,u}return R(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ex()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(Sx(void 0===t||"string"==typeof t),tI.fromBase64String(t||"")):(Sx(void 0===t||t instanceof Uint8Array),tI.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Cx.UNKNOWN:_S(e.code);return new Ax(t,e.message||"")}(o);n=new MS(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=XS(e,u.document.name),l=HS(u.document.updateTime),h=new MI({mapValue:{fields:u.document.fields}}),f=jI.newFoundDocument(c,l,h),d=u.targetIds||[],p=u.removedTargetIds||[];n=new OS(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=XS(e,v.document),m=v.readTime?HS(v.readTime):Gx.min(),g=jI.newNoDocument(y,m),k=v.removedTargetIds||[];n=new OS([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var _=t.documentRemove;_.document;var w=XS(e,_.document),b=_.removedTargetIds||[];n=new OS([],b,w,null)}else{if(!("filter"in t))return Ex();t.filter;var x=t.filter;x.targetId;var I=x.count||0,E=new gS(I),S=x.targetId;n=new LS(S,E)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Gx.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Gx.min():t.readTime?HS(t.readTime):Gx.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=eT(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=iE(r)?{documents:sT(e,r)}:{query:uT(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=KS(e,t.resumeToken):t.snapshotVersion.compareTo(Gx.min())>0&&(n.readTime=WS(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ex()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=eT(this.M),t.removeTarget=e,this.Lo(t)}}]),n}(SN),CN=function(e){O(n,e);var t=V(n);function n(e,r,i,a,o,s){var u;return N(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).M=o,u.Yo=!1,u}return R(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,zh(L(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Sx(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(Sx(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?HS(e.updateTime):HS(t);return n.isEqual(Gx.min())&&(n=HS(t)),new eS(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=HS(e.commitTime);return this.listener.tu(n,t)}return Sx(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=eT(this.M),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return aT(t.M,e)}))};this.Lo(n)}}]),n}(SN),AN=function(e){O(n,e);var t=V(n);function n(e,r,i,a){var o;return N(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.M=a,o.su=!1,o}return R(n,[{key:"iu",value:function(){if(this.su)throw new Ax(Cx.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=w(i,2),o=a[0],s=a[1];return r.So.co(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Cx.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Ax(Cx.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=w(i,2),o=a[0],s=a[1];return r.So._o(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Cx.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Ax(Cx.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){return R((function e(){N(this,e)}))}()),NN=function(){function e(t,n){N(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return R(e,[{key:"au",value:function(){var e=this;0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"lu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(bx(t),this.uu=!1):wx("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),PN=R((function e(t,n,r,i,a){var o=this;N(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr((function(e){r.enqueueAndForget(yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=qN(o),!e.t0){e.next=5;break}return wx("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Tx(t)).wu.add(4),e.next=4,ON(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,RN(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.yu=new NN(r,i)}));function RN(e){return DN.apply(this,arguments)}function DN(){return DN=yr(pr().mark((function e(t){var n,r,i;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!qN(t)){e.next=18;break}n=mr(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),DN.apply(this,arguments)}function ON(e){return LN.apply(this,arguments)}function LN(){return LN=yr(pr().mark((function e(t){var n,r,i;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=mr(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),LN.apply(this,arguments)}function MN(e,t){var n=Tx(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),BN(n)?VN(n):mP(n).Mo()&&jN(n,t))}function FN(e,t){var n=Tx(e),r=mP(n);n._u.delete(t),r.Mo()&&UN(n,t),0===n._u.size&&(r.Mo()?r.$o():qN(n)&&n.yu.set("Unknown"))}function jN(e,t){e.pu.Z(t.targetId),mP(e).Ho(t)}function UN(e,t){e.pu.Z(t),mP(e).Jo(t)}function VN(e){e.pu=new jS({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e._u.get(t)||null}}),mP(e).start(),e.yu.au()}function BN(e){return qN(e)&&!mP(e).ko()&&e._u.size>0}function qN(e){return 0===Tx(e).wu.size}function zN(e){e.pu=void 0}function WN(e){return KN.apply(this,arguments)}function KN(){return KN=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach((function(e,n){jN(t,e)}));case 1:case"end":return e.stop()}}),e)}))),KN.apply(this,arguments)}function GN(e,t){return HN.apply(this,arguments)}function HN(){return HN=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:zN(t),BN(t)?(t.yu.lu(n),VN(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),HN.apply(this,arguments)}function QN(e,t,n){return YN.apply(this,arguments)}function YN(){return YN=yr(pr().mark((function e(t,n,r){var i;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof MS&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=yr(pr().mark((function e(t,n){var r,i,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=mr(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),wx("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,JN(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof OS?t.pu.ut(n):n instanceof LS?t.pu._t(n):t.pu.ht(n),r.isEqual(Gx.min())){e.next=29;break}return e.prev=14,e.next=17,LA(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(tI.EMPTY_BYTE_STRING,n.snapshotVersion)),UN(e,t);var r=new uC(n.target,t,1,n.sequenceNumber);jN(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),wx("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,JN(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),YN.apply(this,arguments)}function JN(e,t,n){return XN.apply(this,arguments)}function XN(){return XN=yr(pr().mark((function e(t,n,r){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ZT(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,ON(t);case 5:t.yu.set("Offline"),r||(r=function(){return LA(t.localStore)}),t.asyncQueue.enqueueRetryable(yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wx("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,RN(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),XN.apply(this,arguments)}function ZN(e,t){return t().catch((function(n){return JN(e,n,t)}))}function $N(e){return eP.apply(this,arguments)}function eP(){return eP=yr(pr().mark((function e(t){var n,r,i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Tx(t),r=gP(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!tP(n)){e.next=19;break}return e.prev=3,e.next=6,jA(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,nP(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,JN(n,e.t0);case 17:e.next=2;break;case 19:rP(n)&&iP(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),eP.apply(this,arguments)}function tP(e){return qN(e)&&e.du.length<10}function nP(e,t){e.du.push(t);var n=gP(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function rP(e){return qN(e)&&!gP(e).ko()&&e.du.length>0}function iP(e){gP(e).start()}function aP(e){return oP.apply(this,arguments)}function oP(){return oP=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gP(t).nu();case 1:case"end":return e.stop()}}),e)}))),oP.apply(this,arguments)}function sP(e){return uP.apply(this,arguments)}function uP(){return uP=yr(pr().mark((function e(t){var n,r,i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=gP(t),r=mr(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),uP.apply(this,arguments)}function cP(e,t,n){return lP.apply(this,arguments)}function lP(){return lP=yr(pr().mark((function e(t,n,r){var i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=oC.from(i,n,r),e.next=3,ZN(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,$N(t);case 5:case"end":return e.stop()}}),e)}))),lP.apply(this,arguments)}function hP(e,t){return fP.apply(this,arguments)}function fP(){return fP=yr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&gP(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=yr(pr().mark((function e(t,n){var r,i;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!kS(i=n.code)||i===Cx.ABORTED){e.next=7;break}return r=t.du.shift(),gP(t).Fo(),e.next=5,ZN(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,$N(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:rP(t)&&iP(t);case 5:case"end":return e.stop()}}),e)}))),fP.apply(this,arguments)}function dP(e,t){return pP.apply(this,arguments)}function pP(){return pP=yr(pr().mark((function e(t,n){var r,i;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Tx(t)).asyncQueue.verifyOperationInProgress(),wx("RemoteStore","RemoteStore received new credentials"),i=qN(r),r.wu.add(3),e.next=6,ON(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,RN(r);case 12:case"end":return e.stop()}}),e)}))),pP.apply(this,arguments)}function vP(e,t){return yP.apply(this,arguments)}function yP(){return yP=yr(pr().mark((function e(t,n){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Tx(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,RN(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,ON(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),yP.apply(this,arguments)}function mP(e){return e.Iu||(e.Iu=function(e,t,n){var r=Tx(e);return r.iu(),new TN(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:WN.bind(null,e),eo:GN.bind(null,e),zo:QN.bind(null,e)}),e.mu.push(function(){var t=yr(pr().mark((function t(n){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),BN(e)?VN(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:zN(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}function gP(e){return e.Tu||(e.Tu=function(e,t,n){var r=Tx(e);return r.iu(),new CN(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:aP.bind(null,e),eo:hP.bind(null,e),eu:sP.bind(null,e),tu:cP.bind(null,e)}),e.mu.push(function(){var t=yr(pr().mark((function t(n){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,$N(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(wx("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var kP=function(){function e(t,n,r,i,a){N(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Nx,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return R(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ax(Cx.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function _P(e,t){if(bx("AsyncQueue","".concat(t,": ").concat(e)),ZT(e))return new Ax(Cx.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var wP=function(){function e(t){N(this,e),this.comparator=t?function(e,n){return t(e,n)||pI.comparator(e.key,n.key)}:function(e,t){return pI.comparator(e.key,t.key)},this.keyedMap=ES(),this.sortedSet=new QI(this.comparator)}return R(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),bP=function(){function e(){N(this,e),this.Eu=new QI(pI.comparator)}return R(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Ex():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),xP=function(){function e(t,n,r,i,a,o,s,u){N(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return R(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&PE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,wP.emptySet(n),a,r,i,!0,!1)}}]),e}(),IP=R((function e(){N(this,e),this.Ru=void 0,this.listeners=[]})),EP=R((function e(){N(this,e),this.queries=new wS((function(e){return RE(e)}),PE),this.onlineState="Unknown",this.bu=new Set}));function SP(e,t){return TP.apply(this,arguments)}function TP(){return TP=yr(pr().mark((function e(t,n){var r,i,a,o,s;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Tx(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new IP),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=_P(e.t0,"Initialization of query '".concat(DE(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.Vu(o.Ru)&&RP(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),TP.apply(this,arguments)}function CP(e,t){return AP.apply(this,arguments)}function AP(){return AP=yr(pr().mark((function e(t,n){var r,i,a,o,s;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Tx(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),AP.apply(this,arguments)}function NP(e,t){var n,r=Tx(e),i=!1,a=mr(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=mr(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.Ru=o}}}catch(h){a.e(h)}finally{a.f()}i&&RP(r)}function PP(e,t,n){var r=Tx(e),i=r.queries.get(t);if(i){var a,o=mr(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function RP(e){e.bu.forEach((function(e){e.next()}))}var DP=function(){function e(t,n,r){N(this,e),this.query=t,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return R(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=mr(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new xP(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.ku||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=xP.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}]),e}(),OP=function(){function e(t,n){N(this,e),this.payload=t,this.byteLength=n}return R(e,[{key:"Mu",value:function(){return"metadata"in this.payload}}]),e}(),LP=function(){function e(t){N(this,e),this.M=t}return R(e,[{key:"wi",value:function(e){return XS(this.M,e)}},{key:"mi",value:function(e){return e.metadata.exists?rT(this.M,e.document,!1):jI.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}},{key:"gi",value:function(e){return HS(e)}}]),e}(),MP=function(){function e(t,n,r){N(this,e),this.Ou=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=FP(t)}return R(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Xx.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new LP(this.M),i=mr(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.wi(a.metadata.name),u=mr(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||AS()).add(s);n.set(c,l)}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=yr(pr().mark((function e(){var t,n,r,i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GA(this.localStore,new LP(this.M),this.documents,this.Ou.id);case 2:t=e.sent,n=this.$u(this.documents),r=mr(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,QA(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function FP(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var jP=R((function e(t){N(this,e),this.key=t})),UP=R((function e(t){N(this,e),this.key=t})),VP=function(){function e(t,n){N(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=AS(),this.mutatedKeys=AS(),this.Gu=ME(t),this.Qu=new wP(this.Gu)}return R(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new bP,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=OE(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Hu(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Gu(h,u)>0||c&&n.Gu(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,ii:s,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ex()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],s=0===this.Ku.size&&this.current?1:0,u=s!==this.qu;return this.qu=s,0!==a.length||u?{snapshot:new xP(this.query,e.Qu,i,a,e.mutatedKeys,0===s,u,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new bP,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=AS(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new UP(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new jP(e))})),n}},{key:"ta",value:function(e){this.Uu=e._i,this.Ku=AS();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ea",value:function(){return xP.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),BP=R((function e(t,n,r){N(this,e),this.query=t,this.targetId=n,this.view=r})),qP=R((function e(t){N(this,e),this.key=t,this.na=!1})),zP=function(){function e(t,n,r,i,a,o){N(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new wS((function(e){return RE(e)}),PE),this.ra=new Map,this.oa=new Set,this.ua=new QI(pI.comparator),this.aa=new Map,this.ca=new ZA,this.ha={},this.la=new Map,this.fa=$C.yn(),this.onlineState="Unknown",this.da=void 0}return R(e,[{key:"isPrimaryClient",get:function(){return!0===this.da}}]),e}();function WP(e,t){return KP.apply(this,arguments)}function KP(){return KP=yr(pr().mark((function e(t,n){var r,i,a,o,s,u;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=FR(t),!(o=r.ia.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ea(),e.next=15;break;case 6:return e.next=8,UA(r.localStore,AE(n));case 8:return s=e.sent,r.isPrimaryClient&&MN(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,GP(r,n,i,"current"===u);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),KP.apply(this,arguments)}function GP(e,t,n,r){return HP.apply(this,arguments)}function HP(){return HP=yr(pr().mark((function e(t,n,r,i){var a,o,s,u,c,l;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._a=function(e,n,r){return function(){var e=yr(pr().mark((function e(t,n,r,i){var a,o,s;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.ii,!e.t0){e.next=6;break}return e.next=5,qA(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(dR(t,n.targetId,s.Xu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,qA(t.localStore,n,!0);case 3:return a=e.sent,o=new VP(n,a._i),s=o.Wu(a.documents),u=DS.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),dR(t,r,c.Xu),l=new BP(n,r,o),e.abrupt("return",(t.ia.set(n,l),t.ra.has(r)?t.ra.get(r).push(n):t.ra.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),HP.apply(this,arguments)}function QP(e,t){return YP.apply(this,arguments)}function YP(){return YP=yr(pr().mark((function e(t,n){var r,i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Tx(t),i=r.ia.get(n),!((a=r.ra.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ra.set(i.targetId,a.filter((function(e){return!PE(e,n)}))),void r.ia.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,VA(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),FN(r.remoteStore,i.targetId),hR(r,i.targetId)})).catch(iA);case 9:e.next=14;break;case 11:return hR(r,i.targetId),e.next=14,VA(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),YP.apply(this,arguments)}function JP(e,t,n){return XP.apply(this,arguments)}function XP(){return XP=yr(pr().mark((function e(t,n,r){var i,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jR(t),e.prev=1,e.next=4,function(e,t){var n,r=Tx(e),i=Kx.now(),a=t.reduce((function(e,t){return e.add(t.key)}),AS());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.fi.Ks(e,a).next((function(a){n=a;var o,s=[],u=mr(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=oS(c,n.get(c.key));null!=l&&s.push(new lS(c.key,l,FI(l.value.mapValue),tS.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return r.Bs.addMutationBatch(e,i,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ha[e.currentUser.toKey()];r||(r=new QI(qx)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,yR(i,a.changes);case 9:return e.next=11,$N(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=_P(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),XP.apply(this,arguments)}function ZP(e,t){return $P.apply(this,arguments)}function $P(){return $P=yr(pr().mark((function e(t,n){var r,i;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tx(t),e.prev=1,e.next=4,MA(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.aa.get(t);n&&(Sx(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?Sx(n.na):e.removedDocuments.size>0&&(Sx(n.na),n.na=!1))})),e.next=8,yR(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,iA(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),$P.apply(this,arguments)}function eR(e,t,n){var r=Tx(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ia.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Tx(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=mr(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&RP(n)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function tR(e,t,n){return nR.apply(this,arguments)}function nR(){return nR=yr(pr().mark((function e(t,n,r){var i,a,o,s,u,c;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Tx(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.aa.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new QI(pI.comparator)).insert(o,jI.newNoDocument(o,Gx.min())),u=AS().add(o),c=new RS(Gx.min(),new Map,new XI(qx),s,u),e.next=9,ZP(i,c);case 9:i.ua=i.ua.remove(o),i.aa.delete(n),vR(i),e.next=16;break;case 14:return e.next=16,VA(i.localStore,n,!1).then((function(){return hR(i,n,r)})).catch(iA);case 16:case"end":return e.stop()}}),e)}))),nR.apply(this,arguments)}function rR(e,t){return iR.apply(this,arguments)}function iR(){return iR=yr(pr().mark((function e(t,n){var r,i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tx(t),i=n.batch.batchId,e.prev=1,e.next=4,OA(r.localStore,n);case 4:return a=e.sent,lR(r,i,null),cR(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,yR(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,iA(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),iR.apply(this,arguments)}function aR(e,t,n){return oR.apply(this,arguments)}function oR(){return oR=yr(pr().mark((function e(t,n,r){var i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Tx(t),e.prev=1,e.next=4,function(e,t){var n=Tx(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return Sx(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,lR(i,n,r),cR(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,yR(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,iA(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),oR.apply(this,arguments)}function sR(e,t){return uR.apply(this,arguments)}function uR(){return uR=yr(pr().mark((function e(t,n){var r,i,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qN((r=Tx(t)).remoteStore)||wx("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Tx(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.la.get(i)||[]).push(n),r.la.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=_P(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),uR.apply(this,arguments)}function cR(e,t){(e.la.get(t)||[]).forEach((function(e){e.resolve()})),e.la.delete(t)}function lR(e,t,n){var r=Tx(e),i=r.ha[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function hR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=mr(e.ra.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ia.delete(a),n&&e.sa.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach((function(t){e.ca.containsKey(t)||fR(e,t)}))}function fR(e,t){e.oa.delete(t.path.canonicalString());var n=e.ua.get(t);null!==n&&(FN(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),vR(e))}function dR(e,t,n){var r,i=mr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof jP?(e.ca.addReference(a.key,t),pR(e,a)):a instanceof UP?(wx("SyncEngine","Document no longer in limbo: "+a.key),e.ca.removeReference(a.key,t),e.ca.containsKey(a.key)||fR(e,a.key)):Ex()}}catch(o){i.e(o)}finally{i.f()}}function pR(e,t){var n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(wx("SyncEngine","New document in limbo: "+n),e.oa.add(r),vR(e))}function vR(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){var t=e.oa.values().next().value;e.oa.delete(t);var n=new pI(Xx.fromString(t)),r=e.fa.next();e.aa.set(r,new qP(n)),e.ua=e.ua.insert(n,r),MN(e.remoteStore,new uC(AE(IE(n.path)),r,2,Ux.A))}}function yR(e,t,n){return mR.apply(this,arguments)}function mR(){return mR=yr(pr().mark((function e(t,n,r){var i,a,o,s;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Tx(t),a=[],o=[],s=[],e.t0=i.ia.isEmpty(),e.t0){e.next=9;break}return i.ia.forEach((function(e,t){s.push(i._a(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=CA.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.sa.zo(a),e.next=9,function(){var e=yr(pr().mark((function e(t,n){var r,i,a,o,s,u,c,l;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tx(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return HT.forEach(n,(function(t){return HT.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return HT.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),ZT(e.t0)){e.next=10;break}throw e.t0;case 10:wx("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=mr(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.ui.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.ui=r.ui.insert(s,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),mR.apply(this,arguments)}function gR(e,t){return kR.apply(this,arguments)}function kR(){return kR=yr(pr().mark((function e(t,n){var r,i;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Tx(t)).currentUser.isEqual(n)){e.next=11;break}return wx("SyncEngine","User change. New user:",n.toKey()),e.next=5,RA(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.la.forEach((function(e){e.forEach((function(e){e.reject(new Ax(Cx.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.la.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,yR(r,i.di);case 11:case"end":return e.stop()}}),e)}))),kR.apply(this,arguments)}function _R(e,t){var n=Tx(e),r=n.aa.get(t);if(r&&r.na)return AS().add(r.key);var i=AS(),a=n.ra.get(t);if(!a)return i;var o,s=mr(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.ia.get(u);i=i.unionWith(c.view.ju)}}catch(l){s.e(l)}finally{s.f()}return i}function wR(e,t){return bR.apply(this,arguments)}function bR(){return bR=yr(pr().mark((function e(t,n){var r,i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tx(t),e.next=3,qA(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ta(i),e.abrupt("return",(r.isPrimaryClient&&dR(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),bR.apply(this,arguments)}function xR(e,t){return IR.apply(this,arguments)}function IR(){return IR=yr(pr().mark((function e(t,n){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tx(t),e.abrupt("return",WA(r.localStore,n).then((function(e){return yR(r,e)})));case 2:case"end":return e.stop()}}),e)}))),IR.apply(this,arguments)}function ER(e,t,n,r){return SR.apply(this,arguments)}function SR(){return SR=yr(pr().mark((function e(t,n,r,i){var a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Tx(t),e.next=3,function(e,t){var n=Tx(e),r=Tx(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.fi.Ks(e,t):HT.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,$N(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(lR(a,n,i||null),cR(a,n),function(e,t){Tx(Tx(e).Bs)._n(t)}(a.localStore,n)):Ex();case 11:return e.next=13,yR(a,o);case 13:e.next=16;break;case 15:wx("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),SR.apply(this,arguments)}function TR(e,t){return CR.apply(this,arguments)}function CR(){return CR=yr(pr().mark((function e(t,n){var r,i,a,o,s,u,c,l;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(FR(r=Tx(t)),jR(r),!0!==n||!0===r.da){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,AR(r,i.toArray());case 5:return a=e.sent,r.da=!0,e.next=9,vP(r.remoteStore,!0);case 9:o=mr(a);try{for(o.s();!(s=o.n()).done;)u=s.value,MN(r.remoteStore,u)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.da){e.next=25;break}return c=[],l=Promise.resolve(),r.ra.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return hR(r,t),VA(r.localStore,t,!0)})),FN(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,AR(r,c);case 21:return function(e){var t=Tx(e);t.aa.forEach((function(e,n){FN(t.remoteStore,n)})),t.ca.Si(),t.aa=new Map,t.ua=new QI(pI.comparator)}(r),r.da=!1,e.next=25,vP(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),CR.apply(this,arguments)}function AR(e,t,n){return NR.apply(this,arguments)}function NR(){return NR=yr(pr().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,d,p,v,y,m;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Tx(t),a=[],o=[],s=mr(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(h=i.ra.get(c))||0===h.length){e.next=34;break}return e.next=11,UA(i.localStore,AE(h[0]));case 11:l=e.sent,f=mr(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return p=d.value,v=i.ia.get(p),e.next=20,wR(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,zA(i.localStore,c);case 36:return m=e.sent,e.next=39,UA(i.localStore,m);case 39:return l=e.sent,e.next=42,GP(i,PR(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.sa.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),NR.apply(this,arguments)}function PR(e){return xE(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function RR(e){var t=Tx(e);return Tx(Tx(t.localStore).persistence).Fs()}function DR(e,t,n,r){return OR.apply(this,arguments)}function OR(){return OR=yr(pr().mark((function e(t,n,r,i){var a,o,s,u;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Tx(t)).da){e.next=3;break}return e.abrupt("return",void wx("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ra.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,WA(a.localStore,LE(o[0]));case 10:return s=e.sent,u=RS.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,yR(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,VA(a.localStore,n,!0);case 17:return hR(a,n,i),e.abrupt("break",20);case 19:Ex();case 20:case"end":return e.stop()}}),e)}))),OR.apply(this,arguments)}function LR(e,t,n){return MR.apply(this,arguments)}function MR(){return MR=yr(pr().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=FR(t)).da){e.next=45;break}a=mr(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.ra.has(s)){e.next=10;break}return wx("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,zA(i.localStore,s);case 12:return u=e.sent,e.next=15,UA(i.localStore,u);case 15:return c=e.sent,e.next=18,GP(i,PR(u),c.targetId,!1);case 18:MN(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=mr(r),e.prev=30,f=pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ra.has(t),!e.t0){e.next=5;break}return e.next=5,VA(i.localStore,t,!1).then((function(){FN(i.remoteStore,t),hR(i,t)})).catch(iA);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),MR.apply(this,arguments)}function FR(e){var t=Tx(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ZP.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_R.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=tR.bind(null,t),t.sa.zo=NP.bind(null,t.eventManager),t.sa.wa=PP.bind(null,t.eventManager),t}function jR(e){var t=Tx(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=rR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=aR.bind(null,t),t}function UR(e,t,n){var r=Tx(e);(function(){var e=yr(pr().mark((function e(t,n,r){var i,a,o,s,u;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Tx(e),r=HS(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(FP(i)),a=new MP(i,t.localStore,n.M),e.next=15,n.ma();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.ma();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,yR(t,u.Lu,void 0);case 31:return e.next=33,function(e,t){var n=Tx(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(xx("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var VR=function(){function e(){N(this,e),this.synchronizeTabs=!1}return R(e,[{key:"initialize",value:function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=IN(t.databaseInfo.databaseId),this.sharedClientState=this.ga(t),this.persistence=this.ya(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.pa(t),this.localStore=this.Ia(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pa",value:function(e){return null}},{key:"Ia",value:function(e){return PA(this.persistence,new AA,e.initialUser,this.M)}},{key:"ya",value:function(e){return new iN(oN.Yi,this.M)}},{key:"ga",value:function(e){return new yN}},{key:"terminate",value:function(){var e=yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),BR=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return N(this,n),(a=t.call(this)).Ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return R(n,[{key:"initialize",value:function(){var e=yr(pr().mark((function e(t){var r=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zh(L(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ta.initialize(this,t);case 4:return e.next=6,jR(this.Ta.syncEngine);case 6:return e.next=8,$N(this.Ta.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ia",value:function(e){return PA(this.persistence,new AA,e.initialUser,this.M)}},{key:"pa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new uA(t,e.asyncQueue)}},{key:"ya",value:function(e){var t=SA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?KC.withCacheSize(this.cacheSizeBytes):KC.DEFAULT;return new xA(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,bN(),xN(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"ga",value:function(e){return new yN}}]),n}(VR),qR=function(e){O(n,e);var t=V(n);function n(e,r){var i;return N(this,n),(i=t.call(this,e,r,!1)).Ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return R(n,[{key:"initialize",value:function(){var e=yr(pr().mark((function e(t){var r,i=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zh(L(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ta.syncEngine,e.t0=this.sharedClientState instanceof vN,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:ER.bind(null,r),Br:DR.bind(null,r),Lr:LR.bind(null,r),Fs:RR.bind(null,r),Fr:xR.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,TR(i.Ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){var t=bN();if(!vN.vt(t))throw new Ax(Cx.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=SA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vN(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(BR),zR=function(){function e(){N(this,e)}return R(e,[{key:"initialize",value:function(){var e=yr(pr().mark((function e(t,n){var r=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return eR(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=gR.bind(null,this.syncEngine),e.next=12,vP(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new EP}},{key:"createDatastore",value:function(e){var t,n=IN(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new wN(t));return function(e,t,n,r){return new AN(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return eR(o.syncEngine,e,0)},a=gN.vt()?new gN:new mN,new PN(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new zP(e,t,n,r,i,a);return o&&(s.da=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Tx(t),wx("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,ON(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function WR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return yr(pr().mark((function r(){var i;return pr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var KR=function(){function e(t){N(this,e),this.observer=t,this.muted=!1}return R(e,[{key:"next",value:function(e){this.observer.next&&this.Ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Aa",value:function(){this.muted=!0}},{key:"Ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),GR=function(){function e(t,n){var r=this;N(this,e),this.Ra=t,this.M=n,this.metadata=new Nx,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then((function(e){e&&e.Mu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return R(e,[{key:"close",value:function(){return this.Ra.cancel()}},{key:"getMetadata",value:function(){var e=yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ma",value:function(){var e=yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Pa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){var e=yr(pr().mark((function e(){var t,n,r,i;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Va();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ba.decode(t),r=Number(n),isNaN(r)&&this.va("length string (".concat(n,") is not valid number")),e.next=9,this.Sa(r);case 9:return i=e.sent,e.abrupt("return",new OP(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Va",value:function(){var e=yr(pr().mark((function e(){var t,n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Da()<0)){e.next=7;break}return e.next=3,this.Ca();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Da())<0&&this.va("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Sa",value:function(){var e=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ca();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.va("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ba.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"va",value:function(e){throw this.Ra.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ca",value:function(){var e=yr(pr().mark((function e(){var t,n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),HR=function(){function e(t){N(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return R(e,[{key:"lookup",value:function(){var e=yr(pr().mark((function e(t){var n,r=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Ax(Cx.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=yr(pr().mark((function e(t,n){var r,i,a,o,s,u;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tx(t),i=eT(r.M)+"/documents",a={documents:n.map((function(e){return JS(r.M,e)}))},e.next=5,r._o("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=iT(r.M,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());Sx(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new yS(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=yr(pr().mark((function e(){var t,n=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=pI.fromPath(t);n.mutations.push(new mS(r,n.precondition(r)))})),e.next=7,function(){var e=yr(pr().mark((function e(t,n){var r,i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tx(t),i=eT(r.M)+"/documents",a={writes:n.map((function(e){return aT(r.M,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ex();t=Gx.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Ax(Cx.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?tS.updateTime(t):tS.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Gx.min()))throw new Ax(Cx.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tS.updateTime(t)}return tS.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),QR=function(){function e(t,n,r,i,a){N(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new EN(this.asyncQueue,"transaction_retry")}return R(e,[{key:"run",value:function(){this.xa-=1,this.Na()}},{key:"Na",value:function(){var e=this;this.No.Ro(yr(pr().mark((function t(){var n,r;return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new HR(e.datastore),(r=e.ka(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ma(t)}))}))})).catch((function(t){e.Ma(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"ka",value:function(e){try{var t=this.updateFunction(e);return!hI(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ma",value:function(e){var t=this;this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Na(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Oa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!kS(t)}return!1}}]),e}(),YR=function(){function e(t,n,r,i){var a=this;N(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=mx.UNAUTHENTICATED,this.clientId=Bx.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wx("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return wx("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return R(e,[{key:"getConfiguration",value:function(){var e=yr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Ax(Cx.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Nx;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(yr(pr().mark((function n(){var r;return pr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=_P(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function JR(e,t){return XR.apply(this,arguments)}function XR(){return XR=yr(pr().mark((function e(t,n){var r,i;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),wx("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,RA(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),XR.apply(this,arguments)}function ZR(e,t){return $R.apply(this,arguments)}function $R(){return $R=yr(pr().mark((function e(t,n){var r,i;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,eD(t);case 3:return r=e.sent,wx("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return dP(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return dP(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),$R.apply(this,arguments)}function eD(e){return tD.apply(this,arguments)}function tD(){return tD=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return wx("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,JR(t,new VR);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),tD.apply(this,arguments)}function nD(e){return rD.apply(this,arguments)}function rD(){return rD=yr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return wx("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,ZR(t,new zR);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),rD.apply(this,arguments)}function iD(e){return eD(e).then((function(e){return e.persistence}))}function aD(e){return eD(e).then((function(e){return e.localStore}))}function oD(e){return nD(e).then((function(e){return e.remoteStore}))}function sD(e){return nD(e).then((function(e){return e.syncEngine}))}function uD(e){return cD.apply(this,arguments)}function cD(){return cD=yr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nD(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=WP.bind(null,n.syncEngine),r.onUnlisten=QP.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),cD.apply(this,arguments)}function lD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Nx;return e.asyncQueue.enqueueAndForget(yr(pr().mark((function i(){return pr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new KR({next:function(a){t.enqueueAndForget((function(){return CP(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new Ax(Cx.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new Ax(Cx.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new DP(IE(n.path),a,{includeMetadataChanges:!0,ku:!0});return SP(e,o)},i.next=3,uD(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function hD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Nx;return e.asyncQueue.enqueueAndForget(yr(pr().mark((function i(){return pr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new KR({next:function(n){t.enqueueAndForget((function(){return CP(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Ax(Cx.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new DP(n,a,{includeMetadataChanges:!0,ku:!0});return SP(e,o)},i.next=3,uD(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var fD=new Map;function dD(e,t,n){if(!n)throw new Ax(Cx.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function pD(e,t,n,r){if(!0===t&&!0===r)throw new Ax(Cx.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function vD(e){if(!pI.isDocumentKey(e))throw new Ax(Cx.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function yD(e){if(pI.isDocumentKey(e))throw new Ax(Cx.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function mD(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Ex()}function gD(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ax(Cx.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=mD(e);throw new Ax(Cx.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function kD(e,t){if(t<=0)throw new Ax(Cx.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var _D=function(){function e(t){var n;if(N(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Ax(Cx.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ax(Cx.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,pD("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return R(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),wD=function(){function e(t,n,r){N(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _D({}),this._settingsFrozen=!1,t instanceof lI?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ax(Cx.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lI(e.options.projectId)}(t))}return R(e,[{key:"app",get:function(){if(!this._app)throw new Ax(Cx.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Ax(Cx.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _D(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Rx;switch(e.type){case"gapi":var t=e.client;return Sx(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Mx(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Ax(Cx.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=fD.get(e);t&&(wx("ComponentProvider","Removing Datastore"),fD.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function bD(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=gD(e,wD))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&xx("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=mx.MOCK_USER;else{o=Rr(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new Ax(Cx.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new mx(u)}e._authCredentials=new Dx(new Px(o,s))}}var xD=function(){function e(t,n,r){N(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return R(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new ED(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),ID=function(){function e(t,n,r){N(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return R(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),ED=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return N(this,n),(a=t.call(this,e,r,IE(i)))._path=i,a.type="collection",a}return R(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new xD(this.firestore,null,new pI(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(ID);function SD(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ci(e),dD("collection","path",t),e instanceof wD){var a=Xx.fromString.apply(Xx,[t].concat(r));return yD(a),new ED(e,null,a)}if(!(e instanceof xD||e instanceof ED))throw new Ax(Cx.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Xx.fromString.apply(Xx,[t].concat(r)));return yD(o),new ED(e.firestore,null,o)}function TD(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ci(e),1===arguments.length&&(t=Bx.R()),dD("doc","path",t),e instanceof wD){var a=Xx.fromString.apply(Xx,[t].concat(r));return vD(a),new xD(e,null,new pI(a))}if(!(e instanceof xD||e instanceof ED))throw new Ax(Cx.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Xx.fromString.apply(Xx,[t].concat(r)));return vD(o),new xD(e.firestore,e instanceof ED?e.converter:null,new pI(o))}function CD(e,t){return e=ci(e),t=ci(t),(e instanceof xD||e instanceof ED)&&(t instanceof xD||t instanceof ED)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function AD(e,t){return e=ci(e),t=ci(t),e instanceof ID&&t instanceof ID&&e.firestore===t.firestore&&PE(e._query,t._query)&&e.converter===t.converter}var ND=function(){function e(){var t=this;N(this,e),this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new EN(this,"async_queue_retry"),this.Qa=function(){var e=xN();e&&wx("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=xN();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Qa)}return R(e,[{key:"isShuttingDown",get:function(){return this.Ba}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ja(),this.Wa(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;var t=xN();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.ja(),this.Ba)return new Promise((function(){}));var n=new Nx;return this.Wa((function(){return t.Ba&&t.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.$a.push(e),t.za()}))}},{key:"za",value:function(){var e=yr(pr().mark((function e(){var t=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.$a.length){e.next=14;break}return e.prev=1,e.next=4,this.$a[0]();case 4:this.$a.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),ZT(e.t0)){e.next=12;break}throw e.t0;case 12:wx("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.$a.length>0&&this.No.Ro((function(){return t.za()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t=this,n=this.Fa.then((function(){return t.qa=!0,e().catch((function(e){t.Ua=e,t.qa=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw bx("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.qa=!1,e}))}));return this.Fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ja(),this.Ga.indexOf(e)>-1&&(t=0);var i=kP.createAndSchedule(this,e,t,n,(function(e){return r.Ha(e)}));return this.La.push(i),i}},{key:"ja",value:function(){this.Ua&&Ex()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ja",value:function(){var e=yr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Fa,e.next=3,t;case 3:if(t!==this.Fa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ya",value:function(e){var t,n=mr(this.La);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Xa",value:function(e){var t=this;return this.Ja().then((function(){t.La.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=mr(t.La);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ja()}))}},{key:"Za",value:function(e){this.Ga.push(e)}},{key:"Ha",value:function(e){var t=this.La.indexOf(e);this.La.splice(t,1)}}]),e}();function PD(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=mr(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var RD=function(){function e(){N(this,e),this._progressObserver={},this._taskCompletionResolver=new Nx,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return R(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),DD=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return N(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new ND,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return R(n,[{key:"_terminate",value:function(){return this._firestoreClient||LD(this),this._firestoreClient.terminate()}}]),n}(wD);function OD(e){return e._firestoreClient||LD(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function LD(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new cI(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new YR(e._authCredentials,e._appCheckCredentials,e._queue,r)}function MD(e,t,n){var r=new Nx;return e.asyncQueue.enqueue(yr(pr().mark((function i(){return pr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,JR(e,n);case 3:return i.next=5,ZR(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Cx.FAILED_PRECONDITION||e.code===Cx.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function FD(e){return function(e){return e.asyncQueue.enqueue(yr(pr().mark((function t(){var n,r;return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,iD(e);case 2:return n=t.sent,t.next=5,oD(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Tx(e);return t.wu.delete(0),RN(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(OD(e=gD(e,DD)))}function jD(e){return function(e){return e.asyncQueue.enqueue(yr(pr().mark((function t(){var n,r;return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,iD(e);case 2:return n=t.sent,t.next=5,oD(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Tx(t)).wu.add(0),e.next=4,ON(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(OD(e=gD(e,DD)))}function UD(e,t){var n=OD(e=gD(e,DD)),r=new RD;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new GR(e,t)}(function(e,t){if(e instanceof Uint8Array)return WR(e,t);if(e instanceof ArrayBuffer)return WR(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,IN(t));e.asyncQueue.enqueueAndForget(yr(pr().mark((function t(){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=UR,t.next=3,sD(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function VD(e,t){return function(e,t){return e.asyncQueue.enqueue(yr(pr().mark((function n(){return pr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Tx(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,aD(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(OD(e=gD(e,DD)),t).then((function(t){return t?new ID(e,null,t.query):null}))}function BD(e){if(e._initialized||e._terminated)throw new Ax(Cx.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var qD=function(){function e(){N(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Ax(Cx.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $x(n)}return R(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var zD=function(){function e(t){N(this,e),this._byteString=t}return R(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(tI.fromBase64String(t))}catch(t){throw new Ax(Cx.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(tI.fromUint8Array(t))}}]),e}(),WD=R((function e(t){N(this,e),this._methodName=t})),KD=function(){function e(t,n){if(N(this,e),!isFinite(t)||t<-90||t>90)throw new Ax(Cx.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ax(Cx.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return R(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return qx(this._lat,e._lat)||qx(this._long,e._long)}}]),e}(),GD=/^__.*__$/,HD=function(){function e(t,n,r){N(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return R(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new lS(e,this.data,this.fieldMask,t,this.fieldTransforms):new cS(e,this.data,t,this.fieldTransforms)}}]),e}(),QD=function(){function e(t,n,r){N(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return R(e,[{key:"toMutation",value:function(e,t){return new lS(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function YD(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ex()}}var JD=function(){function e(t,n,r,i,a,o){N(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return R(e,[{key:"path",get:function(){return this.settings.path}},{key:"ec",get:function(){return this.settings.ec}},{key:"nc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}},{key:"oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}},{key:"uc",value:function(e){return this.nc({path:void 0,ic:!0})}},{key:"ac",value:function(e){return yO(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"tc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.rc(this.path.get(e))}},{key:"rc",value:function(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(YD(this.ec)&&GD.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}]),e}(),XD=function(){function e(t,n,r){N(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||IN(t)}return R(e,[{key:"lc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new JD({ec:e,methodName:t,hc:n,path:$x.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function ZD(e){var t=e._freezeSettings(),n=IN(e._databaseId);return new XD(e._databaseId,!!t.ignoreUndefinedProperties,n)}function $D(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.lc(a.merge||a.mergeFields?2:0,t,n,i);fO("Data must be an object, but it was:",o,r);var s,u,c=lO(r,o);if(a.merge)s=new eI(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=mr(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=dO(t,d,n);if(!o.contains(p))throw new Ax(Cx.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));mO(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}s=new eI(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new HD(new MI(c),s,u)}var eO=function(e){O(n,e);var t=V(n);function n(){return N(this,n),t.apply(this,arguments)}return R(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ec)throw 1===e.ec?e.ac("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ac("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(WD);function tO(e,t,n){return new JD({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var nO=function(e){O(n,e);var t=V(n);function n(){return N(this,n),t.apply(this,arguments)}return R(n,[{key:"_toFieldTransform",value:function(e){return new $E(e.path,new KE)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(WD),rO=function(e){O(n,e);var t=V(n);function n(e,r){var i;return N(this,n),(i=t.call(this,e)).fc=r,i}return R(n,[{key:"_toFieldTransform",value:function(e){var t=tO(this,e,!0),n=this.fc.map((function(e){return cO(e,t)})),r=new GE(n);return new $E(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(WD),iO=function(e){O(n,e);var t=V(n);function n(e,r){var i;return N(this,n),(i=t.call(this,e)).fc=r,i}return R(n,[{key:"_toFieldTransform",value:function(e){var t=tO(this,e,!0),n=this.fc.map((function(e){return cO(e,t)})),r=new QE(n);return new $E(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(WD),aO=function(e){O(n,e);var t=V(n);function n(e,r){var i;return N(this,n),(i=t.call(this,e)).dc=r,i}return R(n,[{key:"_toFieldTransform",value:function(e){var t=new JE(e.M,VE(e.M,this.dc));return new $E(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(WD);function oO(e,t,n,r){var i=e.lc(1,t,n);fO("Data must be an object, but it was:",i,r);var a=[],o=MI.empty();Qx(r,(function(e,r){var s=vO(t,e,n);r=ci(r);var u=i.oc(s);if(r instanceof eO)a.push(s);else{var c=cO(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new eI(a);return new QD(o,s,i.fieldTransforms)}function sO(e,t,n,r,i,a){var o=e.lc(1,t,n),s=[dO(t,r,n)],u=[i];if(a.length%2!=0)throw new Ax(Cx.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(dO(t,a[c])),u.push(a[c+1]);for(var l=[],h=MI.empty(),f=s.length-1;f>=0;--f)if(!mO(l,s[f])){var d=s[f],p=u[f];p=ci(p);var v=o.oc(d);if(p instanceof eO)l.push(d);else{var y=cO(p,v);null!=y&&(l.push(d),h.set(d,y))}}var m=new eI(l);return new QD(h,m,o.fieldTransforms)}function uO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return cO(n,e.lc(r?4:3,t))}function cO(e,t){if(hO(e=ci(e)))return fO("Unsupported field value:",t,e),lO(e,t);if(e instanceof WD)return function(e,t){if(!YD(t.ec))throw t.ac("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ac("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=mr(e);try{for(a.s();!(n=a.n()).done;){var o=cO(n.value,t.uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ci(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return VE(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Kx.fromDate(e);return{timestampValue:WS(t.M,n)}}if(e instanceof Kx){var r=new Kx(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:WS(t.M,r)}}if(e instanceof KD)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof zD)return{bytesValue:KS(t.M,e._byteString)};if(e instanceof xD){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ac("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:QS(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac("Unsupported field value: ".concat(mD(e)))}(e,t)}function lO(e,t){var n={};return Yx(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qx(e,(function(e,r){var i=cO(r,t.sc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function hO(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Kx||e instanceof KD||e instanceof zD||e instanceof xD||e instanceof WD)}function fO(e,t,n){if(!hO(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=mD(n);throw"an object"===r?t.ac(e+" a custom object"):t.ac(e+" "+r)}}function dO(e,t,n){if((t=ci(t))instanceof qD)return t._internalPath;if("string"==typeof t)return vO(e,t);throw yO("Field path arguments must be of type string or ",e,!1,void 0,n)}var pO=new RegExp("[~\\*/\\[\\]]");function vO(e,t,n){if(t.search(pO)>=0)throw yO("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return gr(qD,A(t.split(".")))._internalPath}catch(r){throw yO("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function yO(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new Ax(Cx.INVALID_ARGUMENT,s+e+u)}function mO(e,t){return e.some((function(e){return e.isEqual(t)}))}var gO=function(){function e(t,n,r,i,a){N(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return R(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new xD(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new kO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(_O("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),kO=function(e){O(n,e);var t=V(n);function n(){return N(this,n),t.apply(this,arguments)}return R(n,[{key:"data",value:function(){return zh(L(n.prototype),"data",this).call(this)}}]),n}(gO);function _O(e,t){return"string"==typeof t?vO(e,t):t instanceof qD?t._internalPath:t._delegate._internalPath}var wO=function(){function e(t,n){N(this,e),this.hasPendingWrites=t,this.fromCache=n}return R(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),bO=function(e){O(n,e);var t=V(n);function n(e,r,i,a,o,s){var u;return N(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return R(n,[{key:"exists",value:function(){return zh(L(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new xO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(_O("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(gO),xO=function(e){O(n,e);var t=V(n);function n(){return N(this,n),t.apply(this,arguments)}return R(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return zh(L(n.prototype),"data",this).call(this,e)}}]),n}(bO),IO=function(){function e(t,n,r,i){N(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new wO(i.hasPendingWrites,i.fromCache),this.query=r}return R(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new xO(n._firestore,n._userDataWriter,r.key,r,new wO(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ax(Cx.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new xO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new wO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new xO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new wO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:EO(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function EO(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ex()}}function SO(e,t){return e instanceof bO&&t instanceof bO?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof IO&&t instanceof IO&&e._firestore===t._firestore&&AD(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function TO(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ax(Cx.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var CO=R((function e(){N(this,e)}));function AO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var NO=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return N(this,n),(a=t.call(this))._c=e,a.wc=r,a.mc=i,a.type="where",a}return R(n,[{key:"_apply",value:function(e){var t=ZD(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Ax(Cx.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){BO(o,a);var u,c=[],l=mr(o);try{for(l.s();!(u=l.n()).done;){var h=u.value;c.push(VO(r,e,h))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=VO(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||BO(o,a),s=uO(n,"where",o,"in"===a||"not-in"===a);var f=uE.create(i,a,s);return function(e,t){if(t.S()){var n=SE(e);if(null!==n&&!n.isEqual(t.field))throw new Ax(Cx.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=EE(e);null!==r&&qO(e,t.field,r)}var i=function(e,t){var n,r=mr(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Ax(Cx.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Ax(Cx.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new ID(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new bE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(CO);var PO=function(e){O(n,e);var t=V(n);function n(e,r){var i;return N(this,n),(i=t.call(this))._c=e,i.gc=r,i.type="orderBy",i}return R(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Ax(Cx.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ax(Cx.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new gE(t,n);return function(e,t){if(null===EE(e)){var n=SE(e);null!==n&&qO(e,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new ID(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new bE(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(CO);var RO=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return N(this,n),(a=t.call(this)).type=e,a.yc=r,a.Ic=i,a}return R(n,[{key:"_apply",value:function(e){return new ID(e.firestore,e.converter,NE(e._query,this.yc,this.Ic))}}]),n}(CO);var DO=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return N(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return R(n,[{key:"_apply",value:function(e){var t=UO(e,this.type,this.Tc,this.Ec);return new ID(e.firestore,e.converter,function(e,t){return new bE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(CO);function OO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new DO("startAt",t,!0)}function LO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new DO("startAfter",t,!1)}var MO=function(e){O(n,e);var t=V(n);function n(e,r,i){var a;return N(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return R(n,[{key:"_apply",value:function(e){var t=UO(e,this.type,this.Tc,this.Ec);return new ID(e.firestore,e.converter,function(e,t){return new bE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(CO);function FO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new MO("endBefore",t,!1)}function jO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new MO("endAt",t,!0)}function UO(e,t,n,r){if(n[0]=ci(n[0]),n[0]instanceof gO)return function(e,t,n,r,i){if(!r)throw new Ax(Cx.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=mr(CE(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(II(t,r.key));else{var c=r.data.field(u.field);if(oI(c))throw new Ax(Cx.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Ax(Cx.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){s.e(h)}finally{s.f()}return new mE(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=ZD(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Ax(Cx.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new Ax(Cx.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!TE(e)&&-1!==c.indexOf("/"))throw new Ax(Cx.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Xx.fromString(c));if(!pI.isDocumentKey(l))throw new Ax(Cx.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new pI(l);s.push(II(t,h))}else{var f=uO(n,r,c);s.push(f)}}return new mE(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function VO(e,t,n){if("string"==typeof(n=ci(n))){if(""===n)throw new Ax(Cx.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TE(t)&&-1!==n.indexOf("/"))throw new Ax(Cx.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Xx.fromString(n));if(!pI.isDocumentKey(r))throw new Ax(Cx.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return II(e,new pI(r))}if(n instanceof xD)return II(e,n._key);throw new Ax(Cx.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(mD(n),"."))}function BO(e,t){if(!Array.isArray(e)||0===e.length)throw new Ax(Cx.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Ax(Cx.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function qO(e,t,n){if(!n.isEqual(t))throw new Ax(Cx.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var zO={maxAttempts:5},WO=function(){function e(){N(this,e)}return R(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(mI(e)){case 0:return null;case 1:return e.booleanValue;case 2:return iI(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(aI(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ex()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Qx(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new KD(iI(e.latitude),iI(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=sI(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(uI(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=rI(e);return new Kx(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Xx.fromString(e);Sx(gT(n));var r=new lI(n.get(1),n.get(3)),i=new pI(n.popFirst(5));return r.isEqual(t)||bx("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function KO(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var GO=function(e){O(n,e);var t=V(n);function n(e){var r;return N(this,n),(r=t.call(this)).firestore=e,r}return R(n,[{key:"convertBytes",value:function(e){return new zD(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new xD(this.firestore,null,t)}}]),n}(WO),HO=function(){function e(t,n){N(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ZD(t)}return R(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=QO(e,this._firestore),i=KO(r.converter,t,n),a=$D(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,tS.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=QO(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=ci(t))||t instanceof qD?sO(this._dataReader,"WriteBatch.update",i._key,t,n,o):oO(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,tS.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=QO(e,this._firestore);return this._mutations=this._mutations.concat(new yS(t._key,tS.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Ax(Cx.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function QO(e,t){if((e=ci(e)).firestore!==t)throw new Ax(Cx.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var YO=function(e){O(n,e);var t=V(n);function n(e){var r;return N(this,n),(r=t.call(this)).firestore=e,r}return R(n,[{key:"convertBytes",value:function(e){return new zD(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new xD(this.firestore,null,t)}}]),n}(WO);function JO(e){e=gD(e,xD);var t=gD(e.firestore,DD),n=OD(t),r=new YO(t);return function(e,t){var n=new Nx;return e.asyncQueue.enqueueAndForget(yr(pr().mark((function r(){return pr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=yr(pr().mark((function e(t,n,r){var i,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Tx(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.fi.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Ax(Cx.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=_P(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,aD(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new bO(t,r,e._key,n,new wO(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function XO(e){e=gD(e,ID);var t=gD(e.firestore,DD),n=OD(t),r=new YO(t);return function(e,t){var n=new Nx;return e.asyncQueue.enqueueAndForget(yr(pr().mark((function r(){return pr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=yr(pr().mark((function e(t,n,r){var i,a,o,s,u;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qA(t,n,!0);case 3:i=e.sent,a=new VP(n,i._i),o=a.Wu(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=_P(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,aD(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new IO(t,r,e,n)}))}function ZO(e,t,n){e=gD(e,xD);var r=gD(e.firestore,DD),i=KO(e.converter,t,n);return nL(r,[$D(ZD(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,tS.none())])}function $O(e,t,n){e=gD(e,xD);for(var r=gD(e.firestore,DD),i=ZD(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return nL(r,[("string"==typeof(t=ci(t))||t instanceof qD?sO(i,"updateDoc",e._key,t,n,o):oO(i,"updateDoc",e._key,t)).toMutation(e._key,tS.exists(!0))])}function eL(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ci(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||PD(n[u])||(s=n[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(PD(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof xD)l=gD(e.firestore,DD),h=IE(e._key.path),c={next:function(t){n[u]&&n[u](rL(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=gD(e,ID);l=gD(p.firestore,DD),h=p._query;var v=new YO(l);c={next:function(e){n[u]&&n[u](new IO(l,v,p,e))},error:n[u+1],complete:n[u+2]},TO(e._query)}return function(e,t,n,r){var i=new KR(r),a=new DP(t,i,n);return e.asyncQueue.enqueueAndForget(yr(pr().mark((function t(){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=SP,t.next=3,uD(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Aa(),e.asyncQueue.enqueueAndForget(yr(pr().mark((function t(){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=CP,t.next=3,uD(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(OD(l),h,f,c)}function tL(e,t){return function(e,t){var n=new KR(t);return e.asyncQueue.enqueueAndForget(yr(pr().mark((function t(){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Tx(e).bu.add(t),t.next()},t.next=3,uD(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Aa(),e.asyncQueue.enqueueAndForget(yr(pr().mark((function t(){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Tx(e).bu.delete(t)},t.next=3,uD(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(OD(e=gD(e,DD)),PD(t)?t:{next:t})}function nL(e,t){return function(e,t){var n=new Nx;return e.asyncQueue.enqueueAndForget(yr(pr().mark((function r(){return pr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=JP,r.next=3,sD(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(OD(e),t)}function rL(e,t,n){var r=n.docs.get(t._key),i=new YO(e);return new bO(e,i,t._key,r,new wO(n.hasPendingWrites,n.fromCache),t.converter)}var iL=function(e){O(n,e);var t=V(n);function n(e,r){var i;return N(this,n),(i=t.call(this,e,r))._firestore=e,i}return R(n,[{key:"get",value:function(e){var t=this,r=QO(e,this._firestore),i=new YO(this._firestore);return zh(L(n.prototype),"get",this).call(this,e).then((function(e){return new bO(t._firestore,i,r._key,e._document,new wO(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){N(this,e),this._firestore=t,this._transaction=n,this._dataReader=ZD(t)}return R(e,[{key:"get",value:function(e){var t=this,n=QO(e,this._firestore),r=new GO(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ex();var i=e[0];if(i.isFoundDocument())return new gO(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new gO(t._firestore,r,n._key,null,n.converter);throw Ex()}))}},{key:"set",value:function(e,t,n){var r=QO(e,this._firestore),i=KO(r.converter,t,n),a=$D(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=QO(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=ci(t))||t instanceof qD?sO(this._dataReader,"Transaction.update",i._key,t,n,o):oO(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=QO(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function aL(e,t,n){e=gD(e,DD);var r=Object.assign(Object.assign({},zO),n);return function(e){if(e.maxAttempts<1)throw new Ax(Cx.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Nx;return e.asyncQueue.enqueueAndForget(yr(pr().mark((function i(){var a;return pr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return nD(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new QR(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(OD(e),(function(n){return t(new iL(e,n))}),r)}function oL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new rO("arrayUnion",t)}function sL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new iO("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){gx=e}(ra),Ji(new li("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new DD(i,new Ox(e.getProvider("auth-internal")),new jx(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),ca(yx,"3.4.9",e),ca(yx,"3.4.9","esm2017")}();function uL(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ax("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function cL(){if("undefined"===typeof Uint8Array)throw new Ax("unimplemented","Uint8Arrays are not available in this environment.")}function lL(){if("undefined"==typeof atob)throw new Ax("unimplemented","Blobs are unavailable in Firestore in this environment.")}var hL=function(){function e(t){N(this,e),this._delegate=t}return R(e,[{key:"toBase64",value:function(){return lL(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return cL(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return lL(),new e(zD.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return cL(),new e(zD.fromUint8Array(t))}}]),e}();function fL(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=mr(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var dL=function(){function e(){N(this,e)}return R(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){BD(e=gD(e,DD));var n=OD(e),r=e._freezeSettings(),i=new zR;return MD(n,i,new BR(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){BD(e=gD(e,DD));var t=OD(e),n=e._freezeSettings(),r=new zR;return MD(t,r,new qR(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Ax(Cx.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Nx;return e._queue.enqueueAndForgetEvenWhileRestricted(yr(pr().mark((function n(){return pr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=yr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(YT.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,YT.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(SA(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),pL=function(){function e(t,n,r){var i=this;N(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof lI||(this._appCompat=t)}return R(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||xx("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};bD(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return FD(this._delegate)}},{key:"disableNetwork",value:function(){return jD(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&pD("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Nx;return e.asyncQueue.enqueueAndForget(yr(pr().mark((function n(){return pr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=sR,n.next=3,sD(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(OD(e=gD(e,DD)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return tL(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Ax("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new CL(this,SD(this._delegate,e))}catch(t){throw _L(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new kL(this,TD(this._delegate,e))}catch(t){throw _L(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new EL(this,function(e,t){if(e=gD(e,wD),dD("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ax(Cx.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new ID(e,null,function(e){return new bE(Xx.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw _L(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return aL(this._delegate,(function(n){return e(new yL(t,n))}))}},{key:"batch",value:function(){var e=this;return OD(this._delegate),new mL(new HO(this._delegate,(function(t){return nL(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return UD(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return VD(this._delegate,e).then((function(e){return e?new EL(t,e):null}))}}]),e}(),vL=function(e){O(n,e);var t=V(n);function n(e){var r;return N(this,n),(r=t.call(this)).firestore=e,r}return R(n,[{key:"convertBytes",value:function(e){return new hL(new zD(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return kL.forKey(t,this.firestore,null)}}]),n}(WO);var yL=function(){function e(t,n){N(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new vL(t)}return R(e,[{key:"get",value:function(e){var t=this,n=AL(e);return this._delegate.get(n).then((function(e){return new xL(t._firestore,new bO(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=AL(e);return n?(uL("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=AL(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=AL(e);return this._delegate.delete(t),this}}]),e}(),mL=function(){function e(t){N(this,e),this._delegate=t}return R(e,[{key:"set",value:function(e,t,n){var r=AL(e);return n?(uL("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=AL(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=AL(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),gL=function(){function e(t,n,r){N(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return R(e,[{key:"fromFirestore",value:function(e,t){var n=new xO(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new IL(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new vL(t),n),i.set(n,a)),a}}]),e}();gL.INSTANCES=new WeakMap;var kL=function(){function e(t,n){N(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new vL(t)}return R(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new CL(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new CL(this.firestore,SD(this._delegate,e))}catch(t){throw _L(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ci(e))instanceof xD&&CD(this._delegate,e)}},{key:"set",value:function(e,t){t=uL("DocumentReference.set",t);try{return t?ZO(this._delegate,e,t):ZO(this._delegate,e)}catch(n){throw _L(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?$O(this._delegate,e):$O.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw _L(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return nL(gD(e.firestore,DD),[new yS(e._key,tS.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=wL(n),a=bL(n,(function(t){return new xL(e.firestore,new bO(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return eL(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?JO(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=gD(e,xD);var t=gD(e.firestore,DD);return lD(OD(t),e._key,{source:"server"}).then((function(n){return rL(t,e,n)}))}(this._delegate):function(e){e=gD(e,xD);var t=gD(e.firestore,DD);return lD(OD(t),e._key).then((function(n){return rL(t,e,n)}))}(this._delegate),t.then((function(e){return new xL(n.firestore,new bO(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(gL.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Ax("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new xD(n._delegate,r,new pI(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new xD(n._delegate,r,t))}}]),e}();function _L(e,t,n){return e.message=e.message.replace(t,n),e}function wL(e){var t,n=mr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!fL(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function bL(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=fL(e[0])?e[0]:fL(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var xL=function(){function e(t,n){N(this,e),this._firestore=t,this._delegate=n}return R(e,[{key:"ref",get:function(){return new kL(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return SO(this._delegate,e._delegate)}}]),e}(),IL=function(e){O(n,e);var t=V(n);function n(){return N(this,n),t.apply(this,arguments)}return R(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Ex()}(void 0!==t),t}}]),n}(xL),EL=function(){function e(t,n){N(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new vL(t)}return R(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,AO(this._delegate,function(e,t,n){var r=t,i=_O("where",e);return new NO(i,r,n)}(t,n,r)))}catch(i){throw _L(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,AO(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=_O("orderBy",e);return new PO(n,t)}(t,n)))}catch(r){throw _L(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,AO(this._delegate,function(e){return kD("limit",e),new RO("limit",e,"F")}(t)))}catch(n){throw _L(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,AO(this._delegate,function(e){return kD("limitToLast",e),new RO("limitToLast",e,"L")}(t)))}catch(n){throw _L(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,AO(this._delegate,OO.apply(void 0,arguments)))}catch(t){throw _L(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,AO(this._delegate,LO.apply(void 0,arguments)))}catch(t){throw _L(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,AO(this._delegate,FO.apply(void 0,arguments)))}catch(t){throw _L(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,AO(this._delegate,jO.apply(void 0,arguments)))}catch(t){throw _L(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return AD(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?XO(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=gD(e,ID);var t=gD(e.firestore,DD),n=OD(t),r=new YO(t);return hD(n,e._query,{source:"server"}).then((function(n){return new IO(t,r,e,n)}))}(this._delegate):function(e){e=gD(e,ID);var t=gD(e.firestore,DD),n=OD(t),r=new YO(t);return TO(e._query),hD(n,e._query).then((function(n){return new IO(t,r,e,n)}))}(this._delegate),t.then((function(e){return new TL(n.firestore,new IO(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=wL(n),a=bL(n,(function(t){return new TL(e.firestore,new IO(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return eL(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(gL.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),SL=function(){function e(t,n){N(this,e),this._firestore=t,this._delegate=n}return R(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new IL(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),TL=function(){function e(t,n){N(this,e),this._firestore=t,this._delegate=n}return R(e,[{key:"query",get:function(){return new EL(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new IL(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new SL(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new IL(n._firestore,r))}))}},{key:"isEqual",value:function(e){return SO(this._delegate,e._delegate)}}]),e}(),CL=function(e){O(n,e);var t=V(n);function n(e,r){var i;return N(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return R(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new kL(this.firestore,e):null}},{key:"doc",value:function(e){try{return new kL(this.firestore,void 0===e?TD(this._delegate):TD(this._delegate,e))}catch(t){throw _L(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=gD(e.firestore,DD),r=TD(e),i=KO(e.converter,t);return nL(n,[$D(ZD(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,tS.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new kL(t.firestore,e)}))}},{key:"isEqual",value:function(e){return CD(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(gL.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(EL);function AL(e){return gD(e,xD)}var NL=function(){function e(){N(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=gr(qD,n)}return R(e,[{key:"isEqual",value:function(e){return(e=ci(e))instanceof qD&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e($x.keyField().canonicalString())}}]),e}(),PL=function(){function e(t){N(this,e),this._delegate=t}return R(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new nO("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new eO("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=oL.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=sL.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new aO("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),RL={Firestore:pL,GeoPoint:KD,Timestamp:Kx,Blob:hL,Transaction:yL,WriteBatch:mL,DocumentReference:kL,DocumentSnapshot:xL,Query:EL,QueryDocumentSnapshot:IL,QuerySnapshot:TL,CollectionReference:CL,FieldPath:NL,FieldValue:PL,setLogLevel:function(e){!function(e){kx.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new li("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},RL)))}(e,(function(e,t){return new pL(e,t,new dL)})),e.registerVersion("@firebase/firestore-compat","0.1.18")}(Bh);var DL=Bh.initializeApp({apiKey:"AIzaSyCmdbkjtH47HqFKrnnCg0nmuSch9bmoXp0",authDomain:"yes-wedding-29451.firebaseapp.com",databaseURL:"https://yes-wedding-29451-default-rtdb.firebaseio.com/",projectId:"yes-wedding-29451",storageBucket:"yes-wedding-29451.appspot.com",messagingSenderId:"1010300792442",appId:"1:1010300792442:web:d6858688466e8b838955c3"}),OL="Share_share__zaFA5",LL="Share_share__btn__GWTVK",ML="Share_share__img__ApXq3",FL="Share_share__img-wrap__4bqFd",jL="Share_share__text__EJjT8",UL=function(e){var r=function(){window.Kakao.Link.createCustomButton({container:"#kakao-share",templateId:77876})};(0,t.useEffect)((function(){r()}),[]);return(0,v.jsx)(T,{onClose:e.onClose,children:(0,v.jsxs)("div",{className:OL,children:[(0,v.jsx)(gh.CopyToClipboard,{text:"https://azultasul.github.io/yes-wedding",children:(0,v.jsxs)("button",{onClick:function(){alert("\ub9c1\ud06c \ubcf5\uc0ac\ud83e\udd1f")},className:LL,children:[(0,v.jsx)("div",{className:FL,children:(0,v.jsx)("img",{className:ML,src:n(616),alt:"link copy"})}),(0,v.jsx)("span",{className:jL,children:"\ub9c1\ud06c \ubcf5\uc0ac"})]})}),(0,v.jsxs)("button",{id:"kakao-share",onClick:function(){r()},className:LL,children:[(0,v.jsx)("div",{className:FL,children:(0,v.jsx)("img",{src:n(682),alt:"link copy"})}),(0,v.jsx)("span",{className:jL,children:"\uce74\uce74\uc624\ud1a1 \uacf5\uc720"})]})]})})},VL="Footer_footer__55-eH",BL="Footer_footer__btn__AJaoj",qL="Footer_footer__icon__xXf-e",zL="Footer_footer__text__iM5B-",WL=function(e){var n=w((0,t.useState)(!1),2),r=n[0],i=n[1];return(0,v.jsxs)("section",{id:"footer",className:VL,children:[(0,v.jsxs)("button",{onClick:function(){i(!0)},className:BL,children:[(0,v.jsx)("div",{className:qL,children:(0,v.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{d:"M18 16C17.2 16 16.4 16.3 15.9 16.9L8.9 12.9C9 12.6 9 12.3 9 12C9 11.7 9 11.4 8.9 11.2L15.9 7.2C16.4 7.7 17.2 8 18 8C19.7 8 21 6.7 21 5C21 3.3 19.7 2 18 2C16.3 2 15 3.3 15 5C15 5.3 15 5.6 15.1 5.8L8.1 9.8C7.6 9.3 6.8 9 6 9C4.3 9 3 10.3 3 12C3 13.7 4.3 15 6 15C6.8 15 7.6 14.7 8.1 14.1L15.1 18.1C15 18.4 15 18.7 15 19C15 20.7 16.3 22 18 22C19.7 22 21 20.7 21 19C21 17.3 19.7 16 18 16ZM18 3.5C18.8 3.5 19.5 4.2 19.5 5C19.5 5.8 18.8 6.5 18 6.5C17.2 6.5 16.5 5.8 16.5 5C16.5 4.2 17.2 3.5 18 3.5ZM6 13.5C5.2 13.5 4.5 12.8 4.5 12C4.5 11.2 5.2 10.5 6 10.5C6.8 10.5 7.5 11.2 7.5 12C7.5 12.8 6.8 13.5 6 13.5ZM18 20.5C17.2 20.5 16.5 19.8 16.5 19C16.5 18.2 17.2 17.5 18 17.5C18.8 17.5 19.5 18.2 19.5 19C19.5 19.8 18.8 20.5 18 20.5Z",fill:"#172144"})})}),(0,v.jsx)("span",{className:zL,children:"\uacf5\uc720\ud558\uae30"})]}),r&&(0,v.jsx)(UL,{onClose:function(){i(!1)}})]})};var KL=function(){var e=function(){var e=document.querySelectorAll("[data-scroll-target]"),t=window.pageYOffset+window.innerHeight;e.forEach((function(e){t>e.offsetTop?e.classList.add("animate"):e.classList.remove("animate")}))};return(0,t.useEffect)((function(){return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}})),(0,v.jsxs)("div",{className:"App",children:[(0,v.jsx)(y,{}),(0,v.jsx)(hr,{}),(0,v.jsx)(dr,{}),(0,v.jsx)(mh,{}),(0,v.jsx)(uh,{firebase:DL}),(0,v.jsx)(Oh,{}),(0,v.jsx)(WL,{})]})};window.Kakao.isInitialized()||window.Kakao.init("3dc1d032c1b57d7534b09b562373275d"),r.createRoot(document.getElementById("root")).render((0,v.jsx)(KL,{}))}()}();
//# sourceMappingURL=main.6209969c.js.map